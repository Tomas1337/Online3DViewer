var OV=(()=>{var VR=Object.create;var jm=Object.defineProperty;var HR=Object.getOwnPropertyDescriptor;var WR=Object.getOwnPropertyNames;var jR=Object.getPrototypeOf,qR=Object.prototype.hasOwnProperty;var Kr=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),d_=(n,e)=>{for(var t in e)jm(n,t,{get:e[t],enumerable:!0})},p_=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of WR(e))!qR.call(n,i)&&i!==t&&jm(n,i,{get:()=>e[i],enumerable:!(r=HR(e,i))||r.enumerable});return n};var od=(n,e,t)=>(t=n!=null?VR(jR(n)):{},p_(e||!n||!n.__esModule?jm(t,"default",{value:n,enumerable:!0}):t,n)),XR=n=>p_(jm({},"__esModule",{value:!0}),n);var KM=Kr((_0,bw)=>{(function(n,e){typeof _0=="object"&&typeof bw=="object"?bw.exports=e():typeof define=="function"&&define.amd?define([],e):typeof _0=="object"?_0.Pickr=e():n.Pickr=e()})(self,()=>(()=>{"use strict";var n={d:(P,E)=>{for(var U in E)n.o(E,U)&&!n.o(P,U)&&Object.defineProperty(P,U,{enumerable:!0,get:E[U]})},o:(P,E)=>Object.prototype.hasOwnProperty.call(P,E),r:P=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})}},e={};n.d(e,{default:()=>N});var t={};function r(P,E,U,k,B={}){E instanceof HTMLCollection||E instanceof NodeList?E=Array.from(E):Array.isArray(E)||(E=[E]),Array.isArray(U)||(U=[U]);for(let O of E)for(let q of U)O[P](q,k,{capture:!1,...B});return Array.prototype.slice.call(arguments,1)}n.r(t),n.d(t,{adjustableInputNumbers:()=>u,createElementFromString:()=>s,createFromTemplate:()=>a,eventPath:()=>c,off:()=>o,on:()=>i,resolveElement:()=>l});let i=r.bind(null,"addEventListener"),o=r.bind(null,"removeEventListener");function s(P){let E=document.createElement("div");return E.innerHTML=P.trim(),E.firstElementChild}function a(P){let E=(k,B)=>{let O=k.getAttribute(B);return k.removeAttribute(B),O},U=(k,B={})=>{let O=E(k,":obj"),q=E(k,":ref"),ne=O?B[O]={}:B;q&&(B[q]=k);for(let ae of Array.from(k.children)){let ye=E(ae,":arr"),fe=U(ae,ye?{}:ne);ye&&(ne[ye]||(ne[ye]=[])).push(Object.keys(fe).length?fe:ae)}return B};return U(s(P))}function c(P){let E=P.path||P.composedPath&&P.composedPath();if(E)return E;let U=P.target.parentElement;for(E=[P.target,U];U=U.parentElement;)E.push(U);return E.push(document,window),E}function l(P){return P instanceof Element?P:typeof P=="string"?P.split(/>>/g).reduce((E,U,k,B)=>(E=E.querySelector(U),k<B.length-1?E.shadowRoot:E),document):null}function u(P,E=U=>U){function U(k){let B=[.001,.01,.1][Number(k.shiftKey||2*k.ctrlKey)]*(k.deltaY<0?1:-1),O=0,q=P.selectionStart;P.value=P.value.replace(/[\d.]+/g,(ne,ae)=>ae<=q&&ae+ne.length>=q?(q=ae,E(Number(ne),B,O)):(O++,ne)),P.focus(),P.setSelectionRange(q,q),k.preventDefault(),P.dispatchEvent(new Event("input"))}i(P,"focus",()=>i(window,"wheel",U,{passive:!1})),i(P,"blur",()=>o(window,"wheel",U))}let{min:h,max:f,floor:d,round:m}=Math;function v(P,E,U){E/=100,U/=100;let k=d(P=P/360*6),B=P-k,O=U*(1-E),q=U*(1-B*E),ne=U*(1-(1-B)*E),ae=k%6;return[255*[U,q,O,O,ne,U][ae],255*[ne,U,U,q,O,O][ae],255*[O,O,ne,U,U,q][ae]]}function p(P,E,U){let k=(2-(E/=100))*(U/=100)/2;return k!==0&&(E=k===1?0:k<.5?E*U/(2*k):E*U/(2-2*k)),[P,100*E,100*k]}function g(P,E,U){let k=h(P/=255,E/=255,U/=255),B=f(P,E,U),O=B-k,q,ne;if(O===0)q=ne=0;else{ne=O/B;let ae=((B-P)/6+O/2)/O,ye=((B-E)/6+O/2)/O,fe=((B-U)/6+O/2)/O;P===B?q=fe-ye:E===B?q=1/3+ae-fe:U===B&&(q=2/3+ye-ae),q<0?q+=1:q>1&&(q-=1)}return[360*q,100*ne,100*B]}function x(P,E,U,k){return E/=100,U/=100,[...g(255*(1-h(1,(P/=100)*(1-(k/=100))+k)),255*(1-h(1,E*(1-k)+k)),255*(1-h(1,U*(1-k)+k)))]}function y(P,E,U){E/=100;let k=2*(E*=(U/=100)<.5?U:1-U)/(U+E)*100,B=100*(U+E);return[P,isNaN(k)?0:k,B]}function b(P){return g(...P.match(/.{2}/g).map(E=>parseInt(E,16)))}function S(P){P=P.match(/^[a-zA-Z]+$/)?function(B){if(B.toLowerCase()==="black")return"#000";let O=document.createElement("canvas").getContext("2d");return O.fillStyle=B,O.fillStyle==="#000"?null:O.fillStyle}(P):P;let E={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},U=B=>B.map(O=>/^(|\d+)\.\d+|\d+$/.test(O)?Number(O):void 0),k;e:for(let B in E)if(k=E[B].exec(P))switch(B){case"cmyk":{let[,O,q,ne,ae]=U(k);if(O>100||q>100||ne>100||ae>100)break e;return{values:x(O,q,ne,ae),type:B}}case"rgba":{let[,O,,q,,ne,,,ae]=U(k);if(O=k[2]==="%"?O/100*255:O,q=k[4]==="%"?q/100*255:q,ne=k[6]==="%"?ne/100*255:ne,ae=k[9]==="%"?ae/100:ae,O>255||q>255||ne>255||ae<0||ae>1)break e;return{values:[...g(O,q,ne),ae],a:ae,type:B}}case"hexa":{let[,O]=k;O.length!==4&&O.length!==3||(O=O.split("").map(ae=>ae+ae).join(""));let q=O.substring(0,6),ne=O.substring(6);return ne=ne?parseInt(ne,16)/255:void 0,{values:[...b(q),ne],a:ne,type:B}}case"hsla":{let[,O,q,ne,,ae]=U(k);if(ae=k[6]==="%"?ae/100:ae,O>360||q>100||ne>100||ae<0||ae>1)break e;return{values:[...y(O,q,ne),ae],a:ae,type:B}}case"hsva":{let[,O,q,ne,,ae]=U(k);if(ae=k[6]==="%"?ae/100:ae,O>360||q>100||ne>100||ae<0||ae>1)break e;return{values:[O,q,ne,ae],a:ae,type:B}}}return{values:null,type:null}}function _(P=0,E=0,U=0,k=1){let B=(q,ne)=>(ae=-1)=>ne(~ae?q.map(ye=>Number(ye.toFixed(ae))):q),O={h:P,s:E,v:U,a:k,toHSVA(){let q=[O.h,O.s,O.v,O.a];return q.toString=B(q,ne=>`hsva(${ne[0]}, ${ne[1]}%, ${ne[2]}%, ${O.a})`),q},toHSLA(){let q=[...p(O.h,O.s,O.v),O.a];return q.toString=B(q,ne=>`hsla(${ne[0]}, ${ne[1]}%, ${ne[2]}%, ${O.a})`),q},toRGBA(){let q=[...v(O.h,O.s,O.v),O.a];return q.toString=B(q,ne=>`rgba(${ne[0]}, ${ne[1]}, ${ne[2]}, ${O.a})`),q},toCMYK(){let q=function(ne,ae,ye){let fe=v(ne,ae,ye),L=fe[0]/255,C=fe[1]/255,R=fe[2]/255,I=h(1-L,1-C,1-R);return[100*(I===1?0:(1-L-I)/(1-I)),100*(I===1?0:(1-C-I)/(1-I)),100*(I===1?0:(1-R-I)/(1-I)),100*I]}(O.h,O.s,O.v);return q.toString=B(q,ne=>`cmyk(${ne[0]}%, ${ne[1]}%, ${ne[2]}%, ${ne[3]}%)`),q},toHEXA(){let q=function(ae,ye,fe){return v(ae,ye,fe).map(L=>m(L).toString(16).padStart(2,"0"))}(O.h,O.s,O.v),ne=O.a>=1?"":Number((255*O.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return ne&&q.push(ne),q.toString=()=>`#${q.join("").toUpperCase()}`,q},clone:()=>_(O.h,O.s,O.v,O.a)};return O}let M=P=>Math.max(Math.min(P,1),0);function A(P){let E={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},P),_keyboard(O){let{options:q}=E,{type:ne,key:ae}=O;if(document.activeElement===q.wrapper){let{lock:ye}=E.options,fe=ae==="ArrowUp",L=ae==="ArrowRight",C=ae==="ArrowDown",R=ae==="ArrowLeft";if(ne==="keydown"&&(fe||L||C||R)){let I=0,j=0;ye==="v"?I=fe||L?1:-1:ye==="h"?I=fe||L?-1:1:(j=fe?-1:C?1:0,I=R?-1:L?1:0),E.update(M(E.cache.x+.01*I),M(E.cache.y+.01*j)),O.preventDefault()}else ae.startsWith("Arrow")&&(E.options.onstop(),O.preventDefault())}},_tapstart(O){i(document,["mouseup","touchend","touchcancel"],E._tapstop),i(document,["mousemove","touchmove"],E._tapmove),O.cancelable&&O.preventDefault(),E._tapmove(O)},_tapmove(O){let{options:q,cache:ne}=E,{lock:ae,element:ye,wrapper:fe}=q,L=fe.getBoundingClientRect(),C=0,R=0;if(O){let Z=O&&O.touches&&O.touches[0];C=O?(Z||O).clientX:0,R=O?(Z||O).clientY:0,C<L.left?C=L.left:C>L.left+L.width&&(C=L.left+L.width),R<L.top?R=L.top:R>L.top+L.height&&(R=L.top+L.height),C-=L.left,R-=L.top}else ne&&(C=ne.x*L.width,R=ne.y*L.height);ae!=="h"&&(ye.style.left=`calc(${C/L.width*100}% - ${ye.offsetWidth/2}px)`),ae!=="v"&&(ye.style.top=`calc(${R/L.height*100}% - ${ye.offsetHeight/2}px)`),E.cache={x:C/L.width,y:R/L.height};let I=M(C/L.width),j=M(R/L.height);switch(ae){case"v":return q.onchange(I);case"h":return q.onchange(j);default:return q.onchange(I,j)}},_tapstop(){E.options.onstop(),o(document,["mouseup","touchend","touchcancel"],E._tapstop),o(document,["mousemove","touchmove"],E._tapmove)},trigger(){E._tapmove()},update(O=0,q=0){let{left:ne,top:ae,width:ye,height:fe}=E.options.wrapper.getBoundingClientRect();E.options.lock==="h"&&(q=O),E._tapmove({clientX:ne+ye*O,clientY:ae+fe*q})},destroy(){let{options:O,_tapstart:q,_keyboard:ne}=E;o(document,["keydown","keyup"],ne),o([O.wrapper,O.element],"mousedown",q),o([O.wrapper,O.element],"touchstart",q,{passive:!1})}},{options:U,_tapstart:k,_keyboard:B}=E;return i([U.wrapper,U.element],"mousedown",k),i([U.wrapper,U.element],"touchstart",k,{passive:!1}),i(document,["keydown","keyup"],B),E}function w(P={}){P=Object.assign({onchange:()=>0,className:"",elements:[]},P);let E=i(P.elements,"click",U=>{P.elements.forEach(k=>k.classList[U.target===k?"add":"remove"](P.className)),P.onchange(U),U.stopPropagation()});return{destroy:()=>o(...E)}}let T={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},D=(P,E,U)=>{let k=typeof P!="object"||P instanceof HTMLElement?{reference:P,popper:E,...U}:P;return{update(B=k){let{reference:O,popper:q}=Object.assign(k,B);if(!q||!O)throw new Error("Popper- or reference-element missing.");return((ne,ae,ye)=>{let{container:fe,arrow:L,margin:C,padding:R,position:I,variantFlipOrder:j,positionFlipOrder:Z}={container:document.documentElement.getBoundingClientRect(),...T,...ye},{left:J,top:W}=ae.style;ae.style.left="0",ae.style.top="0";let K=ne.getBoundingClientRect(),le=ae.getBoundingClientRect(),ue={t:K.top-le.height-C,b:K.bottom+C,r:K.right+C,l:K.left-le.width-C},de={vs:K.left,vm:K.left+K.width/2-le.width/2,ve:K.left+K.width-le.width,hs:K.top,hm:K.bottom-K.height/2-le.height/2,he:K.bottom-le.height},[Te,X="middle"]=I.split("-"),F=Z[Te],G=j[X],{top:ge,left:we,bottom:Ee,right:se}=fe;for(let H of F){let re=H==="t"||H==="b",pe=ue[H],[ee,me]=re?["top","left"]:["left","top"],[xe,ve]=re?[le.height,le.width]:[le.width,le.height],[Se,Ie]=re?[Ee,se]:[se,Ee],[Le,He]=re?[ge,we]:[we,ge];if(!(pe<Le||pe+xe+R>Se))for(let ot of G){let Et=de[(re?"v":"h")+ot];if(!(Et<He||Et+ve+R>Ie)){if(Et-=le[me],pe-=le[ee],ae.style[me]=`${Et}px`,ae.style[ee]=`${pe}px`,L){let Ve=re?K.width/2:K.height/2,ce=2*Ve<ve?K[me]+Ve:Et+ve/2;pe<K[ee]&&(pe+=xe),L.style[me]=`${ce}px`,L.style[ee]=`${pe}px`}return H+ot}}}return ae.style.left=J,ae.style.top=W,null})(O,q,k)}}};class N{static utils=t;static version="1.9.0";static I18N_DEFAULTS={"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"};static DEFAULT_OPTIONS={appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"};_initializingActive=!0;_recalc=!0;_nanopop=null;_root=null;_color=_();_lastColor=_();_swatchColors=[];_setupAnimationFrame=null;_eventListener={init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]};constructor(E){this.options=E=Object.assign({...N.DEFAULT_OPTIONS},E);let{swatches:U,components:k,theme:B,sliders:O,lockOpacity:q,padding:ne}=E;["nano","monolith"].includes(B)&&!O&&(E.sliders="h"),k.interaction||(k.interaction={});let{preview:ae,opacity:ye,hue:fe,palette:L}=k;k.opacity=!q&&ye,k.palette=L||ae||ye||fe,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),U&&U.length&&U.forEach(j=>this.addSwatch(j));let{button:C,app:R}=this._root;this._nanopop=D(C,R,{margin:ne}),C.setAttribute("role","button"),C.setAttribute("aria-label",this._t("btn:toggle"));let I=this;this._setupAnimationFrame=requestAnimationFrame(function j(){if(!R.offsetWidth)return requestAnimationFrame(j);I.setColor(E.default),I._rePositioningPicker(),E.defaultRepresentation&&(I._representation=E.defaultRepresentation,I.setColorRepresentation(I._representation)),E.showAlways&&I.show(),I._initializingActive=!1,I._emit("init")})}static create=E=>new N(E);_preBuild(){let{options:E}=this;for(let U of["el","container"])E[U]=l(E[U]);this._root=(U=>{let{components:k,useAsButton:B,inline:O,appClass:q,theme:ne,lockOpacity:ae}=U.options,ye=R=>R?"":'style="display:none" hidden',fe=R=>U._t(R),L=a(`
      <div :ref="root" class="pickr">

        ${B?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${q||""}" data-theme="${ne}" ${O?'style="position: unset"':""} aria-label="${fe("ui:dialog")}" role="window">
          <div class="pcr-selection" ${ye(k.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${ye(k.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${fe("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${fe("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${ye(k.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${fe("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${ye(k.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${fe("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${k.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${ye(Object.keys(k.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${ye(k.interaction.input)} aria-label="${fe("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${ae?"HEX":"HEXA"}" type="button" ${ye(k.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${ae?"RGB":"RGBA"}" type="button" ${ye(k.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${ae?"HSL":"HSLA"}" type="button" ${ye(k.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${ae?"HSV":"HSVA"}" type="button" ${ye(k.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${ye(k.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${fe("btn:save")}" type="button" ${ye(k.interaction.save)} aria-label="${fe("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${fe("btn:cancel")}" type="button" ${ye(k.interaction.cancel)} aria-label="${fe("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${fe("btn:clear")}" type="button" ${ye(k.interaction.clear)} aria-label="${fe("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),C=L.interaction;return C.options.find(R=>!R.hidden&&!R.classList.add("active")),C.type=()=>C.options.find(R=>R.classList.contains("active")),L})(this),E.useAsButton&&(this._root.button=E.el),E.container.appendChild(this._root.root)}_finalBuild(){let E=this.options,U=this._root;if(E.container.removeChild(U.root),E.inline){let k=E.el.parentElement;E.el.nextSibling?k.insertBefore(U.app,E.el.nextSibling):k.appendChild(U.app)}else E.container.appendChild(U.app);E.useAsButton?E.inline&&E.el.remove():E.el.parentNode.replaceChild(U.root,E.el),E.disabled&&this.disable(),E.comparison||(U.button.style.transition="none",E.useAsButton||(U.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){let E=this,U=this.options.components,k=(E.options.sliders||"v").repeat(2),[B,O]=k.match(/^[vh]+$/g)?k:[],q=()=>this._color||(this._color=this._lastColor.clone()),ne={palette:A({element:E._root.palette.picker,wrapper:E._root.palette.palette,onstop:()=>E._emit("changestop","slider",E),onchange(ae,ye){if(!U.palette)return;let fe=q(),{_root:L,options:C}=E,{lastColor:R,currentColor:I}=L.preview;E._recalc&&(fe.s=100*ae,fe.v=100-100*ye,fe.v<0&&(fe.v=0),E._updateOutput("slider"));let j=fe.toRGBA().toString(0);this.element.style.background=j,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${fe.a}), transparent),
                        linear-gradient(to left, hsla(${fe.h}, 100%, 50%, ${fe.a}), rgba(255, 255, 255, ${fe.a}))
                    `,C.comparison?C.useAsButton||E._lastColor||R.style.setProperty("--pcr-color",j):(L.button.style.setProperty("--pcr-color",j),L.button.classList.remove("clear"));let Z=fe.toHEXA().toString();for(let{el:J,color:W}of E._swatchColors)J.classList[Z===W.toHEXA().toString()?"add":"remove"]("pcr-active");I.style.setProperty("--pcr-color",j)}}),hue:A({lock:O==="v"?"h":"v",element:E._root.hue.picker,wrapper:E._root.hue.slider,onstop:()=>E._emit("changestop","slider",E),onchange(ae){if(!U.hue||!U.palette)return;let ye=q();E._recalc&&(ye.h=360*ae),this.element.style.backgroundColor=`hsl(${ye.h}, 100%, 50%)`,ne.palette.trigger()}}),opacity:A({lock:B==="v"?"h":"v",element:E._root.opacity.picker,wrapper:E._root.opacity.slider,onstop:()=>E._emit("changestop","slider",E),onchange(ae){if(!U.opacity||!U.palette)return;let ye=q();E._recalc&&(ye.a=Math.round(100*ae)/100),this.element.style.background=`rgba(0, 0, 0, ${ye.a})`,ne.palette.trigger()}}),selectable:w({elements:E._root.interaction.options,className:"active",onchange(ae){E._representation=ae.target.getAttribute("data-type").toUpperCase(),E._recalc&&E._updateOutput("swatch")}})};this._components=ne}_bindEvents(){let{_root:E,options:U}=this,k=[i(E.interaction.clear,"click",()=>this._clearColor()),i([E.interaction.cancel,E.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),i(E.interaction.save,"click",()=>{!this.applyColor()&&!U.showAlways&&this.hide()}),i(E.interaction.result,["keyup","input"],B=>{this.setColor(B.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),B.stopImmediatePropagation()}),i(E.interaction.result,["focus","blur"],B=>{this._recalc=B.type==="blur",this._recalc&&this._updateOutput(null)}),i([E.palette.palette,E.palette.picker,E.hue.slider,E.hue.picker,E.opacity.slider,E.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!U.showAlways){let B=U.closeWithKey;k.push(i(E.button,"click",()=>this.isOpen()?this.hide():this.show()),i(document,"keyup",O=>this.isOpen()&&(O.key===B||O.code===B)&&this.hide()),i(document,["touchstart","mousedown"],O=>{this.isOpen()&&!c(O).some(q=>q===E.app||q===E.button)&&this.hide()},{capture:!0}))}if(U.adjustableNumbers){let B={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};u(E.interaction.result,(O,q,ne)=>{let ae=B[this.getColorRepresentation().toLowerCase()];if(ae){let ye=ae[ne],fe=O+(ye>=100?1e3*q:q);return fe<=0?0:Number((fe<ye?fe:ye).toPrecision(3))}return O})}if(U.autoReposition&&!U.inline){let B=null,O=this;k.push(i(window,["scroll","resize"],()=>{O.isOpen()&&(U.closeOnScroll&&O.hide(),B===null?(B=setTimeout(()=>B=null,100),requestAnimationFrame(function q(){O._rePositioningPicker(),B!==null&&requestAnimationFrame(q)})):(clearTimeout(B),B=setTimeout(()=>B=null,100)))},{capture:!0}))}this._eventBindings=k}_rePositioningPicker(){let{options:E}=this;if(!E.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:E.position})){let U=this._root.app,k=U.getBoundingClientRect();U.style.top=(window.innerHeight-k.height)/2+"px",U.style.left=(window.innerWidth-k.width)/2+"px"}}_updateOutput(E){let{_root:U,_color:k,options:B}=this;if(U.interaction.type()){let O=`to${U.interaction.type().getAttribute("data-type")}`;U.interaction.result.value=typeof k[O]=="function"?k[O]().toString(B.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",k,E,this)}_clearColor(E=!1){let{_root:U,options:k}=this;k.useAsButton||U.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),U.button.classList.add("clear"),k.showAlways||this.hide(),this._lastColor=null,this._initializingActive||E||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(E){let{values:U,type:k,a:B}=S(E),{lockOpacity:O}=this.options,q=B!==void 0&&B!==1;return U&&U.length===3&&(U[3]=void 0),{values:!U||O&&q?null:U,type:k}}_t(E){return this.options.i18n[E]||N.I18N_DEFAULTS[E]}_emit(E,...U){this._eventListener[E].forEach(k=>k(...U,this))}on(E,U){return this._eventListener[E].push(U),this}off(E,U){let k=this._eventListener[E]||[],B=k.indexOf(U);return~B&&k.splice(B,1),this}addSwatch(E){let{values:U}=this._parseLocalColor(E);if(U){let{_swatchColors:k,_root:B}=this,O=_(...U),q=s(`<button type="button" style="--pcr-color: ${O.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return B.swatches.appendChild(q),k.push({el:q,color:O}),this._eventBindings.push(i(q,"click",()=>{this.setHSVA(...O.toHSVA(),!0),this._emit("swatchselect",O),this._emit("change",O,"swatch",this)})),!0}return!1}removeSwatch(E){let U=this._swatchColors[E];if(U){let{el:k}=U;return this._root.swatches.removeChild(k),this._swatchColors.splice(E,1),!0}return!1}applyColor(E=!1){let{preview:U,button:k}=this._root,B=this._color.toRGBA().toString(0);return U.lastColor.style.setProperty("--pcr-color",B),this.options.useAsButton||k.style.setProperty("--pcr-color",B),k.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||E||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(E=>o(...E)),Object.keys(this._components).forEach(E=>this._components[E].destroy())}destroyAndRemove(){this.destroy();let{root:E,app:U}=this._root;E.parentElement&&E.parentElement.removeChild(E),U.parentElement.removeChild(U),Object.keys(this).forEach(k=>this[k]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(E=360,U=0,k=0,B=1,O=!1){let q=this._recalc;if(this._recalc=!1,E<0||E>360||U<0||U>100||k<0||k>100||B<0||B>1)return!1;this._color=_(E,U,k,B);let{hue:ne,opacity:ae,palette:ye}=this._components;return ne.update(E/360),ae.update(B),ye.update(U/100,1-k/100),O||this.applyColor(),q&&this._updateOutput(),this._recalc=q,!0}setColor(E,U=!1){if(E===null)return this._clearColor(U),!0;let{values:k,type:B}=this._parseLocalColor(E);if(k){let O=B.toUpperCase(),{options:q}=this._root.interaction,ne=q.find(ae=>ae.getAttribute("data-type")===O);if(ne&&!ne.hidden)for(let ae of q)ae.classList[ae===ne?"add":"remove"]("active");return!!this.setHSVA(...k,U)&&this.setColorRepresentation(O)}return!1}setColorRepresentation(E){return E=E.toUpperCase(),!!this._root.interaction.options.find(U=>U.getAttribute("data-type").startsWith(E)&&!U.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}return e=e.default})())});var Pa=Kr(Ei=>{"use strict";var S3=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function _3(n,e){return Object.prototype.hasOwnProperty.call(n,e)}Ei.assign=function(n){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var r in t)_3(t,r)&&(n[r]=t[r])}}return n};Ei.shrinkBuf=function(n,e){return n.length===e?n:n.subarray?n.subarray(0,e):(n.length=e,n)};var T3={arraySet:function(n,e,t,r,i){if(e.subarray&&n.subarray){n.set(e.subarray(t,t+r),i);return}for(var o=0;o<r;o++)n[i+o]=e[t+o]},flattenChunks:function(n){var e,t,r,i,o,s;for(r=0,e=0,t=n.length;e<t;e++)r+=n[e].length;for(s=new Uint8Array(r),i=0,e=0,t=n.length;e<t;e++)o=n[e],s.set(o,i),i+=o.length;return s}},M3={arraySet:function(n,e,t,r,i){for(var o=0;o<r;o++)n[i+o]=e[t+o]},flattenChunks:function(n){return[].concat.apply([],n)}};Ei.setTyped=function(n){n?(Ei.Buf8=Uint8Array,Ei.Buf16=Uint16Array,Ei.Buf32=Int32Array,Ei.assign(Ei,T3)):(Ei.Buf8=Array,Ei.Buf16=Array,Ei.Buf32=Array,Ei.assign(Ei,M3))};Ei.setTyped(S3)});var JE=Kr(Tf=>{"use strict";var E3=Pa(),A3=4,IE=0,RE=1,C3=2;function _f(n){for(var e=n.length;--e>=0;)n[e]=0}var I3=0,OE=1,R3=2,P3=3,D3=258,Uw=29,Up=256,Np=Up+1+Uw,Sf=30,Bw=19,kE=2*Np+1,Dc=15,Dw=16,F3=7,zw=256,UE=16,BE=17,zE=18,Ow=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B0=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N3=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],GE=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L3=512,Da=new Array((Np+2)*2);_f(Da);var Fp=new Array(Sf*2);_f(Fp);var Lp=new Array(L3);_f(Lp);var Op=new Array(D3-P3+1);_f(Op);var Gw=new Array(Uw);_f(Gw);var z0=new Array(Sf);_f(z0);function Fw(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var VE,HE,WE;function Nw(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}function jE(n){return n<256?Lp[n]:Lp[256+(n>>>7)]}function kp(n,e){n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255}function qi(n,e,t){n.bi_valid>Dw-t?(n.bi_buf|=e<<n.bi_valid&65535,kp(n,n.bi_buf),n.bi_buf=e>>Dw-n.bi_valid,n.bi_valid+=t-Dw):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)}function Vs(n,e,t){qi(n,t[e*2],t[e*2+1])}function qE(n,e){var t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1}function O3(n){n.bi_valid===16?(kp(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)}function k3(n,e){var t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,l,u,h,f,d,m,v=0;for(f=0;f<=Dc;f++)n.bl_count[f]=0;for(t[n.heap[n.heap_max]*2+1]=0,l=n.heap_max+1;l<kE;l++)u=n.heap[l],f=t[t[u*2+1]*2+1]+1,f>c&&(f=c,v++),t[u*2+1]=f,!(u>r)&&(n.bl_count[f]++,d=0,u>=a&&(d=s[u-a]),m=t[u*2],n.opt_len+=m*(f+d),o&&(n.static_len+=m*(i[u*2+1]+d)));if(v!==0){do{for(f=c-1;n.bl_count[f]===0;)f--;n.bl_count[f]--,n.bl_count[f+1]+=2,n.bl_count[c]--,v-=2}while(v>0);for(f=c;f!==0;f--)for(u=n.bl_count[f];u!==0;)h=n.heap[--l],!(h>r)&&(t[h*2+1]!==f&&(n.opt_len+=(f-t[h*2+1])*t[h*2],t[h*2+1]=f),u--)}}function XE(n,e,t){var r=new Array(Dc+1),i=0,o,s;for(o=1;o<=Dc;o++)r[o]=i=i+t[o-1]<<1;for(s=0;s<=e;s++){var a=n[s*2+1];a!==0&&(n[s*2]=qE(r[a]++,a))}}function U3(){var n,e,t,r,i,o=new Array(Dc+1);for(t=0,r=0;r<Uw-1;r++)for(Gw[r]=t,n=0;n<1<<Ow[r];n++)Op[t++]=r;for(Op[t-1]=r,i=0,r=0;r<16;r++)for(z0[r]=i,n=0;n<1<<B0[r];n++)Lp[i++]=r;for(i>>=7;r<Sf;r++)for(z0[r]=i<<7,n=0;n<1<<B0[r]-7;n++)Lp[256+i++]=r;for(e=0;e<=Dc;e++)o[e]=0;for(n=0;n<=143;)Da[n*2+1]=8,n++,o[8]++;for(;n<=255;)Da[n*2+1]=9,n++,o[9]++;for(;n<=279;)Da[n*2+1]=7,n++,o[7]++;for(;n<=287;)Da[n*2+1]=8,n++,o[8]++;for(XE(Da,Np+1,o),n=0;n<Sf;n++)Fp[n*2+1]=5,Fp[n*2]=qE(n,5);VE=new Fw(Da,Ow,Up+1,Np,Dc),HE=new Fw(Fp,B0,0,Sf,Dc),WE=new Fw(new Array(0),N3,0,Bw,F3)}function KE(n){var e;for(e=0;e<Np;e++)n.dyn_ltree[e*2]=0;for(e=0;e<Sf;e++)n.dyn_dtree[e*2]=0;for(e=0;e<Bw;e++)n.bl_tree[e*2]=0;n.dyn_ltree[zw*2]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0}function YE(n){n.bi_valid>8?kp(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0}function B3(n,e,t,r){YE(n),r&&(kp(n,t),kp(n,~t)),E3.arraySet(n.pending_buf,n.window,e,t,n.pending),n.pending+=t}function PE(n,e,t,r){var i=e*2,o=t*2;return n[i]<n[o]||n[i]===n[o]&&r[e]<=r[t]}function Lw(n,e,t){for(var r=n.heap[t],i=t<<1;i<=n.heap_len&&(i<n.heap_len&&PE(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!PE(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r}function DE(n,e,t){var r,i,o=0,s,a;if(n.last_lit!==0)do r=n.pending_buf[n.d_buf+o*2]<<8|n.pending_buf[n.d_buf+o*2+1],i=n.pending_buf[n.l_buf+o],o++,r===0?Vs(n,i,e):(s=Op[i],Vs(n,s+Up+1,e),a=Ow[s],a!==0&&(i-=Gw[s],qi(n,i,a)),r--,s=jE(r),Vs(n,s,t),a=B0[s],a!==0&&(r-=z0[s],qi(n,r,a)));while(o<n.last_lit);Vs(n,zw,e)}function kw(n,e){var t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,s,a,c=-1,l;for(n.heap_len=0,n.heap_max=kE,s=0;s<o;s++)t[s*2]!==0?(n.heap[++n.heap_len]=c=s,n.depth[s]=0):t[s*2+1]=0;for(;n.heap_len<2;)l=n.heap[++n.heap_len]=c<2?++c:0,t[l*2]=1,n.depth[l]=0,n.opt_len--,i&&(n.static_len-=r[l*2+1]);for(e.max_code=c,s=n.heap_len>>1;s>=1;s--)Lw(n,t,s);l=o;do s=n.heap[1],n.heap[1]=n.heap[n.heap_len--],Lw(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=s,n.heap[--n.heap_max]=a,t[l*2]=t[s*2]+t[a*2],n.depth[l]=(n.depth[s]>=n.depth[a]?n.depth[s]:n.depth[a])+1,t[s*2+1]=t[a*2+1]=l,n.heap[1]=l++,Lw(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],k3(n,e),XE(t,c,n.bl_count)}function FE(n,e,t){var r,i=-1,o,s=e[0*2+1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)&&(a<l?n.bl_tree[o*2]+=a:o!==0?(o!==i&&n.bl_tree[o*2]++,n.bl_tree[UE*2]++):a<=10?n.bl_tree[BE*2]++:n.bl_tree[zE*2]++,a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))}function NE(n,e,t){var r,i=-1,o,s=e[0*2+1],a=0,c=7,l=4;for(s===0&&(c=138,l=3),r=0;r<=t;r++)if(o=s,s=e[(r+1)*2+1],!(++a<c&&o===s)){if(a<l)do Vs(n,o,n.bl_tree);while(--a!==0);else o!==0?(o!==i&&(Vs(n,o,n.bl_tree),a--),Vs(n,UE,n.bl_tree),qi(n,a-3,2)):a<=10?(Vs(n,BE,n.bl_tree),qi(n,a-3,3)):(Vs(n,zE,n.bl_tree),qi(n,a-11,7));a=0,i=o,s===0?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}}function z3(n){var e;for(FE(n,n.dyn_ltree,n.l_desc.max_code),FE(n,n.dyn_dtree,n.d_desc.max_code),kw(n,n.bl_desc),e=Bw-1;e>=3&&n.bl_tree[GE[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e}function G3(n,e,t,r){var i;for(qi(n,e-257,5),qi(n,t-1,5),qi(n,r-4,4),i=0;i<r;i++)qi(n,n.bl_tree[GE[i]*2+1],3);NE(n,n.dyn_ltree,e-1),NE(n,n.dyn_dtree,t-1)}function V3(n){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return IE;if(n.dyn_ltree[9*2]!==0||n.dyn_ltree[10*2]!==0||n.dyn_ltree[13*2]!==0)return RE;for(t=32;t<Up;t++)if(n.dyn_ltree[t*2]!==0)return RE;return IE}var LE=!1;function H3(n){LE||(U3(),LE=!0),n.l_desc=new Nw(n.dyn_ltree,VE),n.d_desc=new Nw(n.dyn_dtree,HE),n.bl_desc=new Nw(n.bl_tree,WE),n.bi_buf=0,n.bi_valid=0,KE(n)}function ZE(n,e,t,r){qi(n,(I3<<1)+(r?1:0),3),B3(n,e,t,!0)}function W3(n){qi(n,OE<<1,3),Vs(n,zw,Da),O3(n)}function j3(n,e,t,r){var i,o,s=0;n.level>0?(n.strm.data_type===C3&&(n.strm.data_type=V3(n)),kw(n,n.l_desc),kw(n,n.d_desc),s=z3(n),i=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?ZE(n,e,t,r):n.strategy===A3||o===i?(qi(n,(OE<<1)+(r?1:0),3),DE(n,Da,Fp)):(qi(n,(R3<<1)+(r?1:0),3),G3(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),DE(n,n.dyn_ltree,n.dyn_dtree)),KE(n),r&&YE(n)}function q3(n,e,t){return n.pending_buf[n.d_buf+n.last_lit*2]=e>>>8&255,n.pending_buf[n.d_buf+n.last_lit*2+1]=e&255,n.pending_buf[n.l_buf+n.last_lit]=t&255,n.last_lit++,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(Op[t]+Up+1)*2]++,n.dyn_dtree[jE(e)*2]++),n.last_lit===n.lit_bufsize-1}Tf._tr_init=H3;Tf._tr_stored_block=ZE;Tf._tr_flush_block=j3;Tf._tr_tally=q3;Tf._tr_align=W3});var Vw=Kr((IK,QE)=>{"use strict";function X3(n,e,t,r){for(var i=n&65535|0,o=n>>>16&65535|0,s=0;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}QE.exports=X3});var Hw=Kr((RK,$E)=>{"use strict";function K3(){for(var n,e=[],t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e}var Y3=K3();function Z3(n,e,t,r){var i=Y3,o=r+t;n^=-1;for(var s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1}$E.exports=Z3});var G0=Kr((PK,eA)=>{"use strict";eA.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var cA=Kr(js=>{"use strict";var Ai=Pa(),Eo=JE(),iA=Vw(),El=Hw(),J3=G0(),Oc=0,Q3=1,$3=3,Pl=4,tA=5,Ws=0,nA=1,Ao=-2,eU=-3,Ww=-5,tU=-1,nU=1,V0=2,rU=3,iU=4,oU=0,sU=2,q0=8,aU=9,lU=15,cU=8,uU=29,hU=256,qw=hU+1+uU,fU=30,dU=19,pU=2*qw+1,mU=15,fn=3,Il=258,cs=Il+fn+1,gU=32,X0=42,Xw=69,H0=73,W0=91,j0=103,Fc=113,zp=666,Dr=1,Gp=2,Nc=3,Af=4,vU=3;function Rl(n,e){return n.msg=J3[e],e}function rA(n){return(n<<1)-(n>4?9:0)}function Cl(n){for(var e=n.length;--e>=0;)n[e]=0}function Al(n){var e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(Ai.arraySet(n.output,e.pending_buf,e.pending_out,t,n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function Qr(n,e){Eo._tr_flush_block(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,Al(n.strm)}function yn(n,e){n.pending_buf[n.pending++]=e}function Bp(n,e){n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255}function yU(n,e,t,r){var i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,Ai.arraySet(e,n.input,n.next_in,i,t),n.state.wrap===1?n.adler=iA(n.adler,e,i,t):n.state.wrap===2&&(n.adler=El(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)}function oA(n,e){var t=n.max_chain_length,r=n.strstart,i,o,s=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-cs?n.strstart-(n.w_size-cs):0,l=n.window,u=n.w_mask,h=n.prev,f=n.strstart+Il,d=l[r+s-1],m=l[r+s];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(l[i+s]!==m||l[i+s-1]!==d||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<f);if(o=Il-(f-r),r=f-Il,o>s){if(n.match_start=e,s=o,o>=a)break;d=l[r+s-1],m=l[r+s]}}while((e=h[e&u])>c&&--t!==0);return s<=n.lookahead?s:n.lookahead}function Lc(n){var e=n.w_size,t,r,i,o,s;do{if(o=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-cs)){Ai.arraySet(n.window,n.window,e,e,0),n.match_start-=e,n.strstart-=e,n.block_start-=e,r=n.hash_size,t=r;do i=n.head[--t],n.head[t]=i>=e?i-e:0;while(--r);r=e,t=r;do i=n.prev[--t],n.prev[t]=i>=e?i-e:0;while(--r);o+=e}if(n.strm.avail_in===0)break;if(r=yU(n.strm,n.window,n.strstart+n.lookahead,o),n.lookahead+=r,n.lookahead+n.insert>=fn)for(s=n.strstart-n.insert,n.ins_h=n.window[s],n.ins_h=(n.ins_h<<n.hash_shift^n.window[s+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[s+fn-1])&n.hash_mask,n.prev[s&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=s,s++,n.insert--,!(n.lookahead+n.insert<fn)););}while(n.lookahead<cs&&n.strm.avail_in!==0)}function xU(n,e){var t=65535;for(t>n.pending_buf_size-5&&(t=n.pending_buf_size-5);;){if(n.lookahead<=1){if(Lc(n),n.lookahead===0&&e===Oc)return Dr;if(n.lookahead===0)break}n.strstart+=n.lookahead,n.lookahead=0;var r=n.block_start+t;if((n.strstart===0||n.strstart>=r)&&(n.lookahead=n.strstart-r,n.strstart=r,Qr(n,!1),n.strm.avail_out===0)||n.strstart-n.block_start>=n.w_size-cs&&(Qr(n,!1),n.strm.avail_out===0))return Dr}return n.insert=0,e===Pl?(Qr(n,!0),n.strm.avail_out===0?Nc:Af):(n.strstart>n.block_start&&(Qr(n,!1),n.strm.avail_out===0),Dr)}function jw(n,e){for(var t,r;;){if(n.lookahead<cs){if(Lc(n),n.lookahead<cs&&e===Oc)return Dr;if(n.lookahead===0)break}if(t=0,n.lookahead>=fn&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+fn-1])&n.hash_mask,t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-cs&&(n.match_length=oA(n,t)),n.match_length>=fn)if(r=Eo._tr_tally(n,n.strstart-n.match_start,n.match_length-fn),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=fn){n.match_length--;do n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+fn-1])&n.hash_mask,t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else r=Eo._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(Qr(n,!1),n.strm.avail_out===0))return Dr}return n.insert=n.strstart<fn-1?n.strstart:fn-1,e===Pl?(Qr(n,!0),n.strm.avail_out===0?Nc:Af):n.last_lit&&(Qr(n,!1),n.strm.avail_out===0)?Dr:Gp}function Mf(n,e){for(var t,r,i;;){if(n.lookahead<cs){if(Lc(n),n.lookahead<cs&&e===Oc)return Dr;if(n.lookahead===0)break}if(t=0,n.lookahead>=fn&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+fn-1])&n.hash_mask,t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=fn-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-cs&&(n.match_length=oA(n,t),n.match_length<=5&&(n.strategy===nU||n.match_length===fn&&n.strstart-n.match_start>4096)&&(n.match_length=fn-1)),n.prev_length>=fn&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-fn,r=Eo._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-fn),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+fn-1])&n.hash_mask,t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=fn-1,n.strstart++,r&&(Qr(n,!1),n.strm.avail_out===0))return Dr}else if(n.match_available){if(r=Eo._tr_tally(n,0,n.window[n.strstart-1]),r&&Qr(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return Dr}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=Eo._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<fn-1?n.strstart:fn-1,e===Pl?(Qr(n,!0),n.strm.avail_out===0?Nc:Af):n.last_lit&&(Qr(n,!1),n.strm.avail_out===0)?Dr:Gp}function bU(n,e){for(var t,r,i,o,s=n.window;;){if(n.lookahead<=Il){if(Lc(n),n.lookahead<=Il&&e===Oc)return Dr;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=fn&&n.strstart>0&&(i=n.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=n.strstart+Il;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);n.match_length=Il-(o-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=fn?(t=Eo._tr_tally(n,1,n.match_length-fn),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=Eo._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(Qr(n,!1),n.strm.avail_out===0))return Dr}return n.insert=0,e===Pl?(Qr(n,!0),n.strm.avail_out===0?Nc:Af):n.last_lit&&(Qr(n,!1),n.strm.avail_out===0)?Dr:Gp}function wU(n,e){for(var t;;){if(n.lookahead===0&&(Lc(n),n.lookahead===0)){if(e===Oc)return Dr;break}if(n.match_length=0,t=Eo._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(Qr(n,!1),n.strm.avail_out===0))return Dr}return n.insert=0,e===Pl?(Qr(n,!0),n.strm.avail_out===0?Nc:Af):n.last_lit&&(Qr(n,!1),n.strm.avail_out===0)?Dr:Gp}function Hs(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var Ef;Ef=[new Hs(0,0,0,0,xU),new Hs(4,4,8,4,jw),new Hs(4,5,16,8,jw),new Hs(4,6,32,32,jw),new Hs(4,4,16,16,Mf),new Hs(8,16,32,32,Mf),new Hs(8,16,128,128,Mf),new Hs(8,32,128,256,Mf),new Hs(32,128,258,1024,Mf),new Hs(32,258,258,4096,Mf)];function SU(n){n.window_size=2*n.w_size,Cl(n.head),n.max_lazy_match=Ef[n.level].max_lazy,n.good_match=Ef[n.level].good_length,n.nice_match=Ef[n.level].nice_length,n.max_chain_length=Ef[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=fn-1,n.match_available=0,n.ins_h=0}function _U(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q0,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ai.Buf16(pU*2),this.dyn_dtree=new Ai.Buf16((2*fU+1)*2),this.bl_tree=new Ai.Buf16((2*dU+1)*2),Cl(this.dyn_ltree),Cl(this.dyn_dtree),Cl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ai.Buf16(mU+1),this.heap=new Ai.Buf16(2*qw+1),Cl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ai.Buf16(2*qw+1),Cl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function sA(n){var e;return!n||!n.state?Rl(n,Ao):(n.total_in=n.total_out=0,n.data_type=sU,e=n.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?X0:Fc,n.adler=e.wrap===2?0:1,e.last_flush=Oc,Eo._tr_init(e),Ws)}function aA(n){var e=sA(n);return e===Ws&&SU(n.state),e}function TU(n,e){return!n||!n.state||n.state.wrap!==2?Ao:(n.state.gzhead=e,Ws)}function lA(n,e,t,r,i,o){if(!n)return Ao;var s=1;if(e===tU&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>aU||t!==q0||r<8||r>15||e<0||e>9||o<0||o>iU)return Rl(n,Ao);r===8&&(r=9);var a=new _U;return n.state=a,a.strm=n,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+fn-1)/fn),a.window=new Ai.Buf8(a.w_size*2),a.head=new Ai.Buf16(a.hash_size),a.prev=new Ai.Buf16(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Ai.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=o,a.method=t,aA(n)}function MU(n,e){return lA(n,e,q0,lU,cU,oU)}function EU(n,e){var t,r,i,o;if(!n||!n.state||e>tA||e<0)return n?Rl(n,Ao):Ao;if(r=n.state,!n.output||!n.input&&n.avail_in!==0||r.status===zp&&e!==Pl)return Rl(n,n.avail_out===0?Ww:Ao);if(r.strm=n,t=r.last_flush,r.last_flush=e,r.status===X0)if(r.wrap===2)n.adler=0,yn(r,31),yn(r,139),yn(r,8),r.gzhead?(yn(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),yn(r,r.gzhead.time&255),yn(r,r.gzhead.time>>8&255),yn(r,r.gzhead.time>>16&255),yn(r,r.gzhead.time>>24&255),yn(r,r.level===9?2:r.strategy>=V0||r.level<2?4:0),yn(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(yn(r,r.gzhead.extra.length&255),yn(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(n.adler=El(n.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Xw):(yn(r,0),yn(r,0),yn(r,0),yn(r,0),yn(r,0),yn(r,r.level===9?2:r.strategy>=V0||r.level<2?4:0),yn(r,vU),r.status=Fc);else{var s=q0+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=V0||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,s|=a<<6,r.strstart!==0&&(s|=gU),s+=31-s%31,r.status=Fc,Bp(r,s),r.strstart!==0&&(Bp(r,n.adler>>>16),Bp(r,n.adler&65535)),n.adler=1}if(r.status===Xw)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(n.adler=El(n.adler,r.pending_buf,r.pending-i,i)),Al(n),i=r.pending,r.pending===r.pending_buf_size));)yn(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(n.adler=El(n.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=H0)}else r.status=H0;if(r.status===H0)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(n.adler=El(n.adler,r.pending_buf,r.pending-i,i)),Al(n),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,yn(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(n.adler=El(n.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.gzindex=0,r.status=W0)}else r.status=W0;if(r.status===W0)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(n.adler=El(n.adler,r.pending_buf,r.pending-i,i)),Al(n),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,yn(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(n.adler=El(n.adler,r.pending_buf,r.pending-i,i)),o===0&&(r.status=j0)}else r.status=j0;if(r.status===j0&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Al(n),r.pending+2<=r.pending_buf_size&&(yn(r,n.adler&255),yn(r,n.adler>>8&255),n.adler=0,r.status=Fc)):r.status=Fc),r.pending!==0){if(Al(n),n.avail_out===0)return r.last_flush=-1,Ws}else if(n.avail_in===0&&rA(e)<=rA(t)&&e!==Pl)return Rl(n,Ww);if(r.status===zp&&n.avail_in!==0)return Rl(n,Ww);if(n.avail_in!==0||r.lookahead!==0||e!==Oc&&r.status!==zp){var c=r.strategy===V0?wU(r,e):r.strategy===rU?bU(r,e):Ef[r.level].func(r,e);if((c===Nc||c===Af)&&(r.status=zp),c===Dr||c===Nc)return n.avail_out===0&&(r.last_flush=-1),Ws;if(c===Gp&&(e===Q3?Eo._tr_align(r):e!==tA&&(Eo._tr_stored_block(r,0,0,!1),e===$3&&(Cl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Al(n),n.avail_out===0))return r.last_flush=-1,Ws}return e!==Pl?Ws:r.wrap<=0?nA:(r.wrap===2?(yn(r,n.adler&255),yn(r,n.adler>>8&255),yn(r,n.adler>>16&255),yn(r,n.adler>>24&255),yn(r,n.total_in&255),yn(r,n.total_in>>8&255),yn(r,n.total_in>>16&255),yn(r,n.total_in>>24&255)):(Bp(r,n.adler>>>16),Bp(r,n.adler&65535)),Al(n),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Ws:nA)}function AU(n){var e;return!n||!n.state?Ao:(e=n.state.status,e!==X0&&e!==Xw&&e!==H0&&e!==W0&&e!==j0&&e!==Fc&&e!==zp?Rl(n,Ao):(n.state=null,e===Fc?Rl(n,eU):Ws))}function CU(n,e){var t=e.length,r,i,o,s,a,c,l,u;if(!n||!n.state||(r=n.state,s=r.wrap,s===2||s===1&&r.status!==X0||r.lookahead))return Ao;for(s===1&&(n.adler=iA(n.adler,e,t,0)),r.wrap=0,t>=r.w_size&&(s===0&&(Cl(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new Ai.Buf8(r.w_size),Ai.arraySet(u,e,t-r.w_size,r.w_size,0),e=u,t=r.w_size),a=n.avail_in,c=n.next_in,l=n.input,n.avail_in=t,n.next_in=0,n.input=e,Lc(r);r.lookahead>=fn;){i=r.strstart,o=r.lookahead-(fn-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+fn-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--o);r.strstart=i,r.lookahead=fn-1,Lc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=fn-1,r.match_available=0,n.next_in=c,n.input=l,n.avail_in=a,r.wrap=s,Ws}js.deflateInit=MU;js.deflateInit2=lA;js.deflateReset=aA;js.deflateResetKeep=sA;js.deflateSetHeader=TU;js.deflate=EU;js.deflateEnd=AU;js.deflateSetDictionary=CU;js.deflateInfo="pako deflate (from Nodeca project)"});var Kw=Kr(Cf=>{"use strict";var K0=Pa(),uA=!0,hA=!0;try{String.fromCharCode.apply(null,[0])}catch{uA=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{hA=!1}var Vp=new K0.Buf8(256);for(Fa=0;Fa<256;Fa++)Vp[Fa]=Fa>=252?6:Fa>=248?5:Fa>=240?4:Fa>=224?3:Fa>=192?2:1;var Fa;Vp[254]=Vp[254]=1;Cf.string2buf=function(n){var e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new K0.Buf8(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};function fA(n,e){if(e<65534&&(n.subarray&&hA||!n.subarray&&uA))return String.fromCharCode.apply(null,K0.shrinkBuf(n,e));for(var t="",r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t}Cf.buf2binstring=function(n){return fA(n,n.length)};Cf.binstring2buf=function(n){for(var e=new K0.Buf8(n.length),t=0,r=e.length;t<r;t++)e[t]=n.charCodeAt(t);return e};Cf.buf2string=function(n,e){var t,r,i,o,s=e||n.length,a=new Array(s*2);for(r=0,t=0;t<s;){if(i=n[t++],i<128){a[r++]=i;continue}if(o=Vp[i],o>4){a[r++]=65533,t+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&t<s;)i=i<<6|n[t++]&63,o--;if(o>1){a[r++]=65533;continue}i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|i&1023)}return fA(a,r)};Cf.utf8border=function(n,e){var t;for(e=e||n.length,e>n.length&&(e=n.length),t=e-1;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Vp[n[t]]>e?t:e}});var Yw=Kr((NK,dA)=>{"use strict";function IU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}dA.exports=IU});var vA=Kr(jp=>{"use strict";var Hp=cA(),Wp=Pa(),Jw=Kw(),Qw=G0(),RU=Yw(),gA=Object.prototype.toString,PU=0,Zw=4,If=0,pA=1,mA=2,DU=-1,FU=0,NU=8;function kc(n){if(!(this instanceof kc))return new kc(n);this.options=Wp.assign({level:DU,method:NU,chunkSize:16384,windowBits:15,memLevel:8,strategy:FU,to:""},n||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new RU,this.strm.avail_out=0;var t=Hp.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==If)throw new Error(Qw[t]);if(e.header&&Hp.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(typeof e.dictionary=="string"?r=Jw.string2buf(e.dictionary):gA.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=Hp.deflateSetDictionary(this.strm,r),t!==If)throw new Error(Qw[t]);this._dict_set=!0}}kc.prototype.push=function(n,e){var t=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;o=e===~~e?e:e===!0?Zw:PU,typeof n=="string"?t.input=Jw.string2buf(n):gA.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Wp.Buf8(r),t.next_out=0,t.avail_out=r),i=Hp.deflate(t,o),i!==pA&&i!==If)return this.onEnd(i),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(o===Zw||o===mA))&&(this.options.to==="string"?this.onData(Jw.buf2binstring(Wp.shrinkBuf(t.output,t.next_out))):this.onData(Wp.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&i!==pA);return o===Zw?(i=Hp.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===If):(o===mA&&(this.onEnd(If),t.avail_out=0),!0)};kc.prototype.onData=function(n){this.chunks.push(n)};kc.prototype.onEnd=function(n){n===If&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Wp.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function $w(n,e){var t=new kc(e);if(t.push(n,!0),t.err)throw t.msg||Qw[t.err];return t.result}function LU(n,e){return e=e||{},e.raw=!0,$w(n,e)}function OU(n,e){return e=e||{},e.gzip=!0,$w(n,e)}jp.Deflate=kc;jp.deflate=$w;jp.deflateRaw=LU;jp.gzip=OU});var xA=Kr((OK,yA)=>{"use strict";var Y0=30,kU=12;yA.exports=function(e,t){var r,i,o,s,a,c,l,u,h,f,d,m,v,p,g,x,y,b,S,_,M,A,w,T,D;r=e.state,i=e.next_in,T=e.input,o=i+(e.avail_in-5),s=e.next_out,D=e.output,a=s-(t-e.avail_out),c=s+(e.avail_out-257),l=r.dmax,u=r.wsize,h=r.whave,f=r.wnext,d=r.window,m=r.hold,v=r.bits,p=r.lencode,g=r.distcode,x=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{v<15&&(m+=T[i++]<<v,v+=8,m+=T[i++]<<v,v+=8),b=p[m&x];t:for(;;){if(S=b>>>24,m>>>=S,v-=S,S=b>>>16&255,S===0)D[s++]=b&65535;else if(S&16){_=b&65535,S&=15,S&&(v<S&&(m+=T[i++]<<v,v+=8),_+=m&(1<<S)-1,m>>>=S,v-=S),v<15&&(m+=T[i++]<<v,v+=8,m+=T[i++]<<v,v+=8),b=g[m&y];n:for(;;){if(S=b>>>24,m>>>=S,v-=S,S=b>>>16&255,S&16){if(M=b&65535,S&=15,v<S&&(m+=T[i++]<<v,v+=8,v<S&&(m+=T[i++]<<v,v+=8)),M+=m&(1<<S)-1,M>l){e.msg="invalid distance too far back",r.mode=Y0;break e}if(m>>>=S,v-=S,S=s-a,M>S){if(S=M-S,S>h&&r.sane){e.msg="invalid distance too far back",r.mode=Y0;break e}if(A=0,w=d,f===0){if(A+=u-S,S<_){_-=S;do D[s++]=d[A++];while(--S);A=s-M,w=D}}else if(f<S){if(A+=u+f-S,S-=f,S<_){_-=S;do D[s++]=d[A++];while(--S);if(A=0,f<_){S=f,_-=S;do D[s++]=d[A++];while(--S);A=s-M,w=D}}}else if(A+=f-S,S<_){_-=S;do D[s++]=d[A++];while(--S);A=s-M,w=D}for(;_>2;)D[s++]=w[A++],D[s++]=w[A++],D[s++]=w[A++],_-=3;_&&(D[s++]=w[A++],_>1&&(D[s++]=w[A++]))}else{A=s-M;do D[s++]=D[A++],D[s++]=D[A++],D[s++]=D[A++],_-=3;while(_>2);_&&(D[s++]=D[A++],_>1&&(D[s++]=D[A++]))}}else if(S&64){e.msg="invalid distance code",r.mode=Y0;break e}else{b=g[(b&65535)+(m&(1<<S)-1)];continue n}break}}else if(S&64)if(S&32){r.mode=kU;break e}else{e.msg="invalid literal/length code",r.mode=Y0;break e}else{b=p[(b&65535)+(m&(1<<S)-1)];continue t}break}}while(i<o&&s<c);_=v>>3,i-=_,v-=_<<3,m&=(1<<v)-1,e.next_in=i,e.next_out=s,e.avail_in=i<o?5+(o-i):5-(i-o),e.avail_out=s<c?257+(c-s):257-(s-c),r.hold=m,r.bits=v}});var EA=Kr((kK,MA)=>{"use strict";var bA=Pa(),Rf=15,wA=852,SA=592,_A=0,eS=1,TA=2,UU=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],BU=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],zU=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],GU=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];MA.exports=function(e,t,r,i,o,s,a,c){var l=c.bits,u=0,h=0,f=0,d=0,m=0,v=0,p=0,g=0,x=0,y=0,b,S,_,M,A,w=null,T=0,D,N=new bA.Buf16(Rf+1),P=new bA.Buf16(Rf+1),E=null,U=0,k,B,O;for(u=0;u<=Rf;u++)N[u]=0;for(h=0;h<i;h++)N[t[r+h]]++;for(m=l,d=Rf;d>=1&&N[d]===0;d--);if(m>d&&(m=d),d===0)return o[s++]=1<<24|64<<16|0,o[s++]=1<<24|64<<16|0,c.bits=1,0;for(f=1;f<d&&N[f]===0;f++);for(m<f&&(m=f),g=1,u=1;u<=Rf;u++)if(g<<=1,g-=N[u],g<0)return-1;if(g>0&&(e===_A||d!==1))return-1;for(P[1]=0,u=1;u<Rf;u++)P[u+1]=P[u]+N[u];for(h=0;h<i;h++)t[r+h]!==0&&(a[P[t[r+h]]++]=h);if(e===_A?(w=E=a,D=19):e===eS?(w=UU,T-=257,E=BU,U-=257,D=256):(w=zU,E=GU,D=-1),y=0,h=0,u=f,A=s,v=m,p=0,_=-1,x=1<<m,M=x-1,e===eS&&x>wA||e===TA&&x>SA)return 1;for(;;){k=u-p,a[h]<D?(B=0,O=a[h]):a[h]>D?(B=E[U+a[h]],O=w[T+a[h]]):(B=96,O=0),b=1<<u-p,S=1<<v,f=S;do S-=b,o[A+(y>>p)+S]=k<<24|B<<16|O|0;while(S!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,h++,--N[u]===0){if(u===d)break;u=t[r+a[h]]}if(u>m&&(y&M)!==_){for(p===0&&(p=m),A+=f,v=u-p,g=1<<v;v+p<d&&(g-=N[v+p],!(g<=0));)v++,g<<=1;if(x+=1<<v,e===eS&&x>wA||e===TA&&x>SA)return 1;_=y&M,o[_]=m<<24|v<<16|A-s|0}}return y!==0&&(o[A+y]=u-p<<24|64<<16|0),c.bits=m,0}});var aC=Kr(us=>{"use strict";var ao=Pa(),sS=Vw(),qs=Hw(),VU=xA(),qp=EA(),HU=0,QA=1,$A=2,AA=4,WU=5,Z0=6,Uc=0,jU=1,qU=2,Co=-2,eC=-3,aS=-4,XU=-5,CA=8,tC=1,IA=2,RA=3,PA=4,DA=5,FA=6,NA=7,LA=8,OA=9,kA=10,$0=11,Na=12,tS=13,UA=14,nS=15,BA=16,zA=17,GA=18,VA=19,J0=20,Q0=21,HA=22,WA=23,jA=24,qA=25,XA=26,rS=27,KA=28,YA=29,Kn=30,lS=31,KU=32,YU=852,ZU=592,JU=15,QU=JU;function ZA(n){return(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24)}function $U(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ao.Buf16(320),this.work=new ao.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function nC(n){var e;return!n||!n.state?Co:(e=n.state,n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=tC,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new ao.Buf32(YU),e.distcode=e.distdyn=new ao.Buf32(ZU),e.sane=1,e.back=-1,Uc)}function rC(n){var e;return!n||!n.state?Co:(e=n.state,e.wsize=0,e.whave=0,e.wnext=0,nC(n))}function iC(n,e){var t,r;return!n||!n.state||(r=n.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Co:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,rC(n))}function oC(n,e){var t,r;return n?(r=new $U,n.state=r,r.window=null,t=iC(n,e),t!==Uc&&(n.state=null),t):Co}function eB(n){return oC(n,QU)}var JA=!0,iS,oS;function tB(n){if(JA){var e;for(iS=new ao.Buf32(512),oS=new ao.Buf32(32),e=0;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(qp(QA,n.lens,0,288,iS,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;qp($A,n.lens,0,32,oS,0,n.work,{bits:5}),JA=!1}n.lencode=iS,n.lenbits=9,n.distcode=oS,n.distbits=5}function sC(n,e,t,r){var i,o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new ao.Buf8(o.wsize)),r>=o.wsize?(ao.arraySet(o.window,e,t-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),ao.arraySet(o.window,e,t-r,i,o.wnext),r-=i,r?(ao.arraySet(o.window,e,t-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function nB(n,e){var t,r,i,o,s,a,c,l,u,h,f,d,m,v,p=0,g,x,y,b,S,_,M,A,w=new ao.Buf8(4),T,D,N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&n.avail_in!==0)return Co;t=n.state,t.mode===Na&&(t.mode=tS),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,h=a,f=c,A=Uc;e:for(;;)switch(t.mode){case tC:if(t.wrap===0){t.mode=tS;break}for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.wrap&2&&l===35615){t.check=0,w[0]=l&255,w[1]=l>>>8&255,t.check=qs(t.check,w,2,0),l=0,u=0,t.mode=IA;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){n.msg="incorrect header check",t.mode=Kn;break}if((l&15)!==CA){n.msg="unknown compression method",t.mode=Kn;break}if(l>>>=4,u-=4,M=(l&15)+8,t.wbits===0)t.wbits=M;else if(M>t.wbits){n.msg="invalid window size",t.mode=Kn;break}t.dmax=1<<M,n.adler=t.check=1,t.mode=l&512?kA:Na,l=0,u=0;break;case IA:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==CA){n.msg="unknown compression method",t.mode=Kn;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Kn;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,t.check=qs(t.check,w,2,0)),l=0,u=0,t.mode=RA;case RA:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,w[2]=l>>>16&255,w[3]=l>>>24&255,t.check=qs(t.check,w,4,0)),l=0,u=0,t.mode=PA;case PA:for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,t.check=qs(t.check,w,2,0)),l=0,u=0,t.mode=DA;case DA:if(t.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&(w[0]=l&255,w[1]=l>>>8&255,t.check=qs(t.check,w,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=FA;case FA:if(t.flags&1024&&(d=t.length,d>a&&(d=a),d&&(t.head&&(M=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),ao.arraySet(t.head.extra,r,o,d,M)),t.flags&512&&(t.check=qs(t.check,r,d,o)),a-=d,o+=d,t.length-=d),t.length))break e;t.length=0,t.mode=NA;case NA:if(t.flags&2048){if(a===0)break e;d=0;do M=r[o+d++],t.head&&M&&t.length<65536&&(t.head.name+=String.fromCharCode(M));while(M&&d<a);if(t.flags&512&&(t.check=qs(t.check,r,d,o)),a-=d,o+=d,M)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=LA;case LA:if(t.flags&4096){if(a===0)break e;d=0;do M=r[o+d++],t.head&&M&&t.length<65536&&(t.head.comment+=String.fromCharCode(M));while(M&&d<a);if(t.flags&512&&(t.check=qs(t.check,r,d,o)),a-=d,o+=d,M)break e}else t.head&&(t.head.comment=null);t.mode=OA;case OA:if(t.flags&512){for(;u<16;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Kn;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Na;break;case kA:for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}n.adler=t.check=ZA(l),l=0,u=0,t.mode=$0;case $0:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,qU;n.adler=t.check=1,t.mode=Na;case Na:if(e===WU||e===Z0)break e;case tS:if(t.last){l>>>=u&7,u-=u&7,t.mode=rS;break}for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=UA;break;case 1:if(tB(t),t.mode=J0,e===Z0){l>>>=2,u-=2;break e}break;case 2:t.mode=zA;break;case 3:n.msg="invalid block type",t.mode=Kn}l>>>=2,u-=2;break;case UA:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Kn;break}if(t.length=l&65535,l=0,u=0,t.mode=nS,e===Z0)break e;case nS:t.mode=BA;case BA:if(d=t.length,d){if(d>a&&(d=a),d>c&&(d=c),d===0)break e;ao.arraySet(i,r,o,d,s),a-=d,o+=d,c-=d,s+=d,t.length-=d;break}t.mode=Na;break;case zA:for(;u<14;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Kn;break}t.have=0,t.mode=GA;case GA:for(;t.have<t.ncode;){for(;u<3;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.lens[N[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[N[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},A=qp(HU,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,A){n.msg="invalid code lengths set",t.mode=Kn;break}t.have=0,t.mode=VA;case VA:for(;t.have<t.nlen+t.ndist;){for(;p=t.lencode[l&(1<<t.lenbits)-1],g=p>>>24,x=p>>>16&255,y=p&65535,!(g<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(y<16)l>>>=g,u-=g,t.lens[t.have++]=y;else{if(y===16){for(D=g+2;u<D;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=g,u-=g,t.have===0){n.msg="invalid bit length repeat",t.mode=Kn;break}M=t.lens[t.have-1],d=3+(l&3),l>>>=2,u-=2}else if(y===17){for(D=g+3;u<D;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=g,u-=g,M=0,d=3+(l&7),l>>>=3,u-=3}else{for(D=g+7;u<D;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=g,u-=g,M=0,d=11+(l&127),l>>>=7,u-=7}if(t.have+d>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Kn;break}for(;d--;)t.lens[t.have++]=M}}if(t.mode===Kn)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Kn;break}if(t.lenbits=9,T={bits:t.lenbits},A=qp(QA,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,A){n.msg="invalid literal/lengths set",t.mode=Kn;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},A=qp($A,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,A){n.msg="invalid distances set",t.mode=Kn;break}if(t.mode=J0,e===Z0)break e;case J0:t.mode=Q0;case Q0:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,VU(n,f),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,l=t.hold,u=t.bits,t.mode===Na&&(t.back=-1);break}for(t.back=0;p=t.lencode[l&(1<<t.lenbits)-1],g=p>>>24,x=p>>>16&255,y=p&65535,!(g<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(x&&!(x&240)){for(b=g,S=x,_=y;p=t.lencode[_+((l&(1<<b+S)-1)>>b)],g=p>>>24,x=p>>>16&255,y=p&65535,!(b+g<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=b,u-=b,t.back+=b}if(l>>>=g,u-=g,t.back+=g,t.length=y,x===0){t.mode=XA;break}if(x&32){t.back=-1,t.mode=Na;break}if(x&64){n.msg="invalid literal/length code",t.mode=Kn;break}t.extra=x&15,t.mode=HA;case HA:if(t.extra){for(D=t.extra;u<D;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=WA;case WA:for(;p=t.distcode[l&(1<<t.distbits)-1],g=p>>>24,x=p>>>16&255,y=p&65535,!(g<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(!(x&240)){for(b=g,S=x,_=y;p=t.distcode[_+((l&(1<<b+S)-1)>>b)],g=p>>>24,x=p>>>16&255,y=p&65535,!(b+g<=u);){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}l>>>=b,u-=b,t.back+=b}if(l>>>=g,u-=g,t.back+=g,x&64){n.msg="invalid distance code",t.mode=Kn;break}t.offset=y,t.extra=x&15,t.mode=jA;case jA:if(t.extra){for(D=t.extra;u<D;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Kn;break}t.mode=qA;case qA:if(c===0)break e;if(d=f-c,t.offset>d){if(d=t.offset-d,d>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Kn;break}d>t.wnext?(d-=t.wnext,m=t.wsize-d):m=t.wnext-d,d>t.length&&(d=t.length),v=t.window}else v=i,m=s-t.offset,d=t.length;d>c&&(d=c),c-=d,t.length-=d;do i[s++]=v[m++];while(--d);t.length===0&&(t.mode=Q0);break;case XA:if(c===0)break e;i[s++]=t.length,c--,t.mode=Q0;break;case rS:if(t.wrap){for(;u<32;){if(a===0)break e;a--,l|=r[o++]<<u,u+=8}if(f-=c,n.total_out+=f,t.total+=f,f&&(n.adler=t.check=t.flags?qs(t.check,i,f,s-f):sS(t.check,i,f,s-f)),f=c,(t.flags?l:ZA(l))!==t.check){n.msg="incorrect data check",t.mode=Kn;break}l=0,u=0}t.mode=KA;case KA:if(t.wrap&&t.flags){for(;u<32;){if(a===0)break e;a--,l+=r[o++]<<u,u+=8}if(l!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Kn;break}l=0,u=0}t.mode=YA;case YA:A=jU;break e;case Kn:A=eC;break e;case lS:return aS;case KU:default:return Co}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=l,t.bits=u,(t.wsize||f!==n.avail_out&&t.mode<Kn&&(t.mode<rS||e!==AA))&&sC(n,n.output,n.next_out,f-n.avail_out)?(t.mode=lS,aS):(h-=n.avail_in,f-=n.avail_out,n.total_in+=h,n.total_out+=f,t.total+=f,t.wrap&&f&&(n.adler=t.check=t.flags?qs(t.check,i,f,n.next_out-f):sS(t.check,i,f,n.next_out-f)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Na?128:0)+(t.mode===J0||t.mode===nS?256:0),(h===0&&f===0||e===AA)&&A===Uc&&(A=XU),A)}function rB(n){if(!n||!n.state)return Co;var e=n.state;return e.window&&(e.window=null),n.state=null,Uc}function iB(n,e){var t;return!n||!n.state||(t=n.state,!(t.wrap&2))?Co:(t.head=e,e.done=!1,Uc)}function oB(n,e){var t=e.length,r,i,o;return!n||!n.state||(r=n.state,r.wrap!==0&&r.mode!==$0)?Co:r.mode===$0&&(i=1,i=sS(i,e,t,0),i!==r.check)?eC:(o=sC(n,e,t,t),o?(r.mode=lS,aS):(r.havedict=1,Uc))}us.inflateReset=rC;us.inflateReset2=iC;us.inflateResetKeep=nC;us.inflateInit=eB;us.inflateInit2=oC;us.inflate=nB;us.inflateEnd=rB;us.inflateGetHeader=iB;us.inflateSetDictionary=oB;us.inflateInfo="pako inflate (from Nodeca project)"});var cS=Kr((BK,lC)=>{"use strict";lC.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var uC=Kr((zK,cC)=>{"use strict";function sB(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}cC.exports=sB});var fC=Kr(Kp=>{"use strict";var Pf=aC(),Xp=Pa(),ey=Kw(),fr=cS(),uS=G0(),aB=Yw(),lB=uC(),hC=Object.prototype.toString;function Bc(n){if(!(this instanceof Bc))return new Bc(n);this.options=Xp.assign({chunkSize:16384,windowBits:0,to:""},n||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new aB,this.strm.avail_out=0;var t=Pf.inflateInit2(this.strm,e.windowBits);if(t!==fr.Z_OK)throw new Error(uS[t]);if(this.header=new lB,Pf.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ey.string2buf(e.dictionary):hC.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Pf.inflateSetDictionary(this.strm,e.dictionary),t!==fr.Z_OK)))throw new Error(uS[t])}Bc.prototype.push=function(n,e){var t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,s,a,c,l,u=!1;if(this.ended)return!1;s=e===~~e?e:e===!0?fr.Z_FINISH:fr.Z_NO_FLUSH,typeof n=="string"?t.input=ey.binstring2buf(n):hC.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Xp.Buf8(r),t.next_out=0,t.avail_out=r),o=Pf.inflate(t,fr.Z_NO_FLUSH),o===fr.Z_NEED_DICT&&i&&(o=Pf.inflateSetDictionary(this.strm,i)),o===fr.Z_BUF_ERROR&&u===!0&&(o=fr.Z_OK,u=!1),o!==fr.Z_STREAM_END&&o!==fr.Z_OK)return this.onEnd(o),this.ended=!0,!1;t.next_out&&(t.avail_out===0||o===fr.Z_STREAM_END||t.avail_in===0&&(s===fr.Z_FINISH||s===fr.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=ey.utf8border(t.output,t.next_out),c=t.next_out-a,l=ey.buf2string(t.output,a),t.next_out=c,t.avail_out=r-c,c&&Xp.arraySet(t.output,t.output,a,c,0),this.onData(l)):this.onData(Xp.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(u=!0)}while((t.avail_in>0||t.avail_out===0)&&o!==fr.Z_STREAM_END);return o===fr.Z_STREAM_END&&(s=fr.Z_FINISH),s===fr.Z_FINISH?(o=Pf.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===fr.Z_OK):(s===fr.Z_SYNC_FLUSH&&(this.onEnd(fr.Z_OK),t.avail_out=0),!0)};Bc.prototype.onData=function(n){this.chunks.push(n)};Bc.prototype.onEnd=function(n){n===fr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Xp.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function hS(n,e){var t=new Bc(e);if(t.push(n,!0),t.err)throw t.msg||uS[t.err];return t.result}function cB(n,e){return e=e||{},e.raw=!0,hS(n,e)}Kp.Inflate=Bc;Kp.inflate=hS;Kp.inflateRaw=cB;Kp.ungzip=hS});var Yp=Kr((VK,pC)=>{"use strict";var uB=Pa().assign,hB=vA(),fB=fC(),dB=cS(),dC={};uB(dC,hB,fB,dB);pC.exports=dC});var IG={};d_(IG,{Engine:()=>_w,RegisterHeaderPlugin:()=>MG,RegisterToolbarPlugin:()=>EG,SetWebsiteEventHandler:()=>TG,StartEmbed:()=>CG,StartWebsite:()=>AG,UI:()=>_G});var sd=null,m_=new Set,g_=new Set;function ad(n){sd=n}function Vy(n){return sd===null?null:sd+"/"+n}function qm(n){return new Promise((e,t)=>{if(sd===null){t();return}if(m_.has(n)){e();return}let r=document.createElement("script");r.type="text/javascript",r.src=Vy(n),r.onload=()=>{m_.add(n),e()},r.onerror=()=>{t()},document.head.appendChild(r)})}function ld(n){return new Promise((e,t)=>{if(sd===null){t();return}if(g_.has(n)){e();return}let r=document.createElement("script");r.type="text/javascript",r.src=n,r.onload=()=>{g_.add(n),e()},r.onerror=()=>{t()},document.head.appendChild(r)})}function bs(n){return n!=null}function v_(n,e){return n??e}function ou(n,e){if(bs(n))for(let t of Object.keys(n))bs(n[t])&&(e[t]=n[t])}function Xm(n){return Object.keys(n).length===0}function Km(n,...e){return n.replace(/{([0-9]+)}/g,(t,r)=>e[r]===void 0?t:e[r])}function Ym(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}var cd=null,Zm=null;function y_(n){cd=n}function x_(n){Zm=n}function be(n){return cd===null||Zm===null||!cd[n]||!cd[n][Zm]?n:cd[n][Zm]}function Ga(n,...e){return Km(be(n),...e)}var b_=1e-8,ud=1e-4,Jm=57.29577951308232,ws=.017453292519943;function ta(n){return Math.abs(n)<1e-8}function su(n,e){return e-n>1e-8}function Qm(n,e){return n-e>1e-8}function au(n,e){return e-n>-1e-8}function lu(n,e){return n-e>-1e-8}function pn(n,e){return Math.abs(e-n)<1e-8}function hd(n,e,t){return Math.abs(e-n)<t}function uo(n){return n>1e-8}function na(n){return n<-1e-8}var Mt={X:1,Y:2,Z:3};var on=class n{constructor(e,t){this.x=e,this.y=t}Clone(){return new n(this.x,this.y)}};function Uo(n,e){return pn(n.x,e.x)&&pn(n.y,e.y)}function w_(n,e){return new on(n.x+e.x,n.y+e.y)}function Va(n,e){return new on(n.x-e.x,n.y-e.y)}function Yl(n,e){return Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y))}function fd(n,e){return n.x*e.x+n.y*e.y}function Or(n){return Math.round(parseFloat(n))}function $m(n){let e=Or(n.paddingLeft)+Or(n.paddingRight),t=Or(n.borderLeftWidth)+Or(n.borderRightWidth),r=Or(n.marginLeft)+Or(n.marginRight);return e+t+r}function eg(n){let e=Or(n.paddingTop)+Or(n.paddingBottom),t=Or(n.borderTopWidth)+Or(n.borderBottomWidth),r=Or(n.marginTop)+Or(n.marginBottom);return e+t+r}function tg(n,e,t){let r=getComputedStyle(n),i=e-$m(r),o=t-eg(r);return{width:i,height:o}}function ra(n,e,t){if(n.getBoundingClientRect){let r=n.getBoundingClientRect();e-=r.left,t-=r.top}return window.pageXOffset&&window.pageYOffset&&(e+=window.pageXOffset,t+=window.pageYOffset),new on(e,t)}function Ha(n,e,t){let r=document.createElement(n);return e&&(r.className=e),t&&(r.innerHTML=t),r}function In(n,e,t,r){let i=Ha(e,t,r);return n.appendChild(i),i}function Fe(n,e,t){return In(n,"div",e,t)}function kr(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function ia(n,e){e.parentNode.insertBefore(n,e)}function ng(n,e){e.parentNode.insertBefore(n,e.nextSibling)}function $t(n,e){e?n.style.display="block":n.style.display="none"}function cu(n){return n.offsetParent!==null}function uu(n,e){n.style.width=e.toString()+"px"}function Ss(n,e){n.style.height=e.toString()+"px"}function Fi(n){let e=getComputedStyle(n);return n.offsetWidth+Or(e.marginLeft)+Or(e.marginRight)}function _s(n){let e=getComputedStyle(n);return n.offsetHeight+Or(e.marginTop)+Or(e.marginBottom)}function hu(n,e){let t=getComputedStyle(n);uu(n,e-$m(t))}function ho(n,e){let t=getComputedStyle(n);Ss(n,e-eg(t))}function mr(n,e){return Ha("div",n,e)}var $e=class n{constructor(e,t,r){this.x=e,this.y=t,this.z=r}Length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}MultiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}Normalize(){let e=this.Length();return e>0&&this.MultiplyScalar(1/e),this}Offset(e,t){let r=e.Clone().Normalize();return this.x+=r.x*t,this.y+=r.y*t,this.z+=r.z*t,this}Rotate(e,t,r){let i=e.Clone().Normalize(),o=i.x,s=i.y,a=i.z,c=this.x-r.x,l=this.y-r.y,u=this.z-r.z,h=Math.sin(t),f=Math.cos(t);return this.x=-o*(-o*c-s*l-a*u)*(1-f)+c*f+(-a*l+s*u)*h,this.y=-s*(-o*c-s*l-a*u)*(1-f)+l*f+(a*c-o*u)*h,this.z=-a*(-o*c-s*l-a*u)*(1-f)+u*f+(-s*c+o*l)*h,this.x+=r.x,this.y+=r.y,this.z+=r.z,this}Clone(){return new n(this.x,this.y,this.z)}};function Zi(n,e){return pn(n.x,e.x)&&pn(n.y,e.y)&&pn(n.z,e.z)}function rg(n,e){return new $e(n.x+e.x,n.y+e.y,n.z+e.z)}function gr(n,e){return new $e(n.x-e.x,n.y-e.y,n.z-e.z)}function Ur(n,e){return Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}function dd(n,e){return n.x*e.x+n.y*e.y+n.z*e.z}function ig(n,e){let t=n.Clone().Normalize(),r=e.Clone().Normalize();if(Zi(t,r))return 0;let i=dd(t,r);return Math.acos(i)}function Bo(n,e){let t=new $e(0,0,0);return t.x=n.y*e.z-n.z*e.y,t.y=n.z*e.x-n.x*e.z,t.z=n.x*e.y-n.y*e.x,t}function fu(n,e,t){return Math.sqrt(n*n+e*e+t*t)}function fo(n){return new $e(n[0],n[1],n[2])}var ft=class n{constructor(e,t,r){this.r=e,this.g=t,this.b=r}Set(e,t,r){this.r=e,this.g=t,this.b=r}Clone(){return new n(this.r,this.g,this.b)}},di=class n{constructor(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i}Set(e,t,r,i){this.r=e,this.g=t,this.b=r,this.a=i}Clone(){return new n(this.r,this.g,this.b,this.a)}};function vr(n){return parseInt(Math.round(n*255),10)}function oa(n){return n/255}function Ji(n,e,t){return new ft(vr(n),vr(e),vr(t))}function Ts(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Zl(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}function Ar(n){let e=parseInt(n,10).toString(16);for(;e.length<2;)e="0"+e;return e}function pi(n){let e=Ar(n.r),t=Ar(n.g),r=Ar(n.b);return e+t+r}function pd(n){let e=Ar(n.r),t=Ar(n.g),r=Ar(n.b),i=Ar(n.a);return e+t+r+i}function S_(n){if(n.length!==6)return null;let e=parseInt(n.substring(0,2),16),t=parseInt(n.substring(2,4),16),r=parseInt(n.substring(4,6),16);return new ft(e,t,r)}function __(n){if(n.length!==6&&n.length!==8)return null;let e=parseInt(n.substring(0,2),16),t=parseInt(n.substring(2,4),16),r=parseInt(n.substring(4,6),16),i=255;return n.length===8&&(i=parseInt(n.substring(6,8),16)),new di(e,t,r,i)}function T_(n){return new ft(n[0],n[1],n[2])}function sa(n,e){return n.r===e.r&&n.g===e.g&&n.b===e.b}var zo={FixedUpVector:1,FreeOrbit:2},nr={Perspective:1,Orthographic:2},po=class n{constructor(e,t,r,i){this.eye=e,this.center=t,this.up=r,this.fov=i}Clone(){return new n(this.eye.Clone(),this.center.Clone(),this.up.Clone(),this.fov)}};function og(n,e){return Zi(n.eye,e.eye)&&Zi(n.center,e.center)&&Zi(n.up,e.up)&&pn(n.fov,e.fov)}var du=class n{constructor(e,t){this.beg=e,this.end=t}Clone(){return new n(this.beg,this.end)}};function Hy(n,e){let t=Va(n.end,n.beg),r=Va(e,n.beg),i=fd(t,r),o=fd(t,t);if(ta(o))return n.beg.Clone();let s=i/o;return s=Math.max(0,Math.min(1,s)),new on(n.beg.x+s*t.x,n.beg.y+s*t.y)}function sg(n,e){let t=Hy(n,e);return Yl(t,e)}var Ni=class{constructor(){this.name=null,this.mimeType=null,this.buffer=null,this.offset=new on(0,0),this.scale=new on(1,1),this.rotation=0}IsValid(){return this.name!==null&&this.buffer!==null}HasTransformation(){return!Uo(this.offset,new on(0,0))||!Uo(this.scale,new on(1,1))||!pn(this.rotation,0)}IsEqual(e){return!(this.name!==e.name||this.mimeType!==e.mimeType||!Uo(this.offset,e.offset)||!Uo(this.scale,e.scale)||!pn(this.rotation,e.rotation))}};function Wa(n,e){return n===null&&e===null?!0:n===null||e===null?!1:n.IsEqual(e)}var jn={Phong:1,Physical:2},Bn={Model:1,DefaultFace:2,DefaultLine:3},md=class{constructor(e){this.type=e,this.source=Bn.Model,this.name="",this.color=new ft(0,0,0),this.vertexColors=!1}IsEqual(e){return!(this.type!==e.type||this.source!==e.source||this.name!==e.name||!sa(this.color,e.color)||this.vertexColors!==e.vertexColors)}},pu=class extends md{constructor(e){super(e),this.emissive=new ft(0,0,0),this.opacity=1,this.transparent=!1,this.diffuseMap=null,this.bumpMap=null,this.normalMap=null,this.emissiveMap=null,this.alphaTest=0,this.multiplyDiffuseMap=!1}IsEqual(e){return!(!super.IsEqual(e)||!sa(this.emissive,e.emissive)||!pn(this.opacity,e.opacity)||this.transparent!==e.transparent||!Wa(this.diffuseMap,e.diffuseMap)||!Wa(this.bumpMap,e.bumpMap)||!Wa(this.normalMap,e.normalMap)||!Wa(this.emissiveMap,e.emissiveMap)||!pn(this.alphaTest,e.alphaTest)||this.multiplyDiffuseMap!==e.multiplyDiffuseMap)}},yr=class extends pu{constructor(){super(jn.Phong),this.ambient=new ft(0,0,0),this.specular=new ft(0,0,0),this.shininess=0,this.specularMap=null}IsEqual(e){return!(!super.IsEqual(e)||!sa(this.ambient,e.ambient)||!sa(this.specular,e.specular)||!pn(this.shininess,e.shininess)||!Wa(this.specularMap,e.specularMap))}},ja=class extends pu{constructor(){super(jn.Physical),this.metalness=0,this.roughness=1,this.metalnessMap=null}IsEqual(e){return!(!super.IsEqual(e)||!pn(this.metalness,e.metalness)||!pn(this.roughness,e.roughness)||!Wa(this.metalnessMap,e.metalnessMap))}};function M_(n,e){return!(n.name!==e.name||n.mimeType!==e.mimeType||!Uo(n.offset,e.offset)||!Uo(n.scale,e.scale)||!pn(n.rotation,e.rotation))}var gd=class{constructor(){}VertexCount(){return 0}VertexColorCount(){return 0}NormalCount(){return 0}TextureUVCount(){return 0}LineCount(){return 0}LineSegmentCount(){return 0}TriangleCount(){return 0}EnumerateVertices(e){}EnumerateTriangleVertexIndices(e){}EnumerateTriangleVertices(e){}},Ms=class extends gd{constructor(){super(),this.name="",this.propertyGroups=[]}GetName(){return this.name}SetName(e){this.name=e}PropertyGroupCount(){return this.propertyGroups.length}AddPropertyGroup(e){return this.propertyGroups.push(e),this.propertyGroups.length-1}GetPropertyGroup(e){return this.propertyGroups[e]}CloneProperties(e){for(let t of this.propertyGroups)e.AddPropertyGroup(t.Clone())}};var Un=class n extends Ms{constructor(){super(),this.vertices=[],this.vertexColors=[],this.normals=[],this.uvs=[],this.lines=[],this.triangles=[]}VertexCount(){return this.vertices.length}VertexColorCount(){return this.vertexColors.length}NormalCount(){return this.normals.length}TextureUVCount(){return this.uvs.length}LineCount(){return this.lines.length}LineSegmentCount(){let e=0;for(let t of this.lines)e+=t.SegmentCount();return e}TriangleCount(){return this.triangles.length}AddVertex(e){return this.vertices.push(e),this.vertices.length-1}SetVertex(e,t){this.vertices[e]=t}GetVertex(e){return this.vertices[e]}AddVertexColor(e){return this.vertexColors.push(e),this.vertexColors.length-1}SetVertexColor(e,t){this.vertexColors[e]=t}GetVertexColor(e){return this.vertexColors[e]}AddNormal(e){return this.normals.push(e),this.normals.length-1}SetNormal(e,t){this.normals[e]=t}GetNormal(e){return this.normals[e]}AddTextureUV(e){return this.uvs.push(e),this.uvs.length-1}SetTextureUV(e,t){this.uvs[e]=t}GetTextureUV(e){return this.uvs[e]}AddLine(e){return this.lines.push(e),this.lines.length-1}GetLine(e){return this.lines[e]}AddTriangle(e){return this.triangles.push(e),this.triangles.length-1}GetTriangle(e){return this.triangles[e]}EnumerateVertices(e){for(let t of this.vertices)e(t)}EnumerateTriangleVertexIndices(e){for(let t of this.triangles)e(t.v0,t.v1,t.v2)}EnumerateTriangleVertices(e){for(let t of this.triangles){let r=this.vertices[t.v0],i=this.vertices[t.v1],o=this.vertices[t.v2];e(r,i,o)}}Clone(){let e=new n;e.SetName(this.GetName()),this.CloneProperties(e);for(let t=0;t<this.VertexCount();t++){let r=this.GetVertex(t);e.AddVertex(r.Clone())}for(let t=0;t<this.VertexColorCount();t++){let r=this.GetVertexColor(t);e.AddVertexColor(r.Clone())}for(let t=0;t<this.NormalCount();t++){let r=this.GetNormal(t);e.AddNormal(r.Clone())}for(let t=0;t<this.TextureUVCount();t++){let r=this.GetTextureUV(t);e.AddTextureUV(r.Clone())}for(let t=0;t<this.LineCount();t++){let r=this.GetLine(t);e.AddLine(r.Clone())}for(let t=0;t<this.TriangleCount();t++){let r=this.GetTriangle(t);e.AddTriangle(r.Clone())}return e}};var Nn=class n{constructor(e,t,r){this.v0=e,this.v1=t,this.v2=r,this.c0=null,this.c1=null,this.c2=null,this.n0=null,this.n1=null,this.n2=null,this.u0=null,this.u1=null,this.u2=null,this.mat=null,this.curve=null}HasVertices(){return this.v0!==null&&this.v1!==null&&this.v2!==null}HasVertexColors(){return this.c0!==null&&this.c1!==null&&this.c2!==null}HasNormals(){return this.n0!==null&&this.n1!==null&&this.n2!==null}HasTextureUVs(){return this.u0!==null&&this.u1!==null&&this.u2!==null}SetVertices(e,t,r){return this.v0=e,this.v1=t,this.v2=r,this}SetVertexColors(e,t,r){return this.c0=e,this.c1=t,this.c2=r,this}SetNormals(e,t,r){return this.n0=e,this.n1=t,this.n2=r,this}SetTextureUVs(e,t,r){return this.u0=e,this.u1=t,this.u2=r,this}SetMaterial(e){return this.mat=e,this}SetCurve(e){return this.curve=e,this}Clone(){let e=new n(this.v0,this.v1,this.v2);return e.SetVertexColors(this.c0,this.c1,this.c2),e.SetNormals(this.n0,this.n1,this.n2),e.SetTextureUVs(this.u0,this.u1,this.u2),e.SetMaterial(this.mat),e.SetCurve(this.curve),e}};var pb="163";var KR=0,E_=1,YR=2;var xT=1,ZR=2,da=3,vo=0,wr=1,br=2,$a=0,Lu=1,A_=2,C_=3,I_=4,JR=5,ic=100,QR=101,$R=102,eP=103,tP=104,nP=200,rP=201,iP=202,oP=203,Rx=204,Px=205,sP=206,aP=207,lP=208,cP=209,uP=210,hP=211,fP=212,dP=213,pP=214,mP=0,gP=1,vP=2,zg=3,yP=4,xP=5,bP=6,wP=7,mv=0,SP=1,_P=2,el=0,TP=1,MP=2,EP=3,AP=4,CP=5,IP=6,RP=7,R_="attached",PP="detached",bT=300,zu=301,Gu=302,Ad=303,Dx=304,gv=306,qn=1e3,Qn=1001,Vu=1002,Zr=1003,DP=1004;var ag=1005;var Cr=1006,Wy=1007;var eo=1008;var tl=1009,FP=1010,NP=1011,wT=1012,ST=1013,Hu=1014,pa=1015,Gg=1016,_T=1017,TT=1018,zd=1020,LP=35902,OP=1021,kP=1022,jo=1023,UP=1024,BP=1025,Ou=1026,Cd=1027,zP=1028,MT=1029,GP=1030,ET=1031,AT=1033,jy=33776,qy=33777,Xy=33778,Ky=33779,P_=35840,D_=35841,F_=35842,N_=35843,CT=36196,L_=37492,O_=37496,k_=37808,U_=37809,B_=37810,z_=37811,G_=37812,V_=37813,H_=37814,W_=37815,j_=37816,q_=37817,X_=37818,K_=37819,Y_=37820,Z_=37821,Yy=36492,J_=36494,Q_=36495,VP=36283,$_=36284,e1=36285,t1=36286;var Vg=2300,Hg=2301,Zy=2302,n1=2400,r1=2401,i1=2402,HP=2500;var WP=3200,jP=3201,vv=0,qP=1,Qa="",Ln="srgb",Oi="srgb-linear",mb="display-p3",yv="display-p3-linear",Wg="linear",zn="srgb",jg="rec709",qg="p3";var mu=7680;var o1=519,XP=512,KP=513,YP=514,IT=515,ZP=516,JP=517,QP=518,$P=519,s1=35044;var a1="300 es",ma=2e3,Xg=2001,rl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let o=i.indexOf(t);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let r=this._listeners[e.type];if(r!==void 0){e.target=this;let i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}},ei=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],l1=1234567,ku=Math.PI/180,Wu=180/Math.PI;function xa(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ei[n&255]+ei[n>>8&255]+ei[n>>16&255]+ei[n>>24&255]+"-"+ei[e&255]+ei[e>>8&255]+"-"+ei[e>>16&15|64]+ei[e>>24&255]+"-"+ei[t&63|128]+ei[t>>8&255]+"-"+ei[t>>16&255]+ei[t>>24&255]+ei[r&255]+ei[r>>8&255]+ei[r>>16&255]+ei[r>>24&255]).toLowerCase()}function Yr(n,e,t){return Math.max(e,Math.min(t,n))}function gb(n,e){return(n%e+e)%e}function e2(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function t2(n,e,t){return n!==e?(t-n)/(e-n):0}function _d(n,e,t){return(1-t)*n+t*e}function n2(n,e,t,r){return _d(n,e,1-Math.exp(-t*r))}function r2(n,e=1){return e-Math.abs(gb(n,e*2)-e)}function i2(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function o2(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function s2(n,e){return n+Math.floor(Math.random()*(e-n+1))}function a2(n,e){return n+Math.random()*(e-n)}function l2(n){return n*(.5-Math.random())}function c2(n){n!==void 0&&(l1=n);let e=l1+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function u2(n){return n*ku}function h2(n){return n*Wu}function f2(n){return(n&n-1)===0&&n!==0}function d2(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function p2(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function m2(n,e,t,r,i){let o=Math.cos,s=Math.sin,a=o(t/2),c=s(t/2),l=o((e+r)/2),u=s((e+r)/2),h=o((e-r)/2),f=s((e-r)/2),d=o((r-e)/2),m=s((r-e)/2);switch(i){case"XYX":n.set(a*u,c*h,c*f,a*l);break;case"YZY":n.set(c*f,a*u,c*h,a*l);break;case"ZXZ":n.set(c*h,c*f,a*u,a*l);break;case"XZX":n.set(a*u,c*m,c*d,a*l);break;case"YXY":n.set(c*d,a*u,c*m,a*l);break;case"ZYZ":n.set(c*m,c*d,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Du(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function mi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var ir={DEG2RAD:ku,RAD2DEG:Wu,generateUUID:xa,clamp:Yr,euclideanModulo:gb,mapLinear:e2,inverseLerp:t2,lerp:_d,damp:n2,pingpong:r2,smoothstep:i2,smootherstep:o2,randInt:s2,randFloat:a2,randFloatSpread:l2,seededRandom:c2,degToRad:u2,radToDeg:h2,isPowerOfTwo:f2,ceilPowerOfTwo:d2,floorPowerOfTwo:p2,setQuaternionFromProperEuler:m2,normalize:mi,denormalize:Du},Ne=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Yr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},kt=class n{constructor(e,t,r,i,o,s,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,s,a,c,l)}set(e,t,r,i,o,s,a,c,l){let u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=o,u[5]=c,u[6]=r,u[7]=s,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[3],c=r[6],l=r[1],u=r[4],h=r[7],f=r[2],d=r[5],m=r[8],v=i[0],p=i[3],g=i[6],x=i[1],y=i[4],b=i[7],S=i[2],_=i[5],M=i[8];return o[0]=s*v+a*x+c*S,o[3]=s*p+a*y+c*_,o[6]=s*g+a*b+c*M,o[1]=l*v+u*x+h*S,o[4]=l*p+u*y+h*_,o[7]=l*g+u*b+h*M,o[2]=f*v+d*x+m*S,o[5]=f*p+d*y+m*_,o[8]=f*g+d*b+m*M,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-r*o*u+r*a*c+i*o*l-i*s*c}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*s-a*l,f=a*c-u*o,d=l*o-s*c,m=t*h+r*f+i*d;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let v=1/m;return e[0]=h*v,e[1]=(i*l-u*r)*v,e[2]=(a*r-i*s)*v,e[3]=f*v,e[4]=(u*t-i*c)*v,e[5]=(i*o-a*t)*v,e[6]=d*v,e[7]=(r*c-l*t)*v,e[8]=(s*t-r*o)*v,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,o,s,a){let c=Math.cos(o),l=Math.sin(o);return this.set(r*c,r*l,-r*(c*s+l*a)+s+e,-i*l,i*c,-i*(-l*s+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Jy.makeScale(e,t)),this}rotate(e){return this.premultiply(Jy.makeRotation(-e)),this}translate(e,t){return this.premultiply(Jy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},Jy=new kt;function RT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Id(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function g2(){let n=Id("canvas");return n.style.display="block",n}var c1={};function v2(n){n in c1||(c1[n]=!0,console.warn(n))}var u1=new kt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),h1=new kt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),lg={[Oi]:{transfer:Wg,primaries:jg,toReference:n=>n,fromReference:n=>n},[Ln]:{transfer:zn,primaries:jg,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[yv]:{transfer:Wg,primaries:qg,toReference:n=>n.applyMatrix3(h1),fromReference:n=>n.applyMatrix3(u1)},[mb]:{transfer:zn,primaries:qg,toReference:n=>n.convertSRGBToLinear().applyMatrix3(h1),fromReference:n=>n.applyMatrix3(u1).convertLinearToSRGB()}},y2=new Set([Oi,yv]),Tn={enabled:!0,_workingColorSpace:Oi,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!y2.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;let r=lg[e].toReference,i=lg[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return lg[n].primaries},getTransfer:function(n){return n===Qa?Wg:lg[n].transfer}};function Uu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Qy(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var gu,ju=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{gu===void 0&&(gu=Id("canvas")),gu.width=e.width,gu.height=e.height;let r=gu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=gu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Id("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=Uu(o[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Uu(t[r]/255)*255):t[r]=Uu(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},x2=0,Kg=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:x2++}),this.uuid=xa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push($y(i[s].image)):o.push($y(i[s]))}else o=$y(i);r.url=o}return t||(e.images[this.uuid]=r),r}};function $y(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?ju.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var b2=0,zr=class n extends rl{constructor(e=n.DEFAULT_IMAGE,t=n.DEFAULT_MAPPING,r=Qn,i=Qn,o=Cr,s=eo,a=jo,c=tl,l=n.DEFAULT_ANISOTROPY,u=Qa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:b2++}),this.uuid=xa(),this.name="",this.source=new Kg(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Ne(0,0),this.repeat=new Ne(1,1),this.center=new Ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==bT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case qn:e.x=e.x-Math.floor(e.x);break;case Qn:e.x=e.x<0?0:1;break;case Vu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case qn:e.y=e.y-Math.floor(e.y);break;case Qn:e.y=e.y<0?0:1;break;case Vu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};zr.DEFAULT_IMAGE=null;zr.DEFAULT_MAPPING=bT;zr.DEFAULT_ANISOTROPY=1;var dn=class n{constructor(e=0,t=0,r=0,i=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,o,c=e.elements,l=c[0],u=c[4],h=c[8],f=c[1],d=c[5],m=c[9],v=c[2],p=c[6],g=c[10];if(Math.abs(u-f)<.01&&Math.abs(h-v)<.01&&Math.abs(m-p)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+v)<.1&&Math.abs(m+p)<.1&&Math.abs(l+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let y=(l+1)/2,b=(d+1)/2,S=(g+1)/2,_=(u+f)/4,M=(h+v)/4,A=(m+p)/4;return y>b&&y>S?y<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(y),i=_/r,o=M/r):b>S?b<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(b),r=_/i,o=A/i):S<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(S),r=M/o,i=A/o),this.set(r,i,o,t),this}let x=Math.sqrt((p-m)*(p-m)+(h-v)*(h-v)+(f-u)*(f-u));return Math.abs(x)<.001&&(x=1),this.x=(p-m)/x,this.y=(h-v)/x,this.z=(f-u)/x,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Fx=class extends rl{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new dn(0,0,e,t),this.scissorTest=!1,this.viewport=new dn(0,0,e,t);let i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Cr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},r);let o=new zr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];let s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Kg(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ga=class extends Fx{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}},Yg=class extends zr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=Qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Nx=class extends zr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=Qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Xn=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,o,s,a){let c=r[i+0],l=r[i+1],u=r[i+2],h=r[i+3],f=o[s+0],d=o[s+1],m=o[s+2],v=o[s+3];if(a===0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=m,e[t+3]=v;return}if(h!==v||c!==f||l!==d||u!==m){let p=1-a,g=c*f+l*d+u*m+h*v,x=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let S=Math.sqrt(y),_=Math.atan2(S,g*x);p=Math.sin(p*_)/S,a=Math.sin(a*_)/S}let b=a*x;if(c=c*p+f*b,l=l*p+d*b,u=u*p+m*b,h=h*p+v*b,p===1-a){let S=1/Math.sqrt(c*c+l*l+u*u+h*h);c*=S,l*=S,u*=S,h*=S}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,o,s){let a=r[i],c=r[i+1],l=r[i+2],u=r[i+3],h=o[s],f=o[s+1],d=o[s+2],m=o[s+3];return e[t]=a*m+u*h+c*d-l*f,e[t+1]=c*m+u*f+l*h-a*d,e[t+2]=l*m+u*d+a*f-c*h,e[t+3]=u*m-a*h-c*f-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,c=Math.sin,l=a(r/2),u=a(i/2),h=a(o/2),f=c(r/2),d=c(i/2),m=c(o/2);switch(s){case"XYZ":this._x=f*u*h+l*d*m,this._y=l*d*h-f*u*m,this._z=l*u*m+f*d*h,this._w=l*u*h-f*d*m;break;case"YXZ":this._x=f*u*h+l*d*m,this._y=l*d*h-f*u*m,this._z=l*u*m-f*d*h,this._w=l*u*h+f*d*m;break;case"ZXY":this._x=f*u*h-l*d*m,this._y=l*d*h+f*u*m,this._z=l*u*m+f*d*h,this._w=l*u*h-f*d*m;break;case"ZYX":this._x=f*u*h-l*d*m,this._y=l*d*h+f*u*m,this._z=l*u*m-f*d*h,this._w=l*u*h+f*d*m;break;case"YZX":this._x=f*u*h+l*d*m,this._y=l*d*h+f*u*m,this._z=l*u*m-f*d*h,this._w=l*u*h-f*d*m;break;case"XZY":this._x=f*u*h-l*d*m,this._y=l*d*h-f*u*m,this._z=l*u*m+f*d*h,this._w=l*u*h+f*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],o=t[8],s=t[1],a=t[5],c=t[9],l=t[2],u=t[6],h=t[10],f=r+a+h;if(f>0){let d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-c)*d,this._y=(o-l)*d,this._z=(s-i)*d}else if(r>a&&r>h){let d=2*Math.sqrt(1+r-a-h);this._w=(u-c)/d,this._x=.25*d,this._y=(i+s)/d,this._z=(o+l)/d}else if(a>h){let d=2*Math.sqrt(1+a-r-h);this._w=(o-l)/d,this._x=(i+s)/d,this._y=.25*d,this._z=(c+u)/d}else{let d=2*Math.sqrt(1+h-r-a);this._w=(s-i)/d,this._x=(o+l)/d,this._y=(c+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yr(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,o=e._z,s=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=r*u+s*a+i*l-o*c,this._y=i*u+s*c+o*a-r*l,this._z=o*u+s*l+r*c-i*a,this._w=s*u-r*a-i*c-o*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,o=this._z,s=this._w,a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;let c=1-a*a;if(c<=Number.EPSILON){let d=1-t;return this._w=d*s+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*o+t*this._z,this.normalize(),this}let l=Math.sqrt(c),u=Math.atan2(l,a),h=Math.sin((1-t)*u)/l,f=Math.sin(t*u)/l;return this._w=s*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=o*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},he=class n{constructor(e=0,t=0,r=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(f1.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(f1.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*i,this.y=o[1]*t+o[4]*r+o[7]*i,this.z=o[2]*t+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*t+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*t+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*t+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,c=e.w,l=2*(s*i-a*r),u=2*(a*t-o*i),h=2*(o*r-s*t);return this.x=t+c*l+s*h-a*u,this.y=r+c*u+a*l-o*h,this.z=i+c*h+o*u-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i,this.y=o[1]*t+o[5]*r+o[9]*i,this.z=o[2]*t+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,o=e.z,s=t.x,a=t.y,c=t.z;return this.x=i*c-o*a,this.y=o*s-r*c,this.z=r*a-i*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ex.copy(this).projectOnVector(e),this.sub(ex)}reflect(e){return this.sub(ex.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(Yr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},ex=new he,f1=new Xn,vi=class{constructor(e=new he(1/0,1/0,1/0),t=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Go.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Go.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Go.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0){let o=r.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Go):Go.fromBufferAttribute(o,s),Go.applyMatrix4(e.matrixWorld),this.expandByPoint(Go);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),cg.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),cg.copy(r.boundingBox)),cg.applyMatrix4(e.matrixWorld),this.union(cg)}let i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Go),Go.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(vd),ug.subVectors(this.max,vd),vu.subVectors(e.a,vd),yu.subVectors(e.b,vd),xu.subVectors(e.c,vd),qa.subVectors(yu,vu),Xa.subVectors(xu,yu),Jl.subVectors(vu,xu);let t=[0,-qa.z,qa.y,0,-Xa.z,Xa.y,0,-Jl.z,Jl.y,qa.z,0,-qa.x,Xa.z,0,-Xa.x,Jl.z,0,-Jl.x,-qa.y,qa.x,0,-Xa.y,Xa.x,0,-Jl.y,Jl.x,0];return!tx(t,vu,yu,xu,ug)||(t=[1,0,0,0,1,0,0,0,1],!tx(t,vu,yu,xu,ug))?!1:(hg.crossVectors(qa,Xa),t=[hg.x,hg.y,hg.z],tx(t,vu,yu,xu,ug))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Go).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Go).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(aa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),aa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),aa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),aa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),aa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),aa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),aa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),aa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(aa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},aa=[new he,new he,new he,new he,new he,new he,new he,new he],Go=new he,cg=new vi,vu=new he,yu=new he,xu=new he,qa=new he,Xa=new he,Jl=new he,vd=new he,ug=new he,hg=new he,Ql=new he;function tx(n,e,t,r,i){for(let o=0,s=n.length-3;o<=s;o+=3){Ql.fromArray(n,o);let a=i.x*Math.abs(Ql.x)+i.y*Math.abs(Ql.y)+i.z*Math.abs(Ql.z),c=e.dot(Ql),l=t.dot(Ql),u=r.dot(Ql);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}var w2=new vi,yd=new he,nx=new he,qo=class{constructor(e=new he,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):w2.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;yd.subVectors(e,this.center);let t=yd.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(yd,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(nx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(yd.copy(e.center).add(nx)),this.expandByPoint(yd.copy(e.center).sub(nx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},la=new he,rx=new he,fg=new he,Ka=new he,ix=new he,dg=new he,ox=new he,ac=class{constructor(e=new he,t=new he(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,la)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=la.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(la.copy(this.origin).addScaledVector(this.direction,t),la.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){rx.copy(e).add(t).multiplyScalar(.5),fg.copy(t).sub(e).normalize(),Ka.copy(this.origin).sub(rx);let o=e.distanceTo(t)*.5,s=-this.direction.dot(fg),a=Ka.dot(this.direction),c=-Ka.dot(fg),l=Ka.lengthSq(),u=Math.abs(1-s*s),h,f,d,m;if(u>0)if(h=s*c-a,f=s*a-c,m=o*u,h>=0)if(f>=-m)if(f<=m){let v=1/u;h*=v,f*=v,d=h*(h+s*f+2*a)+f*(s*h+f+2*c)+l}else f=o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*c)+l;else f=-o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*c)+l;else f<=-m?(h=Math.max(0,-(-s*o+a)),f=h>0?-o:Math.min(Math.max(-o,-c),o),d=-h*h+f*(f+2*c)+l):f<=m?(h=0,f=Math.min(Math.max(-o,-c),o),d=f*(f+2*c)+l):(h=Math.max(0,-(s*o+a)),f=h>0?o:Math.min(Math.max(-o,-c),o),d=-h*h+f*(f+2*c)+l);else f=s>0?-o:o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*c)+l;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(rx).addScaledVector(fg,f),d}intersectSphere(e,t){la.subVectors(e.center,this.origin);let r=la.dot(this.direction),i=la.dot(la)-r*r,o=e.radius*e.radius;if(i>o)return null;let s=Math.sqrt(o-i),a=r-s,c=r+s;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,o,s,a,c,l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return l>=0?(r=(e.min.x-f.x)*l,i=(e.max.x-f.x)*l):(r=(e.max.x-f.x)*l,i=(e.min.x-f.x)*l),u>=0?(o=(e.min.y-f.y)*u,s=(e.max.y-f.y)*u):(o=(e.max.y-f.y)*u,s=(e.min.y-f.y)*u),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),h>=0?(a=(e.min.z-f.z)*h,c=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,c=(e.min.z-f.z)*h),r>c||a>i)||((a>r||r!==r)&&(r=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,la)!==null}intersectTriangle(e,t,r,i,o){ix.subVectors(t,e),dg.subVectors(r,e),ox.crossVectors(ix,dg);let s=this.direction.dot(ox),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Ka.subVectors(this.origin,e);let c=a*this.direction.dot(dg.crossVectors(Ka,dg));if(c<0)return null;let l=a*this.direction.dot(ix.cross(Ka));if(l<0||c+l>s)return null;let u=-a*Ka.dot(ox);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},tt=class n{constructor(e,t,r,i,o,s,a,c,l,u,h,f,d,m,v,p){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,s,a,c,l,u,h,f,d,m,v,p)}set(e,t,r,i,o,s,a,c,l,u,h,f,d,m,v,p){let g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=o,g[5]=s,g[9]=a,g[13]=c,g[2]=l,g[6]=u,g[10]=h,g[14]=f,g[3]=d,g[7]=m,g[11]=v,g[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/bu.setFromMatrixColumn(e,0).length(),o=1/bu.setFromMatrixColumn(e,1).length(),s=1/bu.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),c=Math.cos(i),l=Math.sin(i),u=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){let f=s*u,d=s*h,m=a*u,v=a*h;t[0]=c*u,t[4]=-c*h,t[8]=l,t[1]=d+m*l,t[5]=f-v*l,t[9]=-a*c,t[2]=v-f*l,t[6]=m+d*l,t[10]=s*c}else if(e.order==="YXZ"){let f=c*u,d=c*h,m=l*u,v=l*h;t[0]=f+v*a,t[4]=m*a-d,t[8]=s*l,t[1]=s*h,t[5]=s*u,t[9]=-a,t[2]=d*a-m,t[6]=v+f*a,t[10]=s*c}else if(e.order==="ZXY"){let f=c*u,d=c*h,m=l*u,v=l*h;t[0]=f-v*a,t[4]=-s*h,t[8]=m+d*a,t[1]=d+m*a,t[5]=s*u,t[9]=v-f*a,t[2]=-s*l,t[6]=a,t[10]=s*c}else if(e.order==="ZYX"){let f=s*u,d=s*h,m=a*u,v=a*h;t[0]=c*u,t[4]=m*l-d,t[8]=f*l+v,t[1]=c*h,t[5]=v*l+f,t[9]=d*l-m,t[2]=-l,t[6]=a*c,t[10]=s*c}else if(e.order==="YZX"){let f=s*c,d=s*l,m=a*c,v=a*l;t[0]=c*u,t[4]=v-f*h,t[8]=m*h+d,t[1]=h,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=d*h+m,t[10]=f-v*h}else if(e.order==="XZY"){let f=s*c,d=s*l,m=a*c,v=a*l;t[0]=c*u,t[4]=-h,t[8]=l*u,t[1]=f*h+v,t[5]=s*u,t[9]=d*h-m,t[2]=m*h-d,t[6]=a*u,t[10]=v*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(S2,e,_2)}lookAt(e,t,r){let i=this.elements;return Qi.subVectors(e,t),Qi.lengthSq()===0&&(Qi.z=1),Qi.normalize(),Ya.crossVectors(r,Qi),Ya.lengthSq()===0&&(Math.abs(r.z)===1?Qi.x+=1e-4:Qi.z+=1e-4,Qi.normalize(),Ya.crossVectors(r,Qi)),Ya.normalize(),pg.crossVectors(Qi,Ya),i[0]=Ya.x,i[4]=pg.x,i[8]=Qi.x,i[1]=Ya.y,i[5]=pg.y,i[9]=Qi.y,i[2]=Ya.z,i[6]=pg.z,i[10]=Qi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[4],c=r[8],l=r[12],u=r[1],h=r[5],f=r[9],d=r[13],m=r[2],v=r[6],p=r[10],g=r[14],x=r[3],y=r[7],b=r[11],S=r[15],_=i[0],M=i[4],A=i[8],w=i[12],T=i[1],D=i[5],N=i[9],P=i[13],E=i[2],U=i[6],k=i[10],B=i[14],O=i[3],q=i[7],ne=i[11],ae=i[15];return o[0]=s*_+a*T+c*E+l*O,o[4]=s*M+a*D+c*U+l*q,o[8]=s*A+a*N+c*k+l*ne,o[12]=s*w+a*P+c*B+l*ae,o[1]=u*_+h*T+f*E+d*O,o[5]=u*M+h*D+f*U+d*q,o[9]=u*A+h*N+f*k+d*ne,o[13]=u*w+h*P+f*B+d*ae,o[2]=m*_+v*T+p*E+g*O,o[6]=m*M+v*D+p*U+g*q,o[10]=m*A+v*N+p*k+g*ne,o[14]=m*w+v*P+p*B+g*ae,o[3]=x*_+y*T+b*E+S*O,o[7]=x*M+y*D+b*U+S*q,o[11]=x*A+y*N+b*k+S*ne,o[15]=x*w+y*P+b*B+S*ae,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],c=e[9],l=e[13],u=e[2],h=e[6],f=e[10],d=e[14],m=e[3],v=e[7],p=e[11],g=e[15];return m*(+o*c*h-i*l*h-o*a*f+r*l*f+i*a*d-r*c*d)+v*(+t*c*d-t*l*f+o*s*f-i*s*d+i*l*u-o*c*u)+p*(+t*l*h-t*a*d-o*s*h+r*s*d+o*a*u-r*l*u)+g*(-i*a*u-t*c*h+t*a*f+i*s*h-r*s*f+r*c*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],d=e[11],m=e[12],v=e[13],p=e[14],g=e[15],x=h*p*l-v*f*l+v*c*d-a*p*d-h*c*g+a*f*g,y=m*f*l-u*p*l-m*c*d+s*p*d+u*c*g-s*f*g,b=u*v*l-m*h*l+m*a*d-s*v*d-u*a*g+s*h*g,S=m*h*c-u*v*c-m*a*f+s*v*f+u*a*p-s*h*p,_=t*x+r*y+i*b+o*S;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let M=1/_;return e[0]=x*M,e[1]=(v*f*o-h*p*o-v*i*d+r*p*d+h*i*g-r*f*g)*M,e[2]=(a*p*o-v*c*o+v*i*l-r*p*l-a*i*g+r*c*g)*M,e[3]=(h*c*o-a*f*o-h*i*l+r*f*l+a*i*d-r*c*d)*M,e[4]=y*M,e[5]=(u*p*o-m*f*o+m*i*d-t*p*d-u*i*g+t*f*g)*M,e[6]=(m*c*o-s*p*o-m*i*l+t*p*l+s*i*g-t*c*g)*M,e[7]=(s*f*o-u*c*o+u*i*l-t*f*l-s*i*d+t*c*d)*M,e[8]=b*M,e[9]=(m*h*o-u*v*o-m*r*d+t*v*d+u*r*g-t*h*g)*M,e[10]=(s*v*o-m*a*o+m*r*l-t*v*l-s*r*g+t*a*g)*M,e[11]=(u*a*o-s*h*o-u*r*l+t*h*l+s*r*d-t*a*d)*M,e[12]=S*M,e[13]=(u*v*i-m*h*i+m*r*f-t*v*f-u*r*p+t*h*p)*M,e[14]=(m*a*i-s*v*i-m*r*c+t*v*c+s*r*p-t*a*p)*M,e[15]=(s*h*i-u*a*i+u*r*c-t*h*c-s*r*f+t*a*f)*M,this}scale(e){let t=this.elements,r=e.x,i=e.y,o=e.z;return t[0]*=r,t[4]*=i,t[8]*=o,t[1]*=r,t[5]*=i,t[9]*=o,t[2]*=r,t[6]*=i,t[10]*=o,t[3]*=r,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),o=1-r,s=e.x,a=e.y,c=e.z,l=o*s,u=o*a;return this.set(l*s+r,l*a-i*c,l*c+i*a,0,l*a+i*c,u*a+r,u*c-i*s,0,l*c-i*a,u*c+i*s,o*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,o=t._x,s=t._y,a=t._z,c=t._w,l=o+o,u=s+s,h=a+a,f=o*l,d=o*u,m=o*h,v=s*u,p=s*h,g=a*h,x=c*l,y=c*u,b=c*h,S=r.x,_=r.y,M=r.z;return i[0]=(1-(v+g))*S,i[1]=(d+b)*S,i[2]=(m-y)*S,i[3]=0,i[4]=(d-b)*_,i[5]=(1-(f+g))*_,i[6]=(p+x)*_,i[7]=0,i[8]=(m+y)*M,i[9]=(p-x)*M,i[10]=(1-(f+v))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,o=bu.set(i[0],i[1],i[2]).length(),s=bu.set(i[4],i[5],i[6]).length(),a=bu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Vo.copy(this);let l=1/o,u=1/s,h=1/a;return Vo.elements[0]*=l,Vo.elements[1]*=l,Vo.elements[2]*=l,Vo.elements[4]*=u,Vo.elements[5]*=u,Vo.elements[6]*=u,Vo.elements[8]*=h,Vo.elements[9]*=h,Vo.elements[10]*=h,t.setFromRotationMatrix(Vo),r.x=o,r.y=s,r.z=a,this}makePerspective(e,t,r,i,o,s,a=ma){let c=this.elements,l=2*o/(t-e),u=2*o/(r-i),h=(t+e)/(t-e),f=(r+i)/(r-i),d,m;if(a===ma)d=-(s+o)/(s-o),m=-2*s*o/(s-o);else if(a===Xg)d=-s/(s-o),m=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=h,c[12]=0,c[1]=0,c[5]=u,c[9]=f,c[13]=0,c[2]=0,c[6]=0,c[10]=d,c[14]=m,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,o,s,a=ma){let c=this.elements,l=1/(t-e),u=1/(r-i),h=1/(s-o),f=(t+e)*l,d=(r+i)*u,m,v;if(a===ma)m=(s+o)*h,v=-2*h;else if(a===Xg)m=o*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-d,c[2]=0,c[6]=0,c[10]=v,c[14]=-m,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},bu=new he,Vo=new tt,S2=new he(0,0,0),_2=new he(1,1,1),Ya=new he,pg=new he,Qi=new he,d1=new tt,p1=new Xn,$n=class n{constructor(e=0,t=0,r=0,i=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,o=i[0],s=i[4],a=i[8],c=i[1],l=i[5],u=i[9],h=i[2],f=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Yr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Yr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Yr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Yr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Yr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Yr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return d1.makeRotationFromQuaternion(e),this.setFromRotationMatrix(d1,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return p1.setFromEuler(this),this.setFromQuaternion(p1,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};$n.DEFAULT_ORDER="XYZ";var Rd=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},T2=0,m1=new he,wu=new Xn,ca=new tt,mg=new he,xd=new he,M2=new he,E2=new Xn,g1=new he(1,0,0),v1=new he(0,1,0),y1=new he(0,0,1),x1={type:"added"},A2={type:"removed"},Su={type:"childadded",child:null},sx={type:"childremoved",child:null},an=class n extends rl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:T2++}),this.uuid=xa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new he,t=new $n,r=new Xn,i=new he(1,1,1);function o(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new tt},normalMatrix:{value:new kt}}),this.matrix=new tt,this.matrixWorld=new tt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Rd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return wu.setFromAxisAngle(e,t),this.quaternion.multiply(wu),this}rotateOnWorldAxis(e,t){return wu.setFromAxisAngle(e,t),this.quaternion.premultiply(wu),this}rotateX(e){return this.rotateOnAxis(g1,e)}rotateY(e){return this.rotateOnAxis(v1,e)}rotateZ(e){return this.rotateOnAxis(y1,e)}translateOnAxis(e,t){return m1.copy(e).applyQuaternion(this.quaternion),this.position.add(m1.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(g1,e)}translateY(e){return this.translateOnAxis(v1,e)}translateZ(e){return this.translateOnAxis(y1,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ca.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?mg.copy(e):mg.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),xd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ca.lookAt(xd,mg,this.up):ca.lookAt(mg,xd,this.up),this.quaternion.setFromRotationMatrix(ca),i&&(ca.extractRotation(i.matrixWorld),wu.setFromRotationMatrix(ca),this.quaternion.premultiply(wu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(x1),Su.child=e,this.dispatchEvent(Su),Su.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(A2),sx.child=e,this.dispatchEvent(sx),sx.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ca.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ca.multiply(e.parent.matrixWorld)),e.applyMatrix4(ca),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(x1),Su.child=e,this.dispatchEvent(Su),Su.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);let i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xd,e,M2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xd,E2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++){let o=t[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let o=0,s=i.length;o<s;o++){let a=i[o];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let c=a.shapes;if(Array.isArray(c))for(let l=0,u=c.length;l<u;l++){let h=c[l];o(e.shapes,h)}else o(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let c=0,l=this.material.length;c<l;c++)a.push(o(e.materials,this.material[c]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){let c=this.animations[a];i.animations.push(o(e.animations,c))}}if(t){let a=s(e.geometries),c=s(e.materials),l=s(e.textures),u=s(e.images),h=s(e.shapes),f=s(e.skeletons),d=s(e.animations),m=s(e.nodes);a.length>0&&(r.geometries=a),c.length>0&&(r.materials=c),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),d.length>0&&(r.animations=d),m.length>0&&(r.nodes=m)}return r.object=i,r;function s(a){let c=[];for(let l in a){let u=a[l];delete u.metadata,c.push(u)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};an.DEFAULT_UP=new he(0,1,0);an.DEFAULT_MATRIX_AUTO_UPDATE=!0;an.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Ho=new he,ua=new he,ax=new he,ha=new he,_u=new he,Tu=new he,b1=new he,lx=new he,cx=new he,ux=new he,sc=class n{constructor(e=new he,t=new he,r=new he){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ho.subVectors(e,t),i.cross(Ho);let o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,r,i,o){Ho.subVectors(i,t),ua.subVectors(r,t),ax.subVectors(e,t);let s=Ho.dot(Ho),a=Ho.dot(ua),c=Ho.dot(ax),l=ua.dot(ua),u=ua.dot(ax),h=s*l-a*a;if(h===0)return o.set(0,0,0),null;let f=1/h,d=(l*c-a*u)*f,m=(s*u-a*c)*f;return o.set(1-d-m,m,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ha)===null?!1:ha.x>=0&&ha.y>=0&&ha.x+ha.y<=1}static getInterpolation(e,t,r,i,o,s,a,c){return this.getBarycoord(e,t,r,i,ha)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,ha.x),c.addScaledVector(s,ha.y),c.addScaledVector(a,ha.z),c)}static isFrontFacing(e,t,r,i){return Ho.subVectors(r,t),ua.subVectors(e,t),Ho.cross(ua).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ho.subVectors(this.c,this.b),ua.subVectors(this.a,this.b),Ho.cross(ua).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,o){return n.getInterpolation(e,this.a,this.b,this.c,t,r,i,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,o=this.c,s,a;_u.subVectors(i,r),Tu.subVectors(o,r),lx.subVectors(e,r);let c=_u.dot(lx),l=Tu.dot(lx);if(c<=0&&l<=0)return t.copy(r);cx.subVectors(e,i);let u=_u.dot(cx),h=Tu.dot(cx);if(u>=0&&h<=u)return t.copy(i);let f=c*h-u*l;if(f<=0&&c>=0&&u<=0)return s=c/(c-u),t.copy(r).addScaledVector(_u,s);ux.subVectors(e,o);let d=_u.dot(ux),m=Tu.dot(ux);if(m>=0&&d<=m)return t.copy(o);let v=d*l-c*m;if(v<=0&&l>=0&&m<=0)return a=l/(l-m),t.copy(r).addScaledVector(Tu,a);let p=u*m-d*h;if(p<=0&&h-u>=0&&d-m>=0)return b1.subVectors(o,i),a=(h-u)/(h-u+(d-m)),t.copy(i).addScaledVector(b1,a);let g=1/(p+v+f);return s=v*g,a=f*g,t.copy(r).addScaledVector(_u,s).addScaledVector(Tu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},PT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Za={h:0,s:0,l:0},gg={h:0,s:0,l:0};function hx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var Ke=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){let i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ln){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Tn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Tn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Tn.workingColorSpace){if(e=gb(e,1),t=Yr(t,0,1),r=Yr(r,0,1),t===0)this.r=this.g=this.b=r;else{let o=r<=.5?r*(1+t):r+t-r*t,s=2*r-o;this.r=hx(s,o,e+1/3),this.g=hx(s,o,e),this.b=hx(s,o,e-1/3)}return Tn.toWorkingColorSpace(this,i),this}setStyle(e,t=Ln){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ln){let r=PT[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Uu(e.r),this.g=Uu(e.g),this.b=Uu(e.b),this}copyLinearToSRGB(e){return this.r=Qy(e.r),this.g=Qy(e.g),this.b=Qy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ln){return Tn.fromWorkingColorSpace(ti.copy(this),e),Math.round(Yr(ti.r*255,0,255))*65536+Math.round(Yr(ti.g*255,0,255))*256+Math.round(Yr(ti.b*255,0,255))}getHexString(e=Ln){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Tn.workingColorSpace){Tn.fromWorkingColorSpace(ti.copy(this),t);let r=ti.r,i=ti.g,o=ti.b,s=Math.max(r,i,o),a=Math.min(r,i,o),c,l,u=(a+s)/2;if(a===s)c=0,l=0;else{let h=s-a;switch(l=u<=.5?h/(s+a):h/(2-s-a),s){case r:c=(i-o)/h+(i<o?6:0);break;case i:c=(o-r)/h+2;break;case o:c=(r-i)/h+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Tn.workingColorSpace){return Tn.fromWorkingColorSpace(ti.copy(this),t),e.r=ti.r,e.g=ti.g,e.b=ti.b,e}getStyle(e=Ln){Tn.fromWorkingColorSpace(ti.copy(this),e);let t=ti.r,r=ti.g,i=ti.b;return e!==Ln?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Za),this.setHSL(Za.h+e,Za.s+t,Za.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Za),e.getHSL(gg);let r=_d(Za.h,gg.h,t),i=_d(Za.s,gg.s,t),o=_d(Za.l,gg.l,t);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*t+o[3]*r+o[6]*i,this.g=o[1]*t+o[4]*r+o[7]*i,this.b=o[2]*t+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},ti=new Ke;Ke.NAMES=PT;var C2=0,Xo=class extends rl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:C2++}),this.uuid=xa(),this.name="",this.type="Material",this.blending=Lu,this.side=vo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Rx,this.blendDst=Px,this.blendEquation=ic,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ke(0,0,0),this.blendAlpha=0,this.depthFunc=zg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=o1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=mu,this.stencilZFail=mu,this.stencilZPass=mu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Lu&&(r.blending=this.blending),this.side!==vo&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Rx&&(r.blendSrc=this.blendSrc),this.blendDst!==Px&&(r.blendDst=this.blendDst),this.blendEquation!==ic&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==zg&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==o1&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==mu&&(r.stencilFail=this.stencilFail),this.stencilZFail!==mu&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==mu&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){let s=[];for(let a in o){let c=o[a];delete c.metadata,s.push(c)}return s}if(t){let o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},yo=class extends Xo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $n,this.combine=mv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var xr=new he,vg=new Ne,Jr=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=s1,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=pa,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return v2("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)vg.fromBufferAttribute(this,t),vg.applyMatrix3(e),this.setXY(t,vg.x,vg.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyMatrix3(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyMatrix4(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.applyNormalMatrix(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)xr.fromBufferAttribute(this,t),xr.transformDirection(e),this.setXYZ(t,xr.x,xr.y,xr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Du(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=mi(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Du(t,this.array)),t}setX(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Du(t,this.array)),t}setY(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Du(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Du(t,this.array)),t}setW(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),r=mi(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),r=mi(r,this.array),i=mi(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),r=mi(r,this.array),i=mi(i,this.array),o=mi(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==s1&&(e.usage=this.usage),e}};var qu=class extends Jr{constructor(e,t,r){super(new Uint16Array(e),t,r)}};var Zg=class extends Jr{constructor(e,t,r){super(new Uint32Array(e),t,r)}};var Ye=class extends Jr{constructor(e,t,r){super(new Float32Array(e),t,r)}},I2=0,mo=new tt,fx=new an,Mu=new he,$i=new vi,bd=new vi,Br=new he,Yt=class n extends rl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:I2++}),this.uuid=xa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(RT(e)?Zg:qu)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let o=new kt().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return mo.makeRotationFromQuaternion(e),this.applyMatrix4(mo),this}rotateX(e){return mo.makeRotationX(e),this.applyMatrix4(mo),this}rotateY(e){return mo.makeRotationY(e),this.applyMatrix4(mo),this}rotateZ(e){return mo.makeRotationZ(e),this.applyMatrix4(mo),this}translate(e,t,r){return mo.makeTranslation(e,t,r),this.applyMatrix4(mo),this}scale(e,t,r){return mo.makeScale(e,t,r),this.applyMatrix4(mo),this}lookAt(e){return fx.lookAt(e),fx.updateMatrix(),this.applyMatrix4(fx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mu).negate(),this.translate(Mu.x,Mu.y,Mu.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Ye(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let o=t[r];$i.setFromBufferAttribute(o),this.morphTargetsRelative?(Br.addVectors(this.boundingBox.min,$i.min),this.boundingBox.expandByPoint(Br),Br.addVectors(this.boundingBox.max,$i.max),this.boundingBox.expandByPoint(Br)):(this.boundingBox.expandByPoint($i.min),this.boundingBox.expandByPoint($i.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new qo);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new he,1/0);return}if(e){let r=this.boundingSphere.center;if($i.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];bd.setFromBufferAttribute(a),this.morphTargetsRelative?(Br.addVectors($i.min,bd.min),$i.expandByPoint(Br),Br.addVectors($i.max,bd.max),$i.expandByPoint(Br)):($i.expandByPoint(bd.min),$i.expandByPoint(bd.max))}$i.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)Br.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(Br));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Br.fromBufferAttribute(a,l),c&&(Mu.fromBufferAttribute(e,l),Br.add(Mu)),i=Math.max(i,r.distanceToSquared(Br))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=t.position,i=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Jr(new Float32Array(4*r.count),4));let s=this.getAttribute("tangent"),a=[],c=[];for(let A=0;A<r.count;A++)a[A]=new he,c[A]=new he;let l=new he,u=new he,h=new he,f=new Ne,d=new Ne,m=new Ne,v=new he,p=new he;function g(A,w,T){l.fromBufferAttribute(r,A),u.fromBufferAttribute(r,w),h.fromBufferAttribute(r,T),f.fromBufferAttribute(o,A),d.fromBufferAttribute(o,w),m.fromBufferAttribute(o,T),u.sub(l),h.sub(l),d.sub(f),m.sub(f);let D=1/(d.x*m.y-m.x*d.y);isFinite(D)&&(v.copy(u).multiplyScalar(m.y).addScaledVector(h,-d.y).multiplyScalar(D),p.copy(h).multiplyScalar(d.x).addScaledVector(u,-m.x).multiplyScalar(D),a[A].add(v),a[w].add(v),a[T].add(v),c[A].add(p),c[w].add(p),c[T].add(p))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let A=0,w=x.length;A<w;++A){let T=x[A],D=T.start,N=T.count;for(let P=D,E=D+N;P<E;P+=3)g(e.getX(P+0),e.getX(P+1),e.getX(P+2))}let y=new he,b=new he,S=new he,_=new he;function M(A){S.fromBufferAttribute(i,A),_.copy(S);let w=a[A];y.copy(w),y.sub(S.multiplyScalar(S.dot(w))).normalize(),b.crossVectors(_,w);let D=b.dot(c[A])<0?-1:1;s.setXYZW(A,y.x,y.y,y.z,D)}for(let A=0,w=x.length;A<w;++A){let T=x[A],D=T.start,N=T.count;for(let P=D,E=D+N;P<E;P+=3)M(e.getX(P+0)),M(e.getX(P+1)),M(e.getX(P+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Jr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,d=r.count;f<d;f++)r.setXYZ(f,0,0,0);let i=new he,o=new he,s=new he,a=new he,c=new he,l=new he,u=new he,h=new he;if(e)for(let f=0,d=e.count;f<d;f+=3){let m=e.getX(f+0),v=e.getX(f+1),p=e.getX(f+2);i.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,p),u.subVectors(s,o),h.subVectors(i,o),u.cross(h),a.fromBufferAttribute(r,m),c.fromBufferAttribute(r,v),l.fromBufferAttribute(r,p),a.add(u),c.add(u),l.add(u),r.setXYZ(m,a.x,a.y,a.z),r.setXYZ(v,c.x,c.y,c.z),r.setXYZ(p,l.x,l.y,l.z)}else for(let f=0,d=t.count;f<d;f+=3)i.fromBufferAttribute(t,f+0),o.fromBufferAttribute(t,f+1),s.fromBufferAttribute(t,f+2),u.subVectors(s,o),h.subVectors(i,o),u.cross(h),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Br.fromBufferAttribute(e,t),Br.normalize(),e.setXYZ(t,Br.x,Br.y,Br.z)}toNonIndexed(){function e(a,c){let l=a.array,u=a.itemSize,h=a.normalized,f=new l.constructor(c.length*u),d=0,m=0;for(let v=0,p=c.length;v<p;v++){a.isInterleavedBufferAttribute?d=c[v]*a.data.stride+a.offset:d=c[v]*u;for(let g=0;g<u;g++)f[m++]=l[d++]}return new Jr(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,r=this.index.array,i=this.attributes;for(let a in i){let c=i[a],l=e(c,r);t.setAttribute(a,l)}let o=this.morphAttributes;for(let a in o){let c=[],l=o[a];for(let u=0,h=l.length;u<h;u++){let f=l[u],d=e(f,r);c.push(d)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,c=s.length;a<c;a++){let l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let c in r){let l=r[c];e.data.attributes[c]=l.toJSON(e.data)}let i={},o=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],u=[];for(let h=0,f=l.length;h<f;h++){let d=l[h];u.push(d.toJSON(e.data))}u.length>0&&(i[c]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let u=i[l];this.setAttribute(l,u.clone(t))}let o=e.morphAttributes;for(let l in o){let u=[],h=o[l];for(let f=0,d=h.length;f<d;f++)u.push(h[f].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,u=s.length;l<u;l++){let h=s[l];this.addGroup(h.start,h.count,h.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},w1=new tt,$l=new ac,yg=new qo,S1=new he,Eu=new he,Au=new he,Cu=new he,dx=new he,xg=new he,bg=new Ne,wg=new Ne,Sg=new Ne,_1=new he,T1=new he,M1=new he,_g=new he,Tg=new he,hn=class extends an{constructor(e=new Yt,t=new yo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){let a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let a=this.morphTargetInfluences;if(o&&a){xg.set(0,0,0);for(let c=0,l=o.length;c<l;c++){let u=a[c],h=o[c];u!==0&&(dx.fromBufferAttribute(h,e),s?xg.addScaledVector(dx,u):xg.addScaledVector(dx.sub(t),u))}t.add(xg)}return t}raycast(e,t){let r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),yg.copy(r.boundingSphere),yg.applyMatrix4(o),$l.copy(e.ray).recast(e.near),!(yg.containsPoint($l.origin)===!1&&($l.intersectSphere(yg,S1)===null||$l.origin.distanceToSquared(S1)>(e.far-e.near)**2))&&(w1.copy(o).invert(),$l.copy(e.ray).applyMatrix4(w1),!(r.boundingBox!==null&&$l.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,$l)))}_computeIntersections(e,t,r){let i,o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,l=o.attributes.uv,u=o.attributes.uv1,h=o.attributes.normal,f=o.groups,d=o.drawRange;if(a!==null)if(Array.isArray(s))for(let m=0,v=f.length;m<v;m++){let p=f[m],g=s[p.materialIndex],x=Math.max(p.start,d.start),y=Math.min(a.count,Math.min(p.start+p.count,d.start+d.count));for(let b=x,S=y;b<S;b+=3){let _=a.getX(b),M=a.getX(b+1),A=a.getX(b+2);i=Mg(this,g,e,r,l,u,h,_,M,A),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=p.materialIndex,t.push(i))}}else{let m=Math.max(0,d.start),v=Math.min(a.count,d.start+d.count);for(let p=m,g=v;p<g;p+=3){let x=a.getX(p),y=a.getX(p+1),b=a.getX(p+2);i=Mg(this,s,e,r,l,u,h,x,y,b),i&&(i.faceIndex=Math.floor(p/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(s))for(let m=0,v=f.length;m<v;m++){let p=f[m],g=s[p.materialIndex],x=Math.max(p.start,d.start),y=Math.min(c.count,Math.min(p.start+p.count,d.start+d.count));for(let b=x,S=y;b<S;b+=3){let _=b,M=b+1,A=b+2;i=Mg(this,g,e,r,l,u,h,_,M,A),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=p.materialIndex,t.push(i))}}else{let m=Math.max(0,d.start),v=Math.min(c.count,d.start+d.count);for(let p=m,g=v;p<g;p+=3){let x=p,y=p+1,b=p+2;i=Mg(this,s,e,r,l,u,h,x,y,b),i&&(i.faceIndex=Math.floor(p/3),t.push(i))}}}};function R2(n,e,t,r,i,o,s,a){let c;if(e.side===wr?c=r.intersectTriangle(s,o,i,!0,a):c=r.intersectTriangle(i,o,s,e.side===vo,a),c===null)return null;Tg.copy(a),Tg.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(Tg);return l<t.near||l>t.far?null:{distance:l,point:Tg.clone(),object:n}}function Mg(n,e,t,r,i,o,s,a,c,l){n.getVertexPosition(a,Eu),n.getVertexPosition(c,Au),n.getVertexPosition(l,Cu);let u=R2(n,e,t,r,Eu,Au,Cu,_g);if(u){i&&(bg.fromBufferAttribute(i,a),wg.fromBufferAttribute(i,c),Sg.fromBufferAttribute(i,l),u.uv=sc.getInterpolation(_g,Eu,Au,Cu,bg,wg,Sg,new Ne)),o&&(bg.fromBufferAttribute(o,a),wg.fromBufferAttribute(o,c),Sg.fromBufferAttribute(o,l),u.uv1=sc.getInterpolation(_g,Eu,Au,Cu,bg,wg,Sg,new Ne)),s&&(_1.fromBufferAttribute(s,a),T1.fromBufferAttribute(s,c),M1.fromBufferAttribute(s,l),u.normal=sc.getInterpolation(_g,Eu,Au,Cu,_1,T1,M1,new he),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));let h={a,b:c,c:l,normal:new he,materialIndex:0};sc.getNormal(Eu,Au,Cu,h.normal),u.face=h}return u}var lc=class n extends Yt{constructor(e=1,t=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};let a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);let c=[],l=[],u=[],h=[],f=0,d=0;m("z","y","x",-1,-1,r,t,e,s,o,0),m("z","y","x",1,-1,r,t,-e,s,o,1),m("x","z","y",1,1,e,r,t,i,s,2),m("x","z","y",1,-1,e,r,-t,i,s,3),m("x","y","z",1,-1,e,t,r,i,o,4),m("x","y","z",-1,-1,e,t,-r,i,o,5),this.setIndex(c),this.setAttribute("position",new Ye(l,3)),this.setAttribute("normal",new Ye(u,3)),this.setAttribute("uv",new Ye(h,2));function m(v,p,g,x,y,b,S,_,M,A,w){let T=b/M,D=S/A,N=b/2,P=S/2,E=_/2,U=M+1,k=A+1,B=0,O=0,q=new he;for(let ne=0;ne<k;ne++){let ae=ne*D-P;for(let ye=0;ye<U;ye++){let fe=ye*T-N;q[v]=fe*x,q[p]=ae*y,q[g]=E,l.push(q.x,q.y,q.z),q[v]=0,q[p]=0,q[g]=_>0?1:-1,u.push(q.x,q.y,q.z),h.push(ye/M),h.push(1-ne/A),B+=1}}for(let ne=0;ne<A;ne++)for(let ae=0;ae<M;ae++){let ye=f+ae+U*ne,fe=f+ae+U*(ne+1),L=f+(ae+1)+U*(ne+1),C=f+(ae+1)+U*ne;c.push(ye,fe,C),c.push(fe,L,C),O+=6}a.addGroup(d,O,w),d+=O,f+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Xu(n){let e={};for(let t in n){e[t]={};for(let r in n[t]){let i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function gi(n){let e={};for(let t=0;t<n.length;t++){let r=Xu(n[t]);for(let i in r)e[i]=r[i]}return e}function P2(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function DT(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Tn.workingColorSpace}var D2={clone:Xu,merge:gi},F2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,N2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,As=class extends Xo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=F2,this.fragmentShader=N2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xu(e.uniforms),this.uniformsGroups=P2(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},Jg=class extends an{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tt,this.projectionMatrix=new tt,this.projectionMatrixInverse=new tt,this.coordinateSystem=ma}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Ja=new he,E1=new Ne,A1=new Ne,Gn=class extends Jg{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Wu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(ku*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Wu*2*Math.atan(Math.tan(ku*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Ja.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ja.x,Ja.y).multiplyScalar(-e/Ja.z),Ja.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ja.x,Ja.y).multiplyScalar(-e/Ja.z)}getViewSize(e,t){return this.getViewBounds(e,E1,A1),t.subVectors(A1,E1)}setViewOffset(e,t,r,i,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(ku*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,o=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let c=s.fullWidth,l=s.fullHeight;o+=s.offsetX*i/c,t-=s.offsetY*r/l,i*=s.width/c,r*=s.height/l}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Iu=-90,Ru=1,Lx=class extends an{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;let i=new Gn(Iu,Ru,e,t);i.layers=this.layers,this.add(i);let o=new Gn(Iu,Ru,e,t);o.layers=this.layers,this.add(o);let s=new Gn(Iu,Ru,e,t);s.layers=this.layers,this.add(s);let a=new Gn(Iu,Ru,e,t);a.layers=this.layers,this.add(a);let c=new Gn(Iu,Ru,e,t);c.layers=this.layers,this.add(c);let l=new Gn(Iu,Ru,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[r,i,o,s,a,c]=t;for(let l of t)this.remove(l);if(e===ma)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Xg)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,c,l,u]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;let v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,o),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,c),e.setRenderTarget(r,4,i),e.render(t,l),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(h,f,d),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}},Pd=class extends zr{constructor(e,t,r,i,o,s,a,c,l,u){e=e!==void 0?e:[],t=t!==void 0?t:zu,super(e,t,r,i,o,s,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Ox=class extends ga{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Pd(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Cr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new lc(5,5,5),o=new As({name:"CubemapFromEquirect",uniforms:Xu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:wr,blending:$a});o.uniforms.tEquirect.value=t;let s=new hn(i,o),a=t.minFilter;return t.minFilter===eo&&(t.minFilter=Cr),new Lx(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(o)}},px=new he,L2=new he,O2=new kt,Wo=class{constructor(e=new he(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=px.subVectors(r,t).cross(L2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let r=e.delta(px),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(e.start).addScaledVector(r,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||O2.getNormalMatrix(e),i=this.coplanarPoint(px).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},ec=new qo,Eg=new he,Dd=class{constructor(e=new Wo,t=new Wo,r=new Wo,i=new Wo,o=new Wo,s=new Wo){this.planes=[e,t,r,i,o,s]}set(e,t,r,i,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=ma){let r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],c=i[3],l=i[4],u=i[5],h=i[6],f=i[7],d=i[8],m=i[9],v=i[10],p=i[11],g=i[12],x=i[13],y=i[14],b=i[15];if(r[0].setComponents(c-o,f-l,p-d,b-g).normalize(),r[1].setComponents(c+o,f+l,p+d,b+g).normalize(),r[2].setComponents(c+s,f+u,p+m,b+x).normalize(),r[3].setComponents(c-s,f-u,p-m,b-x).normalize(),r[4].setComponents(c-a,f-h,p-v,b-y).normalize(),t===ma)r[5].setComponents(c+a,f+h,p+v,b+y).normalize();else if(t===Xg)r[5].setComponents(a,h,v,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ec.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ec.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ec)}intersectsSprite(e){return ec.center.set(0,0,0),ec.radius=.7071067811865476,ec.applyMatrix4(e.matrixWorld),this.intersectsSphere(ec)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(Eg.x=i.normal.x>0?e.max.x:e.min.x,Eg.y=i.normal.y>0?e.max.y:e.min.y,Eg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Eg)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function FT(){let n=null,e=!1,t=null,r=null;function i(o,s){t(o,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function k2(n){let e=new WeakMap;function t(a,c){let l=a.array,u=a.usage,h=l.byteLength,f=n.createBuffer();n.bindBuffer(c,f),n.bufferData(c,l,u),a.onUploadCallback();let d;if(l instanceof Float32Array)d=n.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?d=n.HALF_FLOAT:d=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)d=n.SHORT;else if(l instanceof Uint32Array)d=n.UNSIGNED_INT;else if(l instanceof Int32Array)d=n.INT;else if(l instanceof Int8Array)d=n.BYTE;else if(l instanceof Uint8Array)d=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)d=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:f,type:d,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:h}}function r(a,c,l){let u=c.array,h=c._updateRange,f=c.updateRanges;if(n.bindBuffer(l,a),h.count===-1&&f.length===0&&n.bufferSubData(l,0,u),f.length!==0){for(let d=0,m=f.length;d<m;d++){let v=f[d];n.bufferSubData(l,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}c.clearUpdateRanges()}h.count!==-1&&(n.bufferSubData(l,h.offset*u.BYTES_PER_ELEMENT,u,h.offset,h.count),h.count=-1),c.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function s(a,c){if(a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(l.buffer,a,c),l.version=a.version}}return{get:i,remove:o,update:s}}var Ku=class n extends Yt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let o=e/2,s=t/2,a=Math.floor(r),c=Math.floor(i),l=a+1,u=c+1,h=e/a,f=t/c,d=[],m=[],v=[],p=[];for(let g=0;g<u;g++){let x=g*f-s;for(let y=0;y<l;y++){let b=y*h-o;m.push(b,-x,0),v.push(0,0,1),p.push(y/a),p.push(1-g/c)}}for(let g=0;g<c;g++)for(let x=0;x<a;x++){let y=x+l*g,b=x+l*(g+1),S=x+1+l*(g+1),_=x+1+l*g;d.push(y,b,_),d.push(b,S,_)}this.setIndex(d),this.setAttribute("position",new Ye(m,3)),this.setAttribute("normal",new Ye(v,3)),this.setAttribute("uv",new Ye(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}},U2=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,B2=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,z2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,G2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,V2=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,H2=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,W2=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,j2=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,q2=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,X2=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,K2=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Y2=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Z2=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,J2=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Q2=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$2=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,eD=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,tD=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,nD=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rD=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,iD=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,oD=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,sD=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,aD=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,lD=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cD=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,uD=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,hD=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,fD=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dD=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,pD="gl_FragColor = linearToOutputTexel( gl_FragColor );",mD=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,gD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,vD=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,yD=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xD=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,bD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wD=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,SD=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_D=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,TD=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,MD=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ED=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,AD=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,CD=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ID=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,RD=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,PD=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,DD=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,FD=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ND=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,LD=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,OD=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,kD=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,UD=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,BD=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,zD=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,GD=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,VD=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,HD=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WD=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,jD=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,qD=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,XD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,KD=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,YD=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ZD=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,JD=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,QD=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$D=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,eF=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,tF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,nF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,rF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,iF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,aF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,cF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,uF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,hF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,fF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,wF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,SF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,_F=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,TF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,MF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,EF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,AF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,CF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,IF=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,RF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,PF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, newPeak * vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,DF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,FF=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,NF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,LF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,OF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,kF=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,UF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,BF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,GF=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,VF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HF=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jF=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,qF=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,XF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,KF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,YF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,JF=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,QF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$F=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eN=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tN=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nN=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,rN=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iN=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oN=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,sN=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aN=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lN=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,cN=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uN=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hN=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fN=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,dN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pN=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mN=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gN=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,en={alphahash_fragment:U2,alphahash_pars_fragment:B2,alphamap_fragment:z2,alphamap_pars_fragment:G2,alphatest_fragment:V2,alphatest_pars_fragment:H2,aomap_fragment:W2,aomap_pars_fragment:j2,batching_pars_vertex:q2,batching_vertex:X2,begin_vertex:K2,beginnormal_vertex:Y2,bsdfs:Z2,iridescence_fragment:J2,bumpmap_pars_fragment:Q2,clipping_planes_fragment:$2,clipping_planes_pars_fragment:eD,clipping_planes_pars_vertex:tD,clipping_planes_vertex:nD,color_fragment:rD,color_pars_fragment:iD,color_pars_vertex:oD,color_vertex:sD,common:aD,cube_uv_reflection_fragment:lD,defaultnormal_vertex:cD,displacementmap_pars_vertex:uD,displacementmap_vertex:hD,emissivemap_fragment:fD,emissivemap_pars_fragment:dD,colorspace_fragment:pD,colorspace_pars_fragment:mD,envmap_fragment:gD,envmap_common_pars_fragment:vD,envmap_pars_fragment:yD,envmap_pars_vertex:xD,envmap_physical_pars_fragment:PD,envmap_vertex:bD,fog_vertex:wD,fog_pars_vertex:SD,fog_fragment:_D,fog_pars_fragment:TD,gradientmap_pars_fragment:MD,lightmap_fragment:ED,lightmap_pars_fragment:AD,lights_lambert_fragment:CD,lights_lambert_pars_fragment:ID,lights_pars_begin:RD,lights_toon_fragment:DD,lights_toon_pars_fragment:FD,lights_phong_fragment:ND,lights_phong_pars_fragment:LD,lights_physical_fragment:OD,lights_physical_pars_fragment:kD,lights_fragment_begin:UD,lights_fragment_maps:BD,lights_fragment_end:zD,logdepthbuf_fragment:GD,logdepthbuf_pars_fragment:VD,logdepthbuf_pars_vertex:HD,logdepthbuf_vertex:WD,map_fragment:jD,map_pars_fragment:qD,map_particle_fragment:XD,map_particle_pars_fragment:KD,metalnessmap_fragment:YD,metalnessmap_pars_fragment:ZD,morphinstance_vertex:JD,morphcolor_vertex:QD,morphnormal_vertex:$D,morphtarget_pars_vertex:eF,morphtarget_vertex:tF,normal_fragment_begin:nF,normal_fragment_maps:rF,normal_pars_fragment:iF,normal_pars_vertex:oF,normal_vertex:sF,normalmap_pars_fragment:aF,clearcoat_normal_fragment_begin:lF,clearcoat_normal_fragment_maps:cF,clearcoat_pars_fragment:uF,iridescence_pars_fragment:hF,opaque_fragment:fF,packing:dF,premultiplied_alpha_fragment:pF,project_vertex:mF,dithering_fragment:gF,dithering_pars_fragment:vF,roughnessmap_fragment:yF,roughnessmap_pars_fragment:xF,shadowmap_pars_fragment:bF,shadowmap_pars_vertex:wF,shadowmap_vertex:SF,shadowmask_pars_fragment:_F,skinbase_vertex:TF,skinning_pars_vertex:MF,skinning_vertex:EF,skinnormal_vertex:AF,specularmap_fragment:CF,specularmap_pars_fragment:IF,tonemapping_fragment:RF,tonemapping_pars_fragment:PF,transmission_fragment:DF,transmission_pars_fragment:FF,uv_pars_fragment:NF,uv_pars_vertex:LF,uv_vertex:OF,worldpos_vertex:kF,background_vert:UF,background_frag:BF,backgroundCube_vert:zF,backgroundCube_frag:GF,cube_vert:VF,cube_frag:HF,depth_vert:WF,depth_frag:jF,distanceRGBA_vert:qF,distanceRGBA_frag:XF,equirect_vert:KF,equirect_frag:YF,linedashed_vert:ZF,linedashed_frag:JF,meshbasic_vert:QF,meshbasic_frag:$F,meshlambert_vert:eN,meshlambert_frag:tN,meshmatcap_vert:nN,meshmatcap_frag:rN,meshnormal_vert:iN,meshnormal_frag:oN,meshphong_vert:sN,meshphong_frag:aN,meshphysical_vert:lN,meshphysical_frag:cN,meshtoon_vert:uN,meshtoon_frag:hN,points_vert:fN,points_frag:dN,shadow_vert:pN,shadow_frag:mN,sprite_vert:gN,sprite_frag:vN},Ze={common:{diffuse:{value:new Ke(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new kt}},envmap:{envMap:{value:null},envMapRotation:{value:new kt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new kt},normalScale:{value:new Ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0},uvTransform:{value:new kt}},sprite:{diffuse:{value:new Ke(16777215)},opacity:{value:1},center:{value:new Ne(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}}},Es={basic:{uniforms:gi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.fog]),vertexShader:en.meshbasic_vert,fragmentShader:en.meshbasic_frag},lambert:{uniforms:gi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new Ke(0)}}]),vertexShader:en.meshlambert_vert,fragmentShader:en.meshlambert_frag},phong:{uniforms:gi([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,Ze.lights,{emissive:{value:new Ke(0)},specular:{value:new Ke(1118481)},shininess:{value:30}}]),vertexShader:en.meshphong_vert,fragmentShader:en.meshphong_frag},standard:{uniforms:gi([Ze.common,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.roughnessmap,Ze.metalnessmap,Ze.fog,Ze.lights,{emissive:{value:new Ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:en.meshphysical_vert,fragmentShader:en.meshphysical_frag},toon:{uniforms:gi([Ze.common,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.gradientmap,Ze.fog,Ze.lights,{emissive:{value:new Ke(0)}}]),vertexShader:en.meshtoon_vert,fragmentShader:en.meshtoon_frag},matcap:{uniforms:gi([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,{matcap:{value:null}}]),vertexShader:en.meshmatcap_vert,fragmentShader:en.meshmatcap_frag},points:{uniforms:gi([Ze.points,Ze.fog]),vertexShader:en.points_vert,fragmentShader:en.points_frag},dashed:{uniforms:gi([Ze.common,Ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:en.linedashed_vert,fragmentShader:en.linedashed_frag},depth:{uniforms:gi([Ze.common,Ze.displacementmap]),vertexShader:en.depth_vert,fragmentShader:en.depth_frag},normal:{uniforms:gi([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,{opacity:{value:1}}]),vertexShader:en.meshnormal_vert,fragmentShader:en.meshnormal_frag},sprite:{uniforms:gi([Ze.sprite,Ze.fog]),vertexShader:en.sprite_vert,fragmentShader:en.sprite_frag},background:{uniforms:{uvTransform:{value:new kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:en.background_vert,fragmentShader:en.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new kt}},vertexShader:en.backgroundCube_vert,fragmentShader:en.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:en.cube_vert,fragmentShader:en.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:en.equirect_vert,fragmentShader:en.equirect_frag},distanceRGBA:{uniforms:gi([Ze.common,Ze.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:en.distanceRGBA_vert,fragmentShader:en.distanceRGBA_frag},shadow:{uniforms:gi([Ze.lights,Ze.fog,{color:{value:new Ke(0)},opacity:{value:1}}]),vertexShader:en.shadow_vert,fragmentShader:en.shadow_frag}};Es.physical={uniforms:gi([Es.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new kt},clearcoatNormalScale:{value:new Ne(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new kt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new kt},sheen:{value:0},sheenColor:{value:new Ke(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new kt},transmissionSamplerSize:{value:new Ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new kt},attenuationDistance:{value:0},attenuationColor:{value:new Ke(0)},specularColor:{value:new Ke(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new kt},anisotropyVector:{value:new Ne},anisotropyMap:{value:null},anisotropyMapTransform:{value:new kt}}]),vertexShader:en.meshphysical_vert,fragmentShader:en.meshphysical_frag};var Ag={r:0,b:0,g:0},tc=new $n,yN=new tt;function xN(n,e,t,r,i,o,s){let a=new Ke(0),c=o===!0?0:1,l,u,h=null,f=0,d=null;function m(p,g){let x=!1,y=g.isScene===!0?g.background:null;y&&y.isTexture&&(y=(g.backgroundBlurriness>0?t:e).get(y)),y===null?v(a,c):y&&y.isColor&&(v(y,1),x=!0);let b=n.xr.getEnvironmentBlendMode();b==="additive"?r.buffers.color.setClear(0,0,0,1,s):b==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||y.mapping===gv)?(u===void 0&&(u=new hn(new lc(1,1,1),new As({name:"BackgroundCubeMaterial",uniforms:Xu(Es.backgroundCube.uniforms),vertexShader:Es.backgroundCube.vertexShader,fragmentShader:Es.backgroundCube.fragmentShader,side:wr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,_,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),tc.copy(g.backgroundRotation),tc.x*=-1,tc.y*=-1,tc.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(tc.y*=-1,tc.z*=-1),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(yN.makeRotationFromEuler(tc)),u.material.toneMapped=Tn.getTransfer(y.colorSpace)!==zn,(h!==y||f!==y.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,h=y,f=y.version,d=n.toneMapping),u.layers.enableAll(),p.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new hn(new Ku(2,2),new As({name:"BackgroundMaterial",uniforms:Xu(Es.background.uniforms),vertexShader:Es.background.vertexShader,fragmentShader:Es.background.fragmentShader,side:vo,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=Tn.getTransfer(y.colorSpace)!==zn,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(h!==y||f!==y.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,h=y,f=y.version,d=n.toneMapping),l.layers.enableAll(),p.unshift(l,l.geometry,l.material,0,0,null))}function v(p,g){p.getRGB(Ag,DT(n)),r.buffers.color.setClear(Ag.r,Ag.g,Ag.b,g,s)}return{getClearColor:function(){return a},setClearColor:function(p,g=1){a.set(p),c=g,v(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(p){c=p,v(a,c)},render:m}}function bN(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null),o=i,s=!1;function a(T,D,N,P,E){let U=!1,k=h(P,N,D);o!==k&&(o=k,l(o.object)),U=d(T,P,N,E),U&&m(T,P,N,E),E!==null&&e.update(E,n.ELEMENT_ARRAY_BUFFER),(U||s)&&(s=!1,b(T,D,N,P),E!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(E).buffer))}function c(){return n.createVertexArray()}function l(T){return n.bindVertexArray(T)}function u(T){return n.deleteVertexArray(T)}function h(T,D,N){let P=N.wireframe===!0,E=r[T.id];E===void 0&&(E={},r[T.id]=E);let U=E[D.id];U===void 0&&(U={},E[D.id]=U);let k=U[P];return k===void 0&&(k=f(c()),U[P]=k),k}function f(T){let D=[],N=[],P=[];for(let E=0;E<t;E++)D[E]=0,N[E]=0,P[E]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:N,attributeDivisors:P,object:T,attributes:{},index:null}}function d(T,D,N,P){let E=o.attributes,U=D.attributes,k=0,B=N.getAttributes();for(let O in B)if(B[O].location>=0){let ne=E[O],ae=U[O];if(ae===void 0&&(O==="instanceMatrix"&&T.instanceMatrix&&(ae=T.instanceMatrix),O==="instanceColor"&&T.instanceColor&&(ae=T.instanceColor)),ne===void 0||ne.attribute!==ae||ae&&ne.data!==ae.data)return!0;k++}return o.attributesNum!==k||o.index!==P}function m(T,D,N,P){let E={},U=D.attributes,k=0,B=N.getAttributes();for(let O in B)if(B[O].location>=0){let ne=U[O];ne===void 0&&(O==="instanceMatrix"&&T.instanceMatrix&&(ne=T.instanceMatrix),O==="instanceColor"&&T.instanceColor&&(ne=T.instanceColor));let ae={};ae.attribute=ne,ne&&ne.data&&(ae.data=ne.data),E[O]=ae,k++}o.attributes=E,o.attributesNum=k,o.index=P}function v(){let T=o.newAttributes;for(let D=0,N=T.length;D<N;D++)T[D]=0}function p(T){g(T,0)}function g(T,D){let N=o.newAttributes,P=o.enabledAttributes,E=o.attributeDivisors;N[T]=1,P[T]===0&&(n.enableVertexAttribArray(T),P[T]=1),E[T]!==D&&(n.vertexAttribDivisor(T,D),E[T]=D)}function x(){let T=o.newAttributes,D=o.enabledAttributes;for(let N=0,P=D.length;N<P;N++)D[N]!==T[N]&&(n.disableVertexAttribArray(N),D[N]=0)}function y(T,D,N,P,E,U,k){k===!0?n.vertexAttribIPointer(T,D,N,E,U):n.vertexAttribPointer(T,D,N,P,E,U)}function b(T,D,N,P){v();let E=P.attributes,U=N.getAttributes(),k=D.defaultAttributeValues;for(let B in U){let O=U[B];if(O.location>=0){let q=E[B];if(q===void 0&&(B==="instanceMatrix"&&T.instanceMatrix&&(q=T.instanceMatrix),B==="instanceColor"&&T.instanceColor&&(q=T.instanceColor)),q!==void 0){let ne=q.normalized,ae=q.itemSize,ye=e.get(q);if(ye===void 0)continue;let fe=ye.buffer,L=ye.type,C=ye.bytesPerElement,R=L===n.INT||L===n.UNSIGNED_INT||q.gpuType===ST;if(q.isInterleavedBufferAttribute){let I=q.data,j=I.stride,Z=q.offset;if(I.isInstancedInterleavedBuffer){for(let J=0;J<O.locationSize;J++)g(O.location+J,I.meshPerAttribute);T.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=I.meshPerAttribute*I.count)}else for(let J=0;J<O.locationSize;J++)p(O.location+J);n.bindBuffer(n.ARRAY_BUFFER,fe);for(let J=0;J<O.locationSize;J++)y(O.location+J,ae/O.locationSize,L,ne,j*C,(Z+ae/O.locationSize*J)*C,R)}else{if(q.isInstancedBufferAttribute){for(let I=0;I<O.locationSize;I++)g(O.location+I,q.meshPerAttribute);T.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let I=0;I<O.locationSize;I++)p(O.location+I);n.bindBuffer(n.ARRAY_BUFFER,fe);for(let I=0;I<O.locationSize;I++)y(O.location+I,ae/O.locationSize,L,ne,ae*C,ae/O.locationSize*I*C,R)}}else if(k!==void 0){let ne=k[B];if(ne!==void 0)switch(ne.length){case 2:n.vertexAttrib2fv(O.location,ne);break;case 3:n.vertexAttrib3fv(O.location,ne);break;case 4:n.vertexAttrib4fv(O.location,ne);break;default:n.vertexAttrib1fv(O.location,ne)}}}}x()}function S(){A();for(let T in r){let D=r[T];for(let N in D){let P=D[N];for(let E in P)u(P[E].object),delete P[E];delete D[N]}delete r[T]}}function _(T){if(r[T.id]===void 0)return;let D=r[T.id];for(let N in D){let P=D[N];for(let E in P)u(P[E].object),delete P[E];delete D[N]}delete r[T.id]}function M(T){for(let D in r){let N=r[D];if(N[T.id]===void 0)continue;let P=N[T.id];for(let E in P)u(P[E].object),delete P[E];delete N[T.id]}}function A(){w(),s=!0,o!==i&&(o=i,l(o.object))}function w(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:A,resetDefaultState:w,dispose:S,releaseStatesOfGeometry:_,releaseStatesOfProgram:M,initAttributes:v,enableAttribute:p,disableUnusedAttributes:x}}function wN(n,e,t){let r;function i(c){r=c}function o(c,l){n.drawArrays(r,c,l),t.update(l,r,1)}function s(c,l,u){u!==0&&(n.drawArraysInstanced(r,c,l,u),t.update(l,r,u))}function a(c,l,u){if(u===0)return;let h=e.get("WEBGL_multi_draw");if(h===null)for(let f=0;f<u;f++)this.render(c[f],l[f]);else{h.multiDrawArraysWEBGL(r,c,0,l,0,u);let f=0;for(let d=0;d<u;d++)f+=l[d];t.update(f,r,1)}}this.setMode=i,this.render=o,this.renderInstances=s,this.renderMultiDraw=a}function SN(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let y=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(y.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(y){if(y==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";y="mediump"}return y==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=t.precision!==void 0?t.precision:"highp",a=o(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);let c=t.logarithmicDepthBuffer===!0,l=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),u=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),f=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),d=n.getParameter(n.MAX_VERTEX_ATTRIBS),m=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),p=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),g=u>0,x=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:p,vertexTextures:g,maxSamples:x}}function _N(n){let e=this,t=null,r=0,i=!1,o=!1,s=new Wo,a=new kt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){let d=h.length!==0||f||r!==0||i;return i=f,r=h.length,d},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,f){t=u(h,f,0)},this.setState=function(h,f,d){let m=h.clippingPlanes,v=h.clipIntersection,p=h.clipShadows,g=n.get(h);if(!i||m===null||m.length===0||o&&!p)o?u(null):l();else{let x=o?0:r,y=x*4,b=g.clippingState||null;c.value=b,b=u(m,f,y,d);for(let S=0;S!==y;++S)b[S]=t[S];g.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,f,d,m){let v=h!==null?h.length:0,p=null;if(v!==0){if(p=c.value,m!==!0||p===null){let g=d+v*4,x=f.matrixWorldInverse;a.getNormalMatrix(x),(p===null||p.length<g)&&(p=new Float32Array(g));for(let y=0,b=d;y!==v;++y,b+=4)s.copy(h[y]).applyMatrix4(x,a),s.normal.toArray(p,b),p[b+3]=s.constant}c.value=p,c.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,p}}function TN(n){let e=new WeakMap;function t(s,a){return a===Ad?s.mapping=zu:a===Dx&&(s.mapping=Gu),s}function r(s){if(s&&s.isTexture){let a=s.mapping;if(a===Ad||a===Dx)if(e.has(s)){let c=e.get(s).texture;return t(c,s.mapping)}else{let c=s.image;if(c&&c.height>0){let l=new Ox(c.height);return l.fromEquirectangularTexture(n,s),e.set(s,l),s.addEventListener("dispose",i),t(l.texture,s.mapping)}else return null}}return s}function i(s){let a=s.target;a.removeEventListener("dispose",i);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}var Cs=class extends Jg{constructor(e=-1,t=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,o=r-e,s=r+e,a=i+t,c=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=l*this.view.offsetX,s=o+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Fu=4,C1=[.125,.215,.35,.446,.526,.582],oc=20,mx=new Cs,I1=new Ke,gx=null,vx=0,yx=0,xx=!1,rc=(1+Math.sqrt(5))/2,Pu=1/rc,R1=[new he(1,1,1),new he(-1,1,1),new he(1,1,-1),new he(-1,1,-1),new he(0,rc,Pu),new he(0,rc,-Pu),new he(Pu,0,rc),new he(-Pu,0,rc),new he(rc,Pu,0),new he(-rc,Pu,0)],Qg=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){gx=this._renderer.getRenderTarget(),vx=this._renderer.getActiveCubeFace(),yx=this._renderer.getActiveMipmapLevel(),xx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=F1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=D1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(gx,vx,yx),this._renderer.xr.enabled=xx,e.scissorTest=!1,Cg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===zu||e.mapping===Gu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),gx=this._renderer.getRenderTarget(),vx=this._renderer.getActiveCubeFace(),yx=this._renderer.getActiveMipmapLevel(),xx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Cr,minFilter:Cr,generateMipmaps:!1,type:Gg,format:jo,colorSpace:Oi,depthBuffer:!1},i=P1(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=P1(e,t,r);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=MN(o)),this._blurMaterial=EN(o,e,t)}return i}_compileMaterial(e){let t=new hn(this._lodPlanes[0],e);this._renderer.compile(t,mx)}_sceneToCubeUV(e,t,r,i){let a=new Gn(90,1,t,r),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.toneMapping;u.getClearColor(I1),u.toneMapping=el,u.autoClear=!1;let d=new yo({name:"PMREM.Background",side:wr,depthWrite:!1,depthTest:!1}),m=new hn(new lc,d),v=!1,p=e.background;p?p.isColor&&(d.color.copy(p),e.background=null,v=!0):(d.color.copy(I1),v=!0);for(let g=0;g<6;g++){let x=g%3;x===0?(a.up.set(0,c[g],0),a.lookAt(l[g],0,0)):x===1?(a.up.set(0,0,c[g]),a.lookAt(0,l[g],0)):(a.up.set(0,c[g],0),a.lookAt(0,0,l[g]));let y=this._cubeSize;Cg(i,x*y,g>2?y:0,y,y),u.setRenderTarget(i),v&&u.render(m,a),u.render(e,a)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=f,u.autoClear=h,e.background=p}_textureToCubeUV(e,t){let r=this._renderer,i=e.mapping===zu||e.mapping===Gu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=F1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=D1());let o=i?this._cubemapMaterial:this._equirectMaterial,s=new hn(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let c=this._cubeSize;Cg(t,0,0,3*c,2*c),r.setRenderTarget(t),r.render(s,mx)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=R1[(i-1)%R1.length];this._blur(e,i-1,i,o,s)}t.autoClear=r}_blur(e,t,r,i,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,t,r,i,o,s,a){let c=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,h=new hn(this._lodPlanes[i],l),f=l.uniforms,d=this._sizeLods[r]-1,m=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*oc-1),v=o/m,p=isFinite(o)?1+Math.floor(u*v):oc;p>oc&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${oc}`);let g=[],x=0;for(let M=0;M<oc;++M){let A=M/v,w=Math.exp(-A*A/2);g.push(w),M===0?x+=w:M<p&&(x+=2*w)}for(let M=0;M<g.length;M++)g[M]=g[M]/x;f.envMap.value=e.texture,f.samples.value=p,f.weights.value=g,f.latitudinal.value=s==="latitudinal",a&&(f.poleAxis.value=a);let{_lodMax:y}=this;f.dTheta.value=m,f.mipInt.value=y-r;let b=this._sizeLods[i],S=3*b*(i>y-Fu?i-y+Fu:0),_=4*(this._cubeSize-b);Cg(t,S,_,3*b,2*b),c.setRenderTarget(t),c.render(h,mx)}};function MN(n){let e=[],t=[],r=[],i=n,o=n-Fu+1+C1.length;for(let s=0;s<o;s++){let a=Math.pow(2,i);t.push(a);let c=1/a;s>n-Fu?c=C1[s-n+Fu-1]:s===0&&(c=0),r.push(c);let l=1/(a-2),u=-l,h=1+l,f=[u,u,h,u,h,h,u,u,h,h,u,h],d=6,m=6,v=3,p=2,g=1,x=new Float32Array(v*m*d),y=new Float32Array(p*m*d),b=new Float32Array(g*m*d);for(let _=0;_<d;_++){let M=_%3*2/3-1,A=_>2?0:-1,w=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];x.set(w,v*m*_),y.set(f,p*m*_);let T=[_,_,_,_,_,_];b.set(T,g*m*_)}let S=new Yt;S.setAttribute("position",new Jr(x,v)),S.setAttribute("uv",new Jr(y,p)),S.setAttribute("faceIndex",new Jr(b,g)),e.push(S),i>Fu&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function P1(n,e,t){let r=new ga(n,e,t);return r.texture.mapping=gv,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Cg(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function EN(n,e,t){let r=new Float32Array(oc),i=new he(0,1,0);return new As({name:"SphericalGaussianBlur",defines:{n:oc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:vb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function D1(){return new As({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function F1(){return new As({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$a,depthTest:!1,depthWrite:!1})}function vb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function AN(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){let c=a.mapping,l=c===Ad||c===Dx,u=c===zu||c===Gu;if(l||u){let h=e.get(a),f=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new Qg(n)),h=l?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{let d=a.image;return l&&d&&d.height>0||u&&d&&i(d)?(t===null&&(t=new Qg(n)),h=l?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function i(a){let c=0,l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function o(a){let c=a.target;c.removeEventListener("dispose",o);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function CN(n){let e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){let i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function IN(n,e,t,r){let i={},o=new WeakMap;function s(h){let f=h.target;f.index!==null&&e.remove(f.index);for(let m in f.attributes)e.remove(f.attributes[m]);for(let m in f.morphAttributes){let v=f.morphAttributes[m];for(let p=0,g=v.length;p<g;p++)e.remove(v[p])}f.removeEventListener("dispose",s),delete i[f.id];let d=o.get(f);d&&(e.remove(d),o.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,t.memory.geometries++),f}function c(h){let f=h.attributes;for(let m in f)e.update(f[m],n.ARRAY_BUFFER);let d=h.morphAttributes;for(let m in d){let v=d[m];for(let p=0,g=v.length;p<g;p++)e.update(v[p],n.ARRAY_BUFFER)}}function l(h){let f=[],d=h.index,m=h.attributes.position,v=0;if(d!==null){let x=d.array;v=d.version;for(let y=0,b=x.length;y<b;y+=3){let S=x[y+0],_=x[y+1],M=x[y+2];f.push(S,_,_,M,M,S)}}else if(m!==void 0){let x=m.array;v=m.version;for(let y=0,b=x.length/3-1;y<b;y+=3){let S=y+0,_=y+1,M=y+2;f.push(S,_,_,M,M,S)}}else return;let p=new(RT(f)?Zg:qu)(f,1);p.version=v;let g=o.get(h);g&&e.remove(g),o.set(h,p)}function u(h){let f=o.get(h);if(f){let d=h.index;d!==null&&f.version<d.version&&l(h)}else l(h);return o.get(h)}return{get:a,update:c,getWireframeAttribute:u}}function RN(n,e,t){let r;function i(h){r=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function c(h,f){n.drawElements(r,f,o,h*s),t.update(f,r,1)}function l(h,f,d){d!==0&&(n.drawElementsInstanced(r,f,o,h*s,d),t.update(f,r,d))}function u(h,f,d){if(d===0)return;let m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<d;v++)this.render(h[v]/s,f[v]);else{m.multiDrawElementsWEBGL(r,f,0,o,h,0,d);let v=0;for(let p=0;p<d;p++)v+=f[p];t.update(v,r,1)}}this.setMode=i,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u}function PN(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function DN(n,e,t){let r=new WeakMap,i=new dn;function o(s,a,c){let l=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0,f=r.get(a);if(f===void 0||f.count!==h){let w=function(){M.dispose(),r.delete(a),a.removeEventListener("dispose",w)};f!==void 0&&f.texture.dispose();let d=a.morphAttributes.position!==void 0,m=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,p=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],x=a.morphAttributes.color||[],y=0;d===!0&&(y=1),m===!0&&(y=2),v===!0&&(y=3);let b=a.attributes.position.count*y,S=1;b>e.maxTextureSize&&(S=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);let _=new Float32Array(b*S*4*h),M=new Yg(_,b,S,h);M.type=pa,M.needsUpdate=!0;let A=y*4;for(let T=0;T<h;T++){let D=p[T],N=g[T],P=x[T],E=b*S*4*T;for(let U=0;U<D.count;U++){let k=U*A;d===!0&&(i.fromBufferAttribute(D,U),_[E+k+0]=i.x,_[E+k+1]=i.y,_[E+k+2]=i.z,_[E+k+3]=0),m===!0&&(i.fromBufferAttribute(N,U),_[E+k+4]=i.x,_[E+k+5]=i.y,_[E+k+6]=i.z,_[E+k+7]=0),v===!0&&(i.fromBufferAttribute(P,U),_[E+k+8]=i.x,_[E+k+9]=i.y,_[E+k+10]=i.z,_[E+k+11]=P.itemSize===4?i.w:1)}}f={count:h,texture:M,size:new Ne(b,S)},r.set(a,f),a.addEventListener("dispose",w)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let d=0;for(let v=0;v<l.length;v++)d+=l[v];let m=a.morphTargetsRelative?1:1-d;c.getUniforms().setValue(n,"morphTargetBaseInfluence",m),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:o}}function FN(n,e,t,r){let i=new WeakMap;function o(c){let l=r.render.frame,u=c.geometry,h=e.get(c,u);if(i.get(h)!==l&&(e.update(h),i.set(h,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),i.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),i.set(c,l))),c.isSkinnedMesh){let f=c.skeleton;i.get(f)!==l&&(f.update(),i.set(f,l))}return h}function s(){i=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:o,dispose:s}}var $g=class extends zr{constructor(e,t,r,i,o,s,a,c,l,u){if(u=u!==void 0?u:Ou,u!==Ou&&u!==Cd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Ou&&(r=Hu),r===void 0&&u===Cd&&(r=zd),super(null,i,o,s,a,c,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Zr,this.minFilter=c!==void 0?c:Zr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},NT=new zr,LT=new $g(1,1);LT.compareFunction=IT;var OT=new Yg,kT=new Nx,UT=new Pd,N1=[],L1=[],O1=new Float32Array(16),k1=new Float32Array(9),U1=new Float32Array(4);function rh(n,e,t){let r=n[0];if(r<=0||r>0)return n;let i=e*t,o=N1[i];if(o===void 0&&(o=new Float32Array(i),N1[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function Ir(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Rr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function xv(n,e){let t=L1[e];t===void 0&&(t=new Int32Array(e),L1[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function NN(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function LN(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2fv(this.addr,e),Rr(t,e)}}function ON(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ir(t,e))return;n.uniform3fv(this.addr,e),Rr(t,e)}}function kN(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4fv(this.addr,e),Rr(t,e)}}function UN(n,e){let t=this.cache,r=e.elements;if(r===void 0){if(Ir(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Rr(t,e)}else{if(Ir(t,r))return;U1.set(r),n.uniformMatrix2fv(this.addr,!1,U1),Rr(t,r)}}function BN(n,e){let t=this.cache,r=e.elements;if(r===void 0){if(Ir(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Rr(t,e)}else{if(Ir(t,r))return;k1.set(r),n.uniformMatrix3fv(this.addr,!1,k1),Rr(t,r)}}function zN(n,e){let t=this.cache,r=e.elements;if(r===void 0){if(Ir(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Rr(t,e)}else{if(Ir(t,r))return;O1.set(r),n.uniformMatrix4fv(this.addr,!1,O1),Rr(t,r)}}function GN(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function VN(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2iv(this.addr,e),Rr(t,e)}}function HN(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ir(t,e))return;n.uniform3iv(this.addr,e),Rr(t,e)}}function WN(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4iv(this.addr,e),Rr(t,e)}}function jN(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function qN(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2uiv(this.addr,e),Rr(t,e)}}function XN(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ir(t,e))return;n.uniform3uiv(this.addr,e),Rr(t,e)}}function KN(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4uiv(this.addr,e),Rr(t,e)}}function YN(n,e,t){let r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let o=this.type===n.SAMPLER_2D_SHADOW?LT:NT;t.setTexture2D(e||o,i)}function ZN(n,e,t){let r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||kT,i)}function JN(n,e,t){let r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||UT,i)}function QN(n,e,t){let r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||OT,i)}function $N(n){switch(n){case 5126:return NN;case 35664:return LN;case 35665:return ON;case 35666:return kN;case 35674:return UN;case 35675:return BN;case 35676:return zN;case 5124:case 35670:return GN;case 35667:case 35671:return VN;case 35668:case 35672:return HN;case 35669:case 35673:return WN;case 5125:return jN;case 36294:return qN;case 36295:return XN;case 36296:return KN;case 35678:case 36198:case 36298:case 36306:case 35682:return YN;case 35679:case 36299:case 36307:return ZN;case 35680:case 36300:case 36308:case 36293:return JN;case 36289:case 36303:case 36311:case 36292:return QN}}function eL(n,e){n.uniform1fv(this.addr,e)}function tL(n,e){let t=rh(e,this.size,2);n.uniform2fv(this.addr,t)}function nL(n,e){let t=rh(e,this.size,3);n.uniform3fv(this.addr,t)}function rL(n,e){let t=rh(e,this.size,4);n.uniform4fv(this.addr,t)}function iL(n,e){let t=rh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function oL(n,e){let t=rh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function sL(n,e){let t=rh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function aL(n,e){n.uniform1iv(this.addr,e)}function lL(n,e){n.uniform2iv(this.addr,e)}function cL(n,e){n.uniform3iv(this.addr,e)}function uL(n,e){n.uniform4iv(this.addr,e)}function hL(n,e){n.uniform1uiv(this.addr,e)}function fL(n,e){n.uniform2uiv(this.addr,e)}function dL(n,e){n.uniform3uiv(this.addr,e)}function pL(n,e){n.uniform4uiv(this.addr,e)}function mL(n,e,t){let r=this.cache,i=e.length,o=xv(t,i);Ir(r,o)||(n.uniform1iv(this.addr,o),Rr(r,o));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||NT,o[s])}function gL(n,e,t){let r=this.cache,i=e.length,o=xv(t,i);Ir(r,o)||(n.uniform1iv(this.addr,o),Rr(r,o));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||kT,o[s])}function vL(n,e,t){let r=this.cache,i=e.length,o=xv(t,i);Ir(r,o)||(n.uniform1iv(this.addr,o),Rr(r,o));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||UT,o[s])}function yL(n,e,t){let r=this.cache,i=e.length,o=xv(t,i);Ir(r,o)||(n.uniform1iv(this.addr,o),Rr(r,o));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||OT,o[s])}function xL(n){switch(n){case 5126:return eL;case 35664:return tL;case 35665:return nL;case 35666:return rL;case 35674:return iL;case 35675:return oL;case 35676:return sL;case 5124:case 35670:return aL;case 35667:case 35671:return lL;case 35668:case 35672:return cL;case 35669:case 35673:return uL;case 5125:return hL;case 36294:return fL;case 36295:return dL;case 36296:return pL;case 35678:case 36198:case 36298:case 36306:case 35682:return mL;case 35679:case 36299:case 36307:return gL;case 35680:case 36300:case 36308:case 36293:return vL;case 36289:case 36303:case 36311:case 36292:return yL}}var kx=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=$N(t.type)}},Ux=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=xL(t.type)}},Bx=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let i=this.seq;for(let o=0,s=i.length;o!==s;++o){let a=i[o];a.setValue(e,t[a.id],r)}}},bx=/(\w+)(\])?(\[|\.)?/g;function B1(n,e){n.seq.push(e),n.map[e.id]=e}function bL(n,e,t){let r=n.name,i=r.length;for(bx.lastIndex=0;;){let o=bx.exec(r),s=bx.lastIndex,a=o[1],c=o[2]==="]",l=o[3];if(c&&(a=a|0),l===void 0||l==="["&&s+2===i){B1(t,l===void 0?new kx(a,n,e):new Ux(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new Bx(a),B1(t,h)),t=h}}}var Bu=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){let o=e.getActiveUniform(t,i),s=e.getUniformLocation(t,o.name);bL(o,s,this)}}setValue(e,t,r,i){let o=this.map[t];o!==void 0&&o.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let o=0,s=t.length;o!==s;++o){let a=t[o],c=r[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,o=e.length;i!==o;++i){let s=e[i];s.id in t&&r.push(s)}return r}};function z1(n,e,t){let r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}var wL=37297,SL=0;function _L(n,e){let t=n.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=i;s<o;s++){let a=s+1;r.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return r.join(`
`)}function TL(n){let e=Tn.getPrimaries(Tn.workingColorSpace),t=Tn.getPrimaries(n),r;switch(e===t?r="":e===qg&&t===jg?r="LinearDisplayP3ToLinearSRGB":e===jg&&t===qg&&(r="LinearSRGBToLinearDisplayP3"),n){case Oi:case yv:return[r,"LinearTransferOETF"];case Ln:case mb:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function G1(n,e,t){let r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";let o=/ERROR: 0:(\d+)/.exec(i);if(o){let s=parseInt(o[1]);return t.toUpperCase()+`

`+i+`

`+_L(n.getShaderSource(e),s)}else return i}function ML(n,e){let t=TL(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function EL(n,e){let t;switch(e){case TP:t="Linear";break;case MP:t="Reinhard";break;case EP:t="OptimizedCineon";break;case AP:t="ACESFilmic";break;case IP:t="AgX";break;case RP:t="Neutral";break;case CP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function AL(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Sd).join(`
`)}function CL(n){let e=[];for(let t in n){let r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function IL(n,e){let t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let o=n.getActiveAttrib(e,i),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function Sd(n){return n!==""}function V1(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function H1(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var RL=/^[ \t]*#include +<([\w\d./]+)>/gm;function zx(n){return n.replace(RL,DL)}var PL=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function DL(n,e){let t=en[e];if(t===void 0){let r=PL.get(e);if(r!==void 0)t=en[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return zx(t)}var FL=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function W1(n){return n.replace(FL,NL)}function NL(n,e,t,r){let i="";for(let o=parseInt(e);o<parseInt(t);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function j1(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function LL(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===xT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===ZR?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===da&&(e="SHADOWMAP_TYPE_VSM"),e}function OL(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case zu:case Gu:e="ENVMAP_TYPE_CUBE";break;case gv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kL(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Gu:e="ENVMAP_MODE_REFRACTION";break}return e}function UL(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case mv:e="ENVMAP_BLENDING_MULTIPLY";break;case SP:e="ENVMAP_BLENDING_MIX";break;case _P:e="ENVMAP_BLENDING_ADD";break}return e}function BL(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function zL(n,e,t,r){let i=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,c=LL(t),l=OL(t),u=kL(t),h=UL(t),f=BL(t),d=AL(t),m=CL(o),v=i.createProgram(),p,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Sd).join(`
`),p.length>0&&(p+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(Sd).join(`
`),g.length>0&&(g+=`
`)):(p=[j1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sd).join(`
`),g=[j1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==el?"#define TONE_MAPPING":"",t.toneMapping!==el?en.tonemapping_pars_fragment:"",t.toneMapping!==el?EL("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",en.colorspace_pars_fragment,ML("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Sd).join(`
`)),s=zx(s),s=V1(s,t),s=H1(s,t),a=zx(a),a=V1(a,t),a=H1(a,t),s=W1(s),a=W1(a),t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,p=[d,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,g=["#define varying in",t.glslVersion===a1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===a1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);let y=x+p+s,b=x+g+a,S=z1(i,i.VERTEX_SHADER,y),_=z1(i,i.FRAGMENT_SHADER,b);i.attachShader(v,S),i.attachShader(v,_),t.index0AttributeName!==void 0?i.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function M(D){if(n.debug.checkShaderErrors){let N=i.getProgramInfoLog(v).trim(),P=i.getShaderInfoLog(S).trim(),E=i.getShaderInfoLog(_).trim(),U=!0,k=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(U=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,v,S,_);else{let B=G1(i,S,"vertex"),O=G1(i,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+N+`
`+B+`
`+O)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(P===""||E==="")&&(k=!1);k&&(D.diagnostics={runnable:U,programLog:N,vertexShader:{log:P,prefix:p},fragmentShader:{log:E,prefix:g}})}i.deleteShader(S),i.deleteShader(_),A=new Bu(i,v),w=IL(i,v)}let A;this.getUniforms=function(){return A===void 0&&M(this),A};let w;this.getAttributes=function(){return w===void 0&&M(this),w};let T=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=i.getProgramParameter(v,wL)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=SL++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=_,this}var GL=0,Gx=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new Vx(e),t.set(e,r)),r}},Vx=class{constructor(e){this.id=GL++,this.code=e,this.usedTimes=0}};function VL(n,e,t,r,i,o,s){let a=new Rd,c=new Gx,l=new Set,u=[],h=i.logarithmicDepthBuffer,f=i.vertexTextures,d=i.precision,m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(w){return l.add(w),w===0?"uv":`uv${w}`}function p(w,T,D,N,P){let E=N.fog,U=P.geometry,k=w.isMeshStandardMaterial?N.environment:null,B=(w.isMeshStandardMaterial?t:e).get(w.envMap||k),O=B&&B.mapping===gv?B.image.height:null,q=m[w.type];w.precision!==null&&(d=i.getMaxPrecision(w.precision),d!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",d,"instead."));let ne=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,ae=ne!==void 0?ne.length:0,ye=0;U.morphAttributes.position!==void 0&&(ye=1),U.morphAttributes.normal!==void 0&&(ye=2),U.morphAttributes.color!==void 0&&(ye=3);let fe,L,C,R;if(q){let sn=Es[q];fe=sn.vertexShader,L=sn.fragmentShader}else fe=w.vertexShader,L=w.fragmentShader,c.update(w),C=c.getVertexShaderID(w),R=c.getFragmentShaderID(w);let I=n.getRenderTarget(),j=P.isInstancedMesh===!0,Z=P.isBatchedMesh===!0,J=!!w.map,W=!!w.matcap,K=!!B,le=!!w.aoMap,ue=!!w.lightMap,de=!!w.bumpMap,Te=!!w.normalMap,X=!!w.displacementMap,F=!!w.emissiveMap,G=!!w.metalnessMap,ge=!!w.roughnessMap,we=w.anisotropy>0,Ee=w.clearcoat>0,se=w.iridescence>0,H=w.sheen>0,re=w.transmission>0,pe=we&&!!w.anisotropyMap,ee=Ee&&!!w.clearcoatMap,me=Ee&&!!w.clearcoatNormalMap,xe=Ee&&!!w.clearcoatRoughnessMap,ve=se&&!!w.iridescenceMap,Se=se&&!!w.iridescenceThicknessMap,Ie=H&&!!w.sheenColorMap,Le=H&&!!w.sheenRoughnessMap,He=!!w.specularMap,ot=!!w.specularColorMap,Et=!!w.specularIntensityMap,Ve=re&&!!w.transmissionMap,ce=re&&!!w.thicknessMap,ke=!!w.gradientMap,Ue=!!w.alphaMap,je=w.alphaTest>0,We=!!w.alphaHash,Pt=!!w.extensions,At=el;w.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(At=n.toneMapping);let qt={shaderID:q,shaderType:w.type,shaderName:w.name,vertexShader:fe,fragmentShader:L,defines:w.defines,customVertexShaderID:C,customFragmentShaderID:R,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:d,batching:Z,instancing:j,instancingColor:j&&P.instanceColor!==null,instancingMorph:j&&P.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:I===null?n.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Oi,alphaToCoverage:!!w.alphaToCoverage,map:J,matcap:W,envMap:K,envMapMode:K&&B.mapping,envMapCubeUVHeight:O,aoMap:le,lightMap:ue,bumpMap:de,normalMap:Te,displacementMap:f&&X,emissiveMap:F,normalMapObjectSpace:Te&&w.normalMapType===qP,normalMapTangentSpace:Te&&w.normalMapType===vv,metalnessMap:G,roughnessMap:ge,anisotropy:we,anisotropyMap:pe,clearcoat:Ee,clearcoatMap:ee,clearcoatNormalMap:me,clearcoatRoughnessMap:xe,iridescence:se,iridescenceMap:ve,iridescenceThicknessMap:Se,sheen:H,sheenColorMap:Ie,sheenRoughnessMap:Le,specularMap:He,specularColorMap:ot,specularIntensityMap:Et,transmission:re,transmissionMap:Ve,thicknessMap:ce,gradientMap:ke,opaque:w.transparent===!1&&w.blending===Lu&&w.alphaToCoverage===!1,alphaMap:Ue,alphaTest:je,alphaHash:We,combine:w.combine,mapUv:J&&v(w.map.channel),aoMapUv:le&&v(w.aoMap.channel),lightMapUv:ue&&v(w.lightMap.channel),bumpMapUv:de&&v(w.bumpMap.channel),normalMapUv:Te&&v(w.normalMap.channel),displacementMapUv:X&&v(w.displacementMap.channel),emissiveMapUv:F&&v(w.emissiveMap.channel),metalnessMapUv:G&&v(w.metalnessMap.channel),roughnessMapUv:ge&&v(w.roughnessMap.channel),anisotropyMapUv:pe&&v(w.anisotropyMap.channel),clearcoatMapUv:ee&&v(w.clearcoatMap.channel),clearcoatNormalMapUv:me&&v(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xe&&v(w.clearcoatRoughnessMap.channel),iridescenceMapUv:ve&&v(w.iridescenceMap.channel),iridescenceThicknessMapUv:Se&&v(w.iridescenceThicknessMap.channel),sheenColorMapUv:Ie&&v(w.sheenColorMap.channel),sheenRoughnessMapUv:Le&&v(w.sheenRoughnessMap.channel),specularMapUv:He&&v(w.specularMap.channel),specularColorMapUv:ot&&v(w.specularColorMap.channel),specularIntensityMapUv:Et&&v(w.specularIntensityMap.channel),transmissionMapUv:Ve&&v(w.transmissionMap.channel),thicknessMapUv:ce&&v(w.thicknessMap.channel),alphaMapUv:Ue&&v(w.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(Te||we),vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,pointsUvs:P.isPoints===!0&&!!U.attributes.uv&&(J||Ue),fog:!!E,useFog:w.fog===!0,fogExp2:!!E&&E.isFogExp2,flatShading:w.flatShading===!0,sizeAttenuation:w.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:P.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:ae,morphTextureStride:ye,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:At,useLegacyLights:n._useLegacyLights,decodeVideoTexture:J&&w.map.isVideoTexture===!0&&Tn.getTransfer(w.map.colorSpace)===zn,premultipliedAlpha:w.premultipliedAlpha,doubleSided:w.side===br,flipSided:w.side===wr,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionClipCullDistance:Pt&&w.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Pt&&w.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()};return qt.vertexUv1s=l.has(1),qt.vertexUv2s=l.has(2),qt.vertexUv3s=l.has(3),l.clear(),qt}function g(w){let T=[];if(w.shaderID?T.push(w.shaderID):(T.push(w.customVertexShaderID),T.push(w.customFragmentShaderID)),w.defines!==void 0)for(let D in w.defines)T.push(D),T.push(w.defines[D]);return w.isRawShaderMaterial===!1&&(x(T,w),y(T,w),T.push(n.outputColorSpace)),T.push(w.customProgramCacheKey),T.join()}function x(w,T){w.push(T.precision),w.push(T.outputColorSpace),w.push(T.envMapMode),w.push(T.envMapCubeUVHeight),w.push(T.mapUv),w.push(T.alphaMapUv),w.push(T.lightMapUv),w.push(T.aoMapUv),w.push(T.bumpMapUv),w.push(T.normalMapUv),w.push(T.displacementMapUv),w.push(T.emissiveMapUv),w.push(T.metalnessMapUv),w.push(T.roughnessMapUv),w.push(T.anisotropyMapUv),w.push(T.clearcoatMapUv),w.push(T.clearcoatNormalMapUv),w.push(T.clearcoatRoughnessMapUv),w.push(T.iridescenceMapUv),w.push(T.iridescenceThicknessMapUv),w.push(T.sheenColorMapUv),w.push(T.sheenRoughnessMapUv),w.push(T.specularMapUv),w.push(T.specularColorMapUv),w.push(T.specularIntensityMapUv),w.push(T.transmissionMapUv),w.push(T.thicknessMapUv),w.push(T.combine),w.push(T.fogExp2),w.push(T.sizeAttenuation),w.push(T.morphTargetsCount),w.push(T.morphAttributeCount),w.push(T.numDirLights),w.push(T.numPointLights),w.push(T.numSpotLights),w.push(T.numSpotLightMaps),w.push(T.numHemiLights),w.push(T.numRectAreaLights),w.push(T.numDirLightShadows),w.push(T.numPointLightShadows),w.push(T.numSpotLightShadows),w.push(T.numSpotLightShadowsWithMaps),w.push(T.numLightProbes),w.push(T.shadowMapType),w.push(T.toneMapping),w.push(T.numClippingPlanes),w.push(T.numClipIntersection),w.push(T.depthPacking)}function y(w,T){a.disableAll(),T.supportsVertexTextures&&a.enable(0),T.instancing&&a.enable(1),T.instancingColor&&a.enable(2),T.instancingMorph&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),T.alphaHash&&a.enable(18),T.batching&&a.enable(19),w.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.useLegacyLights&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.opaque&&a.enable(17),T.pointsUvs&&a.enable(18),T.decodeVideoTexture&&a.enable(19),T.alphaToCoverage&&a.enable(20),w.push(a.mask)}function b(w){let T=m[w.type],D;if(T){let N=Es[T];D=D2.clone(N.uniforms)}else D=w.uniforms;return D}function S(w,T){let D;for(let N=0,P=u.length;N<P;N++){let E=u[N];if(E.cacheKey===T){D=E,++D.usedTimes;break}}return D===void 0&&(D=new zL(n,T,w,o),u.push(D)),D}function _(w){if(--w.usedTimes===0){let T=u.indexOf(w);u[T]=u[u.length-1],u.pop(),w.destroy()}}function M(w){c.remove(w)}function A(){c.dispose()}return{getParameters:p,getProgramCacheKey:g,getUniforms:b,acquireProgram:S,releaseProgram:_,releaseShaderCache:M,programs:u,dispose:A}}function HL(){let n=new WeakMap;function e(o){let s=n.get(o);return s===void 0&&(s={},n.set(o,s)),s}function t(o){n.delete(o)}function r(o,s,a){n.get(o)[s]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function WL(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function q1(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function X1(){let n=[],e=0,t=[],r=[],i=[];function o(){e=0,t.length=0,r.length=0,i.length=0}function s(h,f,d,m,v,p){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:f,material:d,groupOrder:m,renderOrder:h.renderOrder,z:v,group:p},n[e]=g):(g.id=h.id,g.object=h,g.geometry=f,g.material=d,g.groupOrder=m,g.renderOrder=h.renderOrder,g.z=v,g.group=p),e++,g}function a(h,f,d,m,v,p){let g=s(h,f,d,m,v,p);d.transmission>0?r.push(g):d.transparent===!0?i.push(g):t.push(g)}function c(h,f,d,m,v,p){let g=s(h,f,d,m,v,p);d.transmission>0?r.unshift(g):d.transparent===!0?i.unshift(g):t.unshift(g)}function l(h,f){t.length>1&&t.sort(h||WL),r.length>1&&r.sort(f||q1),i.length>1&&i.sort(f||q1)}function u(){for(let h=e,f=n.length;h<f;h++){let d=n[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:r,transparent:i,init:o,push:a,unshift:c,finish:u,sort:l}}function jL(){let n=new WeakMap;function e(r,i){let o=n.get(r),s;return o===void 0?(s=new X1,n.set(r,[s])):i>=o.length?(s=new X1,o.push(s)):s=o[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function qL(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new he,color:new Ke};break;case"SpotLight":t={position:new he,direction:new he,color:new Ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new he,color:new Ke,distance:0,decay:0};break;case"HemisphereLight":t={direction:new he,skyColor:new Ke,groundColor:new Ke};break;case"RectAreaLight":t={color:new Ke,position:new he,halfWidth:new he,halfHeight:new he};break}return n[e.id]=t,t}}}function XL(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var KL=0;function YL(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function ZL(n){let e=new qL,t=XL(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new he);let i=new he,o=new tt,s=new tt;function a(l,u){let h=0,f=0,d=0;for(let D=0;D<9;D++)r.probe[D].set(0,0,0);let m=0,v=0,p=0,g=0,x=0,y=0,b=0,S=0,_=0,M=0,A=0;l.sort(YL);let w=u===!0?Math.PI:1;for(let D=0,N=l.length;D<N;D++){let P=l[D],E=P.color,U=P.intensity,k=P.distance,B=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)h+=E.r*U*w,f+=E.g*U*w,d+=E.b*U*w;else if(P.isLightProbe){for(let O=0;O<9;O++)r.probe[O].addScaledVector(P.sh.coefficients[O],U);A++}else if(P.isDirectionalLight){let O=e.get(P);if(O.color.copy(P.color).multiplyScalar(P.intensity*w),P.castShadow){let q=P.shadow,ne=t.get(P);ne.shadowBias=q.bias,ne.shadowNormalBias=q.normalBias,ne.shadowRadius=q.radius,ne.shadowMapSize=q.mapSize,r.directionalShadow[m]=ne,r.directionalShadowMap[m]=B,r.directionalShadowMatrix[m]=P.shadow.matrix,y++}r.directional[m]=O,m++}else if(P.isSpotLight){let O=e.get(P);O.position.setFromMatrixPosition(P.matrixWorld),O.color.copy(E).multiplyScalar(U*w),O.distance=k,O.coneCos=Math.cos(P.angle),O.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),O.decay=P.decay,r.spot[p]=O;let q=P.shadow;if(P.map&&(r.spotLightMap[_]=P.map,_++,q.updateMatrices(P),P.castShadow&&M++),r.spotLightMatrix[p]=q.matrix,P.castShadow){let ne=t.get(P);ne.shadowBias=q.bias,ne.shadowNormalBias=q.normalBias,ne.shadowRadius=q.radius,ne.shadowMapSize=q.mapSize,r.spotShadow[p]=ne,r.spotShadowMap[p]=B,S++}p++}else if(P.isRectAreaLight){let O=e.get(P);O.color.copy(E).multiplyScalar(U),O.halfWidth.set(P.width*.5,0,0),O.halfHeight.set(0,P.height*.5,0),r.rectArea[g]=O,g++}else if(P.isPointLight){let O=e.get(P);if(O.color.copy(P.color).multiplyScalar(P.intensity*w),O.distance=P.distance,O.decay=P.decay,P.castShadow){let q=P.shadow,ne=t.get(P);ne.shadowBias=q.bias,ne.shadowNormalBias=q.normalBias,ne.shadowRadius=q.radius,ne.shadowMapSize=q.mapSize,ne.shadowCameraNear=q.camera.near,ne.shadowCameraFar=q.camera.far,r.pointShadow[v]=ne,r.pointShadowMap[v]=B,r.pointShadowMatrix[v]=P.shadow.matrix,b++}r.point[v]=O,v++}else if(P.isHemisphereLight){let O=e.get(P);O.skyColor.copy(P.color).multiplyScalar(U*w),O.groundColor.copy(P.groundColor).multiplyScalar(U*w),r.hemi[x]=O,x++}}g>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ze.LTC_FLOAT_1,r.rectAreaLTC2=Ze.LTC_FLOAT_2):(r.rectAreaLTC1=Ze.LTC_HALF_1,r.rectAreaLTC2=Ze.LTC_HALF_2)),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=d;let T=r.hash;(T.directionalLength!==m||T.pointLength!==v||T.spotLength!==p||T.rectAreaLength!==g||T.hemiLength!==x||T.numDirectionalShadows!==y||T.numPointShadows!==b||T.numSpotShadows!==S||T.numSpotMaps!==_||T.numLightProbes!==A)&&(r.directional.length=m,r.spot.length=p,r.rectArea.length=g,r.point.length=v,r.hemi.length=x,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=S+_-M,r.spotLightMap.length=_,r.numSpotLightShadowsWithMaps=M,r.numLightProbes=A,T.directionalLength=m,T.pointLength=v,T.spotLength=p,T.rectAreaLength=g,T.hemiLength=x,T.numDirectionalShadows=y,T.numPointShadows=b,T.numSpotShadows=S,T.numSpotMaps=_,T.numLightProbes=A,r.version=KL++)}function c(l,u){let h=0,f=0,d=0,m=0,v=0,p=u.matrixWorldInverse;for(let g=0,x=l.length;g<x;g++){let y=l[g];if(y.isDirectionalLight){let b=r.directional[h];b.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(p),h++}else if(y.isSpotLight){let b=r.spot[d];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(p),b.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(p),d++}else if(y.isRectAreaLight){let b=r.rectArea[m];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(p),s.identity(),o.copy(y.matrixWorld),o.premultiply(p),s.extractRotation(o),b.halfWidth.set(y.width*.5,0,0),b.halfHeight.set(0,y.height*.5,0),b.halfWidth.applyMatrix4(s),b.halfHeight.applyMatrix4(s),m++}else if(y.isPointLight){let b=r.point[f];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(p),f++}else if(y.isHemisphereLight){let b=r.hemi[v];b.direction.setFromMatrixPosition(y.matrixWorld),b.direction.transformDirection(p),v++}}}return{setup:a,setupView:c,state:r}}function K1(n){let e=new ZL(n),t=[],r=[];function i(){t.length=0,r.length=0}function o(u){t.push(u)}function s(u){r.push(u)}function a(u){e.setup(t,u)}function c(u){e.setupView(t,u)}return{init:i,state:{lightsArray:t,shadowsArray:r,lights:e,transmissionRenderTarget:null},setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function JL(n){let e=new WeakMap;function t(i,o=0){let s=e.get(i),a;return s===void 0?(a=new K1(n),e.set(i,[a])):o>=s.length?(a=new K1(n),s.push(a)):a=s[o],a}function r(){e=new WeakMap}return{get:t,dispose:r}}var Hx=class extends Xo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=WP,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Wx=class extends Xo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},QL=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$L=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function eO(n,e,t){let r=new Dd,i=new Ne,o=new Ne,s=new dn,a=new Hx({depthPacking:jP}),c=new Wx,l={},u=t.maxTextureSize,h={[vo]:wr,[wr]:vo,[br]:br},f=new As({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ne},radius:{value:4}},vertexShader:QL,fragmentShader:$L}),d=f.clone();d.defines.HORIZONTAL_PASS=1;let m=new Yt;m.setAttribute("position",new Jr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new hn(m,f),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xT;let g=this.type;this.render=function(_,M,A){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||_.length===0)return;let w=n.getRenderTarget(),T=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),N=n.state;N.setBlending($a),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);let P=g!==da&&this.type===da,E=g===da&&this.type!==da;for(let U=0,k=_.length;U<k;U++){let B=_[U],O=B.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);let q=O.getFrameExtents();if(i.multiply(q),o.copy(O.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/q.x),i.x=o.x*q.x,O.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/q.y),i.y=o.y*q.y,O.mapSize.y=o.y)),O.map===null||P===!0||E===!0){let ae=this.type!==da?{minFilter:Zr,magFilter:Zr}:{};O.map!==null&&O.map.dispose(),O.map=new ga(i.x,i.y,ae),O.map.texture.name=B.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();let ne=O.getViewportCount();for(let ae=0;ae<ne;ae++){let ye=O.getViewport(ae);s.set(o.x*ye.x,o.y*ye.y,o.x*ye.z,o.y*ye.w),N.viewport(s),O.updateMatrices(B,ae),r=O.getFrustum(),b(M,A,O.camera,B,this.type)}O.isPointLightShadow!==!0&&this.type===da&&x(O,A),O.needsUpdate=!1}g=this.type,p.needsUpdate=!1,n.setRenderTarget(w,T,D)};function x(_,M){let A=e.update(v);f.defines.VSM_SAMPLES!==_.blurSamples&&(f.defines.VSM_SAMPLES=_.blurSamples,d.defines.VSM_SAMPLES=_.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),_.mapPass===null&&(_.mapPass=new ga(i.x,i.y)),f.uniforms.shadow_pass.value=_.map.texture,f.uniforms.resolution.value=_.mapSize,f.uniforms.radius.value=_.radius,n.setRenderTarget(_.mapPass),n.clear(),n.renderBufferDirect(M,null,A,f,v,null),d.uniforms.shadow_pass.value=_.mapPass.texture,d.uniforms.resolution.value=_.mapSize,d.uniforms.radius.value=_.radius,n.setRenderTarget(_.map),n.clear(),n.renderBufferDirect(M,null,A,d,v,null)}function y(_,M,A,w){let T=null,D=A.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(D!==void 0)T=D;else if(T=A.isPointLight===!0?c:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){let N=T.uuid,P=M.uuid,E=l[N];E===void 0&&(E={},l[N]=E);let U=E[P];U===void 0&&(U=T.clone(),E[P]=U,M.addEventListener("dispose",S)),T=U}if(T.visible=M.visible,T.wireframe=M.wireframe,w===da?T.side=M.shadowSide!==null?M.shadowSide:M.side:T.side=M.shadowSide!==null?M.shadowSide:h[M.side],T.alphaMap=M.alphaMap,T.alphaTest=M.alphaTest,T.map=M.map,T.clipShadows=M.clipShadows,T.clippingPlanes=M.clippingPlanes,T.clipIntersection=M.clipIntersection,T.displacementMap=M.displacementMap,T.displacementScale=M.displacementScale,T.displacementBias=M.displacementBias,T.wireframeLinewidth=M.wireframeLinewidth,T.linewidth=M.linewidth,A.isPointLight===!0&&T.isMeshDistanceMaterial===!0){let N=n.properties.get(T);N.light=A}return T}function b(_,M,A,w,T){if(_.visible===!1)return;if(_.layers.test(M.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&T===da)&&(!_.frustumCulled||r.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,_.matrixWorld);let P=e.update(_),E=_.material;if(Array.isArray(E)){let U=P.groups;for(let k=0,B=U.length;k<B;k++){let O=U[k],q=E[O.materialIndex];if(q&&q.visible){let ne=y(_,q,w,T);_.onBeforeShadow(n,_,M,A,P,ne,O),n.renderBufferDirect(A,null,P,ne,_,O),_.onAfterShadow(n,_,M,A,P,ne,O)}}}else if(E.visible){let U=y(_,E,w,T);_.onBeforeShadow(n,_,M,A,P,U,null),n.renderBufferDirect(A,null,P,U,_,null),_.onAfterShadow(n,_,M,A,P,U,null)}}let N=_.children;for(let P=0,E=N.length;P<E;P++)b(N[P],M,A,w,T)}function S(_){_.target.removeEventListener("dispose",S);for(let A in l){let w=l[A],T=_.target.uuid;T in w&&(w[T].dispose(),delete w[T])}}}function tO(n){function e(){let ce=!1,ke=new dn,Ue=null,je=new dn(0,0,0,0);return{setMask:function(We){Ue!==We&&!ce&&(n.colorMask(We,We,We,We),Ue=We)},setLocked:function(We){ce=We},setClear:function(We,Pt,At,qt,sn){sn===!0&&(We*=qt,Pt*=qt,At*=qt),ke.set(We,Pt,At,qt),je.equals(ke)===!1&&(n.clearColor(We,Pt,At,qt),je.copy(ke))},reset:function(){ce=!1,Ue=null,je.set(-1,0,0,0)}}}function t(){let ce=!1,ke=null,Ue=null,je=null;return{setTest:function(We){We?R(n.DEPTH_TEST):I(n.DEPTH_TEST)},setMask:function(We){ke!==We&&!ce&&(n.depthMask(We),ke=We)},setFunc:function(We){if(Ue!==We){switch(We){case mP:n.depthFunc(n.NEVER);break;case gP:n.depthFunc(n.ALWAYS);break;case vP:n.depthFunc(n.LESS);break;case zg:n.depthFunc(n.LEQUAL);break;case yP:n.depthFunc(n.EQUAL);break;case xP:n.depthFunc(n.GEQUAL);break;case bP:n.depthFunc(n.GREATER);break;case wP:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ue=We}},setLocked:function(We){ce=We},setClear:function(We){je!==We&&(n.clearDepth(We),je=We)},reset:function(){ce=!1,ke=null,Ue=null,je=null}}}function r(){let ce=!1,ke=null,Ue=null,je=null,We=null,Pt=null,At=null,qt=null,sn=null;return{setTest:function(ct){ce||(ct?R(n.STENCIL_TEST):I(n.STENCIL_TEST))},setMask:function(ct){ke!==ct&&!ce&&(n.stencilMask(ct),ke=ct)},setFunc:function(ct,qe,nt){(Ue!==ct||je!==qe||We!==nt)&&(n.stencilFunc(ct,qe,nt),Ue=ct,je=qe,We=nt)},setOp:function(ct,qe,nt){(Pt!==ct||At!==qe||qt!==nt)&&(n.stencilOp(ct,qe,nt),Pt=ct,At=qe,qt=nt)},setLocked:function(ct){ce=ct},setClear:function(ct){sn!==ct&&(n.clearStencil(ct),sn=ct)},reset:function(){ce=!1,ke=null,Ue=null,je=null,We=null,Pt=null,At=null,qt=null,sn=null}}}let i=new e,o=new t,s=new r,a=new WeakMap,c=new WeakMap,l={},u={},h=new WeakMap,f=[],d=null,m=!1,v=null,p=null,g=null,x=null,y=null,b=null,S=null,_=new Ke(0,0,0),M=0,A=!1,w=null,T=null,D=null,N=null,P=null,E=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),U=!1,k=0,B=n.getParameter(n.VERSION);B.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(B)[1]),U=k>=1):B.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),U=k>=2);let O=null,q={},ne=n.getParameter(n.SCISSOR_BOX),ae=n.getParameter(n.VIEWPORT),ye=new dn().fromArray(ne),fe=new dn().fromArray(ae);function L(ce,ke,Ue,je){let We=new Uint8Array(4),Pt=n.createTexture();n.bindTexture(ce,Pt),n.texParameteri(ce,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ce,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let At=0;At<Ue;At++)ce===n.TEXTURE_3D||ce===n.TEXTURE_2D_ARRAY?n.texImage3D(ke,0,n.RGBA,1,1,je,0,n.RGBA,n.UNSIGNED_BYTE,We):n.texImage2D(ke+At,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,We);return Pt}let C={};C[n.TEXTURE_2D]=L(n.TEXTURE_2D,n.TEXTURE_2D,1),C[n.TEXTURE_CUBE_MAP]=L(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),C[n.TEXTURE_2D_ARRAY]=L(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),C[n.TEXTURE_3D]=L(n.TEXTURE_3D,n.TEXTURE_3D,1,1),i.setClear(0,0,0,1),o.setClear(1),s.setClear(0),R(n.DEPTH_TEST),o.setFunc(zg),de(!1),Te(E_),R(n.CULL_FACE),le($a);function R(ce){l[ce]!==!0&&(n.enable(ce),l[ce]=!0)}function I(ce){l[ce]!==!1&&(n.disable(ce),l[ce]=!1)}function j(ce,ke){return u[ce]!==ke?(n.bindFramebuffer(ce,ke),u[ce]=ke,ce===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=ke),ce===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=ke),!0):!1}function Z(ce,ke){let Ue=f,je=!1;if(ce){Ue=h.get(ke),Ue===void 0&&(Ue=[],h.set(ke,Ue));let We=ce.textures;if(Ue.length!==We.length||Ue[0]!==n.COLOR_ATTACHMENT0){for(let Pt=0,At=We.length;Pt<At;Pt++)Ue[Pt]=n.COLOR_ATTACHMENT0+Pt;Ue.length=We.length,je=!0}}else Ue[0]!==n.BACK&&(Ue[0]=n.BACK,je=!0);je&&n.drawBuffers(Ue)}function J(ce){return d!==ce?(n.useProgram(ce),d=ce,!0):!1}let W={[ic]:n.FUNC_ADD,[QR]:n.FUNC_SUBTRACT,[$R]:n.FUNC_REVERSE_SUBTRACT};W[eP]=n.MIN,W[tP]=n.MAX;let K={[nP]:n.ZERO,[rP]:n.ONE,[iP]:n.SRC_COLOR,[Rx]:n.SRC_ALPHA,[uP]:n.SRC_ALPHA_SATURATE,[lP]:n.DST_COLOR,[sP]:n.DST_ALPHA,[oP]:n.ONE_MINUS_SRC_COLOR,[Px]:n.ONE_MINUS_SRC_ALPHA,[cP]:n.ONE_MINUS_DST_COLOR,[aP]:n.ONE_MINUS_DST_ALPHA,[hP]:n.CONSTANT_COLOR,[fP]:n.ONE_MINUS_CONSTANT_COLOR,[dP]:n.CONSTANT_ALPHA,[pP]:n.ONE_MINUS_CONSTANT_ALPHA};function le(ce,ke,Ue,je,We,Pt,At,qt,sn,ct){if(ce===$a){m===!0&&(I(n.BLEND),m=!1);return}if(m===!1&&(R(n.BLEND),m=!0),ce!==JR){if(ce!==v||ct!==A){if((p!==ic||y!==ic)&&(n.blendEquation(n.FUNC_ADD),p=ic,y=ic),ct)switch(ce){case Lu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case A_:n.blendFunc(n.ONE,n.ONE);break;case C_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case I_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case Lu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case A_:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case C_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case I_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}g=null,x=null,b=null,S=null,_.set(0,0,0),M=0,v=ce,A=ct}return}We=We||ke,Pt=Pt||Ue,At=At||je,(ke!==p||We!==y)&&(n.blendEquationSeparate(W[ke],W[We]),p=ke,y=We),(Ue!==g||je!==x||Pt!==b||At!==S)&&(n.blendFuncSeparate(K[Ue],K[je],K[Pt],K[At]),g=Ue,x=je,b=Pt,S=At),(qt.equals(_)===!1||sn!==M)&&(n.blendColor(qt.r,qt.g,qt.b,sn),_.copy(qt),M=sn),v=ce,A=!1}function ue(ce,ke){ce.side===br?I(n.CULL_FACE):R(n.CULL_FACE);let Ue=ce.side===wr;ke&&(Ue=!Ue),de(Ue),ce.blending===Lu&&ce.transparent===!1?le($a):le(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),o.setFunc(ce.depthFunc),o.setTest(ce.depthTest),o.setMask(ce.depthWrite),i.setMask(ce.colorWrite);let je=ce.stencilWrite;s.setTest(je),je&&(s.setMask(ce.stencilWriteMask),s.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),s.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),F(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?R(n.SAMPLE_ALPHA_TO_COVERAGE):I(n.SAMPLE_ALPHA_TO_COVERAGE)}function de(ce){w!==ce&&(ce?n.frontFace(n.CW):n.frontFace(n.CCW),w=ce)}function Te(ce){ce!==KR?(R(n.CULL_FACE),ce!==T&&(ce===E_?n.cullFace(n.BACK):ce===YR?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):I(n.CULL_FACE),T=ce}function X(ce){ce!==D&&(U&&n.lineWidth(ce),D=ce)}function F(ce,ke,Ue){ce?(R(n.POLYGON_OFFSET_FILL),(N!==ke||P!==Ue)&&(n.polygonOffset(ke,Ue),N=ke,P=Ue)):I(n.POLYGON_OFFSET_FILL)}function G(ce){ce?R(n.SCISSOR_TEST):I(n.SCISSOR_TEST)}function ge(ce){ce===void 0&&(ce=n.TEXTURE0+E-1),O!==ce&&(n.activeTexture(ce),O=ce)}function we(ce,ke,Ue){Ue===void 0&&(O===null?Ue=n.TEXTURE0+E-1:Ue=O);let je=q[Ue];je===void 0&&(je={type:void 0,texture:void 0},q[Ue]=je),(je.type!==ce||je.texture!==ke)&&(O!==Ue&&(n.activeTexture(Ue),O=Ue),n.bindTexture(ce,ke||C[ce]),je.type=ce,je.texture=ke)}function Ee(){let ce=q[O];ce!==void 0&&ce.type!==void 0&&(n.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function se(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function H(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function re(){try{n.texSubImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function pe(){try{n.texSubImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ee(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function me(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function xe(){try{n.texStorage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ve(){try{n.texStorage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Se(){try{n.texImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ie(){try{n.texImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Le(ce){ye.equals(ce)===!1&&(n.scissor(ce.x,ce.y,ce.z,ce.w),ye.copy(ce))}function He(ce){fe.equals(ce)===!1&&(n.viewport(ce.x,ce.y,ce.z,ce.w),fe.copy(ce))}function ot(ce,ke){let Ue=c.get(ke);Ue===void 0&&(Ue=new WeakMap,c.set(ke,Ue));let je=Ue.get(ce);je===void 0&&(je=n.getUniformBlockIndex(ke,ce.name),Ue.set(ce,je))}function Et(ce,ke){let je=c.get(ke).get(ce);a.get(ke)!==je&&(n.uniformBlockBinding(ke,je,ce.__bindingPointIndex),a.set(ke,je))}function Ve(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),l={},O=null,q={},u={},h=new WeakMap,f=[],d=null,m=!1,v=null,p=null,g=null,x=null,y=null,b=null,S=null,_=new Ke(0,0,0),M=0,A=!1,w=null,T=null,D=null,N=null,P=null,ye.set(0,0,n.canvas.width,n.canvas.height),fe.set(0,0,n.canvas.width,n.canvas.height),i.reset(),o.reset(),s.reset()}return{buffers:{color:i,depth:o,stencil:s},enable:R,disable:I,bindFramebuffer:j,drawBuffers:Z,useProgram:J,setBlending:le,setMaterial:ue,setFlipSided:de,setCullFace:Te,setLineWidth:X,setPolygonOffset:F,setScissorTest:G,activeTexture:ge,bindTexture:we,unbindTexture:Ee,compressedTexImage2D:se,compressedTexImage3D:H,texImage2D:Se,texImage3D:Ie,updateUBOMapping:ot,uniformBlockBinding:Et,texStorage2D:xe,texStorage3D:ve,texSubImage2D:re,texSubImage3D:pe,compressedTexSubImage2D:ee,compressedTexSubImage3D:me,scissor:Le,viewport:He,reset:Ve}}function nO(n,e,t,r,i,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new Ne,u=new WeakMap,h,f=new WeakMap,d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(X,F){return d?new OffscreenCanvas(X,F):Id("canvas")}function v(X,F,G){let ge=1,we=Te(X);if((we.width>G||we.height>G)&&(ge=G/Math.max(we.width,we.height)),ge<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){let Ee=Math.floor(ge*we.width),se=Math.floor(ge*we.height);h===void 0&&(h=m(Ee,se));let H=F?m(Ee,se):h;return H.width=Ee,H.height=se,H.getContext("2d").drawImage(X,0,0,Ee,se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+we.width+"x"+we.height+") to ("+Ee+"x"+se+")."),H}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+we.width+"x"+we.height+")."),X;return X}function p(X){return X.generateMipmaps&&X.minFilter!==Zr&&X.minFilter!==Cr}function g(X){n.generateMipmap(X)}function x(X,F,G,ge,we=!1){if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ee=F;if(F===n.RED&&(G===n.FLOAT&&(Ee=n.R32F),G===n.HALF_FLOAT&&(Ee=n.R16F),G===n.UNSIGNED_BYTE&&(Ee=n.R8)),F===n.RED_INTEGER&&(G===n.UNSIGNED_BYTE&&(Ee=n.R8UI),G===n.UNSIGNED_SHORT&&(Ee=n.R16UI),G===n.UNSIGNED_INT&&(Ee=n.R32UI),G===n.BYTE&&(Ee=n.R8I),G===n.SHORT&&(Ee=n.R16I),G===n.INT&&(Ee=n.R32I)),F===n.RG&&(G===n.FLOAT&&(Ee=n.RG32F),G===n.HALF_FLOAT&&(Ee=n.RG16F),G===n.UNSIGNED_BYTE&&(Ee=n.RG8)),F===n.RG_INTEGER&&(G===n.UNSIGNED_BYTE&&(Ee=n.RG8UI),G===n.UNSIGNED_SHORT&&(Ee=n.RG16UI),G===n.UNSIGNED_INT&&(Ee=n.RG32UI),G===n.BYTE&&(Ee=n.RG8I),G===n.SHORT&&(Ee=n.RG16I),G===n.INT&&(Ee=n.RG32I)),F===n.RGB&&G===n.UNSIGNED_INT_5_9_9_9_REV&&(Ee=n.RGB9_E5),F===n.RGBA){let se=we?Wg:Tn.getTransfer(ge);G===n.FLOAT&&(Ee=n.RGBA32F),G===n.HALF_FLOAT&&(Ee=n.RGBA16F),G===n.UNSIGNED_BYTE&&(Ee=se===zn?n.SRGB8_ALPHA8:n.RGBA8),G===n.UNSIGNED_SHORT_4_4_4_4&&(Ee=n.RGBA4),G===n.UNSIGNED_SHORT_5_5_5_1&&(Ee=n.RGB5_A1)}return(Ee===n.R16F||Ee===n.R32F||Ee===n.RG16F||Ee===n.RG32F||Ee===n.RGBA16F||Ee===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ee}function y(X,F){return p(X)===!0||X.isFramebufferTexture&&X.minFilter!==Zr&&X.minFilter!==Cr?Math.log2(Math.max(F.width,F.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?F.mipmaps.length:1}function b(X){let F=X.target;F.removeEventListener("dispose",b),_(F),F.isVideoTexture&&u.delete(F)}function S(X){let F=X.target;F.removeEventListener("dispose",S),A(F)}function _(X){let F=r.get(X);if(F.__webglInit===void 0)return;let G=X.source,ge=f.get(G);if(ge){let we=ge[F.__cacheKey];we.usedTimes--,we.usedTimes===0&&M(X),Object.keys(ge).length===0&&f.delete(G)}r.remove(X)}function M(X){let F=r.get(X);n.deleteTexture(F.__webglTexture);let G=X.source,ge=f.get(G);delete ge[F.__cacheKey],s.memory.textures--}function A(X){let F=r.get(X);if(X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(F.__webglFramebuffer[ge]))for(let we=0;we<F.__webglFramebuffer[ge].length;we++)n.deleteFramebuffer(F.__webglFramebuffer[ge][we]);else n.deleteFramebuffer(F.__webglFramebuffer[ge]);F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer[ge])}else{if(Array.isArray(F.__webglFramebuffer))for(let ge=0;ge<F.__webglFramebuffer.length;ge++)n.deleteFramebuffer(F.__webglFramebuffer[ge]);else n.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&n.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let ge=0;ge<F.__webglColorRenderbuffer.length;ge++)F.__webglColorRenderbuffer[ge]&&n.deleteRenderbuffer(F.__webglColorRenderbuffer[ge]);F.__webglDepthRenderbuffer&&n.deleteRenderbuffer(F.__webglDepthRenderbuffer)}let G=X.textures;for(let ge=0,we=G.length;ge<we;ge++){let Ee=r.get(G[ge]);Ee.__webglTexture&&(n.deleteTexture(Ee.__webglTexture),s.memory.textures--),r.remove(G[ge])}r.remove(X)}let w=0;function T(){w=0}function D(){let X=w;return X>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+i.maxTextures),w+=1,X}function N(X){let F=[];return F.push(X.wrapS),F.push(X.wrapT),F.push(X.wrapR||0),F.push(X.magFilter),F.push(X.minFilter),F.push(X.anisotropy),F.push(X.internalFormat),F.push(X.format),F.push(X.type),F.push(X.generateMipmaps),F.push(X.premultiplyAlpha),F.push(X.flipY),F.push(X.unpackAlignment),F.push(X.colorSpace),F.join()}function P(X,F){let G=r.get(X);if(X.isVideoTexture&&ue(X),X.isRenderTargetTexture===!1&&X.version>0&&G.__version!==X.version){let ge=X.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ye(G,X,F);return}}t.bindTexture(n.TEXTURE_2D,G.__webglTexture,n.TEXTURE0+F)}function E(X,F){let G=r.get(X);if(X.version>0&&G.__version!==X.version){ye(G,X,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,G.__webglTexture,n.TEXTURE0+F)}function U(X,F){let G=r.get(X);if(X.version>0&&G.__version!==X.version){ye(G,X,F);return}t.bindTexture(n.TEXTURE_3D,G.__webglTexture,n.TEXTURE0+F)}function k(X,F){let G=r.get(X);if(X.version>0&&G.__version!==X.version){fe(G,X,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+F)}let B={[qn]:n.REPEAT,[Qn]:n.CLAMP_TO_EDGE,[Vu]:n.MIRRORED_REPEAT},O={[Zr]:n.NEAREST,[DP]:n.NEAREST_MIPMAP_NEAREST,[ag]:n.NEAREST_MIPMAP_LINEAR,[Cr]:n.LINEAR,[Wy]:n.LINEAR_MIPMAP_NEAREST,[eo]:n.LINEAR_MIPMAP_LINEAR},q={[XP]:n.NEVER,[$P]:n.ALWAYS,[KP]:n.LESS,[IT]:n.LEQUAL,[YP]:n.EQUAL,[QP]:n.GEQUAL,[ZP]:n.GREATER,[JP]:n.NOTEQUAL};function ne(X,F){if(F.type===pa&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===Cr||F.magFilter===Wy||F.magFilter===ag||F.magFilter===eo||F.minFilter===Cr||F.minFilter===Wy||F.minFilter===ag||F.minFilter===eo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(X,n.TEXTURE_WRAP_S,B[F.wrapS]),n.texParameteri(X,n.TEXTURE_WRAP_T,B[F.wrapT]),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,B[F.wrapR]),n.texParameteri(X,n.TEXTURE_MAG_FILTER,O[F.magFilter]),n.texParameteri(X,n.TEXTURE_MIN_FILTER,O[F.minFilter]),F.compareFunction&&(n.texParameteri(X,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(X,n.TEXTURE_COMPARE_FUNC,q[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===Zr||F.minFilter!==ag&&F.minFilter!==eo||F.type===pa&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||r.get(F).__currentAnisotropy){let G=e.get("EXT_texture_filter_anisotropic");n.texParameterf(X,G.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy}}}function ae(X,F){let G=!1;X.__webglInit===void 0&&(X.__webglInit=!0,F.addEventListener("dispose",b));let ge=F.source,we=f.get(ge);we===void 0&&(we={},f.set(ge,we));let Ee=N(F);if(Ee!==X.__cacheKey){we[Ee]===void 0&&(we[Ee]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,G=!0),we[Ee].usedTimes++;let se=we[X.__cacheKey];se!==void 0&&(we[X.__cacheKey].usedTimes--,se.usedTimes===0&&M(F)),X.__cacheKey=Ee,X.__webglTexture=we[Ee].texture}return G}function ye(X,F,G){let ge=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(ge=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(ge=n.TEXTURE_3D);let we=ae(X,F),Ee=F.source;t.bindTexture(ge,X.__webglTexture,n.TEXTURE0+G);let se=r.get(Ee);if(Ee.version!==se.__version||we===!0){t.activeTexture(n.TEXTURE0+G);let H=Tn.getPrimaries(Tn.workingColorSpace),re=F.colorSpace===Qa?null:Tn.getPrimaries(F.colorSpace),pe=F.colorSpace===Qa||H===re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,pe);let ee=v(F.image,!1,i.maxTextureSize);ee=de(F,ee);let me=o.convert(F.format,F.colorSpace),xe=o.convert(F.type),ve=x(F.internalFormat,me,xe,F.colorSpace,F.isVideoTexture);ne(ge,F);let Se,Ie=F.mipmaps,Le=F.isVideoTexture!==!0&&ve!==CT,He=se.__version===void 0||we===!0,ot=Ee.dataReady,Et=y(F,ee);if(F.isDepthTexture)ve=n.DEPTH_COMPONENT16,F.type===pa?ve=n.DEPTH_COMPONENT32F:F.type===Hu?ve=n.DEPTH_COMPONENT24:F.type===zd&&(ve=n.DEPTH24_STENCIL8),He&&(Le?t.texStorage2D(n.TEXTURE_2D,1,ve,ee.width,ee.height):t.texImage2D(n.TEXTURE_2D,0,ve,ee.width,ee.height,0,me,xe,null));else if(F.isDataTexture)if(Ie.length>0){Le&&He&&t.texStorage2D(n.TEXTURE_2D,Et,ve,Ie[0].width,Ie[0].height);for(let Ve=0,ce=Ie.length;Ve<ce;Ve++)Se=Ie[Ve],Le?ot&&t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,Se.width,Se.height,me,xe,Se.data):t.texImage2D(n.TEXTURE_2D,Ve,ve,Se.width,Se.height,0,me,xe,Se.data);F.generateMipmaps=!1}else Le?(He&&t.texStorage2D(n.TEXTURE_2D,Et,ve,ee.width,ee.height),ot&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ee.width,ee.height,me,xe,ee.data)):t.texImage2D(n.TEXTURE_2D,0,ve,ee.width,ee.height,0,me,xe,ee.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){Le&&He&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Et,ve,Ie[0].width,Ie[0].height,ee.depth);for(let Ve=0,ce=Ie.length;Ve<ce;Ve++)Se=Ie[Ve],F.format!==jo?me!==null?Le?ot&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ve,0,0,0,Se.width,Se.height,ee.depth,me,Se.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ve,ve,Se.width,Se.height,ee.depth,0,Se.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?ot&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ve,0,0,0,Se.width,Se.height,ee.depth,me,xe,Se.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ve,ve,Se.width,Se.height,ee.depth,0,me,xe,Se.data)}else{Le&&He&&t.texStorage2D(n.TEXTURE_2D,Et,ve,Ie[0].width,Ie[0].height);for(let Ve=0,ce=Ie.length;Ve<ce;Ve++)Se=Ie[Ve],F.format!==jo?me!==null?Le?ot&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ve,0,0,Se.width,Se.height,me,Se.data):t.compressedTexImage2D(n.TEXTURE_2D,Ve,ve,Se.width,Se.height,0,Se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?ot&&t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,Se.width,Se.height,me,xe,Se.data):t.texImage2D(n.TEXTURE_2D,Ve,ve,Se.width,Se.height,0,me,xe,Se.data)}else if(F.isDataArrayTexture)Le?(He&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Et,ve,ee.width,ee.height,ee.depth),ot&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ee.width,ee.height,ee.depth,me,xe,ee.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,ve,ee.width,ee.height,ee.depth,0,me,xe,ee.data);else if(F.isData3DTexture)Le?(He&&t.texStorage3D(n.TEXTURE_3D,Et,ve,ee.width,ee.height,ee.depth),ot&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ee.width,ee.height,ee.depth,me,xe,ee.data)):t.texImage3D(n.TEXTURE_3D,0,ve,ee.width,ee.height,ee.depth,0,me,xe,ee.data);else if(F.isFramebufferTexture){if(He)if(Le)t.texStorage2D(n.TEXTURE_2D,Et,ve,ee.width,ee.height);else{let Ve=ee.width,ce=ee.height;for(let ke=0;ke<Et;ke++)t.texImage2D(n.TEXTURE_2D,ke,ve,Ve,ce,0,me,xe,null),Ve>>=1,ce>>=1}}else if(Ie.length>0){if(Le&&He){let Ve=Te(Ie[0]);t.texStorage2D(n.TEXTURE_2D,Et,ve,Ve.width,Ve.height)}for(let Ve=0,ce=Ie.length;Ve<ce;Ve++)Se=Ie[Ve],Le?ot&&t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,me,xe,Se):t.texImage2D(n.TEXTURE_2D,Ve,ve,me,xe,Se);F.generateMipmaps=!1}else if(Le){if(He){let Ve=Te(ee);t.texStorage2D(n.TEXTURE_2D,Et,ve,Ve.width,Ve.height)}ot&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,me,xe,ee)}else t.texImage2D(n.TEXTURE_2D,0,ve,me,xe,ee);p(F)&&g(ge),se.__version=Ee.version,F.onUpdate&&F.onUpdate(F)}X.__version=F.version}function fe(X,F,G){if(F.image.length!==6)return;let ge=ae(X,F),we=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+G);let Ee=r.get(we);if(we.version!==Ee.__version||ge===!0){t.activeTexture(n.TEXTURE0+G);let se=Tn.getPrimaries(Tn.workingColorSpace),H=F.colorSpace===Qa?null:Tn.getPrimaries(F.colorSpace),re=F.colorSpace===Qa||se===H?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,re);let pe=F.isCompressedTexture||F.image[0].isCompressedTexture,ee=F.image[0]&&F.image[0].isDataTexture,me=[];for(let ce=0;ce<6;ce++)!pe&&!ee?me[ce]=v(F.image[ce],!0,i.maxCubemapSize):me[ce]=ee?F.image[ce].image:F.image[ce],me[ce]=de(F,me[ce]);let xe=me[0],ve=o.convert(F.format,F.colorSpace),Se=o.convert(F.type),Ie=x(F.internalFormat,ve,Se,F.colorSpace),Le=F.isVideoTexture!==!0,He=Ee.__version===void 0||ge===!0,ot=we.dataReady,Et=y(F,xe);ne(n.TEXTURE_CUBE_MAP,F);let Ve;if(pe){Le&&He&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Et,Ie,xe.width,xe.height);for(let ce=0;ce<6;ce++){Ve=me[ce].mipmaps;for(let ke=0;ke<Ve.length;ke++){let Ue=Ve[ke];F.format!==jo?ve!==null?Le?ot&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke,0,0,Ue.width,Ue.height,ve,Ue.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke,Ie,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Le?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke,0,0,Ue.width,Ue.height,ve,Se,Ue.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke,Ie,Ue.width,Ue.height,0,ve,Se,Ue.data)}}}else{if(Ve=F.mipmaps,Le&&He){Ve.length>0&&Et++;let ce=Te(me[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Et,Ie,ce.width,ce.height)}for(let ce=0;ce<6;ce++)if(ee){Le?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,me[ce].width,me[ce].height,ve,Se,me[ce].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,Ie,me[ce].width,me[ce].height,0,ve,Se,me[ce].data);for(let ke=0;ke<Ve.length;ke++){let je=Ve[ke].image[ce].image;Le?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke+1,0,0,je.width,je.height,ve,Se,je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke+1,Ie,je.width,je.height,0,ve,Se,je.data)}}else{Le?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,ve,Se,me[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,Ie,ve,Se,me[ce]);for(let ke=0;ke<Ve.length;ke++){let Ue=Ve[ke];Le?ot&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke+1,0,0,ve,Se,Ue.image[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke+1,Ie,ve,Se,Ue.image[ce])}}}p(F)&&g(n.TEXTURE_CUBE_MAP),Ee.__version=we.version,F.onUpdate&&F.onUpdate(F)}X.__version=F.version}function L(X,F,G,ge,we,Ee){let se=o.convert(G.format,G.colorSpace),H=o.convert(G.type),re=x(G.internalFormat,se,H,G.colorSpace);if(!r.get(F).__hasExternalTextures){let ee=Math.max(1,F.width>>Ee),me=Math.max(1,F.height>>Ee);we===n.TEXTURE_3D||we===n.TEXTURE_2D_ARRAY?t.texImage3D(we,Ee,re,ee,me,F.depth,0,se,H,null):t.texImage2D(we,Ee,re,ee,me,0,se,H,null)}t.bindFramebuffer(n.FRAMEBUFFER,X),le(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ge,we,r.get(G).__webglTexture,0,K(F)):(we===n.TEXTURE_2D||we>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&we<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ge,we,r.get(G).__webglTexture,Ee),t.bindFramebuffer(n.FRAMEBUFFER,null)}function C(X,F,G){if(n.bindRenderbuffer(n.RENDERBUFFER,X),F.depthBuffer&&!F.stencilBuffer){let ge=n.DEPTH_COMPONENT24;if(G||le(F)){let we=F.depthTexture;we&&we.isDepthTexture&&(we.type===pa?ge=n.DEPTH_COMPONENT32F:we.type===Hu&&(ge=n.DEPTH_COMPONENT24));let Ee=K(F);le(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ee,ge,F.width,F.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ee,ge,F.width,F.height)}else n.renderbufferStorage(n.RENDERBUFFER,ge,F.width,F.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,X)}else if(F.depthBuffer&&F.stencilBuffer){let ge=K(F);G&&le(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ge,n.DEPTH24_STENCIL8,F.width,F.height):le(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ge,n.DEPTH24_STENCIL8,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,X)}else{let ge=F.textures;for(let we=0;we<ge.length;we++){let Ee=ge[we],se=o.convert(Ee.format,Ee.colorSpace),H=o.convert(Ee.type),re=x(Ee.internalFormat,se,H,Ee.colorSpace),pe=K(F);G&&le(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,pe,re,F.width,F.height):le(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pe,re,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,re,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function R(X,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,X),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),P(F.depthTexture,0);let ge=r.get(F.depthTexture).__webglTexture,we=K(F);if(F.depthTexture.format===Ou)le(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ge,0,we):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ge,0);else if(F.depthTexture.format===Cd)le(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ge,0,we):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ge,0);else throw new Error("Unknown depthTexture format")}function I(X){let F=r.get(X),G=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture&&!F.__autoAllocateDepthBuffer){if(G)throw new Error("target.depthTexture not supported in Cube render targets");R(F.__webglFramebuffer,X)}else if(G){F.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[ge]),F.__webglDepthbuffer[ge]=n.createRenderbuffer(),C(F.__webglDepthbuffer[ge],X,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer=n.createRenderbuffer(),C(F.__webglDepthbuffer,X,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function j(X,F,G){let ge=r.get(X);F!==void 0&&L(ge.__webglFramebuffer,X,X.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),G!==void 0&&I(X)}function Z(X){let F=X.texture,G=r.get(X),ge=r.get(F);X.addEventListener("dispose",S);let we=X.textures,Ee=X.isWebGLCubeRenderTarget===!0,se=we.length>1;if(se||(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=F.version,s.memory.textures++),Ee){G.__webglFramebuffer=[];for(let H=0;H<6;H++)if(F.mipmaps&&F.mipmaps.length>0){G.__webglFramebuffer[H]=[];for(let re=0;re<F.mipmaps.length;re++)G.__webglFramebuffer[H][re]=n.createFramebuffer()}else G.__webglFramebuffer[H]=n.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){G.__webglFramebuffer=[];for(let H=0;H<F.mipmaps.length;H++)G.__webglFramebuffer[H]=n.createFramebuffer()}else G.__webglFramebuffer=n.createFramebuffer();if(se)for(let H=0,re=we.length;H<re;H++){let pe=r.get(we[H]);pe.__webglTexture===void 0&&(pe.__webglTexture=n.createTexture(),s.memory.textures++)}if(X.samples>0&&le(X)===!1){G.__webglMultisampledFramebuffer=n.createFramebuffer(),G.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,G.__webglMultisampledFramebuffer);for(let H=0;H<we.length;H++){let re=we[H];G.__webglColorRenderbuffer[H]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,G.__webglColorRenderbuffer[H]);let pe=o.convert(re.format,re.colorSpace),ee=o.convert(re.type),me=x(re.internalFormat,pe,ee,re.colorSpace,X.isXRRenderTarget===!0),xe=K(X);n.renderbufferStorageMultisample(n.RENDERBUFFER,xe,me,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+H,n.RENDERBUFFER,G.__webglColorRenderbuffer[H])}n.bindRenderbuffer(n.RENDERBUFFER,null),X.depthBuffer&&(G.__webglDepthRenderbuffer=n.createRenderbuffer(),C(G.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ee){t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),ne(n.TEXTURE_CUBE_MAP,F);for(let H=0;H<6;H++)if(F.mipmaps&&F.mipmaps.length>0)for(let re=0;re<F.mipmaps.length;re++)L(G.__webglFramebuffer[H][re],X,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+H,re);else L(G.__webglFramebuffer[H],X,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+H,0);p(F)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(se){for(let H=0,re=we.length;H<re;H++){let pe=we[H],ee=r.get(pe);t.bindTexture(n.TEXTURE_2D,ee.__webglTexture),ne(n.TEXTURE_2D,pe),L(G.__webglFramebuffer,X,pe,n.COLOR_ATTACHMENT0+H,n.TEXTURE_2D,0),p(pe)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let H=n.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(H=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(H,ge.__webglTexture),ne(H,F),F.mipmaps&&F.mipmaps.length>0)for(let re=0;re<F.mipmaps.length;re++)L(G.__webglFramebuffer[re],X,F,n.COLOR_ATTACHMENT0,H,re);else L(G.__webglFramebuffer,X,F,n.COLOR_ATTACHMENT0,H,0);p(F)&&g(H),t.unbindTexture()}X.depthBuffer&&I(X)}function J(X){let F=X.textures;for(let G=0,ge=F.length;G<ge;G++){let we=F[G];if(p(we)){let Ee=X.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,se=r.get(we).__webglTexture;t.bindTexture(Ee,se),g(Ee),t.unbindTexture()}}}function W(X){if(X.samples>0&&le(X)===!1){let F=X.textures,G=X.width,ge=X.height,we=n.COLOR_BUFFER_BIT,Ee=[],se=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,H=r.get(X),re=F.length>1;if(re)for(let pe=0;pe<F.length;pe++)t.bindFramebuffer(n.FRAMEBUFFER,H.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+pe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,H.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,H.__webglFramebuffer);for(let pe=0;pe<F.length;pe++){Ee.push(n.COLOR_ATTACHMENT0+pe),X.depthBuffer&&Ee.push(se);let ee=H.__ignoreDepthValues!==void 0?H.__ignoreDepthValues:!1;if(ee===!1&&(X.depthBuffer&&(we|=n.DEPTH_BUFFER_BIT),X.stencilBuffer&&H.__isTransmissionRenderTarget!==!0&&(we|=n.STENCIL_BUFFER_BIT)),re&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,H.__webglColorRenderbuffer[pe]),ee===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[se]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[se])),re){let me=r.get(F[pe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,me,0)}n.blitFramebuffer(0,0,G,ge,0,0,G,ge,we,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ee)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),re)for(let pe=0;pe<F.length;pe++){t.bindFramebuffer(n.FRAMEBUFFER,H.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pe,n.RENDERBUFFER,H.__webglColorRenderbuffer[pe]);let ee=r.get(F[pe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+pe,n.TEXTURE_2D,ee,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,H.__webglMultisampledFramebuffer)}}function K(X){return Math.min(i.maxSamples,X.samples)}function le(X){let F=r.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function ue(X){let F=s.render.frame;u.get(X)!==F&&(u.set(X,F),X.update())}function de(X,F){let G=X.colorSpace,ge=X.format,we=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||G!==Oi&&G!==Qa&&(Tn.getTransfer(G)===zn?(ge!==jo||we!==tl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",G)),F}function Te(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(l.width=X.naturalWidth||X.width,l.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(l.width=X.displayWidth,l.height=X.displayHeight):(l.width=X.width,l.height=X.height),l}this.allocateTextureUnit=D,this.resetTextureUnits=T,this.setTexture2D=P,this.setTexture2DArray=E,this.setTexture3D=U,this.setTextureCube=k,this.rebindTextures=j,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=J,this.updateMultisampleRenderTarget=W,this.setupDepthRenderbuffer=I,this.setupFrameBufferTexture=L,this.useMultisampledRTT=le}function rO(n,e){function t(r,i=Qa){let o,s=Tn.getTransfer(i);if(r===tl)return n.UNSIGNED_BYTE;if(r===_T)return n.UNSIGNED_SHORT_4_4_4_4;if(r===TT)return n.UNSIGNED_SHORT_5_5_5_1;if(r===LP)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===FP)return n.BYTE;if(r===NP)return n.SHORT;if(r===wT)return n.UNSIGNED_SHORT;if(r===ST)return n.INT;if(r===Hu)return n.UNSIGNED_INT;if(r===pa)return n.FLOAT;if(r===Gg)return n.HALF_FLOAT;if(r===OP)return n.ALPHA;if(r===kP)return n.RGB;if(r===jo)return n.RGBA;if(r===UP)return n.LUMINANCE;if(r===BP)return n.LUMINANCE_ALPHA;if(r===Ou)return n.DEPTH_COMPONENT;if(r===Cd)return n.DEPTH_STENCIL;if(r===zP)return n.RED;if(r===MT)return n.RED_INTEGER;if(r===GP)return n.RG;if(r===ET)return n.RG_INTEGER;if(r===AT)return n.RGBA_INTEGER;if(r===jy||r===qy||r===Xy||r===Ky)if(s===zn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===jy)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===qy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Xy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Ky)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===jy)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===qy)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Xy)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Ky)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===P_||r===D_||r===F_||r===N_)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===P_)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===D_)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===F_)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===N_)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===CT)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(r===L_||r===O_)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===L_)return s===zn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===O_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===k_||r===U_||r===B_||r===z_||r===G_||r===V_||r===H_||r===W_||r===j_||r===q_||r===X_||r===K_||r===Y_||r===Z_)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===k_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===U_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===B_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===z_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===G_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===V_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===H_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===W_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===j_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===q_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===X_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===K_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Y_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Z_)return s===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Yy||r===J_||r===Q_)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===Yy)return s===zn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===J_)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Q_)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===VP||r===$_||r===e1||r===t1)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===Yy)return o.COMPRESSED_RED_RGTC1_EXT;if(r===$_)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===e1)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===t1)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===zd?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}var jx=class extends Gn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},rr=class extends an{constructor(){super(),this.isGroup=!0,this.type="Group"}},iO={type:"move"},Td=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,o=null,s=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let v of e.hand.values()){let p=t.getJointPose(v,r),g=this._getHandJoint(l,v);p!==null&&(g.matrix.fromArray(p.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=p.radius),g.visible=p!==null}let u=l.joints["index-finger-tip"],h=l.joints["thumb-tip"],f=u.position.distanceTo(h.position),d=.02,m=.005;l.inputState.pinching&&f>d+m?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=d-m&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(iO)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=o!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new rr;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},oO=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,sO=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,qx=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){let i=new zr,o=e.properties.get(i);o.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}render(e,t){if(this.texture!==null){if(this.mesh===null){let r=t.cameras[0].viewport,i=new As({vertexShader:oO,fragmentShader:sO,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new hn(new Ku(20,20),i)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}},Xx=class extends rl{constructor(e,t){super();let r=this,i=null,o=1,s=null,a="local-floor",c=1,l=null,u=null,h=null,f=null,d=null,m=null,v=new qx,p=t.getContextAttributes(),g=null,x=null,y=[],b=[],S=new Ne,_=null,M=new Gn;M.layers.enable(1),M.viewport=new dn;let A=new Gn;A.layers.enable(2),A.viewport=new dn;let w=[M,A],T=new jx;T.layers.enable(1),T.layers.enable(2);let D=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let C=y[L];return C===void 0&&(C=new Td,y[L]=C),C.getTargetRaySpace()},this.getControllerGrip=function(L){let C=y[L];return C===void 0&&(C=new Td,y[L]=C),C.getGripSpace()},this.getHand=function(L){let C=y[L];return C===void 0&&(C=new Td,y[L]=C),C.getHandSpace()};function P(L){let C=b.indexOf(L.inputSource);if(C===-1)return;let R=y[C];R!==void 0&&(R.update(L.inputSource,L.frame,l||s),R.dispatchEvent({type:L.type,data:L.inputSource}))}function E(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",E),i.removeEventListener("inputsourceschange",U);for(let L=0;L<y.length;L++){let C=b[L];C!==null&&(b[L]=null,y[L].disconnect(C))}D=null,N=null,v.reset(),e.setRenderTarget(g),d=null,f=null,h=null,i=null,x=null,fe.stop(),r.isPresenting=!1,e.setPixelRatio(_),e.setSize(S.width,S.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){o=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){a=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(L){l=L},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(L){if(i=L,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",E),i.addEventListener("inputsourceschange",U),p.xrCompatible!==!0&&await t.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(S),i.renderState.layers===void 0){let C={antialias:p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,t,C),i.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),x=new ga(d.framebufferWidth,d.framebufferHeight,{format:jo,type:tl,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let C=null,R=null,I=null;p.depth&&(I=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,C=p.stencil?Cd:Ou,R=p.stencil?zd:Hu);let j={colorFormat:t.RGBA8,depthFormat:I,scaleFactor:o};h=new XRWebGLBinding(i,t),f=h.createProjectionLayer(j),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),x=new ga(f.textureWidth,f.textureHeight,{format:jo,type:tl,depthTexture:new $g(f.textureWidth,f.textureHeight,R,void 0,void 0,void 0,void 0,void 0,void 0,C),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0});let Z=e.properties.get(x);Z.__ignoreDepthValues=f.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(c),l=null,s=await i.requestReferenceSpace(a),fe.setContext(i),fe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function U(L){for(let C=0;C<L.removed.length;C++){let R=L.removed[C],I=b.indexOf(R);I>=0&&(b[I]=null,y[I].disconnect(R))}for(let C=0;C<L.added.length;C++){let R=L.added[C],I=b.indexOf(R);if(I===-1){for(let Z=0;Z<y.length;Z++)if(Z>=b.length){b.push(R),I=Z;break}else if(b[Z]===null){b[Z]=R,I=Z;break}if(I===-1)break}let j=y[I];j&&j.connect(R)}}let k=new he,B=new he;function O(L,C,R){k.setFromMatrixPosition(C.matrixWorld),B.setFromMatrixPosition(R.matrixWorld);let I=k.distanceTo(B),j=C.projectionMatrix.elements,Z=R.projectionMatrix.elements,J=j[14]/(j[10]-1),W=j[14]/(j[10]+1),K=(j[9]+1)/j[5],le=(j[9]-1)/j[5],ue=(j[8]-1)/j[0],de=(Z[8]+1)/Z[0],Te=J*ue,X=J*de,F=I/(-ue+de),G=F*-ue;C.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(G),L.translateZ(F),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();let ge=J+F,we=W+F,Ee=Te-G,se=X+(I-G),H=K*W/we*ge,re=le*W/we*ge;L.projectionMatrix.makePerspective(Ee,se,H,re,ge,we),L.projectionMatrixInverse.copy(L.projectionMatrix).invert()}function q(L,C){C===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(C.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(i===null)return;v.texture!==null&&(L.near=v.depthNear,L.far=v.depthFar),T.near=A.near=M.near=L.near,T.far=A.far=M.far=L.far,(D!==T.near||N!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),D=T.near,N=T.far,M.near=D,M.far=N,A.near=D,A.far=N,M.updateProjectionMatrix(),A.updateProjectionMatrix(),L.updateProjectionMatrix());let C=L.parent,R=T.cameras;q(T,C);for(let I=0;I<R.length;I++)q(R[I],C);R.length===2?O(T,M,A):T.projectionMatrix.copy(M.projectionMatrix),ne(L,T,C)};function ne(L,C,R){R===null?L.matrix.copy(C.matrixWorld):(L.matrix.copy(R.matrixWorld),L.matrix.invert(),L.matrix.multiply(C.matrixWorld)),L.matrix.decompose(L.position,L.quaternion,L.scale),L.updateMatrixWorld(!0),L.projectionMatrix.copy(C.projectionMatrix),L.projectionMatrixInverse.copy(C.projectionMatrixInverse),L.isPerspectiveCamera&&(L.fov=Wu*2*Math.atan(1/L.projectionMatrix.elements[5]),L.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(f===null&&d===null))return c},this.setFoveation=function(L){c=L,f!==null&&(f.fixedFoveation=L),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=L)},this.hasDepthSensing=function(){return v.texture!==null};let ae=null;function ye(L,C){if(u=C.getViewerPose(l||s),m=C,u!==null){let R=u.views;d!==null&&(e.setRenderTargetFramebuffer(x,d.framebuffer),e.setRenderTarget(x));let I=!1;R.length!==T.cameras.length&&(T.cameras.length=0,I=!0);for(let Z=0;Z<R.length;Z++){let J=R[Z],W=null;if(d!==null)W=d.getViewport(J);else{let le=h.getViewSubImage(f,J);W=le.viewport,Z===0&&(e.setRenderTargetTextures(x,le.colorTexture,f.ignoreDepthValues?void 0:le.depthStencilTexture),e.setRenderTarget(x))}let K=w[Z];K===void 0&&(K=new Gn,K.layers.enable(Z),K.viewport=new dn,w[Z]=K),K.matrix.fromArray(J.transform.matrix),K.matrix.decompose(K.position,K.quaternion,K.scale),K.projectionMatrix.fromArray(J.projectionMatrix),K.projectionMatrixInverse.copy(K.projectionMatrix).invert(),K.viewport.set(W.x,W.y,W.width,W.height),Z===0&&(T.matrix.copy(K.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),I===!0&&T.cameras.push(K)}let j=i.enabledFeatures;if(j&&j.includes("depth-sensing")){let Z=h.getDepthInformation(R[0]);Z&&Z.isValid&&Z.texture&&v.init(e,Z,i.renderState)}}for(let R=0;R<y.length;R++){let I=b[R],j=y[R];I!==null&&j!==void 0&&j.update(I,C,l||s)}v.render(e,T),ae&&ae(L,C),C.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:C}),m=null}let fe=new FT;fe.setAnimationLoop(ye),this.setAnimationLoop=function(L){ae=L},this.dispose=function(){}}},nc=new $n,aO=new tt;function lO(n,e){function t(p,g){p.matrixAutoUpdate===!0&&p.updateMatrix(),g.value.copy(p.matrix)}function r(p,g){g.color.getRGB(p.fogColor.value,DT(n)),g.isFog?(p.fogNear.value=g.near,p.fogFar.value=g.far):g.isFogExp2&&(p.fogDensity.value=g.density)}function i(p,g,x,y,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(p,g):g.isMeshToonMaterial?(o(p,g),h(p,g)):g.isMeshPhongMaterial?(o(p,g),u(p,g)):g.isMeshStandardMaterial?(o(p,g),f(p,g),g.isMeshPhysicalMaterial&&d(p,g,b)):g.isMeshMatcapMaterial?(o(p,g),m(p,g)):g.isMeshDepthMaterial?o(p,g):g.isMeshDistanceMaterial?(o(p,g),v(p,g)):g.isMeshNormalMaterial?o(p,g):g.isLineBasicMaterial?(s(p,g),g.isLineDashedMaterial&&a(p,g)):g.isPointsMaterial?c(p,g,x,y):g.isSpriteMaterial?l(p,g):g.isShadowMaterial?(p.color.value.copy(g.color),p.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(p,g){p.opacity.value=g.opacity,g.color&&p.diffuse.value.copy(g.color),g.emissive&&p.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(p.map.value=g.map,t(g.map,p.mapTransform)),g.alphaMap&&(p.alphaMap.value=g.alphaMap,t(g.alphaMap,p.alphaMapTransform)),g.bumpMap&&(p.bumpMap.value=g.bumpMap,t(g.bumpMap,p.bumpMapTransform),p.bumpScale.value=g.bumpScale,g.side===wr&&(p.bumpScale.value*=-1)),g.normalMap&&(p.normalMap.value=g.normalMap,t(g.normalMap,p.normalMapTransform),p.normalScale.value.copy(g.normalScale),g.side===wr&&p.normalScale.value.negate()),g.displacementMap&&(p.displacementMap.value=g.displacementMap,t(g.displacementMap,p.displacementMapTransform),p.displacementScale.value=g.displacementScale,p.displacementBias.value=g.displacementBias),g.emissiveMap&&(p.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,p.emissiveMapTransform)),g.specularMap&&(p.specularMap.value=g.specularMap,t(g.specularMap,p.specularMapTransform)),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest);let x=e.get(g),y=x.envMap,b=x.envMapRotation;if(y&&(p.envMap.value=y,nc.copy(b),nc.x*=-1,nc.y*=-1,nc.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(nc.y*=-1,nc.z*=-1),p.envMapRotation.value.setFromMatrix4(aO.makeRotationFromEuler(nc)),p.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=g.reflectivity,p.ior.value=g.ior,p.refractionRatio.value=g.refractionRatio),g.lightMap){p.lightMap.value=g.lightMap;let S=n._useLegacyLights===!0?Math.PI:1;p.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,p.lightMapTransform)}g.aoMap&&(p.aoMap.value=g.aoMap,p.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,p.aoMapTransform))}function s(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,g.map&&(p.map.value=g.map,t(g.map,p.mapTransform))}function a(p,g){p.dashSize.value=g.dashSize,p.totalSize.value=g.dashSize+g.gapSize,p.scale.value=g.scale}function c(p,g,x,y){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.size.value=g.size*x,p.scale.value=y*.5,g.map&&(p.map.value=g.map,t(g.map,p.uvTransform)),g.alphaMap&&(p.alphaMap.value=g.alphaMap,t(g.alphaMap,p.alphaMapTransform)),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest)}function l(p,g){p.diffuse.value.copy(g.color),p.opacity.value=g.opacity,p.rotation.value=g.rotation,g.map&&(p.map.value=g.map,t(g.map,p.mapTransform)),g.alphaMap&&(p.alphaMap.value=g.alphaMap,t(g.alphaMap,p.alphaMapTransform)),g.alphaTest>0&&(p.alphaTest.value=g.alphaTest)}function u(p,g){p.specular.value.copy(g.specular),p.shininess.value=Math.max(g.shininess,1e-4)}function h(p,g){g.gradientMap&&(p.gradientMap.value=g.gradientMap)}function f(p,g){p.metalness.value=g.metalness,g.metalnessMap&&(p.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,p.metalnessMapTransform)),p.roughness.value=g.roughness,g.roughnessMap&&(p.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,p.roughnessMapTransform)),g.envMap&&(p.envMapIntensity.value=g.envMapIntensity)}function d(p,g,x){p.ior.value=g.ior,g.sheen>0&&(p.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),p.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(p.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,p.sheenColorMapTransform)),g.sheenRoughnessMap&&(p.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,p.sheenRoughnessMapTransform))),g.clearcoat>0&&(p.clearcoat.value=g.clearcoat,p.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(p.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,p.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(p.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===wr&&p.clearcoatNormalScale.value.negate())),g.iridescence>0&&(p.iridescence.value=g.iridescence,p.iridescenceIOR.value=g.iridescenceIOR,p.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(p.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,p.iridescenceMapTransform)),g.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),g.transmission>0&&(p.transmission.value=g.transmission,p.transmissionSamplerMap.value=x.texture,p.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(p.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,p.transmissionMapTransform)),p.thickness.value=g.thickness,g.thicknessMap&&(p.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=g.attenuationDistance,p.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(p.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(p.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,p.anisotropyMapTransform))),p.specularIntensity.value=g.specularIntensity,p.specularColor.value.copy(g.specularColor),g.specularColorMap&&(p.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,p.specularColorMapTransform)),g.specularIntensityMap&&(p.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,p.specularIntensityMapTransform))}function m(p,g){g.matcap&&(p.matcap.value=g.matcap)}function v(p,g){let x=e.get(g).light;p.referencePosition.value.setFromMatrixPosition(x.matrixWorld),p.nearDistance.value=x.shadow.camera.near,p.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function cO(n,e,t,r){let i={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(x,y){let b=y.program;r.uniformBlockBinding(x,b)}function l(x,y){let b=i[x.id];b===void 0&&(m(x),b=u(x),i[x.id]=b,x.addEventListener("dispose",p));let S=y.program;r.updateUBOMapping(x,S);let _=e.render.frame;o[x.id]!==_&&(f(x),o[x.id]=_)}function u(x){let y=h();x.__bindingPointIndex=y;let b=n.createBuffer(),S=x.__size,_=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,S,_),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,b),b}function h(){for(let x=0;x<a;x++)if(s.indexOf(x)===-1)return s.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(x){let y=i[x.id],b=x.uniforms,S=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,y);for(let _=0,M=b.length;_<M;_++){let A=Array.isArray(b[_])?b[_]:[b[_]];for(let w=0,T=A.length;w<T;w++){let D=A[w];if(d(D,_,w,S)===!0){let N=D.__offset,P=Array.isArray(D.value)?D.value:[D.value],E=0;for(let U=0;U<P.length;U++){let k=P[U],B=v(k);typeof k=="number"||typeof k=="boolean"?(D.__data[0]=k,n.bufferSubData(n.UNIFORM_BUFFER,N+E,D.__data)):k.isMatrix3?(D.__data[0]=k.elements[0],D.__data[1]=k.elements[1],D.__data[2]=k.elements[2],D.__data[3]=0,D.__data[4]=k.elements[3],D.__data[5]=k.elements[4],D.__data[6]=k.elements[5],D.__data[7]=0,D.__data[8]=k.elements[6],D.__data[9]=k.elements[7],D.__data[10]=k.elements[8],D.__data[11]=0):(k.toArray(D.__data,E),E+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,N,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function d(x,y,b,S){let _=x.value,M=y+"_"+b;if(S[M]===void 0)return typeof _=="number"||typeof _=="boolean"?S[M]=_:S[M]=_.clone(),!0;{let A=S[M];if(typeof _=="number"||typeof _=="boolean"){if(A!==_)return S[M]=_,!0}else if(A.equals(_)===!1)return A.copy(_),!0}return!1}function m(x){let y=x.uniforms,b=0,S=16;for(let M=0,A=y.length;M<A;M++){let w=Array.isArray(y[M])?y[M]:[y[M]];for(let T=0,D=w.length;T<D;T++){let N=w[T],P=Array.isArray(N.value)?N.value:[N.value];for(let E=0,U=P.length;E<U;E++){let k=P[E],B=v(k),O=b%S;O!==0&&S-O<B.boundary&&(b+=S-O),N.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=b,b+=B.storage}}}let _=b%S;return _>0&&(b+=S-_),x.__size=b,x.__cache={},this}function v(x){let y={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(y.boundary=4,y.storage=4):x.isVector2?(y.boundary=8,y.storage=8):x.isVector3||x.isColor?(y.boundary=16,y.storage=12):x.isVector4?(y.boundary=16,y.storage=16):x.isMatrix3?(y.boundary=48,y.storage=48):x.isMatrix4?(y.boundary=64,y.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),y}function p(x){let y=x.target;y.removeEventListener("dispose",p);let b=s.indexOf(y.__bindingPointIndex);s.splice(b,1),n.deleteBuffer(i[y.id]),delete i[y.id],delete o[y.id]}function g(){for(let x in i)n.deleteBuffer(i[x]);s=[],i={},o={}}return{bind:c,update:l,dispose:g}}var il=class{constructor(e={}){let{canvas:t=g2(),context:r=null,depth:i=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=s;let d=new Uint32Array(4),m=new Int32Array(4),v=null,p=null,g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ln,this._useLegacyLights=!1,this.toneMapping=el,this.toneMappingExposure=1;let y=this,b=!1,S=0,_=0,M=null,A=-1,w=null,T=new dn,D=new dn,N=null,P=new Ke(0),E=0,U=t.width,k=t.height,B=1,O=null,q=null,ne=new dn(0,0,U,k),ae=new dn(0,0,U,k),ye=!1,fe=new Dd,L=!1,C=!1,R=new tt,I=new Ne,j=new he,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return M===null?B:1}let W=r;function K(oe,Me){let Re=t.getContext(oe,Me);return Re!==null?Re:null}try{let oe={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${pb}`),t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",Ue,!1),t.addEventListener("webglcontextcreationerror",je,!1),W===null){let Me="webgl2";if(W=K(Me,oe),W===null)throw K(Me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(oe){throw console.error("THREE.WebGLRenderer: "+oe.message),oe}let le,ue,de,Te,X,F,G,ge,we,Ee,se,H,re,pe,ee,me,xe,ve,Se,Ie,Le,He,ot,Et;function Ve(){le=new CN(W),le.init(),ue=new SN(W,le,e),He=new rO(W,le),de=new tO(W),Te=new PN(W),X=new HL,F=new nO(W,le,de,X,ue,He,Te),G=new TN(y),ge=new AN(y),we=new k2(W),ot=new bN(W,we),Ee=new IN(W,we,Te,ot),se=new FN(W,Ee,we,Te),Se=new DN(W,ue,F),me=new _N(X),H=new VL(y,G,ge,le,ue,ot,me),re=new lO(y,X),pe=new jL,ee=new JL(le),ve=new xN(y,G,ge,de,se,f,c),xe=new eO(y,se,ue),Et=new cO(W,Te,ue,de),Ie=new wN(W,le,Te),Le=new RN(W,le,Te),Te.programs=H.programs,y.capabilities=ue,y.extensions=le,y.properties=X,y.renderLists=pe,y.shadowMap=xe,y.state=de,y.info=Te}Ve();let ce=new Xx(y,W);this.xr=ce,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){let oe=le.get("WEBGL_lose_context");oe&&oe.loseContext()},this.forceContextRestore=function(){let oe=le.get("WEBGL_lose_context");oe&&oe.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(oe){oe!==void 0&&(B=oe,this.setSize(U,k,!1))},this.getSize=function(oe){return oe.set(U,k)},this.setSize=function(oe,Me,Re=!0){if(ce.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=oe,k=Me,t.width=Math.floor(oe*B),t.height=Math.floor(Me*B),Re===!0&&(t.style.width=oe+"px",t.style.height=Me+"px"),this.setViewport(0,0,oe,Me)},this.getDrawingBufferSize=function(oe){return oe.set(U*B,k*B).floor()},this.setDrawingBufferSize=function(oe,Me,Re){U=oe,k=Me,B=Re,t.width=Math.floor(oe*Re),t.height=Math.floor(Me*Re),this.setViewport(0,0,oe,Me)},this.getCurrentViewport=function(oe){return oe.copy(T)},this.getViewport=function(oe){return oe.copy(ne)},this.setViewport=function(oe,Me,Re,De){oe.isVector4?ne.set(oe.x,oe.y,oe.z,oe.w):ne.set(oe,Me,Re,De),de.viewport(T.copy(ne).multiplyScalar(B).round())},this.getScissor=function(oe){return oe.copy(ae)},this.setScissor=function(oe,Me,Re,De){oe.isVector4?ae.set(oe.x,oe.y,oe.z,oe.w):ae.set(oe,Me,Re,De),de.scissor(D.copy(ae).multiplyScalar(B).round())},this.getScissorTest=function(){return ye},this.setScissorTest=function(oe){de.setScissorTest(ye=oe)},this.setOpaqueSort=function(oe){O=oe},this.setTransparentSort=function(oe){q=oe},this.getClearColor=function(oe){return oe.copy(ve.getClearColor())},this.setClearColor=function(){ve.setClearColor.apply(ve,arguments)},this.getClearAlpha=function(){return ve.getClearAlpha()},this.setClearAlpha=function(){ve.setClearAlpha.apply(ve,arguments)},this.clear=function(oe=!0,Me=!0,Re=!0){let De=0;if(oe){let Ae=!1;if(M!==null){let Qe=M.texture.format;Ae=Qe===AT||Qe===ET||Qe===MT}if(Ae){let Qe=M.texture.type,St=Qe===tl||Qe===Hu||Qe===wT||Qe===zd||Qe===_T||Qe===TT,ut=ve.getClearColor(),Ct=ve.getClearAlpha(),Gt=ut.r,Vt=ut.g,Xt=ut.b;St?(d[0]=Gt,d[1]=Vt,d[2]=Xt,d[3]=Ct,W.clearBufferuiv(W.COLOR,0,d)):(m[0]=Gt,m[1]=Vt,m[2]=Xt,m[3]=Ct,W.clearBufferiv(W.COLOR,0,m))}else De|=W.COLOR_BUFFER_BIT}Me&&(De|=W.DEPTH_BUFFER_BIT),Re&&(De|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(De)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",Ue,!1),t.removeEventListener("webglcontextcreationerror",je,!1),pe.dispose(),ee.dispose(),X.dispose(),G.dispose(),ge.dispose(),se.dispose(),ot.dispose(),Et.dispose(),H.dispose(),ce.dispose(),ce.removeEventListener("sessionstart",qe),ce.removeEventListener("sessionend",nt),Je.stop()};function ke(oe){oe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Ue(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;let oe=Te.autoReset,Me=xe.enabled,Re=xe.autoUpdate,De=xe.needsUpdate,Ae=xe.type;Ve(),Te.autoReset=oe,xe.enabled=Me,xe.autoUpdate=Re,xe.needsUpdate=De,xe.type=Ae}function je(oe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",oe.statusMessage)}function We(oe){let Me=oe.target;Me.removeEventListener("dispose",We),Pt(Me)}function Pt(oe){At(oe),X.remove(oe)}function At(oe){let Me=X.get(oe).programs;Me!==void 0&&(Me.forEach(function(Re){H.releaseProgram(Re)}),oe.isShaderMaterial&&H.releaseShaderCache(oe))}this.renderBufferDirect=function(oe,Me,Re,De,Ae,Qe){Me===null&&(Me=Z);let St=Ae.isMesh&&Ae.matrixWorld.determinant()<0,ut=ky(oe,Me,Re,De,Ae);de.setMaterial(De,St);let Ct=Re.index,Gt=1;if(De.wireframe===!0){if(Ct=Ee.getWireframeAttribute(Re),Ct===void 0)return;Gt=2}let Vt=Re.drawRange,Xt=Re.attributes.position,Wn=Vt.start*Gt,fi=(Vt.start+Vt.count)*Gt;Qe!==null&&(Wn=Math.max(Wn,Qe.start*Gt),fi=Math.min(fi,(Qe.start+Qe.count)*Gt)),Ct!==null?(Wn=Math.max(Wn,0),fi=Math.min(fi,Ct.count)):Xt!=null&&(Wn=Math.max(Wn,0),fi=Math.min(fi,Xt.count));let pr=fi-Wn;if(pr<0||pr===1/0)return;ot.setup(Ae,De,ut,Re,Ct);let ko,On=Ie;if(Ct!==null&&(ko=we.get(Ct),On=Le,On.setIndex(ko)),Ae.isMesh)De.wireframe===!0?(de.setLineWidth(De.wireframeLinewidth*J()),On.setMode(W.LINES)):On.setMode(W.TRIANGLES);else if(Ae.isLine){let Kt=De.linewidth;Kt===void 0&&(Kt=1),de.setLineWidth(Kt*J()),Ae.isLineSegments?On.setMode(W.LINES):Ae.isLineLoop?On.setMode(W.LINE_LOOP):On.setMode(W.LINE_STRIP)}else Ae.isPoints?On.setMode(W.POINTS):Ae.isSprite&&On.setMode(W.TRIANGLES);if(Ae.isBatchedMesh)On.renderMultiDraw(Ae._multiDrawStarts,Ae._multiDrawCounts,Ae._multiDrawCount);else if(Ae.isInstancedMesh)On.renderInstances(Wn,pr,Ae.count);else if(Re.isInstancedBufferGeometry){let Kt=Re._maxInstanceCount!==void 0?Re._maxInstanceCount:1/0,vs=Math.min(Re.instanceCount,Kt);On.renderInstances(Wn,pr,vs)}else On.render(Wn,pr)};function qt(oe,Me,Re){oe.transparent===!0&&oe.side===br&&oe.forceSinglePass===!1?(oe.side=wr,oe.needsUpdate=!0,Oo(oe,Me,Re),oe.side=vo,oe.needsUpdate=!0,Oo(oe,Me,Re),oe.side=br):Oo(oe,Me,Re)}this.compile=function(oe,Me,Re=null){Re===null&&(Re=oe),p=ee.get(Re),p.init(),x.push(p),Re.traverseVisible(function(Ae){Ae.isLight&&Ae.layers.test(Me.layers)&&(p.pushLight(Ae),Ae.castShadow&&p.pushShadow(Ae))}),oe!==Re&&oe.traverseVisible(function(Ae){Ae.isLight&&Ae.layers.test(Me.layers)&&(p.pushLight(Ae),Ae.castShadow&&p.pushShadow(Ae))}),p.setupLights(y._useLegacyLights);let De=new Set;return oe.traverse(function(Ae){let Qe=Ae.material;if(Qe)if(Array.isArray(Qe))for(let St=0;St<Qe.length;St++){let ut=Qe[St];qt(ut,Re,Ae),De.add(ut)}else qt(Qe,Re,Ae),De.add(Qe)}),x.pop(),p=null,De},this.compileAsync=function(oe,Me,Re=null){let De=this.compile(oe,Me,Re);return new Promise(Ae=>{function Qe(){if(De.forEach(function(St){X.get(St).currentProgram.isReady()&&De.delete(St)}),De.size===0){Ae(oe);return}setTimeout(Qe,10)}le.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let sn=null;function ct(oe){sn&&sn(oe)}function qe(){Je.stop()}function nt(){Je.start()}let Je=new FT;Je.setAnimationLoop(ct),typeof self<"u"&&Je.setContext(self),this.setAnimationLoop=function(oe){sn=oe,ce.setAnimationLoop(oe),oe===null?Je.stop():Je.start()},ce.addEventListener("sessionstart",qe),ce.addEventListener("sessionend",nt),this.render=function(oe,Me){if(Me!==void 0&&Me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),Me.parent===null&&Me.matrixWorldAutoUpdate===!0&&Me.updateMatrixWorld(),ce.enabled===!0&&ce.isPresenting===!0&&(ce.cameraAutoUpdate===!0&&ce.updateCamera(Me),Me=ce.getCamera()),oe.isScene===!0&&oe.onBeforeRender(y,oe,Me,M),p=ee.get(oe,x.length),p.init(),x.push(p),R.multiplyMatrices(Me.projectionMatrix,Me.matrixWorldInverse),fe.setFromProjectionMatrix(R),C=this.localClippingEnabled,L=me.init(this.clippingPlanes,C),v=pe.get(oe,g.length),v.init(),g.push(v),ht(oe,Me,0,y.sortObjects),v.finish(),y.sortObjects===!0&&v.sort(O,q),this.info.render.frame++,L===!0&&me.beginShadows();let Re=p.state.shadowsArray;if(xe.render(Re,oe,Me),L===!0&&me.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ce.enabled===!1||ce.isPresenting===!1||ce.hasDepthSensing()===!1)&&ve.render(v,oe),p.setupLights(y._useLegacyLights),Me.isArrayCamera){let De=Me.cameras;for(let Ae=0,Qe=De.length;Ae<Qe;Ae++){let St=De[Ae];wt(v,oe,St,St.viewport)}}else wt(v,oe,Me);M!==null&&(F.updateMultisampleRenderTarget(M),F.updateRenderTargetMipmap(M)),oe.isScene===!0&&oe.onAfterRender(y,oe,Me),ot.resetDefaultState(),A=-1,w=null,x.pop(),x.length>0?p=x[x.length-1]:p=null,g.pop(),g.length>0?v=g[g.length-1]:v=null};function ht(oe,Me,Re,De){if(oe.visible===!1)return;if(oe.layers.test(Me.layers)){if(oe.isGroup)Re=oe.renderOrder;else if(oe.isLOD)oe.autoUpdate===!0&&oe.update(Me);else if(oe.isLight)p.pushLight(oe),oe.castShadow&&p.pushShadow(oe);else if(oe.isSprite){if(!oe.frustumCulled||fe.intersectsSprite(oe)){De&&j.setFromMatrixPosition(oe.matrixWorld).applyMatrix4(R);let St=se.update(oe),ut=oe.material;ut.visible&&v.push(oe,St,ut,Re,j.z,null)}}else if((oe.isMesh||oe.isLine||oe.isPoints)&&(!oe.frustumCulled||fe.intersectsObject(oe))){let St=se.update(oe),ut=oe.material;if(De&&(oe.boundingSphere!==void 0?(oe.boundingSphere===null&&oe.computeBoundingSphere(),j.copy(oe.boundingSphere.center)):(St.boundingSphere===null&&St.computeBoundingSphere(),j.copy(St.boundingSphere.center)),j.applyMatrix4(oe.matrixWorld).applyMatrix4(R)),Array.isArray(ut)){let Ct=St.groups;for(let Gt=0,Vt=Ct.length;Gt<Vt;Gt++){let Xt=Ct[Gt],Wn=ut[Xt.materialIndex];Wn&&Wn.visible&&v.push(oe,St,Wn,Re,j.z,Xt)}}else ut.visible&&v.push(oe,St,ut,Re,j.z,null)}}let Qe=oe.children;for(let St=0,ut=Qe.length;St<ut;St++)ht(Qe[St],Me,Re,De)}function wt(oe,Me,Re,De){let Ae=oe.opaque,Qe=oe.transmissive,St=oe.transparent;p.setupLightsView(Re),L===!0&&me.setGlobalState(y.clippingPlanes,Re),Qe.length>0&&Fn(Ae,Qe,Me,Re),De&&de.viewport(T.copy(De)),Ae.length>0&&hi(Ae,Me,Re),Qe.length>0&&hi(Qe,Me,Re),St.length>0&&hi(St,Me,Re),de.buffers.depth.setTest(!0),de.buffers.depth.setMask(!0),de.buffers.color.setMask(!0),de.setPolygonOffset(!1)}function Fn(oe,Me,Re,De){if((Re.isScene===!0?Re.overrideMaterial:null)!==null)return;if(p.state.transmissionRenderTarget===null){p.state.transmissionRenderTarget=new ga(1,1,{generateMipmaps:!0,type:le.has("EXT_color_buffer_half_float")||le.has("EXT_color_buffer_float")?Gg:tl,minFilter:eo,samples:4,stencilBuffer:o});let Gt=X.get(p.state.transmissionRenderTarget);Gt.__isTransmissionRenderTarget=!0}let Qe=p.state.transmissionRenderTarget;y.getDrawingBufferSize(I),Qe.setSize(I.x,I.y);let St=y.getRenderTarget();y.setRenderTarget(Qe),y.getClearColor(P),E=y.getClearAlpha(),E<1&&y.setClearColor(16777215,.5),y.clear();let ut=y.toneMapping;y.toneMapping=el,hi(oe,Re,De),F.updateMultisampleRenderTarget(Qe),F.updateRenderTargetMipmap(Qe);let Ct=!1;for(let Gt=0,Vt=Me.length;Gt<Vt;Gt++){let Xt=Me[Gt],Wn=Xt.object,fi=Xt.geometry,pr=Xt.material,ko=Xt.group;if(pr.side===br&&Wn.layers.test(De.layers)){let On=pr.side;pr.side=wr,pr.needsUpdate=!0,Yi(Wn,Re,De,fi,pr,ko),pr.side=On,pr.needsUpdate=!0,Ct=!0}}Ct===!0&&(F.updateMultisampleRenderTarget(Qe),F.updateRenderTargetMipmap(Qe)),y.setRenderTarget(St),y.setClearColor(P,E),y.toneMapping=ut}function hi(oe,Me,Re){let De=Me.isScene===!0?Me.overrideMaterial:null;for(let Ae=0,Qe=oe.length;Ae<Qe;Ae++){let St=oe[Ae],ut=St.object,Ct=St.geometry,Gt=De===null?St.material:De,Vt=St.group;ut.layers.test(Re.layers)&&Yi(ut,Me,Re,Ct,Gt,Vt)}}function Yi(oe,Me,Re,De,Ae,Qe){oe.onBeforeRender(y,Me,Re,De,Ae,Qe),oe.modelViewMatrix.multiplyMatrices(Re.matrixWorldInverse,oe.matrixWorld),oe.normalMatrix.getNormalMatrix(oe.modelViewMatrix),Ae.onBeforeRender(y,Me,Re,De,oe,Qe),Ae.transparent===!0&&Ae.side===br&&Ae.forceSinglePass===!1?(Ae.side=wr,Ae.needsUpdate=!0,y.renderBufferDirect(Re,Me,De,Ae,oe,Qe),Ae.side=vo,Ae.needsUpdate=!0,y.renderBufferDirect(Re,Me,De,Ae,oe,Qe),Ae.side=br):y.renderBufferDirect(Re,Me,De,Ae,oe,Qe),oe.onAfterRender(y,Me,Re,De,Ae,Qe)}function Oo(oe,Me,Re){Me.isScene!==!0&&(Me=Z);let De=X.get(oe),Ae=p.state.lights,Qe=p.state.shadowsArray,St=Ae.state.version,ut=H.getParameters(oe,Ae.state,Qe,Me,Re),Ct=H.getProgramCacheKey(ut),Gt=De.programs;De.environment=oe.isMeshStandardMaterial?Me.environment:null,De.fog=Me.fog,De.envMap=(oe.isMeshStandardMaterial?ge:G).get(oe.envMap||De.environment),De.envMapRotation=De.environment!==null&&oe.envMap===null?Me.environmentRotation:oe.envMapRotation,Gt===void 0&&(oe.addEventListener("dispose",We),Gt=new Map,De.programs=Gt);let Vt=Gt.get(Ct);if(Vt!==void 0){if(De.currentProgram===Vt&&De.lightsStateVersion===St)return nd(oe,ut),Vt}else ut.uniforms=H.getUniforms(oe),oe.onBuild(Re,ut,y),oe.onBeforeCompile(ut,y),Vt=H.acquireProgram(ut,Ct),Gt.set(Ct,Vt),De.uniforms=ut.uniforms;let Xt=De.uniforms;return(!oe.isShaderMaterial&&!oe.isRawShaderMaterial||oe.clipping===!0)&&(Xt.clippingPlanes=me.uniform),nd(oe,ut),De.needsLights=By(oe),De.lightsStateVersion=St,De.needsLights&&(Xt.ambientLightColor.value=Ae.state.ambient,Xt.lightProbe.value=Ae.state.probe,Xt.directionalLights.value=Ae.state.directional,Xt.directionalLightShadows.value=Ae.state.directionalShadow,Xt.spotLights.value=Ae.state.spot,Xt.spotLightShadows.value=Ae.state.spotShadow,Xt.rectAreaLights.value=Ae.state.rectArea,Xt.ltc_1.value=Ae.state.rectAreaLTC1,Xt.ltc_2.value=Ae.state.rectAreaLTC2,Xt.pointLights.value=Ae.state.point,Xt.pointLightShadows.value=Ae.state.pointShadow,Xt.hemisphereLights.value=Ae.state.hemi,Xt.directionalShadowMap.value=Ae.state.directionalShadowMap,Xt.directionalShadowMatrix.value=Ae.state.directionalShadowMatrix,Xt.spotShadowMap.value=Ae.state.spotShadowMap,Xt.spotLightMatrix.value=Ae.state.spotLightMatrix,Xt.spotLightMap.value=Ae.state.spotLightMap,Xt.pointShadowMap.value=Ae.state.pointShadowMap,Xt.pointShadowMatrix.value=Ae.state.pointShadowMatrix),De.currentProgram=Vt,De.uniformsList=null,Vt}function zm(oe){if(oe.uniformsList===null){let Me=oe.currentProgram.getUniforms();oe.uniformsList=Bu.seqWithValue(Me.seq,oe.uniforms)}return oe.uniformsList}function nd(oe,Me){let Re=X.get(oe);Re.outputColorSpace=Me.outputColorSpace,Re.batching=Me.batching,Re.instancing=Me.instancing,Re.instancingColor=Me.instancingColor,Re.instancingMorph=Me.instancingMorph,Re.skinning=Me.skinning,Re.morphTargets=Me.morphTargets,Re.morphNormals=Me.morphNormals,Re.morphColors=Me.morphColors,Re.morphTargetsCount=Me.morphTargetsCount,Re.numClippingPlanes=Me.numClippingPlanes,Re.numIntersection=Me.numClipIntersection,Re.vertexAlphas=Me.vertexAlphas,Re.vertexTangents=Me.vertexTangents,Re.toneMapping=Me.toneMapping}function ky(oe,Me,Re,De,Ae){Me.isScene!==!0&&(Me=Z),F.resetTextureUnits();let Qe=Me.fog,St=De.isMeshStandardMaterial?Me.environment:null,ut=M===null?y.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Oi,Ct=(De.isMeshStandardMaterial?ge:G).get(De.envMap||St),Gt=De.vertexColors===!0&&!!Re.attributes.color&&Re.attributes.color.itemSize===4,Vt=!!Re.attributes.tangent&&(!!De.normalMap||De.anisotropy>0),Xt=!!Re.morphAttributes.position,Wn=!!Re.morphAttributes.normal,fi=!!Re.morphAttributes.color,pr=el;De.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(pr=y.toneMapping);let ko=Re.morphAttributes.position||Re.morphAttributes.normal||Re.morphAttributes.color,On=ko!==void 0?ko.length:0,Kt=X.get(De),vs=p.state.lights;if(L===!0&&(C===!0||oe!==w)){let mn=oe===w&&De.id===A;me.setState(De,oe,mn)}let kn=!1;De.version===Kt.__version?(Kt.needsLights&&Kt.lightsStateVersion!==vs.state.version||Kt.outputColorSpace!==ut||Ae.isBatchedMesh&&Kt.batching===!1||!Ae.isBatchedMesh&&Kt.batching===!0||Ae.isInstancedMesh&&Kt.instancing===!1||!Ae.isInstancedMesh&&Kt.instancing===!0||Ae.isSkinnedMesh&&Kt.skinning===!1||!Ae.isSkinnedMesh&&Kt.skinning===!0||Ae.isInstancedMesh&&Kt.instancingColor===!0&&Ae.instanceColor===null||Ae.isInstancedMesh&&Kt.instancingColor===!1&&Ae.instanceColor!==null||Ae.isInstancedMesh&&Kt.instancingMorph===!0&&Ae.morphTexture===null||Ae.isInstancedMesh&&Kt.instancingMorph===!1&&Ae.morphTexture!==null||Kt.envMap!==Ct||De.fog===!0&&Kt.fog!==Qe||Kt.numClippingPlanes!==void 0&&(Kt.numClippingPlanes!==me.numPlanes||Kt.numIntersection!==me.numIntersection)||Kt.vertexAlphas!==Gt||Kt.vertexTangents!==Vt||Kt.morphTargets!==Xt||Kt.morphNormals!==Wn||Kt.morphColors!==fi||Kt.toneMapping!==pr||Kt.morphTargetsCount!==On)&&(kn=!0):(kn=!0,Kt.__version=De.version);let ys=Kt.currentProgram;kn===!0&&(ys=Oo(De,Me,Ae));let Gm=!1,za=!1,rd=!1,Lr=ys.getUniforms(),xs=Kt.uniforms;if(de.useProgram(ys.program)&&(Gm=!0,za=!0,rd=!0),De.id!==A&&(A=De.id,za=!0),Gm||w!==oe){Lr.setValue(W,"projectionMatrix",oe.projectionMatrix),Lr.setValue(W,"viewMatrix",oe.matrixWorldInverse);let mn=Lr.map.cameraPosition;mn!==void 0&&mn.setValue(W,j.setFromMatrixPosition(oe.matrixWorld)),ue.logarithmicDepthBuffer&&Lr.setValue(W,"logDepthBufFC",2/(Math.log(oe.far+1)/Math.LN2)),(De.isMeshPhongMaterial||De.isMeshToonMaterial||De.isMeshLambertMaterial||De.isMeshBasicMaterial||De.isMeshStandardMaterial||De.isShaderMaterial)&&Lr.setValue(W,"isOrthographic",oe.isOrthographicCamera===!0),w!==oe&&(w=oe,za=!0,rd=!0)}if(Ae.isSkinnedMesh){Lr.setOptional(W,Ae,"bindMatrix"),Lr.setOptional(W,Ae,"bindMatrixInverse");let mn=Ae.skeleton;mn&&(mn.boneTexture===null&&mn.computeBoneTexture(),Lr.setValue(W,"boneTexture",mn.boneTexture,F))}Ae.isBatchedMesh&&(Lr.setOptional(W,Ae,"batchingTexture"),Lr.setValue(W,"batchingTexture",Ae._matricesTexture,F));let ru=Re.morphAttributes;if((ru.position!==void 0||ru.normal!==void 0||ru.color!==void 0)&&Se.update(Ae,Re,ys),(za||Kt.receiveShadow!==Ae.receiveShadow)&&(Kt.receiveShadow=Ae.receiveShadow,Lr.setValue(W,"receiveShadow",Ae.receiveShadow)),De.isMeshGouraudMaterial&&De.envMap!==null&&(xs.envMap.value=Ct,xs.flipEnvMap.value=Ct.isCubeTexture&&Ct.isRenderTargetTexture===!1?-1:1),De.isMeshStandardMaterial&&De.envMap===null&&Me.environment!==null&&(xs.envMapIntensity.value=Me.environmentIntensity),za&&(Lr.setValue(W,"toneMappingExposure",y.toneMappingExposure),Kt.needsLights&&Uy(xs,rd),Qe&&De.fog===!0&&re.refreshFogUniforms(xs,Qe),re.refreshMaterialUniforms(xs,De,B,k,p.state.transmissionRenderTarget),Bu.upload(W,zm(Kt),xs,F)),De.isShaderMaterial&&De.uniformsNeedUpdate===!0&&(Bu.upload(W,zm(Kt),xs,F),De.uniformsNeedUpdate=!1),De.isSpriteMaterial&&Lr.setValue(W,"center",Ae.center),Lr.setValue(W,"modelViewMatrix",Ae.modelViewMatrix),Lr.setValue(W,"normalMatrix",Ae.normalMatrix),Lr.setValue(W,"modelMatrix",Ae.matrixWorld),De.isShaderMaterial||De.isRawShaderMaterial){let mn=De.uniformsGroups;for(let Kl=0,zy=mn.length;Kl<zy;Kl++){let id=mn[Kl];Et.update(id,ys),Et.bind(id,ys)}}return ys}function Uy(oe,Me){oe.ambientLightColor.needsUpdate=Me,oe.lightProbe.needsUpdate=Me,oe.directionalLights.needsUpdate=Me,oe.directionalLightShadows.needsUpdate=Me,oe.pointLights.needsUpdate=Me,oe.pointLightShadows.needsUpdate=Me,oe.spotLights.needsUpdate=Me,oe.spotLightShadows.needsUpdate=Me,oe.rectAreaLights.needsUpdate=Me,oe.hemisphereLights.needsUpdate=Me}function By(oe){return oe.isMeshLambertMaterial||oe.isMeshToonMaterial||oe.isMeshPhongMaterial||oe.isMeshStandardMaterial||oe.isShadowMaterial||oe.isShaderMaterial&&oe.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(oe,Me,Re){X.get(oe.texture).__webglTexture=Me,X.get(oe.depthTexture).__webglTexture=Re;let De=X.get(oe);De.__hasExternalTextures=!0,De.__autoAllocateDepthBuffer=Re===void 0,De.__autoAllocateDepthBuffer||le.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),De.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(oe,Me){let Re=X.get(oe);Re.__webglFramebuffer=Me,Re.__useDefaultFramebuffer=Me===void 0},this.setRenderTarget=function(oe,Me=0,Re=0){M=oe,S=Me,_=Re;let De=!0,Ae=null,Qe=!1,St=!1;if(oe){let Ct=X.get(oe);Ct.__useDefaultFramebuffer!==void 0?(de.bindFramebuffer(W.FRAMEBUFFER,null),De=!1):Ct.__webglFramebuffer===void 0?F.setupRenderTarget(oe):Ct.__hasExternalTextures&&F.rebindTextures(oe,X.get(oe.texture).__webglTexture,X.get(oe.depthTexture).__webglTexture);let Gt=oe.texture;(Gt.isData3DTexture||Gt.isDataArrayTexture||Gt.isCompressedArrayTexture)&&(St=!0);let Vt=X.get(oe).__webglFramebuffer;oe.isWebGLCubeRenderTarget?(Array.isArray(Vt[Me])?Ae=Vt[Me][Re]:Ae=Vt[Me],Qe=!0):oe.samples>0&&F.useMultisampledRTT(oe)===!1?Ae=X.get(oe).__webglMultisampledFramebuffer:Array.isArray(Vt)?Ae=Vt[Re]:Ae=Vt,T.copy(oe.viewport),D.copy(oe.scissor),N=oe.scissorTest}else T.copy(ne).multiplyScalar(B).floor(),D.copy(ae).multiplyScalar(B).floor(),N=ye;if(de.bindFramebuffer(W.FRAMEBUFFER,Ae)&&De&&de.drawBuffers(oe,Ae),de.viewport(T),de.scissor(D),de.setScissorTest(N),Qe){let Ct=X.get(oe.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Ct.__webglTexture,Re)}else if(St){let Ct=X.get(oe.texture),Gt=Me||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,Ct.__webglTexture,Re||0,Gt)}A=-1},this.readRenderTargetPixels=function(oe,Me,Re,De,Ae,Qe,St){if(!(oe&&oe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ut=X.get(oe).__webglFramebuffer;if(oe.isWebGLCubeRenderTarget&&St!==void 0&&(ut=ut[St]),ut){de.bindFramebuffer(W.FRAMEBUFFER,ut);try{let Ct=oe.texture,Gt=Ct.format,Vt=Ct.type;if(Gt!==jo&&He.convert(Gt)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Xt=Vt===Gg&&(le.has("EXT_color_buffer_half_float")||le.has("EXT_color_buffer_float"));if(Vt!==tl&&He.convert(Vt)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_TYPE)&&Vt!==pa&&!Xt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Me>=0&&Me<=oe.width-De&&Re>=0&&Re<=oe.height-Ae&&W.readPixels(Me,Re,De,Ae,He.convert(Gt),He.convert(Vt),Qe)}finally{let Ct=M!==null?X.get(M).__webglFramebuffer:null;de.bindFramebuffer(W.FRAMEBUFFER,Ct)}}},this.copyFramebufferToTexture=function(oe,Me,Re=0){let De=Math.pow(2,-Re),Ae=Math.floor(Me.image.width*De),Qe=Math.floor(Me.image.height*De);F.setTexture2D(Me,0),W.copyTexSubImage2D(W.TEXTURE_2D,Re,0,0,oe.x,oe.y,Ae,Qe),de.unbindTexture()},this.copyTextureToTexture=function(oe,Me,Re,De=0){let Ae=Me.image.width,Qe=Me.image.height,St=He.convert(Re.format),ut=He.convert(Re.type);F.setTexture2D(Re,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,Re.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,Re.unpackAlignment),Me.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,De,oe.x,oe.y,Ae,Qe,St,ut,Me.image.data):Me.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,De,oe.x,oe.y,Me.mipmaps[0].width,Me.mipmaps[0].height,St,Me.mipmaps[0].data):W.texSubImage2D(W.TEXTURE_2D,De,oe.x,oe.y,St,ut,Me.image),De===0&&Re.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),de.unbindTexture()},this.copyTextureToTexture3D=function(oe,Me,Re,De,Ae=0){let Qe=Math.round(oe.max.x-oe.min.x),St=Math.round(oe.max.y-oe.min.y),ut=oe.max.z-oe.min.z+1,Ct=He.convert(De.format),Gt=He.convert(De.type),Vt;if(De.isData3DTexture)F.setTexture3D(De,0),Vt=W.TEXTURE_3D;else if(De.isDataArrayTexture||De.isCompressedArrayTexture)F.setTexture2DArray(De,0),Vt=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,De.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,De.unpackAlignment);let Xt=W.getParameter(W.UNPACK_ROW_LENGTH),Wn=W.getParameter(W.UNPACK_IMAGE_HEIGHT),fi=W.getParameter(W.UNPACK_SKIP_PIXELS),pr=W.getParameter(W.UNPACK_SKIP_ROWS),ko=W.getParameter(W.UNPACK_SKIP_IMAGES),On=Re.isCompressedTexture?Re.mipmaps[Ae]:Re.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,On.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,On.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,oe.min.x),W.pixelStorei(W.UNPACK_SKIP_ROWS,oe.min.y),W.pixelStorei(W.UNPACK_SKIP_IMAGES,oe.min.z),Re.isDataTexture||Re.isData3DTexture?W.texSubImage3D(Vt,Ae,Me.x,Me.y,Me.z,Qe,St,ut,Ct,Gt,On.data):De.isCompressedArrayTexture?W.compressedTexSubImage3D(Vt,Ae,Me.x,Me.y,Me.z,Qe,St,ut,Ct,On.data):W.texSubImage3D(Vt,Ae,Me.x,Me.y,Me.z,Qe,St,ut,Ct,Gt,On),W.pixelStorei(W.UNPACK_ROW_LENGTH,Xt),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Wn),W.pixelStorei(W.UNPACK_SKIP_PIXELS,fi),W.pixelStorei(W.UNPACK_SKIP_ROWS,pr),W.pixelStorei(W.UNPACK_SKIP_IMAGES,ko),Ae===0&&De.generateMipmaps&&W.generateMipmap(Vt),de.unbindTexture()},this.initTexture=function(oe){oe.isCubeTexture?F.setTextureCube(oe,0):oe.isData3DTexture?F.setTexture3D(oe,0):oe.isDataArrayTexture||oe.isCompressedArrayTexture?F.setTexture2DArray(oe,0):F.setTexture2D(oe,0),de.unbindTexture()},this.resetState=function(){S=0,_=0,M=null,de.reset(),ot.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ma}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=e===mb?"display-p3":"srgb",t.unpackColorSpace=Tn.workingColorSpace===yv?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}};var Is=class extends an{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $n,this.environmentIntensity=1,this.environmentRotation=new $n,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};var Y1=new he,Z1=new dn,J1=new dn,uO=new he,Q1=new tt,Ig=new he,wx=new qo,$1=new tt,Sx=new ac,Yu=class extends hn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=R_,this.bindMatrix=new tt,this.bindMatrixInverse=new tt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vi),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ig),this.boundingBox.expandByPoint(Ig)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new qo),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Ig),this.boundingSphere.expandByPoint(Ig)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),wx.copy(this.boundingSphere),wx.applyMatrix4(i),e.ray.intersectsSphere(wx)!==!1&&($1.copy(i).invert(),Sx.copy(e.ray).applyMatrix4($1),!(this.boundingBox!==null&&Sx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Sx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new dn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===R_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===PP?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let r=this.skeleton,i=this.geometry;Z1.fromBufferAttribute(i.attributes.skinIndex,e),J1.fromBufferAttribute(i.attributes.skinWeight,e),Y1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){let s=J1.getComponent(o);if(s!==0){let a=Z1.getComponent(o);Q1.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(uO.copy(Y1).applyMatrix4(Q1),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},ol=class extends an{constructor(){super(),this.isBone=!0,this.type="Bone"}},Zu=class extends zr{constructor(e=null,t=1,r=1,i,o,s,a,c,l=Zr,u=Zr,h,f){super(null,s,a,c,l,u,i,o,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},eT=new tt,hO=new tt,Ju=class n{constructor(e=[],t=[]){this.uuid=xa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new tt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new tt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:hO;eT.multiplyMatrices(a,t[o]),eT.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new Zu(t,e,e,jo,pa);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){let o=e.bones[r],s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new ol),this.bones.push(s),this.boneInverses.push(new tt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let i=0,o=t.length;i<o;i++){let s=t[i];e.bones.push(s.uuid);let a=r[i];e.boneInverses.push(a.toArray())}return e}};var Gr=class extends Xo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ke(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},tT=new he,nT=new he,rT=new tt,_x=new ac,Rg=new qo,va=class extends an{constructor(e=new Yt,t=new Gr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,o=t.count;i<o;i++)tT.fromBufferAttribute(t,i-1),nT.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=tT.distanceTo(nT);e.setAttribute("lineDistance",new Ye(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Rg.copy(r.boundingSphere),Rg.applyMatrix4(i),Rg.radius+=o,e.ray.intersectsSphere(Rg)===!1)return;rT.copy(i).invert(),_x.copy(e.ray).applyMatrix4(rT);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new he,u=new he,h=new he,f=new he,d=this.isLineSegments?2:1,m=r.index,p=r.attributes.position;if(m!==null){let g=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count);for(let y=g,b=x-1;y<b;y+=d){let S=m.getX(y),_=m.getX(y+1);if(l.fromBufferAttribute(p,S),u.fromBufferAttribute(p,_),_x.distanceSqToSegment(l,u,f,h)>c)continue;f.applyMatrix4(this.matrixWorld);let A=e.ray.origin.distanceTo(f);A<e.near||A>e.far||t.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{let g=Math.max(0,s.start),x=Math.min(p.count,s.start+s.count);for(let y=g,b=x-1;y<b;y+=d){if(l.fromBufferAttribute(p,y),u.fromBufferAttribute(p,y+1),_x.distanceSqToSegment(l,u,f,h)>c)continue;f.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(f);_<e.near||_>e.far||t.push({distance:_,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){let a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}},iT=new he,oT=new he,Rs=class extends va{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,o=t.count;i<o;i+=2)iT.fromBufferAttribute(t,i),oT.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+iT.distanceTo(oT);e.setAttribute("lineDistance",new Ye(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};var Fd=class extends Xo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},sT=new tt,Kx=new ac,Pg=new qo,Dg=new he,ev=class extends an{constructor(e=new Yt,t=new Fd){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Pg.copy(r.boundingSphere),Pg.applyMatrix4(i),Pg.radius+=o,e.ray.intersectsSphere(Pg)===!1)return;sT.copy(i).invert(),Kx.copy(e.ray).applyMatrix4(sT);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=r.index,h=r.attributes.position;if(l!==null){let f=Math.max(0,s.start),d=Math.min(l.count,s.start+s.count);for(let m=f,v=d;m<v;m++){let p=l.getX(m);Dg.fromBufferAttribute(h,p),aT(Dg,p,c,i,e,t,this)}}else{let f=Math.max(0,s.start),d=Math.min(h.count,s.start+s.count);for(let m=f,v=d;m<v;m++)Dg.fromBufferAttribute(h,m),aT(Dg,m,c,i,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){let i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){let a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function aT(n,e,t,r,i,o,s){let a=Kx.distanceSqToPoint(n);if(a<t){let c=new he;Kx.closestPointToPoint(n,c),c.applyMatrix4(r);let l=i.ray.origin.distanceTo(c);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:s})}}var Li=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),t.push(o),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,o=r.length,s;t?s=t:s=e*r[o-1];let a=0,c=o-1,l;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),l=r[i]-s,l<0)a=i+1;else if(l>0)c=i-1;else{c=i;break}if(i=c,r[i]===s)return i/(o-1);let u=r[i],f=r[i+1]-u,d=(s-u)/f;return(i+d)/(o-1)}getTangent(e,t){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);let s=this.getPoint(i),a=this.getPoint(o),c=t||(s.isVector2?new Ne:new he);return c.copy(a).sub(s).normalize(),c}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new he,i=[],o=[],s=[],a=new he,c=new tt;for(let d=0;d<=e;d++){let m=d/e;i[d]=this.getTangentAt(m,new he)}o[0]=new he,s[0]=new he;let l=Number.MAX_VALUE,u=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=l&&(l=u,r.set(1,0,0)),h<=l&&(l=h,r.set(0,1,0)),f<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let d=1;d<=e;d++){if(o[d]=o[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();let m=Math.acos(Yr(i[d-1].dot(i[d]),-1,1));o[d].applyMatrix4(c.makeRotationAxis(a,m))}s[d].crossVectors(i[d],o[d])}if(t===!0){let d=Math.acos(Yr(o[0].dot(o[e]),-1,1));d/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(d=-d);for(let m=1;m<=e;m++)o[m].applyMatrix4(c.makeRotationAxis(i[m],d*m)),s[m].crossVectors(i[m],o[m])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},cc=class extends Li{constructor(e=0,t=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=c}getPoint(e,t=new Ne){let r=t,i=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);let a=this.aStartAngle+e*o,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=c-this.aX,d=l-this.aY;c=f*u-d*h+this.aX,l=f*h+d*u+this.aY}return r.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Yx=class extends cc{constructor(e,t,r,i,o,s){super(e,t,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function yb(){let n=0,e=0,t=0,r=0;function i(o,s,a,c){n=o,e=a,t=-3*o+3*s-2*a-c,r=2*o-2*s+a+c}return{initCatmullRom:function(o,s,a,c,l){i(s,a,l*(a-o),l*(c-s))},initNonuniformCatmullRom:function(o,s,a,c,l,u,h){let f=(s-o)/l-(a-o)/(l+u)+(a-s)/u,d=(a-s)/u-(c-s)/(u+h)+(c-a)/h;f*=u,d*=u,i(s,a,f,d)},calc:function(o){let s=o*o,a=s*o;return n+e*o+t*s+r*a}}}var Fg=new he,Tx=new yb,Mx=new yb,Ex=new yb,Zx=class extends Li{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new he){let r=t,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),c=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:c===0&&a===o-1&&(a=o-2,c=1);let l,u;this.closed||a>0?l=i[(a-1)%o]:(Fg.subVectors(i[0],i[1]).add(i[0]),l=Fg);let h=i[a%o],f=i[(a+1)%o];if(this.closed||a+2<o?u=i[(a+2)%o]:(Fg.subVectors(i[o-1],i[o-2]).add(i[o-1]),u=Fg),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,m=Math.pow(l.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(f),d),p=Math.pow(f.distanceToSquared(u),d);v<1e-4&&(v=1),m<1e-4&&(m=v),p<1e-4&&(p=v),Tx.initNonuniformCatmullRom(l.x,h.x,f.x,u.x,m,v,p),Mx.initNonuniformCatmullRom(l.y,h.y,f.y,u.y,m,v,p),Ex.initNonuniformCatmullRom(l.z,h.z,f.z,u.z,m,v,p)}else this.curveType==="catmullrom"&&(Tx.initCatmullRom(l.x,h.x,f.x,u.x,this.tension),Mx.initCatmullRom(l.y,h.y,f.y,u.y,this.tension),Ex.initCatmullRom(l.z,h.z,f.z,u.z,this.tension));return r.set(Tx.calc(c),Mx.calc(c),Ex.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new he().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function lT(n,e,t,r,i){let o=(r-e)*.5,s=(i-t)*.5,a=n*n,c=n*a;return(2*t-2*r+o+s)*c+(-3*t+3*r-2*o-s)*a+o*n+t}function fO(n,e){let t=1-n;return t*t*e}function dO(n,e){return 2*(1-n)*n*e}function pO(n,e){return n*n*e}function Md(n,e,t,r){return fO(n,e)+dO(n,t)+pO(n,r)}function mO(n,e){let t=1-n;return t*t*t*e}function gO(n,e){let t=1-n;return 3*t*t*n*e}function vO(n,e){return 3*(1-n)*n*n*e}function yO(n,e){return n*n*n*e}function Ed(n,e,t,r,i){return mO(n,e)+gO(n,t)+vO(n,r)+yO(n,i)}var tv=class extends Li{constructor(e=new Ne,t=new Ne,r=new Ne,i=new Ne){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ne){let r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(Ed(e,i.x,o.x,s.x,a.x),Ed(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Jx=class extends Li{constructor(e=new he,t=new he,r=new he,i=new he){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new he){let r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(Ed(e,i.x,o.x,s.x,a.x),Ed(e,i.y,o.y,s.y,a.y),Ed(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},nv=class extends Li{constructor(e=new Ne,t=new Ne){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ne){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ne){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Qx=class extends Li{constructor(e=new he,t=new he){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new he){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new he){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},rv=class extends Li{constructor(e=new Ne,t=new Ne,r=new Ne){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ne){let r=t,i=this.v0,o=this.v1,s=this.v2;return r.set(Md(e,i.x,o.x,s.x),Md(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},$x=class extends Li{constructor(e=new he,t=new he,r=new he){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new he){let r=t,i=this.v0,o=this.v1,s=this.v2;return r.set(Md(e,i.x,o.x,s.x),Md(e,i.y,o.y,s.y),Md(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},iv=class extends Li{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ne){let r=t,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,c=i[s===0?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return r.set(lT(a,c.x,l.x,u.x,h.x),lT(a,c.y,l.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new Ne().fromArray(i))}return this}},eb=Object.freeze({__proto__:null,ArcCurve:Yx,CatmullRomCurve3:Zx,CubicBezierCurve:tv,CubicBezierCurve3:Jx,EllipseCurve:cc,LineCurve:nv,LineCurve3:Qx,QuadraticBezierCurve:rv,QuadraticBezierCurve3:$x,SplineCurve:iv}),tb=class extends Li{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new eb[r](t,e))}return this}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),o=0;for(;o<i.length;){if(i[o]>=r){let s=i[o]-r,a=this.curves[o],c=a.getLength(),l=c===0?0:1-s/c;return a.getPointAt(l,t)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,o=this.curves;i<o.length;i++){let s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,c=s.getPoints(a);for(let l=0;l<c.length;l++){let u=c[l];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new eb[i.type]().fromJSON(i))}return this}},ya=class extends tb{constructor(e){super(),this.type="Path",this.currentPoint=new Ne,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new nv(this.currentPoint.clone(),new Ne(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let o=new rv(this.currentPoint.clone(),new Ne(e,t),new Ne(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,o,s){let a=new tv(this.currentPoint.clone(),new Ne(e,t),new Ne(r,i),new Ne(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new iv(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,o,s){let a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,r,i,o,s),this}absarc(e,t,r,i,o,s){return this.absellipse(e,t,r,r,i,o,s),this}ellipse(e,t,r,i,o,s,a,c){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,i,o,s,a,c),this}absellipse(e,t,r,i,o,s,a,c){let l=new cc(e,t,r,i,o,s,a,c);if(this.curves.length>0){let h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};var Nd=class n extends Yt{constructor(e=1,t=1,r=1,i=32,o=1,s=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:c};let l=this;i=Math.floor(i),o=Math.floor(o);let u=[],h=[],f=[],d=[],m=0,v=[],p=r/2,g=0;x(),s===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Ye(h,3)),this.setAttribute("normal",new Ye(f,3)),this.setAttribute("uv",new Ye(d,2));function x(){let b=new he,S=new he,_=0,M=(t-e)/r;for(let A=0;A<=o;A++){let w=[],T=A/o,D=T*(t-e)+e;for(let N=0;N<=i;N++){let P=N/i,E=P*c+a,U=Math.sin(E),k=Math.cos(E);S.x=D*U,S.y=-T*r+p,S.z=D*k,h.push(S.x,S.y,S.z),b.set(U,M,k).normalize(),f.push(b.x,b.y,b.z),d.push(P,1-T),w.push(m++)}v.push(w)}for(let A=0;A<i;A++)for(let w=0;w<o;w++){let T=v[w][A],D=v[w+1][A],N=v[w+1][A+1],P=v[w][A+1];u.push(T,D,P),u.push(D,N,P),_+=6}l.addGroup(g,_,0),g+=_}function y(b){let S=m,_=new Ne,M=new he,A=0,w=b===!0?e:t,T=b===!0?1:-1;for(let N=1;N<=i;N++)h.push(0,p*T,0),f.push(0,T,0),d.push(.5,.5),m++;let D=m;for(let N=0;N<=i;N++){let E=N/i*c+a,U=Math.cos(E),k=Math.sin(E);M.x=w*k,M.y=p*T,M.z=w*U,h.push(M.x,M.y,M.z),f.push(0,T,0),_.x=U*.5+.5,_.y=k*.5*T+.5,d.push(_.x,_.y),m++}for(let N=0;N<i;N++){let P=S+N,E=D+N;b===!0?u.push(E,E+1,P):u.push(E+1,E,P),A+=3}l.addGroup(g,A,b===!0?1:2),g+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},ov=class n extends Nd{constructor(e=1,t=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,t,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};var Ng=new he,Lg=new he,Ax=new he,Og=new sc,sv=class extends Yt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){let i=Math.pow(10,4),o=Math.cos(ku*t),s=e.getIndex(),a=e.getAttribute("position"),c=s?s.count:a.count,l=[0,0,0],u=["a","b","c"],h=new Array(3),f={},d=[];for(let m=0;m<c;m+=3){s?(l[0]=s.getX(m),l[1]=s.getX(m+1),l[2]=s.getX(m+2)):(l[0]=m,l[1]=m+1,l[2]=m+2);let{a:v,b:p,c:g}=Og;if(v.fromBufferAttribute(a,l[0]),p.fromBufferAttribute(a,l[1]),g.fromBufferAttribute(a,l[2]),Og.getNormal(Ax),h[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,h[1]=`${Math.round(p.x*i)},${Math.round(p.y*i)},${Math.round(p.z*i)}`,h[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let x=0;x<3;x++){let y=(x+1)%3,b=h[x],S=h[y],_=Og[u[x]],M=Og[u[y]],A=`${b}_${S}`,w=`${S}_${b}`;w in f&&f[w]?(Ax.dot(f[w].normal)<=o&&(d.push(_.x,_.y,_.z),d.push(M.x,M.y,M.z)),f[w]=null):A in f||(f[A]={index0:l[x],index1:l[y],normal:Ax.clone()})}}for(let m in f)if(f[m]){let{index0:v,index1:p}=f[m];Ng.fromBufferAttribute(a,v),Lg.fromBufferAttribute(a,p),d.push(Ng.x,Ng.y,Ng.z),d.push(Lg.x,Lg.y,Lg.z)}this.setAttribute("position",new Ye(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},nl=class extends ya{constructor(e){super(e),this.uuid=xa(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new ya().fromJSON(i))}return this}},xO={triangulate:function(n,e,t=2){let r=e&&e.length,i=r?e[0]*t:n.length,o=BT(n,0,i,t,!0),s=[];if(!o||o.next===o.prev)return s;let a,c,l,u,h,f,d;if(r&&(o=TO(n,e,o,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let m=t;m<i;m+=t)h=n[m],f=n[m+1],h<a&&(a=h),f<c&&(c=f),h>l&&(l=h),f>u&&(u=f);d=Math.max(l-a,u-c),d=d!==0?32767/d:0}return Ld(o,s,t,a,c,d,0),s}};function BT(n,e,t,r,i){let o,s;if(i===LO(n,e,t,r)>0)for(o=e;o<t;o+=r)s=cT(o,n[o],n[o+1],s);else for(o=t-r;o>=e;o-=r)s=cT(o,n[o],n[o+1],s);return s&&bv(s,s.next)&&(kd(s),s=s.next),s}function uc(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(bv(t,t.next)||Jn(t.prev,t,t.next)===0)){if(kd(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Ld(n,e,t,r,i,o,s){if(!n)return;!s&&o&&IO(n,r,i,o);let a=n,c,l;for(;n.prev!==n.next;){if(c=n.prev,l=n.next,o?wO(n,r,i,o):bO(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(l.i/t|0),kd(n),n=l.next,a=l.next;continue}if(n=l,n===a){s?s===1?(n=SO(uc(n),e,t),Ld(n,e,t,r,i,o,2)):s===2&&_O(n,e,t,r,i,o):Ld(uc(n),e,t,r,i,o,1);break}}}function bO(n){let e=n.prev,t=n,r=n.next;if(Jn(e,t,r)>=0)return!1;let i=e.x,o=t.x,s=r.x,a=e.y,c=t.y,l=r.y,u=i<o?i<s?i:s:o<s?o:s,h=a<c?a<l?a:l:c<l?c:l,f=i>o?i>s?i:s:o>s?o:s,d=a>c?a>l?a:l:c>l?c:l,m=r.next;for(;m!==e;){if(m.x>=u&&m.x<=f&&m.y>=h&&m.y<=d&&Nu(i,a,o,c,s,l,m.x,m.y)&&Jn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function wO(n,e,t,r){let i=n.prev,o=n,s=n.next;if(Jn(i,o,s)>=0)return!1;let a=i.x,c=o.x,l=s.x,u=i.y,h=o.y,f=s.y,d=a<c?a<l?a:l:c<l?c:l,m=u<h?u<f?u:f:h<f?h:f,v=a>c?a>l?a:l:c>l?c:l,p=u>h?u>f?u:f:h>f?h:f,g=nb(d,m,e,t,r),x=nb(v,p,e,t,r),y=n.prevZ,b=n.nextZ;for(;y&&y.z>=g&&b&&b.z<=x;){if(y.x>=d&&y.x<=v&&y.y>=m&&y.y<=p&&y!==i&&y!==s&&Nu(a,u,c,h,l,f,y.x,y.y)&&Jn(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=d&&b.x<=v&&b.y>=m&&b.y<=p&&b!==i&&b!==s&&Nu(a,u,c,h,l,f,b.x,b.y)&&Jn(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=g;){if(y.x>=d&&y.x<=v&&y.y>=m&&y.y<=p&&y!==i&&y!==s&&Nu(a,u,c,h,l,f,y.x,y.y)&&Jn(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=x;){if(b.x>=d&&b.x<=v&&b.y>=m&&b.y<=p&&b!==i&&b!==s&&Nu(a,u,c,h,l,f,b.x,b.y)&&Jn(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function SO(n,e,t){let r=n;do{let i=r.prev,o=r.next.next;!bv(i,o)&&zT(i,r,r.next,o)&&Od(i,o)&&Od(o,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(o.i/t|0),kd(r),kd(r.next),r=n=o),r=r.next}while(r!==n);return uc(r)}function _O(n,e,t,r,i,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&DO(s,a)){let c=GT(s,a);s=uc(s,s.next),c=uc(c,c.next),Ld(s,e,t,r,i,o,0),Ld(c,e,t,r,i,o,0);return}a=a.next}s=s.next}while(s!==n)}function TO(n,e,t,r){let i=[],o,s,a,c,l;for(o=0,s=e.length;o<s;o++)a=e[o]*r,c=o<s-1?e[o+1]*r:n.length,l=BT(n,a,c,r,!1),l===l.next&&(l.steiner=!0),i.push(PO(l));for(i.sort(MO),o=0;o<i.length;o++)t=EO(i[o],t);return t}function MO(n,e){return n.x-e.x}function EO(n,e){let t=AO(n,e);if(!t)return e;let r=GT(t,n);return uc(r,r.next),uc(t,t.next)}function AO(n,e){let t=e,r=-1/0,i,o=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){let f=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=o&&f>r&&(r=f,i=t.x<t.next.x?t:t.next,f===o))return i}t=t.next}while(t!==e);if(!i)return null;let a=i,c=i.x,l=i.y,u=1/0,h;t=i;do o>=t.x&&t.x>=c&&o!==t.x&&Nu(s<l?o:r,s,c,l,s<l?r:o,s,t.x,t.y)&&(h=Math.abs(s-t.y)/(o-t.x),Od(t,n)&&(h<u||h===u&&(t.x>i.x||t.x===i.x&&CO(i,t)))&&(i=t,u=h)),t=t.next;while(t!==a);return i}function CO(n,e){return Jn(n.prev,n,e.prev)<0&&Jn(e.next,n,n.next)<0}function IO(n,e,t,r){let i=n;do i.z===0&&(i.z=nb(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,RO(i)}function RO(n){let e,t,r,i,o,s,a,c,l=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,r=t,a=0,e=0;e<l&&(a++,r=r.nextZ,!!r);e++);for(c=l;a>0||c>0&&r;)a!==0&&(c===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;t=r}o.nextZ=null,l*=2}while(s>1);return n}function nb(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function PO(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Nu(n,e,t,r,i,o,s,a){return(i-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(r-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(i-s)*(r-a)}function DO(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!FO(n,e)&&(Od(n,e)&&Od(e,n)&&NO(n,e)&&(Jn(n.prev,n,e.prev)||Jn(n,e.prev,e))||bv(n,e)&&Jn(n.prev,n,n.next)>0&&Jn(e.prev,e,e.next)>0)}function Jn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function bv(n,e){return n.x===e.x&&n.y===e.y}function zT(n,e,t,r){let i=Ug(Jn(n,e,t)),o=Ug(Jn(n,e,r)),s=Ug(Jn(t,r,n)),a=Ug(Jn(t,r,e));return!!(i!==o&&s!==a||i===0&&kg(n,t,e)||o===0&&kg(n,r,e)||s===0&&kg(t,n,r)||a===0&&kg(t,e,r))}function kg(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Ug(n){return n>0?1:n<0?-1:0}function FO(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&zT(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Od(n,e){return Jn(n.prev,n,n.next)<0?Jn(n,e,n.next)>=0&&Jn(n,n.prev,e)>=0:Jn(n,e,n.prev)<0||Jn(n,n.next,e)<0}function NO(n,e){let t=n,r=!1,i=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function GT(n,e){let t=new rb(n.i,n.x,n.y),r=new rb(e.i,e.x,e.y),i=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function cT(n,e,t,r){let i=new rb(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function kd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function rb(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function LO(n,e,t,r){let i=0;for(let o=e,s=t-r;o<t;o+=r)i+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return i}var go=class n{static area(e){let t=e.length,r=0;for(let i=t-1,o=0;o<t;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return n.area(e)<0}static triangulateShape(e,t){let r=[],i=[],o=[];uT(e),hT(r,e);let s=e.length;t.forEach(uT);for(let c=0;c<t.length;c++)i.push(s),s+=t[c].length,hT(r,t[c]);let a=xO.triangulate(r,i);for(let c=0;c<a.length;c+=3)o.push(a.slice(c,c+3));return o}};function uT(n){let e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function hT(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}var av=class n extends Yt{constructor(e=new nl([new Ne(.5,.5),new Ne(-.5,.5),new Ne(-.5,-.5),new Ne(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let r=this,i=[],o=[];for(let a=0,c=e.length;a<c;a++){let l=e[a];s(l)}this.setAttribute("position",new Ye(i,3)),this.setAttribute("uv",new Ye(o,2)),this.computeVertexNormals();function s(a){let c=[],l=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:d-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,p=t.bevelSegments!==void 0?t.bevelSegments:3,g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:OO,y,b=!1,S,_,M,A;g&&(y=g.getSpacedPoints(u),b=!0,f=!1,S=g.computeFrenetFrames(u,!1),_=new he,M=new he,A=new he),f||(p=0,d=0,m=0,v=0);let w=a.extractPoints(l),T=w.shape,D=w.holes;if(!go.isClockWise(T)){T=T.reverse();for(let K=0,le=D.length;K<le;K++){let ue=D[K];go.isClockWise(ue)&&(D[K]=ue.reverse())}}let P=go.triangulateShape(T,D),E=T;for(let K=0,le=D.length;K<le;K++){let ue=D[K];T=T.concat(ue)}function U(K,le,ue){return le||console.error("THREE.ExtrudeGeometry: vec does not exist"),K.clone().addScaledVector(le,ue)}let k=T.length,B=P.length;function O(K,le,ue){let de,Te,X,F=K.x-le.x,G=K.y-le.y,ge=ue.x-K.x,we=ue.y-K.y,Ee=F*F+G*G,se=F*we-G*ge;if(Math.abs(se)>Number.EPSILON){let H=Math.sqrt(Ee),re=Math.sqrt(ge*ge+we*we),pe=le.x-G/H,ee=le.y+F/H,me=ue.x-we/re,xe=ue.y+ge/re,ve=((me-pe)*we-(xe-ee)*ge)/(F*we-G*ge);de=pe+F*ve-K.x,Te=ee+G*ve-K.y;let Se=de*de+Te*Te;if(Se<=2)return new Ne(de,Te);X=Math.sqrt(Se/2)}else{let H=!1;F>Number.EPSILON?ge>Number.EPSILON&&(H=!0):F<-Number.EPSILON?ge<-Number.EPSILON&&(H=!0):Math.sign(G)===Math.sign(we)&&(H=!0),H?(de=-G,Te=F,X=Math.sqrt(Ee)):(de=F,Te=G,X=Math.sqrt(Ee/2))}return new Ne(de/X,Te/X)}let q=[];for(let K=0,le=E.length,ue=le-1,de=K+1;K<le;K++,ue++,de++)ue===le&&(ue=0),de===le&&(de=0),q[K]=O(E[K],E[ue],E[de]);let ne=[],ae,ye=q.concat();for(let K=0,le=D.length;K<le;K++){let ue=D[K];ae=[];for(let de=0,Te=ue.length,X=Te-1,F=de+1;de<Te;de++,X++,F++)X===Te&&(X=0),F===Te&&(F=0),ae[de]=O(ue[de],ue[X],ue[F]);ne.push(ae),ye=ye.concat(ae)}for(let K=0;K<p;K++){let le=K/p,ue=d*Math.cos(le*Math.PI/2),de=m*Math.sin(le*Math.PI/2)+v;for(let Te=0,X=E.length;Te<X;Te++){let F=U(E[Te],q[Te],de);I(F.x,F.y,-ue)}for(let Te=0,X=D.length;Te<X;Te++){let F=D[Te];ae=ne[Te];for(let G=0,ge=F.length;G<ge;G++){let we=U(F[G],ae[G],de);I(we.x,we.y,-ue)}}}let fe=m+v;for(let K=0;K<k;K++){let le=f?U(T[K],ye[K],fe):T[K];b?(M.copy(S.normals[0]).multiplyScalar(le.x),_.copy(S.binormals[0]).multiplyScalar(le.y),A.copy(y[0]).add(M).add(_),I(A.x,A.y,A.z)):I(le.x,le.y,0)}for(let K=1;K<=u;K++)for(let le=0;le<k;le++){let ue=f?U(T[le],ye[le],fe):T[le];b?(M.copy(S.normals[K]).multiplyScalar(ue.x),_.copy(S.binormals[K]).multiplyScalar(ue.y),A.copy(y[K]).add(M).add(_),I(A.x,A.y,A.z)):I(ue.x,ue.y,h/u*K)}for(let K=p-1;K>=0;K--){let le=K/p,ue=d*Math.cos(le*Math.PI/2),de=m*Math.sin(le*Math.PI/2)+v;for(let Te=0,X=E.length;Te<X;Te++){let F=U(E[Te],q[Te],de);I(F.x,F.y,h+ue)}for(let Te=0,X=D.length;Te<X;Te++){let F=D[Te];ae=ne[Te];for(let G=0,ge=F.length;G<ge;G++){let we=U(F[G],ae[G],de);b?I(we.x,we.y+y[u-1].y,y[u-1].x+ue):I(we.x,we.y,h+ue)}}}L(),C();function L(){let K=i.length/3;if(f){let le=0,ue=k*le;for(let de=0;de<B;de++){let Te=P[de];j(Te[2]+ue,Te[1]+ue,Te[0]+ue)}le=u+p*2,ue=k*le;for(let de=0;de<B;de++){let Te=P[de];j(Te[0]+ue,Te[1]+ue,Te[2]+ue)}}else{for(let le=0;le<B;le++){let ue=P[le];j(ue[2],ue[1],ue[0])}for(let le=0;le<B;le++){let ue=P[le];j(ue[0]+k*u,ue[1]+k*u,ue[2]+k*u)}}r.addGroup(K,i.length/3-K,0)}function C(){let K=i.length/3,le=0;R(E,le),le+=E.length;for(let ue=0,de=D.length;ue<de;ue++){let Te=D[ue];R(Te,le),le+=Te.length}r.addGroup(K,i.length/3-K,1)}function R(K,le){let ue=K.length;for(;--ue>=0;){let de=ue,Te=ue-1;Te<0&&(Te=K.length-1);for(let X=0,F=u+p*2;X<F;X++){let G=k*X,ge=k*(X+1),we=le+de+G,Ee=le+Te+G,se=le+Te+ge,H=le+de+ge;Z(we,Ee,se,H)}}}function I(K,le,ue){c.push(K),c.push(le),c.push(ue)}function j(K,le,ue){J(K),J(le),J(ue);let de=i.length/3,Te=x.generateTopUV(r,i,de-3,de-2,de-1);W(Te[0]),W(Te[1]),W(Te[2])}function Z(K,le,ue,de){J(K),J(le),J(de),J(le),J(ue),J(de);let Te=i.length/3,X=x.generateSideWallUV(r,i,Te-6,Te-3,Te-2,Te-1);W(X[0]),W(X[1]),W(X[3]),W(X[1]),W(X[2]),W(X[3])}function J(K){i.push(c[K*3+0]),i.push(c[K*3+1]),i.push(c[K*3+2])}function W(K){o.push(K.x),o.push(K.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return kO(t,r,e)}static fromJSON(e,t){let r=[];for(let o=0,s=e.shapes.length;o<s;o++){let a=t[e.shapes[o]];r.push(a)}let i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new eb[i.type]().fromJSON(i)),new n(r,e.options)}},OO={generateTopUV:function(n,e,t,r,i){let o=e[t*3],s=e[t*3+1],a=e[r*3],c=e[r*3+1],l=e[i*3],u=e[i*3+1];return[new Ne(o,s),new Ne(a,c),new Ne(l,u)]},generateSideWallUV:function(n,e,t,r,i,o){let s=e[t*3],a=e[t*3+1],c=e[t*3+2],l=e[r*3],u=e[r*3+1],h=e[r*3+2],f=e[i*3],d=e[i*3+1],m=e[i*3+2],v=e[o*3],p=e[o*3+1],g=e[o*3+2];return Math.abs(a-u)<Math.abs(s-l)?[new Ne(s,1-c),new Ne(l,1-h),new Ne(f,1-m),new Ne(v,1-g)]:[new Ne(a,1-c),new Ne(u,1-h),new Ne(d,1-m),new Ne(p,1-g)]}};function kO(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){let o=n[r];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}var Qu=class n extends Yt{constructor(e=1,t=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let c=Math.min(s+a,Math.PI),l=0,u=[],h=new he,f=new he,d=[],m=[],v=[],p=[];for(let g=0;g<=r;g++){let x=[],y=g/r,b=0;g===0&&s===0?b=.5/t:g===r&&c===Math.PI&&(b=-.5/t);for(let S=0;S<=t;S++){let _=S/t;h.x=-e*Math.cos(i+_*o)*Math.sin(s+y*a),h.y=e*Math.cos(s+y*a),h.z=e*Math.sin(i+_*o)*Math.sin(s+y*a),m.push(h.x,h.y,h.z),f.copy(h).normalize(),v.push(f.x,f.y,f.z),p.push(_+b,1-y),x.push(l++)}u.push(x)}for(let g=0;g<r;g++)for(let x=0;x<t;x++){let y=u[g][x+1],b=u[g][x],S=u[g+1][x],_=u[g+1][x+1];(g!==0||s>0)&&d.push(y,b,_),(g!==r-1||c<Math.PI)&&d.push(b,S,_)}this.setIndex(d),this.setAttribute("position",new Ye(m,3)),this.setAttribute("normal",new Ye(v,3)),this.setAttribute("uv",new Ye(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};var sl=class extends Xo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vv,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $n,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var Rn=class extends Xo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ke(16777215),this.specular=new Ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vv,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $n,this.combine=mv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};var $u=class extends Xo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vv,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $n,this.combine=mv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};function Bg(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function UO(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function BO(n){function e(i,o){return n[i]-n[o]}let t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function fT(n,e,t){let r=n.length,i=new n.constructor(r);for(let o=0,s=0;s!==r;++o){let a=t[o]*e;for(let c=0;c!==e;++c)i[s++]=n[a+c]}return i}function VT(n,e,t,r){let i=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=n[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(e.push(o.time),t.push(s)),o=n[i++];while(o!==void 0)}var eh=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],o=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<o)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=o)){let a=t[1];e<a&&(r=2,o=a);for(let c=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===c)break;if(i=o,o=t[--r-1],e>=o)break t}s=r,r=0;break n}break e}for(;r<s;){let a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)t[s]=r[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},ib=class extends eh{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:n1,endingEnd:n1}}intervalChanged_(e,t,r){let i=this.parameterPositions,o=e-2,s=e+1,a=i[o],c=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case r1:o=e,a=2*t-r;break;case i1:o=i.length-2,a=t+i[o]-i[o+1];break;default:o=e,a=r}if(c===void 0)switch(this.getSettings_().endingEnd){case r1:s=e,c=2*r-t;break;case i1:s=1,c=r+i[1]-i[0];break;default:s=e-1,c=t}let l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-r),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,t,r,i){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,m=(r-t)/(i-t),v=m*m,p=v*m,g=-f*p+2*f*v-f*m,x=(1+f)*p+(-1.5-2*f)*v+(-.5+f)*m+1,y=(-1-d)*p+(1.5+d)*v+.5*m,b=d*p-d*v;for(let S=0;S!==a;++S)o[S]=g*s[u+S]+x*s[l+S]+y*s[c+S]+b*s[h+S];return o}},ob=class extends eh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(r-t)/(i-t),h=1-u;for(let f=0;f!==a;++f)o[f]=s[l+f]*h+s[c+f]*u;return o}},sb=class extends eh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},xo=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bg(t,this.TimeBufferType),this.values=Bg(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Bg(e.times,Array),values:Bg(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new sb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ob(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ib(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Vg:t=this.InterpolantFactoryMethodDiscrete;break;case Hg:t=this.InterpolantFactoryMethodLinear;break;case Zy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Vg;case this.InterpolantFactoryMethodLinear:return Hg;case this.InterpolantFactoryMethodSmooth:return Zy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;s!==-1&&r[s]>t;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=r.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let c=r[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),e=!1;break}s=c}if(i!==void 0&&UO(i))for(let a=0,c=i.length;a!==c;++a){let l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Zy,o=e.length-1,s=1;for(let a=1;a<o;++a){let c=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(i)c=!0;else{let h=a*r,f=h-r,d=h+r;for(let m=0;m!==r;++m){let v=t[h+m];if(v!==t[f+m]||v!==t[d+m]){c=!0;break}}}if(c){if(a!==s){e[s]=e[a];let h=a*r,f=s*r;for(let d=0;d!==r;++d)t[f+d]=t[h+d]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,c=s*r,l=0;l!==r;++l)t[c+l]=t[a+l];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*r)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};xo.prototype.TimeBufferType=Float32Array;xo.prototype.ValueBufferType=Float32Array;xo.prototype.DefaultInterpolation=Hg;var al=class extends xo{};al.prototype.ValueTypeName="bool";al.prototype.ValueBufferType=Array;al.prototype.DefaultInterpolation=Vg;al.prototype.InterpolantFactoryMethodLinear=void 0;al.prototype.InterpolantFactoryMethodSmooth=void 0;var lv=class extends xo{};lv.prototype.ValueTypeName="color";var ll=class extends xo{};ll.prototype.ValueTypeName="number";var ab=class extends eh{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(r-t)/(i-t),l=e*a;for(let u=l+a;l!==u;l+=4)Xn.slerpFlat(o,0,s,l-a,s,l,c);return o}},bo=class extends xo{InterpolantFactoryMethodLinear(e){return new ab(this.times,this.values,this.getValueSize(),e)}};bo.prototype.ValueTypeName="quaternion";bo.prototype.DefaultInterpolation=Hg;bo.prototype.InterpolantFactoryMethodSmooth=void 0;var cl=class extends xo{};cl.prototype.ValueTypeName="string";cl.prototype.ValueBufferType=Array;cl.prototype.DefaultInterpolation=Vg;cl.prototype.InterpolantFactoryMethodLinear=void 0;cl.prototype.InterpolantFactoryMethodSmooth=void 0;var Ko=class extends xo{};Ko.prototype.ValueTypeName="vector";var hc=class{constructor(e="",t=-1,r=[],i=HP){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=xa(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(GO(r[s]).scale(i));let o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=r.length;o!==s;++o)t.push(xo.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let o=t.length,s=[];for(let a=0;a<o;a++){let c=[],l=[];c.push((a+o-1)%o,a,(a+1)%o),l.push(0,1,0);let u=BO(c);c=fT(c,1,u),l=fT(l,1,u),!i&&c[0]===0&&(c.push(o),l.push(l[0])),s.push(new ll(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){let l=e[a],u=l.name.match(o);if(u&&u.length>1){let h=u[1],f=i[h];f||(i[h]=f=[]),f.push(l)}}let s=[];for(let a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(h,f,d,m,v){if(d.length!==0){let p=[],g=[];VT(d,p,g,m),p.length!==0&&v.push(new h(f,p,g))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,c=e.length||-1,l=e.hierarchy||[];for(let h=0;h<l.length;h++){let f=l[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){let d={},m;for(m=0;m<f.length;m++)if(f[m].morphTargets)for(let v=0;v<f[m].morphTargets.length;v++)d[f[m].morphTargets[v]]=-1;for(let v in d){let p=[],g=[];for(let x=0;x!==f[m].morphTargets.length;++x){let y=f[m];p.push(y.time),g.push(y.morphTarget===v?1:0)}i.push(new ll(".morphTargetInfluence["+v+"]",p,g))}c=d.length*s}else{let d=".bones["+t[h].name+"]";r(Ko,d+".position",f,"pos",i),r(bo,d+".quaternion",f,"rot",i),r(Ko,d+".scale",f,"scl",i)}}return i.length===0?null:new this(o,c,i,a)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function zO(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ll;case"vector":case"vector2":case"vector3":case"vector4":return Ko;case"color":return lv;case"quaternion":return bo;case"bool":case"boolean":return al;case"string":return cl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function GO(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=zO(n.type);if(n.times===void 0){let t=[],r=[];VT(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var cv={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},Ud=class{constructor(e,t,r){let i=this,o=!1,s=0,a=0,c,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,o===!1&&i.onStart!==void 0&&i.onStart(u,s,a),o=!0},this.itemEnd=function(u){s++,i.onProgress!==void 0&&i.onProgress(u,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,h){return l.push(u,h),this},this.removeHandler=function(u){let h=l.indexOf(u);return h!==-1&&l.splice(h,2),this},this.getHandler=function(u){for(let h=0,f=l.length;h<f;h+=2){let d=l[h],m=l[h+1];if(d.global&&(d.lastIndex=0),d.test(u))return m}return null}}},VO=new Ud,xn=class{constructor(e){this.manager=e!==void 0?e:VO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,o){r.load(e,i,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};xn.DEFAULT_MATERIAL_NAME="__DEFAULT";var fa={},lb=class extends Error{constructor(e,t){super(e),this.response=t}},yi=class extends xn{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=cv.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(fa[e]!==void 0){fa[e].push({onLoad:t,onProgress:r,onError:i});return}fa[e]=[],fa[e].push({onLoad:t,onProgress:r,onError:i});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=fa[e],h=l.body.getReader(),f=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=f?parseInt(f):0,m=d!==0,v=0,p=new ReadableStream({start(g){x();function x(){h.read().then(({done:y,value:b})=>{if(y)g.close();else{v+=b.byteLength;let S=new ProgressEvent("progress",{lengthComputable:m,loaded:v,total:d});for(let _=0,M=u.length;_<M;_++){let A=u[_];A.onProgress&&A.onProgress(S)}g.enqueue(b),x()}})}}});return new Response(p)}else throw new lb(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a===void 0)return l.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return l.arrayBuffer().then(m=>d.decode(m))}}}).then(l=>{cv.add(e,l);let u=fa[e];delete fa[e];for(let h=0,f=u.length;h<f;h++){let d=u[h];d.onLoad&&d.onLoad(l)}}).catch(l=>{let u=fa[e];if(u===void 0)throw this.manager.itemError(e),l;delete fa[e];for(let h=0,f=u.length;h<f;h++){let d=u[h];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var uv=class extends xn{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=cv.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;let a=Id("img");function c(){u(),cv.add(e,this),t&&t(this),o.manager.itemEnd(e)}function l(h){u(),i&&i(h),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}},hv=class extends xn{constructor(e){super(e)}load(e,t,r,i){let o=new Pd;o.colorSpace=Ln;let s=new uv(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function c(l){s.load(e[l],function(u){o.images[l]=u,a++,a===6&&(o.needsUpdate=!0,t&&t(o))},void 0,i)}for(let l=0;l<e.length;++l)c(l);return o}},fv=class extends xn{constructor(e){super(e)}load(e,t,r,i){let o=this,s=new Zu,a=new yi(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(c){let l;try{l=o.parse(c)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}l.image!==void 0?s.image=l.image:l.data!==void 0&&(s.image.width=l.width,s.image.height=l.height,s.image.data=l.data),s.wrapS=l.wrapS!==void 0?l.wrapS:Qn,s.wrapT=l.wrapT!==void 0?l.wrapT:Qn,s.magFilter=l.magFilter!==void 0?l.magFilter:Cr,s.minFilter=l.minFilter!==void 0?l.minFilter:Cr,s.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0&&(s.colorSpace=l.colorSpace),l.flipY!==void 0&&(s.flipY=l.flipY),l.format!==void 0&&(s.format=l.format),l.type!==void 0&&(s.type=l.type),l.mipmaps!==void 0&&(s.mipmaps=l.mipmaps,s.minFilter=eo),l.mipmapCount===1&&(s.minFilter=Cr),l.generateMipmaps!==void 0&&(s.generateMipmaps=l.generateMipmaps),s.needsUpdate=!0,t&&t(s,l)},r,i),s}},wo=class extends xn{constructor(e){super(e)}load(e,t,r,i){let o=new zr,s=new uv(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},r,i),o}},th=class extends an{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ke(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}};var Cx=new tt,dT=new he,pT=new he,Bd=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ne(512,512),this.map=null,this.mapPass=null,this.matrix=new tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Dd,this._frameExtents=new Ne(1,1),this._viewportCount=1,this._viewports=[new dn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;dT.setFromMatrixPosition(e.matrixWorld),t.position.copy(dT),pT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pT),t.updateMatrixWorld(),Cx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Cx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Cx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},cb=class extends Bd{constructor(){super(new Gn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=Wu*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||i!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},nh=class extends th{constructor(e,t,r=0,i=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.target=new an,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new cb}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},mT=new tt,wd=new he,Ix=new he,ub=class extends Bd{constructor(){super(new Gn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ne(4,2),this._viewportCount=6,this._viewports=[new dn(2,1,1,1),new dn(0,1,1,1),new dn(3,1,1,1),new dn(1,1,1,1),new dn(3,0,1,1),new dn(1,0,1,1)],this._cubeDirections=[new he(1,0,0),new he(-1,0,0),new he(0,0,1),new he(0,0,-1),new he(0,1,0),new he(0,-1,0)],this._cubeUps=[new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,0,1),new he(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),wd.setFromMatrixPosition(e.matrixWorld),r.position.copy(wd),Ix.copy(r.position),Ix.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Ix),r.updateMatrixWorld(),i.makeTranslation(-wd.x,-wd.y,-wd.z),mT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mT)}},fc=class extends th{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new ub}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},hb=class extends Bd{constructor(){super(new Cs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Ps=class extends th{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(an.DEFAULT_UP),this.updateMatrix(),this.target=new an,this.shadow=new hb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Ds=class extends th{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var ul=class{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var xb="\\[\\]\\.:\\/",HO=new RegExp("["+xb+"]","g"),bb="[^"+xb+"]",WO="[^"+xb.replace("\\.","")+"]",jO=/((?:WC+[\/:])*)/.source.replace("WC",bb),qO=/(WCOD+)?/.source.replace("WCOD",WO),XO=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bb),KO=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bb),YO=new RegExp("^"+jO+qO+XO+KO+"$"),ZO=["material","materials","bones","map"],fb=class{constructor(e,t,r){let i=r||An.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},An=class n{constructor(e,t,r){this.path=t,this.parsedPath=r||n.parseTrackName(t),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,t,r):new n(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(HO,"")}static parseTrackName(e){let t=YO.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let o=r.nodeName.substring(i+1);ZO.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(o){for(let s=0;s<o.length;s++){let a=o[s];if(a.name===t||a.uuid===t)return a;let c=r(a.children);if(c)return c}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,o=t.propertyIndex;if(e||(e=n.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let s=e[i];if(s===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};An.Composite=fb;An.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};An.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};An.prototype.GetterByBindingType=[An.prototype._getValue_direct,An.prototype._getValue_array,An.prototype._getValue_arrayElement,An.prototype._getValue_toArray];An.prototype.SetterByBindingTypeAndVersioning=[[An.prototype._setValue_direct,An.prototype._setValue_direct_setNeedsUpdate,An.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[An.prototype._setValue_array,An.prototype._setValue_array_setNeedsUpdate,An.prototype._setValue_array_setMatrixWorldNeedsUpdate],[An.prototype._setValue_arrayElement,An.prototype._setValue_arrayElement_setNeedsUpdate,An.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[An.prototype._setValue_fromArray,An.prototype._setValue_fromArray_setNeedsUpdate,An.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var rV=new Float32Array(1);var gT=new tt,dv=class{constructor(e,t,r=0,i=1/0){this.ray=new ac(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Rd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return gT.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(gT),this}intersectObject(e,t=!0,r=[]){return db(e,this,r,t),r.sort(vT),r}intersectObjects(e,t=!0,r=[]){for(let i=0,o=e.length;i<o;i++)db(e[i],this,r,t);return r.sort(vT),r}};function vT(n,e){return n.distance-e.distance}function db(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){let i=n.children;for(let o=0,s=i.length;o<s;o++)db(i[o],e,t,!0)}}var yT=new Ne,pv=class{constructor(e=new Ne(1/0,1/0),t=new Ne(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=yT.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yT).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};var Fs=class{constructor(){this.type="ShapePath",this.color=new Ke,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ya,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,o,s){return this.currentPath.bezierCurveTo(e,t,r,i,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){let x=[];for(let y=0,b=g.length;y<b;y++){let S=g[y],_=new nl;_.curves=S.curves,x.push(_)}return x}function r(g,x){let y=x.length,b=!1;for(let S=y-1,_=0;_<y;S=_++){let M=x[S],A=x[_],w=A.x-M.x,T=A.y-M.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(M=x[_],w=-w,A=x[S],T=-T),g.y<M.y||g.y>A.y)continue;if(g.y===M.y){if(g.x===M.x)return!0}else{let D=T*(g.x-M.x)-w*(g.y-M.y);if(D===0)return!0;if(D<0)continue;b=!b}}else{if(g.y!==M.y)continue;if(A.x<=g.x&&g.x<=M.x||M.x<=g.x&&g.x<=A.x)return!0}}return b}let i=go.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,c,l=[];if(o.length===1)return a=o[0],c=new nl,c.curves=a.curves,l.push(c),l;let u=!i(o[0].getPoints());u=e?!u:u;let h=[],f=[],d=[],m=0,v;f[m]=void 0,d[m]=[];for(let g=0,x=o.length;g<x;g++)a=o[g],v=a.getPoints(),s=i(v),s=e?!s:s,s?(!u&&f[m]&&m++,f[m]={s:new nl,p:v},f[m].s.curves=a.curves,u&&m++,d[m]=[]):d[m].push({h:a,p:v[0]});if(!f[0])return t(o);if(f.length>1){let g=!1,x=0;for(let y=0,b=f.length;y<b;y++)h[y]=[];for(let y=0,b=f.length;y<b;y++){let S=d[y];for(let _=0;_<S.length;_++){let M=S[_],A=!0;for(let w=0;w<f.length;w++)r(M.p,f[w].p)&&(y!==w&&x++,A?(A=!1,h[w].push(M)):g=!0);A&&h[y].push(M)}}x>0&&g===!1&&(d=h)}let p;for(let g=0,x=f.length;g<x;g++){c=f[g].s,l.push(c),p=d[g];for(let y=0,b=p.length;y<b;y++)c.holes.push(p[y].h)}return l}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pb}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pb);function wv(){let n=document.createElement("canvas");document.body.appendChild(n);let e={canvas:n,antialias:!0},t=new il(e);t.outputColorSpace=Oi,t.setClearColor("#ffffff",1),t.setSize(10,10);let r=new Is,i=new Ds(8947848);r.add(i);let o=new Ps(8947848);o.position.set(0,0,1),r.add(o);let s=new Gn(45,1,.1,1e3);s.position.set(0,0,1),s.up.set(0,1,0),s.lookAt(new he(0,0,0)),r.add(s);let a=new Ku(1,1),c=new hn(a,new Rn({color:13369344}));r.add(c),t.render(r,s);let l=t.getContext(),u=new Uint8Array(4);l.readPixels(5,5,1,1,l.RGBA,l.UNSIGNED_BYTE,u),document.body.removeChild(n);let h=50;return u[0]<h&&u[1]<h&&u[2]<h}var Sr={Phong:1,Physical:2};function Sv(n){let e=0,t=0;for(let r=0;r<n.MaterialCount();r++){let i=n.GetMaterial(r);i.type===jn.Phong?e+=1:i.type===jn.Physical&&(t+=1)}return e>=t?Sr.Phong:Sr.Physical}var ih=class{Convert(e){return null}},dc=class extends ih{Convert(e){return new Ke().copyLinearToSRGB(e)}},oh=class extends ih{Convert(e){return new Ke().copySRGBToLinear(e)}};function Gd(n){return Ji(n.r,n.g,n.b)}function Pr(n){return new Ke(n.r/255,n.g/255,n.b/255)}function Yo(n,e,t){let r=new Un,i=n.attributes.position.array,o=n.attributes.position.itemSize||3;for(let u=0;u<i.length;u+=o){let h=i[u],f=i[u+1],d=i[u+2];r.AddVertex(new $e(h,f,d))}let s=n.attributes.color!==void 0;if(s){let u=n.attributes.color.array,h=n.attributes.color.itemSize||3;for(let f=0;f<u.length;f+=h){let d=new Ke(u[f],u[f+1],u[f+2]);t!==null&&(d=t.Convert(d)),r.AddVertexColor(Gd(d))}}let a=n.attributes.normal!==void 0;if(a){let u=n.attributes.normal.array,h=n.attributes.normal.itemSize||3;for(let f=0;f<u.length;f+=h){let d=u[f],m=u[f+1],v=u[f+2];r.AddNormal(new $e(d,m,v))}}let c=n.attributes.uv!==void 0;if(c){let u=n.attributes.uv.array,h=n.attributes.uv.itemSize||2;for(let f=0;f<u.length;f+=h){let d=u[f],m=u[f+1];r.AddTextureUV(new on(d,m))}}let l=null;if(n.index!==null)l=n.index.array;else{l=[];for(let u=0;u<i.length/3;u++)l.push(u)}for(let u=0;u<l.length;u+=3){let h=l[u],f=l[u+1],d=l[u+2],m=new Nn(h,f,d);s&&m.SetVertexColors(h,f,d),a&&m.SetNormals(h,f,d),c&&m.SetTextureUVs(h,f,d),e!==null&&m.SetMaterial(e),r.AddTriangle(m)}return r}function wb(n,e,t){let r=null;return n.type==="MeshPhongMaterial"?r=new Rn({color:Pr(e),side:br}):n.type==="MeshStandardMaterial"?r=new sl({color:Pr(e),side:br}):n.type==="LineBasicMaterial"&&(r=new Gr({color:Pr(e)})),r!==null&&t&&(r.polygonOffset=!0,r.polygonOffsetUnit=1,r.polygonOffsetFactor=1),r}function _v(n,e,t){let r=new Map,i=[];for(let o of n){if(r.has(o.type)){i.push(r.get(o.type));continue}let s=wb(o,e,t);r.set(o.type,s),i.push(s)}return i}function sh(n){n!==null&&n.traverse(e=>{if(e.isMesh||e.isLineSegments){if(Array.isArray(e.material))for(let t of e.material)t.dispose();else e.material.dispose();e.userData=null,e.geometry.dispose()}})}function Tv(n,e,t,r,i){function o(l,u,h,f,d,m){let v=new he(d[3*m],d[3*m+1],d[3*m+2]);v.applyMatrix4(f.matrixWorld);let p=v.project(l);return new on((p.x+1)*u/2,-(p.y-1)*h/2)}let s=r.geometry.attributes.position.array,a=s.length/6,c=1/0;for(let l=0;l<a;l++){let u=new du(o(n,e,t,r,s,2*l),o(n,e,t,r,s,2*l+1));c=Math.min(c,sg(u,i))}return c}var JO=10,or={MeshOnly:1,MeshAndLine:2};function Sb(n,e){function t(r,i){for(let o of r)o.polygonOffset=i,o.polygonOffsetUnit=1,o.polygonOffsetFactor=1}t(n.material,e),n.userData.threeMaterials&&t(n.userData.threeMaterials,e)}var ba=class{constructor(e){this.scene=e,this.rootObject=null}IsEmpty(){return this.rootObject===null}SetRootObject(e){this.rootObject!==null&&this.Clear(),this.rootObject=e,this.scene.add(this.rootObject)}GetRootObject(){return this.rootObject}AddObject(e){if(this.rootObject===null){let t=new an;this.SetRootObject(t)}this.rootObject.add(e)}RemoveObject(e){this.rootObject&&this.rootObject.remove(e)}GetObjects(){let e=[];return this.rootObject.traverse(t=>{t!==this.rootObject&&e.push(t)}),e}Traverse(e){this.rootObject!==null&&this.rootObject.traverse(t=>{e(t)})}UpdateWorldMatrix(){this.rootObject!==null&&this.rootObject.updateWorldMatrix(!0,!0)}Clear(){sh(this.rootObject),this.scene.remove(this.rootObject),this.rootObject=null}},wa=class n{constructor(e,t,r){this.showEdges=e,this.edgeColor=t,this.edgeThreshold=r}Clone(){return new n(this.showEdges,this.edgeColor.Clone(),this.edgeThreshold)}},ah=class{constructor(e){this.scene=e,this.mainModel=new ba(this.scene),this.edgeModel=new ba(this.scene),this.highlightModel=new ba(this.scene),this.edgeSettings=new wa(!1,new ft(0,0,0),1),this.hasLines=!1,this.hasPolygonOffset=!1,this.mouseDownHandler=null,this.mouseMoveHandler=null,this.mouseUpHandler=null}SetMouseDownHandler(e){this.mouseDownHandler=e}SetMouseMoveHandler(e){this.mouseMoveHandler=e}SetMouseUpHandler(e){this.mouseUpHandler=e}SetMainObject(e){this.mainModel.SetRootObject(e),this.hasLines=!1,this.hasPolygonOffset=!1,this.EnumerateLines(t=>{this.hasLines=!0}),this.edgeSettings.showEdges&&this.GenerateEdgeModel(),this.UpdatePolygonOffset()}UpdateWorldMatrix(){this.mainModel.UpdateWorldMatrix(),this.edgeModel.UpdateWorldMatrix()}SetEdgeSettings(e){let t=!1;if(e.showEdges&&(!this.edgeSettings.showEdges||this.edgeSettings.edgeThreshold!==e.edgeThreshold)&&(t=!0),this.edgeSettings=e,!this.mainModel.IsEmpty())if(this.edgeSettings.showEdges)if(t)this.ClearEdgeModel(),this.GenerateEdgeModel();else{let r=Pr(this.edgeSettings.edgeColor);this.EnumerateEdges(i=>{i.material.color=r})}else this.ClearEdgeModel()}GenerateEdgeModel(){let e=Pr(this.edgeSettings.edgeColor);this.UpdateWorldMatrix(),this.EnumerateMeshes(t=>{let r=new sv(t.geometry,this.edgeSettings.edgeThreshold),i=new Rs(r,new Gr({color:e}));i.applyMatrix4(t.matrixWorld),i.userData=t.userData,i.visible=t.visible,this.edgeModel.AddObject(i)}),this.UpdatePolygonOffset()}GetBoundingBox(e){let t=!1,r=new vi;return this.EnumerateMeshesAndLines(i=>{e(i.userData)&&(r.union(new vi().setFromObject(i)),t=!0)}),t?r:null}GetBoundingSphere(e){let t=this.GetBoundingBox(e);if(t===null)return null;let r=new qo;return t.getBoundingSphere(r),r}Clear(){this.mainModel.Clear(),this.ClearEdgeModel()}ClearEdgeModel(){this.edgeModel.IsEmpty()||(this.UpdatePolygonOffset(),this.edgeModel.Clear())}EnumerateMeshes(e){this.mainModel.Traverse(t=>{t.isMesh&&e(t)})}EnumerateLines(e){this.mainModel.Traverse(t=>{t.isLineSegments&&e(t)})}EnumerateMeshesAndLines(e){this.mainModel.Traverse(t=>{(t.isMesh||t.isLineSegments)&&e(t)})}EnumerateEdges(e){this.edgeModel.Traverse(t=>{t.isLineSegments&&e(t)})}HasLinesOrEdges(){return this.hasLines||this.edgeSettings.showEdges}UpdatePolygonOffset(){let e=this.HasLinesOrEdges();e!==this.hasPolygonOffset&&(this.EnumerateMeshes(t=>{Sb(t,e)}),this.hasPolygonOffset=e)}GetMeshIntersectionUnderMouse(e,t,r,i,o){if(this.mainModel.IsEmpty()||t.x<0||t.x>i||t.y<0||t.y>o)return null;let s=new Ne;s.x=t.x/i*2-1,s.y=-(t.y/o)*2+1;let a=new dv;a.setFromCamera(s,r),a.params.Line.threshold=10;let c=a.intersectObject(this.mainModel.GetRootObject(),!0);for(let l=0;l<c.length;l++){let u=c[l];if(u.object.visible){if(u.object.isMesh)return u;if(u.object.isLineSegments){if(e===or.MeshOnly||Tv(r,i,o,u.object,t)>JO)continue;return u}}}return null}};var bn={IntegerToString(n){return n.toString()},StringToInteger(n){return parseInt(n,10)},NumberToString(n){return n.toFixed(5)},StringToNumber(n){return parseFloat(n)},ModelUrlsToString:function(n){return n===null?null:n.join(",")},StringToModelUrls:function(n){return n===null||n.length===0?null:n.split(",")},CameraToString:function(n){return n===null?null:[this.NumberToString(n.eye.x),this.NumberToString(n.eye.y),this.NumberToString(n.eye.z),this.NumberToString(n.center.x),this.NumberToString(n.center.y),this.NumberToString(n.center.z),this.NumberToString(n.up.x),this.NumberToString(n.up.y),this.NumberToString(n.up.z),this.NumberToString(n.fov)].join(",")},ProjectionModeToString:function(n){return n===nr.Perspective?"perspective":n===nr.Orthographic?"orthographic":null},StringToCamera:function(n){if(n===null||n.length===0)return null;let e=n.split(",");if(e.length!==9&&e.length!==10)return null;let t=45;return e.length>=10&&(t=this.StringToNumber(e[9])),new po(new $e(this.StringToNumber(e[0]),this.StringToNumber(e[1]),this.StringToNumber(e[2])),new $e(this.StringToNumber(e[3]),this.StringToNumber(e[4]),this.StringToNumber(e[5])),new $e(this.StringToNumber(e[6]),this.StringToNumber(e[7]),this.StringToNumber(e[8])),t)},StringToProjectionMode:function(n){return n==="perspective"?nr.Perspective:n==="orthographic"?nr.Orthographic:null},RGBColorToString:function(n){return n===null?null:[this.IntegerToString(n.r),this.IntegerToString(n.g),this.IntegerToString(n.b)].join(",")},RGBAColorToString:function(n){return n===null?null:[this.IntegerToString(n.r),this.IntegerToString(n.g),this.IntegerToString(n.b),this.IntegerToString(n.a)].join(",")},StringToRGBColor:function(n){if(n===null||n.length===0)return null;let e=n.split(",");return e.length!==3?null:new ft(this.StringToInteger(e[0]),this.StringToInteger(e[1]),this.StringToInteger(e[2]))},StringToRGBAColor:function(n){if(n===null||n.length===0)return null;let e=n.split(",");if(e.length!==3&&e.length!==4)return null;let t=new di(this.StringToInteger(e[0]),this.StringToInteger(e[1]),this.StringToInteger(e[2]),255);return e.length===4&&(t.a=this.StringToInteger(e[3])),t},EnvironmentSettingsToString(n){return n===null?null:[n.environmentMapName,n.backgroundIsEnvMap?"on":"off"].join(",")},StringToEnvironmentSettings:function(n){if(n===null||n.length===0)return null;let e=n.split(",");return e.length!==2?null:{environmentMapName:e[0],backgroundIsEnvMap:e[1]==="on"}},EdgeSettingsToString:function(n){return n===null?null:[n.showEdges?"on":"off",this.RGBColorToString(n.edgeColor),this.IntegerToString(n.edgeThreshold)].join(",")},StringToEdgeSettings:function(n){if(n===null||n.length===0)return null;let e=n.split(",");return e.length!==5?null:new wa(e[0]==="on",new ft(this.StringToInteger(e[1]),this.StringToInteger(e[2]),this.StringToInteger(e[3])),this.StringToInteger(e[4]))}},Vd=class{constructor(e){this.separator=e,this.paramList=""}AddModelUrls(e){return this.AddUrlPart("model",bn.ModelUrlsToString(e)),this}AddCamera(e){return this.AddUrlPart("camera",bn.CameraToString(e)),this}AddProjectionMode(e){return this.AddUrlPart("projectionmode",bn.ProjectionModeToString(e)),this}AddEnvironmentSettings(e){return this.AddUrlPart("envsettings",bn.EnvironmentSettingsToString(e)),this}AddBackgroundColor(e){return this.AddUrlPart("backgroundcolor",bn.RGBAColorToString(e)),this}AddDefaultColor(e){return this.AddUrlPart("defaultcolor",bn.RGBColorToString(e)),this}AddDefaultLineColor(e){return this.AddUrlPart("defaultlinecolor",bn.RGBColorToString(e)),this}AddEdgeSettings(e){return this.AddUrlPart("edgesettings",bn.EdgeSettingsToString(e)),this}AddUrlPart(e,t){e===null||t===null||(this.paramList.length>0&&(this.paramList+=this.separator),this.paramList+=e+"="+t)}GetParameterList(){return this.paramList}},Hd=class{constructor(e,t){this.separator=t,this.paramList=e}GetModelUrls(){if(this.paramList.indexOf("=")===-1)return this.paramList.split(",");let e=this.GetKeywordParams("model");return bn.StringToModelUrls(e)}GetCamera(){let e=this.GetKeywordParams("camera");return bn.StringToCamera(e)}GetProjectionMode(){let e=this.GetKeywordParams("cameramode");return e===null&&(e=this.GetKeywordParams("projectionmode")),bn.StringToProjectionMode(e)}GetEnvironmentSettings(){let e=this.GetKeywordParams("envsettings");return bn.StringToEnvironmentSettings(e)}GetBackgroundColor(){let e=this.GetKeywordParams("backgroundcolor");return bn.StringToRGBAColor(e)}GetDefaultColor(){let e=this.GetKeywordParams("defaultcolor");return bn.StringToRGBColor(e)}GetDefaultLineColor(){let e=this.GetKeywordParams("defaultlinecolor");return bn.StringToRGBColor(e)}GetEdgeSettings(){let e=this.GetKeywordParams("edgesettings");return bn.StringToEdgeSettings(e)}GetKeywordParams(e){if(this.paramList===null||this.paramList.length===0)return null;let t=e+"=",r=this.paramList.split(this.separator);for(let i=0;i<r.length;i++){let o=r[i];if(o.startsWith(t))return o.substring(t.length)}return null}};function _b(){return new Vd("$")}function Zo(n){return new Hd(n,"$")}function lh(n){let e=_b();return e.AddModelUrls(n),e.GetParameterList()}var Jo={Url:1,File:2,Decompressed:3},er={Text:1,Binary:2};function ur(n){let e=n,t=e.indexOf("?");t!==-1&&(e=e.substring(0,t));let r=e.lastIndexOf("/");return r===-1&&(r=e.lastIndexOf("\\")),r!==-1&&(e=e.substring(r+1)),decodeURI(e)}function to(n){let e=ur(n),t=e.lastIndexOf(".");return t===-1?"":e.substring(t+1).toLowerCase()}function Mv(n,e){return new Promise((t,r)=>{let i=new XMLHttpRequest;i.open("GET",n,!0),i.onprogress=o=>{e(o.loaded,o.total)},i.onload=()=>{i.status===200?t(i.response):r()},i.onerror=()=>{r()},i.responseType="arraybuffer",i.send(null)})}function Ev(n,e){return new Promise((t,r)=>{let i=new FileReader;i.onprogress=o=>{e(o.loaded,o.total)},i.onloadend=o=>{o.target.readyState===FileReader.DONE&&t(o.target.result)},i.onerror=()=>{r()},i.readAsArrayBuffer(n)})}function hl(n){for(let e=0;e<n.length;e++){let t=n[e];t.indexOf("www.dropbox.com")!==-1?(t=t.replace("www.dropbox.com","dl.dropbox.com"),n[e]=t):t.indexOf("github.com")!==-1&&(t=t.replace("github.com","raw.githubusercontent.com"),t=t.replace("/blob",""),n[e]=t)}}function Av(n){let e=/^https?:\/\/\S+$/g;return n.match(e)!==null}var ch=class{constructor(){this.count=null,this.current=null,this.callbacks=null}Run(e,t){this.count=e,this.current=0,this.callbacks=t,e===0?this.TaskReady():this.RunOnce()}RunBatch(e,t,r){let i=0;e>0&&(i=parseInt((e-1)/t,10)+1),this.Run(i,{runTask:(o,s)=>{let a=o*t,c=Math.min((o+1)*t,e)-1;r.runTask(a,c,s)},onReady:r.onReady})}RunOnce(){setTimeout(()=>{this.callbacks.runTask(this.current,this.TaskReady.bind(this))},0)}TaskReady(){this.current+=1,this.current<this.count?this.RunOnce():this.callbacks.onReady&&this.callbacks.onReady()}};function pc(n){setTimeout(()=>{n()},10)}function Cv(n,e){new ch().Run(n,e)}function Iv(n,e,t){new ch().RunBatch(n,e,t)}function Rv(n){function e(t){t()&&setTimeout(()=>{e(t)},10)}e(n)}var uh=class{constructor(e,t,r){this.name=e,this.source=t,this.data=r}};function fl(n){let e=[];for(let t of n){let r=ur(t);e.push(new uh(r,Jo.Url,t))}return e}function hh(n){let e=[];for(let t of n){let r=ur(t.name);e.push(new uh(r,Jo.File,t))}return e}var mc=class{constructor(e,t,r){this.name=ur(e),this.extension=to(e),this.source=t,this.data=r,this.content=null}SetContent(e){this.content=e}},gc=class{constructor(){this.files=[]}FillFromInputFiles(e){this.files=[];for(let t of e){let r=new mc(t.name,t.source,t.data);this.files.push(r)}}ExtendFromFileList(e){let t=e.GetFiles();for(let r=0;r<t.length;r++){let i=t[r];this.ContainsFileByPath(i.name)||this.files.push(i)}}GetFiles(){return this.files}GetContent(e){Cv(this.files.length,{runTask:(t,r)=>{e.onFileListProgress(t,this.files.length),this.GetFileContent(this.files[t],{onReady:r,onProgress:e.onFileLoadProgress})},onReady:e.onReady})}ContainsFileByPath(e){return this.FindFileByPath(e)!==null}FindFileByPath(e){let t=ur(e).toLowerCase();for(let r=0;r<this.files.length;r++){let i=this.files[r];if(i.name.toLowerCase()===t)return i}return null}IsOnlyUrlSource(){if(this.files.length===0)return!1;for(let e=0;e<this.files.length;e++){let t=this.files[e];if(t.source!==Jo.Url&&t.source!==Jo.Decompressed)return!1}return!0}AddFile(e){this.files.push(e)}GetFileContent(e,t){if(e.content!==null){t.onReady();return}let r=null;if(e.source===Jo.Url)r=Mv(e.data,t.onProgress);else if(e.source===Jo.File)r=Ev(e.data,t.onProgress);else{t.onReady();return}r.then(i=>{e.SetContent(i)}).catch(()=>{}).finally(()=>{t.onReady()})}};var xi=class{constructor(e,t,r,i){this.x=e,this.y=t,this.z=r,this.w=i}};function HT(n,e){return pn(n.x,e.x)&&pn(n.y,e.y)&&pn(n.z,e.z)&&pn(n.w,e.w)}function fh(n){return new xi(n[0],n[1],n[2],n[3])}function Pv(n,e){let t=e/2,r=Math.sin(t);return new xi(n.x*r,n.y*r,n.z*r,Math.cos(t))}function WT(n,e,t,r){let i=Math.cos(n/2),o=Math.cos(e/2),s=Math.cos(t/2),a=Math.sin(n/2),c=Math.sin(e/2),l=Math.sin(t/2),u=new xi(0,0,0,1);if(r==="XYZ")u.x=a*o*s+i*c*l,u.y=i*c*s-a*o*l,u.z=i*o*l+a*c*s,u.w=i*o*s-a*c*l;else if(r==="YXZ")u.x=a*o*s+i*c*l,u.y=i*c*s-a*o*l,u.z=i*o*l-a*c*s,u.w=i*o*s+a*c*l;else if(r==="ZXY")u.x=a*o*s-i*c*l,u.y=i*c*s+a*o*l,u.z=i*o*l+a*c*s,u.w=i*o*s-a*c*l;else if(r==="ZYX")u.x=a*o*s-i*c*l,u.y=i*c*s+a*o*l,u.z=i*o*l-a*c*s,u.w=i*o*s+a*c*l;else if(r==="YZX")u.x=a*o*s+i*c*l,u.y=i*c*s+a*o*l,u.z=i*o*l-a*c*s,u.w=i*o*s-a*c*l;else if(r==="XZY")u.x=a*o*s-i*c*l,u.y=i*c*s-a*o*l,u.z=i*o*l+a*c*s,u.w=i*o*s+a*c*l;else return null;return u}var Qo=class n{constructor(e,t,r,i){this.x=e,this.y=t,this.z=r,this.w=i}Clone(){return new n(this.x,this.y,this.z,this.w)}};var sr=class n{constructor(e){this.matrix=null,e!=null&&(this.matrix=e)}IsValid(){return this.matrix!==null}Set(e){return this.matrix=e,this}Get(){return this.matrix}Clone(){let e=[this.matrix[0],this.matrix[1],this.matrix[2],this.matrix[3],this.matrix[4],this.matrix[5],this.matrix[6],this.matrix[7],this.matrix[8],this.matrix[9],this.matrix[10],this.matrix[11],this.matrix[12],this.matrix[13],this.matrix[14],this.matrix[15]];return new n(e)}CreateIdentity(){return this.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this}IsIdentity(){let e=new n().CreateIdentity().Get();for(let t=0;t<16;t++)if(!pn(this.matrix[t],e[t]))return!1;return!0}CreateTranslation(e,t,r){return this.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1],this}CreateRotation(e,t,r,i){let o=e+e,s=t+t,a=r+r,c=e*o,l=e*s,u=e*a,h=t*s,f=t*a,d=r*a,m=i*o,v=i*s,p=i*a;return this.matrix=[1-(h+d),l+p,u-v,0,l-p,1-(c+d),f+m,0,u+v,f-m,1-(c+h),0,0,0,0,1],this}CreateRotationAxisAngle(e,t){let r=Pv(e,t);return this.CreateRotation(r.x,r.y,r.z,r.w)}CreateScale(e,t,r){return this.matrix=[e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1],this}ComposeTRS(e,t,r){let i=e.x,o=e.y,s=e.z,a=t.x,c=t.y,l=t.z,u=t.w,h=r.x,f=r.y,d=r.z,m=a+a,v=c+c,p=l+l,g=a*m,x=a*v,y=a*p,b=c*v,S=c*p,_=l*p,M=u*m,A=u*v,w=u*p;return this.matrix=[(1-(b+_))*h,(x+w)*h,(y-A)*h,0,(x-w)*f,(1-(g+_))*f,(S+M)*f,0,(y+A)*d,(S-M)*d,(1-(g+b))*d,0,i,o,s,1],this}DecomposeTRS(){let e=new $e(this.matrix[12],this.matrix[13],this.matrix[14]),t=fu(this.matrix[0],this.matrix[1],this.matrix[2]),r=fu(this.matrix[4],this.matrix[5],this.matrix[6]),i=fu(this.matrix[8],this.matrix[9],this.matrix[10]),o=this.Determinant();na(o)&&(t*=-1);let s=new $e(t,r,i),a=this.matrix[0]/t,c=this.matrix[4]/r,l=this.matrix[8]/i,u=this.matrix[1]/t,h=this.matrix[5]/r,f=this.matrix[9]/i,d=this.matrix[2]/t,m=this.matrix[6]/r,v=this.matrix[10]/i,p=null,g=a+h+v;if(g>0){let x=Math.sqrt(g+1)*2;p=new xi((m-f)/x,(l-d)/x,(u-c)/x,.25*x)}else if(a>h&&a>v){let x=Math.sqrt(1+a-h-v)*2;p=new xi(.25*x,(c+u)/x,(l+d)/x,(m-f)/x)}else if(h>v){let x=Math.sqrt(1+h-a-v)*2;p=new xi((c+u)/x,.25*x,(f+m)/x,(l-d)/x)}else{let x=Math.sqrt(1+v-a-h)*2;p=new xi((l+d)/x,(f+m)/x,.25*x,(u-c)/x)}return{translation:e,rotation:p,scale:s}}Determinant(){let e=this.matrix[0],t=this.matrix[1],r=this.matrix[2],i=this.matrix[3],o=this.matrix[4],s=this.matrix[5],a=this.matrix[6],c=this.matrix[7],l=this.matrix[8],u=this.matrix[9],h=this.matrix[10],f=this.matrix[11],d=this.matrix[12],m=this.matrix[13],v=this.matrix[14],p=this.matrix[15],g=e*s-t*o,x=e*a-r*o,y=e*c-i*o,b=t*a-r*s,S=t*c-i*s,_=r*c-i*a,M=l*m-u*d,A=l*v-h*d,w=l*p-f*d,T=u*v-h*m,D=u*p-f*m,N=h*p-f*v;return g*N-x*D+y*T+b*w-S*A+_*M}Invert(){let e=this.matrix[0],t=this.matrix[1],r=this.matrix[2],i=this.matrix[3],o=this.matrix[4],s=this.matrix[5],a=this.matrix[6],c=this.matrix[7],l=this.matrix[8],u=this.matrix[9],h=this.matrix[10],f=this.matrix[11],d=this.matrix[12],m=this.matrix[13],v=this.matrix[14],p=this.matrix[15],g=e*s-t*o,x=e*a-r*o,y=e*c-i*o,b=t*a-r*s,S=t*c-i*s,_=r*c-i*a,M=l*m-u*d,A=l*v-h*d,w=l*p-f*d,T=u*v-h*m,D=u*p-f*m,N=h*p-f*v,P=g*N-x*D+y*T+b*w-S*A+_*M;if(pn(P,0))return null;let E=[(s*N-a*D+c*T)/P,(r*D-t*N-i*T)/P,(m*_-v*S+p*b)/P,(h*S-u*_-f*b)/P,(a*w-o*N-c*A)/P,(e*N-r*w+i*A)/P,(v*y-d*_-p*x)/P,(l*_-h*y+f*x)/P,(o*D-s*w+c*M)/P,(t*w-e*D-i*M)/P,(d*S-m*y+p*g)/P,(u*y-l*S-f*g)/P,(s*A-o*T-a*M)/P,(e*T-t*A+r*M)/P,(m*x-d*b-v*g)/P,(l*b-u*x+h*g)/P];return new n(E)}Transpose(){let e=[this.matrix[0],this.matrix[4],this.matrix[8],this.matrix[12],this.matrix[1],this.matrix[5],this.matrix[9],this.matrix[13],this.matrix[2],this.matrix[6],this.matrix[10],this.matrix[14],this.matrix[3],this.matrix[7],this.matrix[11],this.matrix[15]];return new n(e)}InvertTranspose(){let e=this.Invert();return e===null?null:e.Transpose()}MultiplyVector(e){let t=e.x,r=e.y,i=e.z,o=e.w,s=this.matrix[0],a=this.matrix[1],c=this.matrix[2],l=this.matrix[3],u=this.matrix[4],h=this.matrix[5],f=this.matrix[6],d=this.matrix[7],m=this.matrix[8],v=this.matrix[9],p=this.matrix[10],g=this.matrix[11],x=this.matrix[12],y=this.matrix[13],b=this.matrix[14],S=this.matrix[15];return new Qo(t*s+r*u+i*m+o*x,t*a+r*h+i*v+o*y,t*c+r*f+i*p+o*b,t*l+r*d+i*g+o*S)}MultiplyMatrix(e){let t=this.matrix[0],r=this.matrix[1],i=this.matrix[2],o=this.matrix[3],s=this.matrix[4],a=this.matrix[5],c=this.matrix[6],l=this.matrix[7],u=this.matrix[8],h=this.matrix[9],f=this.matrix[10],d=this.matrix[11],m=this.matrix[12],v=this.matrix[13],p=this.matrix[14],g=this.matrix[15],x=e.matrix[0],y=e.matrix[1],b=e.matrix[2],S=e.matrix[3],_=e.matrix[4],M=e.matrix[5],A=e.matrix[6],w=e.matrix[7],T=e.matrix[8],D=e.matrix[9],N=e.matrix[10],P=e.matrix[11],E=e.matrix[12],U=e.matrix[13],k=e.matrix[14],B=e.matrix[15],O=[t*x+r*_+i*T+o*E,t*y+r*M+i*D+o*U,t*b+r*A+i*N+o*k,t*S+r*w+i*P+o*B,s*x+a*_+c*T+l*E,s*y+a*M+c*D+l*U,s*b+a*A+c*N+l*k,s*S+a*w+c*P+l*B,u*x+h*_+f*T+d*E,u*y+h*M+f*D+d*U,u*b+h*A+f*N+d*k,u*S+h*w+f*P+d*B,m*x+v*_+p*T+g*E,m*y+v*M+p*D+g*U,m*b+v*A+p*N+g*k,m*S+v*w+p*P+g*B];return new n(O)}};function Dv(n,e){let t=n.Get(),r=e.Get();for(let i=0;i<16;i++)if(!pn(t[i],r[i]))return!1;return!0}var tr=class n{constructor(e){e!=null?this.matrix=e:(this.matrix=new sr,this.matrix.CreateIdentity())}SetMatrix(e){return this.matrix=e,this}GetMatrix(){return this.matrix}IsIdentity(){return this.matrix.IsIdentity()}AppendMatrix(e){return this.matrix=this.matrix.MultiplyMatrix(e),this}Append(e){return this.AppendMatrix(e.GetMatrix()),this}TransformCoord3D(e){let t=new Qo(e.x,e.y,e.z,1),r=this.matrix.MultiplyVector(t);return new $e(r.x,r.y,r.z)}Clone(){let e=this.matrix.Clone();return new n(e)}};function jT(n,e){return Dv(n.GetMatrix(),e.GetMatrix())}function dl(n){return n.LineCount()===0&&n.TriangleCount()===0}function vc(n,e,t){let r=gr(e,n),i=gr(t,n),o=Bo(r,i);return o.Normalize(),o}function Ns(n,e){if(!e.IsIdentity()){for(let t=0;t<n.VertexCount();t++){let r=n.GetVertex(t),i=e.TransformCoord3D(r);r.x=i.x,r.y=i.y,r.z=i.z}if(n.NormalCount()>0){let t=e.GetMatrix().InvertTranspose();if(t!==null){let r=new tr(t);for(let i=0;i<n.NormalCount();i++){let o=n.GetNormal(i),s=r.TransformCoord3D(o);o.x=s.x,o.y=s.y,o.z=s.z}}}}}function Fv(n){for(let e=0;e<n.TriangleCount();e++){let t=n.GetTriangle(e),r=t.v1;t.v1=t.v2,t.v2=r}}var yc=class{constructor(e,t){this.min=e,this.max=t}GetMin(){return this.min}GetMax(){return this.max}GetCenter(){return new $e((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,(this.min.z+this.max.z)/2)}},dh=class{constructor(){this.box=new yc(new $e(1/0,1/0,1/0),new $e(-1/0,-1/0,-1/0)),this.isValid=!1}GetBox(){return this.isValid?this.box:null}AddPoint(e){this.box.min.x=Math.min(this.box.min.x,e.x),this.box.min.y=Math.min(this.box.min.y,e.y),this.box.min.z=Math.min(this.box.min.z,e.z),this.box.max.x=Math.max(this.box.max.x,e.x),this.box.max.y=Math.max(this.box.max.y,e.y),this.box.max.z=Math.max(this.box.max.z,e.z),this.isValid=!0}};var Wd=class n{constructor(e,t){this.boundingBox=e,this.level=t,this.pointItems=[],this.childNodes=[]}AddPoint(e,t,r){let i=this.FindNodeForPoint(e);if(i===null||i.FindPointDirectly(e)!==null)return!1;if(i.pointItems.length<r.maxPointsPerNode||i.level>=r.maxTreeDepth)return i.AddPointDirectly(e,t),!0;{i.CreateChildNodes();let o=i.pointItems;i.pointItems=[];for(let s=0;s<o.length;s++){let a=o[s];if(!i.AddPoint(a.point,a.data,r))return!1}return i.AddPoint(e,t,r)}}FindPoint(e){let t=this.FindNodeForPoint(e);return t===null?null:t.FindPointDirectly(e)}AddPointDirectly(e,t){this.pointItems.push({point:e,data:t})}FindPointDirectly(e){for(let t=0;t<this.pointItems.length;t++){let r=this.pointItems[t];if(Zi(e,r.point))return r.data}return null}FindNodeForPoint(e){if(!this.IsPointInBounds(e))return null;if(this.childNodes.length===0)return this;for(let t=0;t<this.childNodes.length;t++){let i=this.childNodes[t].FindNodeForPoint(e);if(i!==null)return i}return null}CreateChildNodes(){function e(a,c,l,u,h,f,d){let m=new yc(new $e(c,l,u),new $e(c+h,l+f,u+d));a.childNodes.push(new n(m,a.level+1))}let t=this.boundingBox.min,r=this.boundingBox.GetCenter(),i=(this.boundingBox.max.x-this.boundingBox.min.x)/2,o=(this.boundingBox.max.y-this.boundingBox.min.y)/2,s=(this.boundingBox.max.z-this.boundingBox.min.z)/2;e(this,t.x,t.y,t.z,i,o,s),e(this,r.x,t.y,t.z,i,o,s),e(this,t.x,r.y,t.z,i,o,s),e(this,r.x,r.y,t.z,i,o,s),e(this,t.x,t.y,r.z,i,o,s),e(this,r.x,t.y,r.z,i,o,s),e(this,t.x,r.y,r.z,i,o,s),e(this,r.x,r.y,r.z,i,o,s)}IsPointInBounds(e){return lu(e.x,this.boundingBox.min.x)&&lu(e.y,this.boundingBox.min.y)&&lu(e.z,this.boundingBox.min.z)&&au(e.x,this.boundingBox.max.x)&&au(e.y,this.boundingBox.max.y)&&au(e.z,this.boundingBox.max.z)}},ph=class{constructor(e,t){this.options={maxPointsPerNode:10,maxTreeDepth:10},t!==void 0&&(t.maxPointsPerNode!==void 0&&(this.options.maxPointsPerNode=t.maxPointsPerNode),t.maxTreeDepth!==void 0&&(this.options.maxTreeDepth=t.maxTreeDepth)),this.rootNode=new Wd(e,0)}AddPoint(e,t){return this.rootNode.AddPoint(e,t,this.options)}FindPoint(e){return this.rootNode.FindPoint(e)}};var ki=class{constructor(e,t){this.nodeId=e,this.meshIndex=t}IsEqual(e){return this.nodeId===e.nodeId&&this.meshIndex===e.meshIndex}GetKey(){return this.nodeId.toString()+":"+this.meshIndex.toString()}},Sa=class extends Ms{constructor(e,t,r){super(),this.id=e,this.node=t,this.mesh=r}GetId(){return this.id}GetTransformation(){return this.node.GetWorldTransformation()}GetMesh(){return this.mesh}VertexCount(){return this.mesh.VertexCount()}VertexColorCount(){return this.mesh.VertexColorCount()}NormalCount(){return this.mesh.NormalCount()}TextureUVCount(){return this.mesh.TextureUVCount()}LineCount(){return this.mesh.LineCount()}LineSegmentCount(){return this.mesh.LineSegmentCount()}TriangleCount(){return this.mesh.TriangleCount()}EnumerateVertices(e){let t=this.node.GetWorldTransformation();t.IsIdentity()?this.mesh.EnumerateVertices(e):this.mesh.EnumerateVertices(r=>{let i=t.TransformCoord3D(r);e(i)})}EnumerateTriangleVertexIndices(e){this.mesh.EnumerateTriangleVertexIndices(e)}EnumerateTriangleVertices(e){let t=this.node.GetWorldTransformation();t.IsIdentity()?this.mesh.EnumerateTriangleVertices(e):this.mesh.EnumerateTriangleVertices((r,i,o)=>{let s=t.TransformCoord3D(r),a=t.TransformCoord3D(i),c=t.TransformCoord3D(o);e(s,a,c)})}PropertyGroupCount(){return this.mesh.PropertyGroupCount()}AddPropertyGroup(e){return this.mesh.AddPropertyGroup(e)}GetPropertyGroup(e){return this.mesh.GetPropertyGroup(e)}GetTransformedMesh(){let e=this.node.GetWorldTransformation(),t=this.mesh.Clone();return Ns(t,e),t}};var Tb=class{constructor(){this.nextId=0}GenerateId(){let e=this.nextId;return this.nextId+=1,e}},Vr=class{constructor(){this.name="",this.parent=null,this.transformation=new tr,this.childNodes=[],this.meshIndices=[],this.idGenerator=new Tb,this.id=this.idGenerator.GenerateId()}IsEmpty(){return this.childNodes.length===0&&this.meshIndices.length===0}IsMeshNode(){return this.childNodes.length===0&&this.meshIndices.length===1}GetId(){return this.id}GetName(){return this.name}SetName(e){this.name=e}HasParent(){return this.parent!==null}GetParent(){return this.parent}GetTransformation(){return this.transformation}GetWorldTransformation(){let e=this.transformation.Clone(),t=this.parent;for(;t!==null;)e.Append(t.transformation),t=t.parent;return e}SetTransformation(e){this.transformation=e}AddChildNode(e){return e.parent=this,e.idGenerator=this.idGenerator,e.id=e.idGenerator.GenerateId(),this.childNodes.push(e),this.childNodes.length-1}RemoveChildNode(e){e.parent=null;let t=this.childNodes.indexOf(e);this.childNodes.splice(t,1)}GetChildNodes(){return this.childNodes}ChildNodeCount(){return this.childNodes.length}GetChildNode(e){return this.childNodes[e]}AddMeshIndex(e){return this.meshIndices.push(e),this.meshIndices.length-1}MeshIndexCount(){return this.meshIndices.length}GetMeshIndex(e){return this.meshIndices[e]}GetMeshIndices(){return this.meshIndices}Enumerate(e){e(this);for(let t of this.childNodes)t.Enumerate(e)}EnumerateChildren(e){for(let t of this.childNodes)e(t),t.EnumerateChildren(e)}EnumerateMeshIndices(e){for(let t of this.meshIndices)e(t);for(let t of this.childNodes)t.EnumerateMeshIndices(e)}};var bi={Unknown:0,Millimeter:1,Centimeter:2,Meter:3,Inch:4,Foot:5};var Ls=class extends Ms{constructor(){super(),this.unit=bi.Unknown,this.root=new Vr,this.materials=[],this.meshes=[]}GetUnit(){return this.unit}SetUnit(e){this.unit=e}GetRootNode(){return this.root}NodeCount(){let e=0;return this.root.Enumerate(t=>{e+=1}),e-1}MaterialCount(){return this.materials.length}MeshCount(){return this.meshes.length}MeshInstanceCount(){let e=0;return this.root.Enumerate(t=>{e+=t.MeshIndexCount()}),e}VertexCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.VertexCount()}),e}VertexColorCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.VertexColorCount()}),e}NormalCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.NormalCount()}),e}TextureUVCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.TextureUVCount()}),e}LineCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.LineCount()}),e}LineSegmentCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.LineSegmentCount()}),e}TriangleCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.TriangleCount()}),e}AddMaterial(e){return this.materials.push(e),this.materials.length-1}GetMaterial(e){return this.materials[e]}AddMesh(e){return this.meshes.push(e),this.meshes.length-1}AddMeshToRootNode(e){let t=this.AddMesh(e);return this.root.AddMeshIndex(t),t}RemoveMesh(e){this.meshes.splice(e,1),this.root.Enumerate(t=>{for(let r=0;r<t.meshIndices.length;r++)t.meshIndices[r]===e?(t.meshIndices.splice(r,1),r-=1):t.meshIndices[r]>e&&(t.meshIndices[r]-=1)})}GetMesh(e){return this.meshes[e]}GetMeshInstance(e){let t=null;if(this.root.Enumerate(s=>{s.GetId()===e.nodeId&&(t=s)}),t===null||t.GetMeshIndices().indexOf(e.meshIndex)===-1)return null;let i=this.GetMesh(e.meshIndex),o=new ki(t.GetId(),e.meshIndex);return new Sa(o,t,i)}EnumerateMeshes(e){for(let t of this.meshes)e(t)}EnumerateMeshInstances(e){this.root.Enumerate(t=>{for(let r of t.GetMeshIndices()){let i=new ki(t.GetId(),r),o=this.GetMesh(r),s=new Sa(i,t,o);e(s)}})}EnumerateTransformedMeshInstances(e){this.EnumerateMeshInstances(t=>{let r=t.GetTransformedMesh();e(r)})}EnumerateVertices(e){this.EnumerateMeshInstances(t=>{t.EnumerateVertices(e)})}EnumerateTriangleVertexIndices(e){this.EnumerateMeshInstances(t=>{t.EnumerateTriangleVertexIndices(e)})}EnumerateTriangleVertices(e){this.EnumerateMeshInstances(t=>{t.EnumerateTriangleVertices(e)})}};var jd=class{constructor(){this.edges=[],this.triangles=[]}},qd=class{constructor(e,t){this.vertex1=e,this.vertex2=t,this.triangles=[]}},Xd=class{constructor(e,t){this.edge=e,this.reversed=t}},Kd=class{constructor(){this.triEdge1=null,this.triEdge2=null,this.triEdge3=null}},mh=class{constructor(){this.vertices=[],this.edges=[],this.triangleEdges=[],this.triangles=[],this.edgeStartToEndVertexMap=new Map}AddVertex(){return this.vertices.push(new jd),this.vertices.length-1}AddTriangle(e,t,r){function i(l,u,h){l[u].triangles.push(h)}function o(l,u,h,f){let d=l[h],m=u[f];d.edges.push(m.edge)}function s(l,u,h,f){let d=u[h];l[d.edge].triangles.push(f)}let a=this.triangles.length,c=new Kd;c.triEdge1=this.AddTriangleEdge(e,t),c.triEdge2=this.AddTriangleEdge(t,r),c.triEdge3=this.AddTriangleEdge(r,e),i(this.vertices,e,a),i(this.vertices,t,a),i(this.vertices,r,a),o(this.vertices,this.triangleEdges,e,c.triEdge1),o(this.vertices,this.triangleEdges,t,c.triEdge2),o(this.vertices,this.triangleEdges,r,c.triEdge3),s(this.edges,this.triangleEdges,c.triEdge1,a),s(this.edges,this.triangleEdges,c.triEdge2,a),s(this.edges,this.triangleEdges,c.triEdge3,a),this.triangles.push(c)}AddTriangleEdge(e,t){let r=e,i=t,o=!1;t<e&&(r=t,i=e,o=!0);let s=this.AddEdge(r,i);return this.triangleEdges.push(new Xd(s,o)),this.triangleEdges.length-1}AddEdge(e,t){this.edgeStartToEndVertexMap.has(e)||this.edgeStartToEndVertexMap.set(e,[]);let r=this.edgeStartToEndVertexMap.get(e);for(let o=0;o<r.length;o++){let s=r[o];if(s.endVertex===t)return s.edgeIndex}let i=this.edges.length;return r.push({endVertex:t,edgeIndex:i}),this.edges.push(new qd(e,t)),i}};function gh(n){let e=!0;return n.EnumerateMeshInstances(t=>{dl(t)||(e=!1)}),e}function Yd(n){let e=new dh;return n.EnumerateVertices(t=>{e.AddPoint(t)}),e.GetBox()}function Mb(n){function e(o,s,a){let c=s.FindPoint(o);return c===null&&(c=a.AddVertex(),s.AddPoint(o,c)),c}let t=Yd(n),r=new ph(t),i=new mh;return n.EnumerateTriangleVertices((o,s,a)=>{let c=e(o,r,i),l=e(s,r,i),u=e(a,r,i);i.AddTriangle(c,l,u)}),i}function Zd(n){function e(t,r,i){let o=t.triangles[r],s=t.triangleEdges[o.triEdge1],a=t.triangleEdges[o.triEdge2],c=t.triangleEdges[o.triEdge3];return s.edge===i?s.reversed:a.edge===i?a.reversed:c.edge===i?c.reversed:null}if(n instanceof Ls){let t=!0;return n.EnumerateMeshInstances(r=>{t&&(t=Zd(r))}),t}else{let t=Mb(n);for(let r=0;r<t.edges.length;r++){let i=t.edges[r];if(i.triangles.length!==2)return!1;let o=e(t,i.triangles[0],r),s=e(t,i.triangles[1],r);if(o===null||s===null||o===s)return!1}return!0}}function Nv(n){let e=[];for(let t=0;t<n.MaterialCount();t++){let r=n.GetMaterial(t);r.source!==Bn.Model&&!r.vertexColors&&e.push(r)}return e}function Jd(n,e,t){for(let r=0;r<n.MaterialCount();r++){let i=n.GetMaterial(r);i.source===Bn.DefaultFace?i.color=e:i.source===Bn.DefaultLine&&(i.color=t)}}var Dt={Text:1,Integer:2,Number:3,Boolean:4,Percent:5,Color:6},Wt=class n{constructor(e,t,r){this.type=e,this.name=t,this.value=r}Clone(){return this.type===Dt.Color?new n(this.type,this.name,this.value.Clone()):new n(this.type,this.name,this.value)}},ni=class n{constructor(e){this.name=e,this.properties=[]}PropertyCount(){return this.properties.length}AddProperty(e){this.properties.push(e)}GetProperty(e){return this.properties[e]}Clone(){let e=new n(this.name);for(let t of this.properties)e.AddProperty(t.Clone());return e}};function xc(n){return n.type===Dt.Text?Ym(n.value):n.type===Dt.Integer?n.value.toLocaleString():n.type===Dt.Number?n.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):n.type===Dt.Boolean?n.value?be("True"):be("False"):n.type===Dt.Percent?parseInt(n.value*100,10).toString()+"%":n.type===Dt.Color?"#"+pi(n.value):null}var Eb=class{constructor(e){this.params={defaultLineMaterialColor:new ft(0,0,0),defaultMaterialColor:new ft(0,0,0)},ou(e,this.params),this.defaultLineMaterialIndex=null,this.defaultMaterialIndex=null}Finalize(e){this.Reset(),this.FinalizeMeshes(e),this.FinalizeMaterials(e),this.FinalizeNodes(e)}FinalizeMaterials(e){if(e.VertexColorCount()===0)return;let t=new Map;for(let r=0;r<e.MeshCount();r++){let i=e.GetMesh(r);for(let o=0;o<i.TriangleCount();o++){let s=i.GetTriangle(o),a=s.HasVertexColors();t.has(s.mat)?a||t.set(s.mat,!1):t.set(s.mat,a)}}for(let[r,i]of t){let o=e.GetMaterial(r);o.vertexColors=i}}FinalizeMeshes(e){for(let t=0;t<e.MeshCount();t++){let r=e.GetMesh(t);if(dl(r)){e.RemoveMesh(t),t=t-1;continue}this.FinalizeMesh(e,r)}}FinalizeMesh(e,t){function r(o){function s(l,u,h,f,d){function m(x,y){for(let b=0;b<x.length;b++){let S=x[b];if(Zi(S,y))return!0}return!1}let v=[],p=d.get(h);for(let x=0;x<p.length;x++){let y=p[x],b=l.GetTriangle(y);if(u.curve===b.curve){let S=f[y];m(v,S)||v.push(S)}}let g=new $e(0,0,0);for(let x=0;x<v.length;x++)g=rg(g,v[x]);return g.MultiplyScalar(1/v.length),g.Normalize(),l.AddNormal(g)}let a=[],c=new Map;for(let l=0;l<o.VertexCount();l++)c.set(l,[]);for(let l=0;l<o.TriangleCount();l++){let u=o.GetTriangle(l),h=o.GetVertex(u.v0),f=o.GetVertex(u.v1),d=o.GetVertex(u.v2),m=vc(h,f,d);a.push(m),c.get(u.v0).push(l),c.get(u.v1).push(l),c.get(u.v2).push(l)}for(let l=0;l<o.TriangleCount();l++){let u=o.GetTriangle(l);if(!u.HasNormals()){let h=s(o,u,u.v0,a,c),f=s(o,u,u.v1,a,c),d=s(o,u,u.v2,a,c);u.SetNormals(h,f,d)}}}let i={calculateCurveNormals:!1};for(let o=0;o<t.LineCount();o++){let s=t.GetLine(o);s.mat===null&&(s.mat=this.GetDefaultMaterialIndex(e,Bn.DefaultLine))}for(let o=0;o<t.TriangleCount();o++){let s=t.GetTriangle(o);this.FinalizeTriangle(t,s,i),s.mat===null&&(s.mat=this.GetDefaultMaterialIndex(e,Bn.DefaultFace))}i.calculateCurveNormals&&r(t)}FinalizeTriangle(e,t,r){if(!t.HasNormals())if(t.curve===null||t.curve===0){let i=e.GetVertex(t.v0),o=e.GetVertex(t.v1),s=e.GetVertex(t.v2),a=vc(i,o,s),c=e.AddNormal(a);t.SetNormals(c,c,c)}else r.calculateCurveNormals=!0;t.curve===null&&(t.curve=0)}FinalizeNodes(e){let t=e.GetRootNode(),r=[];t.EnumerateChildren(i=>{i.IsEmpty()&&r.push(i)});for(let i=0;i<r.length;i++){let o=r[i],s=o.GetParent();s!==null&&(s.RemoveChildNode(o),s.IsEmpty()&&r.push(s))}}GetDefaultMaterialIndex(e,t){function r(i,o,s,a){if(o!==null)return o;let c=new yr;return c.color=a,c.source=s,i.AddMaterial(c)}return t===Bn.DefaultLine?(this.defaultLineMaterialIndex=r(e,this.defaultLineMaterialIndex,Bn.DefaultLine,this.params.defaultLineMaterialColor),this.defaultLineMaterialIndex):t===Bn.DefaultFace?(this.defaultMaterialIndex=r(e,this.defaultMaterialIndex,Bn.DefaultFace,this.params.defaultMaterialColor),this.defaultMaterialIndex):null}Reset(){this.defaultLineMaterialIndex=null,this.defaultMaterialIndex=null}};function Lv(n,e){new Eb(e).Finalize(n)}function qT(n){function e(o){return o!=null}function t(o){return!(!e(o)||isNaN(o))}function r(o,s){return!(!t(o)||o<0||o>=s)}function i(o,s){function a(c,l,u){return!(!r(u.v0,l.VertexCount())||!r(u.v1,l.VertexCount())||!r(u.v2,l.VertexCount())||u.HasVertexColors()&&(!r(u.c0,l.VertexColorCount())||!r(u.c1,l.VertexColorCount())||!r(u.c2,l.VertexColorCount()))||!r(u.n0,l.NormalCount())||!r(u.n1,l.NormalCount())||!r(u.n2,l.NormalCount())||u.HasTextureUVs()&&(!r(u.u0,l.TextureUVCount())||!r(u.u1,l.TextureUVCount())||!r(u.u2,l.TextureUVCount()))||!r(u.mat,c.MaterialCount())||!t(u.curve))}for(let c=0;c<s.VertexCount();c++){let l=s.GetVertex(c);if(!t(l.x)||!t(l.y)||!t(l.z))return!1}for(let c=0;c<s.VertexColorCount();c++){let l=s.GetVertexColor(c);if(!t(l.r)||!t(l.g)||!t(l.b))return!1}for(let c=0;c<s.NormalCount();c++){let l=s.GetNormal(c);if(!t(l.x)||!t(l.y)||!t(l.z))return!1}for(let c=0;c<s.TextureUVCount();c++){let l=s.GetTextureUV(c);if(!t(l.x)||!t(l.y))return!1}for(let c=0;c<s.TriangleCount();c++){let l=s.GetTriangle(c);if(!a(o,s,l))return!1}return!0}for(let o=0;o<n.MeshCount();o++){let s=n.GetMesh(o);if(!i(n,s))return!1}return!0}var Pn=class{constructor(){this.name=null,this.extension=null,this.callbacks=null,this.model=null,this.error=null,this.message=null}Import(e,t,r,i){this.Clear(),this.name=e,this.extension=t,this.callbacks=i,this.model=new Ls,this.error=!1,this.message=null,this.ResetContent(),this.ImportContent(r,()=>{this.CreateResult(i)})}Clear(){this.name=null,this.extension=null,this.callbacks=null,this.model=null,this.error=null,this.message=null,this.ClearContent()}CreateResult(e){if(this.error){e.onError(),e.onComplete();return}if(gh(this.model)){this.SetError(be("The model doesn't contain any meshes.")),e.onError(),e.onComplete();return}Lv(this.model,{defaultLineMaterialColor:this.callbacks.getDefaultLineMaterialColor(),defaultMaterialColor:this.callbacks.getDefaultMaterialColor()}),e.onSuccess(),e.onComplete()}CanImportExtension(e){return!1}GetUpDirection(){return Mt.Z}ClearContent(){}ResetContent(){}ImportContent(e,t){}GetModel(){return this.model}SetError(e){this.error=!0,e!=null&&(this.message=e)}WasError(){return this.error}GetErrorMessage(){return this.message}};function _a(n,e,t){let r=n.substring(e),i=r.indexOf(t);return i!==-1&&(r=r.substring(0,i)),r.trim()}function $o(n,e){if(e!==null){let t=n.indexOf(e);t!==-1&&(n=n.substring(0,t).trim())}return n.split(/\s+/u)}function _o(n,e){function t(o,s){let a=o.trim();a.length>0&&s(a)}let r=0,i=n.indexOf(`
`,r);for(;i!==-1;)t(n.substring(r,i),e),r=i+1,i=n.indexOf(`
`,r);t(n.substring(r),e)}function Ab(n){return(n&n-1)===0}function XT(n){if(Ab(n))return n;let e=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));return parseInt(e,10)}function Bi(n){n.transparent=!1,su(n.opacity,1)&&(n.transparent=!0)}var Ui=class{constructor(e){this.model=e,this.colorToMaterialIndex=new Map}GetMaterialIndex(e,t,r,i){let o=Ar(e)+Ar(t)+Ar(r),s=i!=null;if(s&&(o+=Ar(i)),this.colorToMaterialIndex.has(o))return this.colorToMaterialIndex.get(o);{let a=new yr;a.name=o.toUpperCase(),a.color=new ft(e,t,r),s&&i<255&&(a.opacity=i/255,Bi(a));let c=this.model.AddMaterial(a);return this.colorToMaterialIndex.set(o,c),c}}},Ov=null;function vh(n){return new Promise((e,t)=>{if(Ov!==null){e(new Worker(Ov));return}let r="https://cdn.jsdelivr.net/npm/occt-import-js@0.0.22/dist/";fetch(r+"occt-import-js-worker.js").then(i=>i.ok?i.text():t()).then(i=>{i=i.replace("occt-import-js.js",r+"occt-import-js.js"),i=i.replace("return path","return '"+r+"occt-import-js.wasm'");let o=new Blob([i],{type:"text/javascript"});return Ov=URL.createObjectURL(o),e(new Worker(Ov))}).catch(t)})}function pl(n){return n==="rhino3dm"?ld("https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0/rhino3dm.min.js"):n==="draco3d"?ld("https://cdn.jsdelivr.net/npm/draco3d@1.5.7/draco_decoder_nodejs.min.js"):null}var Ta=class n{constructor(e){this.vertices=e,this.mat=null}HasVertices(){return this.vertices!==null&&this.vertices.length>=2}GetVertices(){return this.vertices}SetMaterial(e){return this.mat=e,this}SegmentCount(){return this.vertices===null?0:this.vertices.length-1}Clone(){let e=new n([...this.vertices]);return e.SetMaterial(this.mat),e}};var yh=class extends Pn{constructor(){super(),this.rhino=null}CanImportExtension(e){return e==="3dm"}GetUpDirection(){return Mt.Z}ClearContent(){this.instanceIdToObject=null,this.instanceIdToDefinition=null}ResetContent(){this.instanceIdToObject=new Map,this.instanceIdToDefinition=new Map}ImportContent(e,t){this.rhino===null?pl("rhino3dm").then(()=>{rhino3dm().then(r=>{this.rhino=r,this.ImportRhinoContent(e),t()})}).catch(()=>{this.SetError(be("Failed to load rhino3dm.")),t()}):(this.ImportRhinoContent(e),t())}ImportRhinoContent(e){let t=this.rhino.File3dm.fromByteArray(e);if(t===null){this.SetError(be("Failed to read Rhino file."));return}this.ImportRhinoDocument(t),gh(this.model)&&this.SetError(be("The model doesn't contain any 3D meshes. Try to save the model while you are in shaded view in Rhino."))}ImportRhinoDocument(e){this.InitRhinoInstances(e),this.ImportRhinoUserStrings(e),this.ImportRhinoGeometry(e)}InitRhinoInstances(e){let t=e.objects();for(let i=0;i<t.count;i++){let o=t.get(i),s=o.attributes();s.isInstanceDefinitionObject&&this.instanceIdToObject.set(s.id,o)}let r=e.instanceDefinitions();for(let i=0;i<r.count;i++){let o=r.get(i);this.instanceIdToDefinition.set(o.id,o)}}ImportRhinoUserStrings(e){let t=e.strings();if(t.count>0){let r=new ni(be("Document user texts"));for(let i=0;i<t.count;i++){let o=t.get(i);r.AddProperty(new Wt(Dt.Text,o[0],o[1]))}this.model.AddPropertyGroup(r)}}ImportRhinoGeometry(e){let t=e.objects();for(let r=0;r<t.count;r++){let i=t.get(r);this.ImportRhinoGeometryObject(e,i,[])}}ImportRhinoGeometryObject(e,t,r){let i=t.geometry(),o=t.attributes(),s=i.objectType;if(!(o.isInstanceDefinitionObject&&r.length===0)){if(s===this.rhino.ObjectType.Mesh)this.ImportRhinoGeometryAsMesh(e,i,t,r);else if(s===this.rhino.ObjectType.Extrusion){let a=i.getMesh(this.rhino.MeshType.Any);a!==null&&(this.ImportRhinoGeometryAsMesh(e,a,t,r),a.delete())}else if(s===this.rhino.ObjectType.Brep){let a=new this.rhino.Mesh,c=i.faces();for(let l=0;l<c.count;l++){let u=c.get(l),h=u.getMesh(this.rhino.MeshType.Any);h&&(a.append(h),h.delete()),u.delete()}c.delete(),a.compact(),this.ImportRhinoGeometryAsMesh(e,a,t,r),a.delete()}else if(s===this.rhino.ObjectType.SubD){i.subdivide(3);let a=this.rhino.Mesh.createFromSubDControlNet(i,!0);a!==null&&(this.ImportRhinoGeometryAsMesh(e,a,t,r),a.delete())}else if(s===this.rhino.ObjectType.Curve)this.ImportRhinoGeometryAsMesh(e,i,t,r);else if(s===this.rhino.ObjectType.InstanceReference){let a=i.parentIdefId;if(this.instanceIdToDefinition.has(a)){let l=this.instanceIdToDefinition.get(a).getObjectIds();for(let u=0;u<l.length;u++){let h=l[u];if(this.instanceIdToObject.has(h)){let f=this.instanceIdToObject.get(h);r.push(t),this.ImportRhinoGeometryObject(e,f,r),r.pop()}}}}}}ImportRhinoGeometryAsMesh(e,t,r,i){function o(u){let h=u.domain[1]-u.domain[0],f=Math.max(parseInt(h/.2,10),1),d=h/f,m=[];for(let v=0;v<=f;v++)if(v===f&&u.isClosed)m.push(m[0]);else{let p=t.pointAt(u.domain[0]+v*d);m.push(a.AddVertex(fo(p)))}return new Ta(m)}let s=this.GetMaterialIndex(e,r,i),a=null;if(t.objectType===this.rhino.ObjectType.Mesh){let u=t.toThreejsJSON();a=Yo(u.data,s,null)}else if(t.objectType===this.rhino.ObjectType.Curve){if(a=new Un,t instanceof this.rhino.LineCurve){let u=a.AddVertex(fo(t.line.from)),h=a.AddVertex(fo(t.line.to)),f=new Ta([u,h]);f.SetMaterial(s),a.AddLine(f)}else if(t instanceof this.rhino.NurbsCurve){let u=o(t);u.SetMaterial(s),a.AddLine(u)}else if(t instanceof this.rhino.ArcCurve){let u=o(t);u.SetMaterial(s),a.AddLine(u)}}if(a===null)return null;let c=r.attributes();a.SetName(c.name);let l=c.getUserStrings();if(l.length>0){let u=new ni(be("User texts"));for(let h=0;h<l.length;h++){let f=l[h];u.AddProperty(new Wt(Dt.Text,f[0],f[1]))}a.AddPropertyGroup(u)}if(i.length!==0){let u=new sr().CreateIdentity();for(let f=i.length-1;f>=0;f--){let v=i[f].geometry().xform.toFloatArray(!1),p=new sr(v);u=u.MultiplyMatrix(p)}let h=new tr(u);Ns(a,h)}this.model.AddMeshToRootNode(a)}GetMaterialIndex(e,t,r){function i(c,l,u){let h=l.attributes();if(h.materialSource===c.ObjectMaterialSource.MaterialFromObject){let f=h.materialIndex;if(f>-1)return e.materials().get(f)}else if(h.materialSource===c.ObjectMaterialSource.MaterialFromLayer){let f=h.layerIndex;if(f>-1){let d=e.layers().get(f),m=d.renderMaterialIndex;if(m>-1)return e.materials().get(m);if(l.geometry().objectType===c.ObjectType.Curve){let p=new c.Material;return p.name=d.name,p.diffuseColor=d.color,p}}}else if(h.materialSource===c.ObjectMaterialSource.MaterialFromParent&&u.length!==0)return i(c,u[0],[]);return null}function o(c,l){function u(p,g){p.Set(g.r,g.g,g.b)}function h(p){return p.r===0&&p.g===0&&p.b===0}function f(p){return p.r===255&&p.g===255&&p.b===255}let d=null,m=c.physicallyBased();m.supported?(d=new ja,d.metalness=m.metallic?1:0,d.roughness=m.roughness):(d=new yr,u(d.ambient,c.ambientColor),u(d.specular,c.specularColor)),d.name=c.name,u(d.color,c.diffuseColor),d.opacity=1-c.transparency,Bi(d),h(d.color)&&!f(c.reflectionColor)&&u(d.color,c.reflectionColor),h(d.color)&&!f(c.transparentColor)&&u(d.color,c.transparentColor);let v=c.getBitmapTexture();if(v){let p=new Ni,g=ur(v.fileName),x=l.getFileBuffer(g);p.name=g,p.buffer=x,d.diffuseMap=p}return d}function s(c,l,u){let h=o(l,u);for(let f=0;f<c.MaterialCount();f++)if(c.GetMaterial(f).IsEqual(h))return f;return c.AddMaterial(h)}let a=i(this.rhino,t,r);return a===null?null:s(this.model,a,this.callbacks)}};var wi=class{constructor(e,t){this.arrayBuffer=e,this.dataView=new DataView(e),this.isLittleEndian=t,this.position=0}GetPosition(){return this.position}SetPosition(e){this.position=e}GetByteLength(){return this.arrayBuffer.byteLength}Skip(e){this.position=this.position+e}End(){return this.position>=this.arrayBuffer.byteLength}ReadArrayBuffer(e){let t=new Uint8Array(this.arrayBuffer),r=new ArrayBuffer(e),i=new Uint8Array(r),o=t.subarray(this.position,this.position+e);return i.set(o,0),this.position+=e,r}ReadBoolean8(){let e=this.dataView.getInt8(this.position);return this.position=this.position+1,!!e}ReadCharacter8(){let e=this.dataView.getInt8(this.position);return this.position=this.position+1,e}ReadUnsignedCharacter8(){let e=this.dataView.getUint8(this.position);return this.position=this.position+1,e}ReadInteger16(){let e=this.dataView.getInt16(this.position,this.isLittleEndian);return this.position=this.position+2,e}ReadUnsignedInteger16(){let e=this.dataView.getUint16(this.position,this.isLittleEndian);return this.position=this.position+2,e}ReadInteger32(){let e=this.dataView.getInt32(this.position,this.isLittleEndian);return this.position=this.position+4,e}ReadUnsignedInteger32(){let e=this.dataView.getUint32(this.position,this.isLittleEndian);return this.position=this.position+4,e}ReadFloat32(){let e=this.dataView.getFloat32(this.position,this.isLittleEndian);return this.position=this.position+4,e}ReadDouble64(){let e=this.dataView.getFloat64(this.position,this.isLittleEndian);return this.position=this.position+8,e}};var jt={MAIN3DS:19789,EDIT3DS:15677,EDIT_MATERIAL:45055,MAT_NAME:40960,MAT_AMBIENT:40976,MAT_DIFFUSE:40992,MAT_SPECULAR:41008,MAT_SHININESS:41024,MAT_SHININESS_STRENGTH:41025,MAT_TRANSPARENCY:41040,MAT_COLOR_F:16,MAT_COLOR:17,MAT_LIN_COLOR:18,MAT_LIN_COLOR_F:19,MAT_TEXMAP:41472,MAT_TEXMAP_NAME:41728,MAT_TEXMAP_UOFFSET:41816,MAT_TEXMAP_VOFFSET:41818,MAT_TEXMAP_USCALE:41812,MAT_TEXMAP_VSCALE:41814,MAT_TEXMAP_ROTATION:41820,PERCENTAGE:48,PERCENTAGE_F:49,EDIT_OBJECT:16384,OBJ_TRIMESH:16640,OBJ_LIGHT:17920,OBJ_CAMERA:18176,TRI_VERTEX:16656,TRI_TEXVERTEX:16704,TRI_FACE:16672,TRI_TRANSFORMATION:16736,TRI_MATERIAL:16688,TRI_SMOOTH:16720,KF3DS:45056,OBJECT_NODE:45058,OBJECT_HIERARCHY:45072,OBJECT_INSTANCE_NAME:45073,OBJECT_PIVOT:45075,OBJECT_POSITION:45088,OBJECT_ROTATION:45089,OBJECT_SCALE:45090,OBJECT_ID:45104},Cb=class{constructor(){this.id=-1,this.name="",this.flags=-1,this.parentId=-1,this.instanceName="",this.pivot=[0,0,0],this.positions=[],this.rotations=[],this.scales=[]}},Ib=class{constructor(){this.nodes=[],this.nodeIdToNode=new Map}IsEmpty(){return this.nodes.length===0}AddNode(e){this.nodes.push(e),this.nodeIdToNode.set(e.nodeId,e)}GetNodes(){return this.nodes}},xh=class extends Pn{constructor(){super()}CanImportExtension(e){return e==="3ds"}GetUpDirection(){return Mt.Z}ClearContent(){this.materialNameToIndex=null,this.meshNameToIndex=null,this.nodeList=null}ResetContent(){this.materialNameToIndex=new Map,this.meshNameToIndex=new Map,this.nodeList=new Ib}ImportContent(e,t){this.ProcessBinary(e),t()}ProcessBinary(e){let t=new wi(e,!0),r=t.GetByteLength();this.ReadChunks(t,r,(i,o)=>{i===jt.MAIN3DS?this.ReadMainChunk(t,o):this.SkipChunk(t,o)})}ReadMainChunk(e,t){let r=this.GetChunkEnd(e,t);this.ReadChunks(e,r,(i,o)=>{i===jt.EDIT3DS?this.ReadEditorChunk(e,o):i===jt.KF3DS?this.ReadKeyFrameChunk(e,o):this.SkipChunk(e,o)}),this.BuildNodeHierarchy()}ReadEditorChunk(e,t){let r=this.GetChunkEnd(e,t);this.ReadChunks(e,r,(i,o)=>{i===jt.EDIT_MATERIAL?this.ReadMaterialChunk(e,o):i===jt.EDIT_OBJECT?this.ReadObjectChunk(e,o):this.SkipChunk(e,o)})}ReadMaterialChunk(e,t){let r=new yr,i=this.GetChunkEnd(e,t),o=null,s=null;this.ReadChunks(e,i,(c,l)=>{c===jt.MAT_NAME?r.name=this.ReadName(e):c===jt.MAT_AMBIENT?r.ambient=this.ReadColorChunk(e,l):c===jt.MAT_DIFFUSE?r.color=this.ReadColorChunk(e,l):c===jt.MAT_SPECULAR?r.specular=this.ReadColorChunk(e,l):c===jt.MAT_SHININESS?o=this.ReadPercentageChunk(e,l):c===jt.MAT_SHININESS_STRENGTH?s=this.ReadPercentageChunk(e,l):c===jt.MAT_TRANSPARENCY?(r.opacity=1-this.ReadPercentageChunk(e,l),Bi(r)):c===jt.MAT_TEXMAP?(r.diffuseMap=this.ReadTextureMapChunk(e,l),Bi(r)):this.SkipChunk(e,l)}),o!==null&&s!==null&&(r.shininess=o*s/10);let a=this.model.AddMaterial(r);this.materialNameToIndex.set(r.name,a)}ReadTextureMapChunk(e,t){let r=new Ni,i=this.GetChunkEnd(e,t);return this.ReadChunks(e,i,(o,s)=>{if(o===jt.MAT_TEXMAP_NAME){let a=this.ReadName(e),c=this.callbacks.getFileBuffer(a);r.name=a,r.buffer=c}else o===jt.MAT_TEXMAP_UOFFSET?r.offset.x=e.ReadFloat32():o===jt.MAT_TEXMAP_VOFFSET?r.offset.y=e.ReadFloat32():o===jt.MAT_TEXMAP_USCALE?r.scale.x=e.ReadFloat32():o===jt.MAT_TEXMAP_VSCALE?r.scale.y=e.ReadFloat32():o===jt.MAT_TEXMAP_ROTATION?r.rotation=e.ReadFloat32()*ws:this.SkipChunk(e,s)}),r}ReadColorChunk(e,t){let r=new ft(0,0,0),i=this.GetChunkEnd(e,t),o=!1;return this.ReadChunks(e,i,(s,a)=>{s===jt.MAT_COLOR?o||(r.r=e.ReadUnsignedCharacter8(),r.g=e.ReadUnsignedCharacter8(),r.b=e.ReadUnsignedCharacter8()):s===jt.MAT_LIN_COLOR?(r.r=e.ReadUnsignedCharacter8(),r.g=e.ReadUnsignedCharacter8(),r.b=e.ReadUnsignedCharacter8(),o=!0):s===jt.MAT_COLOR_F?o||(r.r=vr(e.ReadFloat32()),r.g=vr(e.ReadFloat32()),r.b=vr(e.ReadFloat32())):s===jt.MAT_LIN_COLOR_F?(r.r=vr(e.ReadFloat32()),r.g=vr(e.ReadFloat32()),r.b=vr(e.ReadFloat32()),o=!0):this.SkipChunk(e,a)}),r}ReadPercentageChunk(e,t){let r=0,i=this.GetChunkEnd(e,t);return this.ReadChunks(e,i,(o,s)=>{o===jt.PERCENTAGE?r=e.ReadUnsignedInteger16()/100:o===jt.PERCENTAGE_F?r=e.ReadFloat32():this.SkipChunk(e,s)}),r}ReadObjectChunk(e,t){let r=this.GetChunkEnd(e,t),i=this.ReadName(e);this.ReadChunks(e,r,(o,s)=>{o===jt.OBJ_TRIMESH?this.ReadMeshChunk(e,s,i):this.SkipChunk(e,s)})}ReadMeshChunk(e,t,r){function i(u,h){if(!h.IsValid())return;let f=h.Determinant(),d=na(f);d&&(h=new sr().CreateScale(-1,1,1).MultiplyMatrix(h));let m=h.Invert();if(m===null)return;let v=new tr(m);Ns(u,v),d&&Fv(u)}let o=new Un;o.SetName(r);let s=this.GetChunkEnd(e,t),a=null;if(this.ReadChunks(e,s,(u,h)=>{u===jt.TRI_VERTEX?this.ReadVerticesChunk(o,e):u===jt.TRI_TEXVERTEX?this.ReadTextureVerticesChunk(o,e):u===jt.TRI_FACE?this.ReadFacesChunk(o,e,h):u===jt.TRI_TRANSFORMATION?a=this.ReadTransformationChunk(e):this.SkipChunk(e,h)}),o.VertexCount()===o.TextureUVCount())for(let u=0;u<o.TriangleCount();u++){let h=o.GetTriangle(u);h.SetTextureUVs(h.v0,h.v1,h.v2)}let c=new sr(a);i(o,c);let l=this.model.AddMesh(o);this.meshNameToIndex.set(o.GetName(),l)}ReadVerticesChunk(e,t){let r=t.ReadUnsignedInteger16();for(let i=0;i<r;i++){let o=t.ReadFloat32(),s=t.ReadFloat32(),a=t.ReadFloat32();e.AddVertex(new $e(o,s,a))}}ReadTextureVerticesChunk(e,t){let r=t.ReadUnsignedInteger16();for(let i=0;i<r;i++){let o=t.ReadFloat32(),s=t.ReadFloat32();e.AddTextureUV(new on(o,s))}}ReadFacesChunk(e,t,r){let i=this.GetChunkEnd(t,r),o=t.ReadUnsignedInteger16();for(let s=0;s<o;s++){let a=t.ReadUnsignedInteger16(),c=t.ReadUnsignedInteger16(),l=t.ReadUnsignedInteger16();t.ReadUnsignedInteger16(),e.AddTriangle(new Nn(a,c,l))}this.ReadChunks(t,i,(s,a)=>{s===jt.TRI_MATERIAL?this.ReadFaceMaterialsChunk(e,t):s===jt.TRI_SMOOTH?this.ReadFaceSmoothingGroupsChunk(e,o,t):this.SkipChunk(t,a)})}ReadFaceMaterialsChunk(e,t){let r=this.ReadName(t),i=this.materialNameToIndex.get(r),o=t.ReadUnsignedInteger16();for(let s=0;s<o;s++){let a=t.ReadUnsignedInteger16(),c=e.GetTriangle(a);i!==void 0&&(c.mat=i)}}ReadFaceSmoothingGroupsChunk(e,t,r){for(let i=0;i<t;i++){let o=r.ReadUnsignedInteger32(),s=e.GetTriangle(i);s.curve=o}}ReadTransformationChunk(e){let t=[];for(let r=0;r<4;r++){for(let i=0;i<3;i++)t.push(e.ReadFloat32());r<3?t.push(0):t.push(1)}return t}ReadKeyFrameChunk(e,t){let r=this.GetChunkEnd(e,t);this.ReadChunks(e,r,(i,o)=>{i===jt.OBJECT_NODE?this.ReadObjectNodeChunk(e,o):this.SkipChunk(e,o)})}BuildNodeHierarchy(){function e(r,i){function o(l){return l.positions.length===0?[0,0,0]:l.positions[0]}function s(l){function u(f){let d=[0,0,0,1],m=Math.sqrt(f[0]*f[0]+f[1]*f[1]+f[2]*f[2]);if(m>0){let v=f[3]*-.5,p=Math.sin(v)/m;d=[p*f[0],p*f[1],p*f[2],Math.cos(v)]}return d}if(l.rotations.length===0)return[0,0,0,1];let h=l.rotations[0];return u(h)}function a(l){return l.scales.length===0?[1,1,1]:l.scales[0]}let c=new sr;if(c.ComposeTRS(fo(o(r)),fh(s(r)),fo(a(r))),i){let l=r.pivot;c=new sr().CreateTranslation(-l[0],-l[1],-l[2]).MultiplyMatrix(c)}return new tr(c)}let t=this.model.GetRootNode();if(this.nodeList.IsEmpty())for(let r=0;r<this.model.MeshCount();r++)t.AddMeshIndex(r);else{let r=new Map;for(let i of this.nodeList.GetNodes()){let o=new Vr;i.name.length>0&&i.name!=="$$$DUMMY"&&(o.SetName(i.name),i.instanceName.length>0&&o.SetName(o.GetName()+" "+i.instanceName)),i.parentId===65535||!r.has(i.parentId)?t.AddChildNode(o):r.get(i.parentId).AddChildNode(o),r.set(i.id,o);let s=this.meshNameToIndex.has(i.name);o.SetTransformation(e(i,s)),s&&o.AddMeshIndex(this.meshNameToIndex.get(i.name))}}}ReadObjectNodeChunk(e,t){function r(s,a,c){let l=[];a.Skip(10);let u=a.ReadInteger32();for(let h=0;h<u;h++){a.ReadInteger32(),a.ReadUnsignedInteger16()!==0&&a.ReadFloat32();let d=null;if(c===jt.OBJECT_ROTATION){let m=a.ReadFloat32();d=s.ReadVector(a),d[3]=m}else d=s.ReadVector(a);l.push(d)}return l}let i=new Cb,o=this.GetChunkEnd(e,t);this.ReadChunks(e,o,(s,a)=>{s===jt.OBJECT_HIERARCHY?(i.name=this.ReadName(e),i.flags=e.ReadUnsignedInteger32(),i.parentId=e.ReadUnsignedInteger16()):s===jt.OBJECT_INSTANCE_NAME?i.instanceName=this.ReadName(e):s===jt.OBJECT_PIVOT?i.pivot=this.ReadVector(e):s===jt.OBJECT_POSITION?i.positions=r(this,e,jt.OBJECT_POSITION):s===jt.OBJECT_ROTATION?i.rotations=r(this,e,jt.OBJECT_ROTATION):s===jt.OBJECT_SCALE?i.scales=r(this,e,jt.OBJECT_SCALE):s===jt.OBJECT_ID?i.id=e.ReadUnsignedInteger16():this.SkipChunk(e,a)}),this.nodeList.AddNode(i)}ReadName(e){let t="",r=0,i=0;for(;i<64&&(r=e.ReadCharacter8(),r!==0);)t=t+String.fromCharCode(r),i=i+1;return t}ReadVector(e){return[e.ReadFloat32(),e.ReadFloat32(),e.ReadFloat32()]}ReadChunks(e,t,r){for(;e.GetPosition()<=t-6;){let i=e.ReadUnsignedInteger16(),o=e.ReadUnsignedInteger32();r(i,o)}}GetChunkEnd(e,t){return e.GetPosition()+t-6}SkipChunk(e,t){e.Skip(t-6)}};function _r(n){return new TextDecoder("utf-8").decode(n)}function KT(n){let e="",t=new Uint8Array(n);for(let r=0;r<t.byteLength;r++)e+=String.fromCharCode(t[r]);return e}function YT(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return e}function bh(n){return new TextEncoder().encode(n).buffer}function bc(n){let e="data:";if(!n.startsWith(e))return null;let t=n.indexOf(";");if(t===-1)return null;let r=n.indexOf(",");if(r===-1)return null;let i=n.substring(e.length,e.length+t-5),o=atob(n.substring(r+1)),s=new ArrayBuffer(o.length),a=new Uint8Array(s);for(let c=0;c<o.length;c++)a[c]=o.charCodeAt(c);return{mimeType:i,buffer:s}}function ml(n){if(n==null)return"";let e=n.split("/");return e.length===0?"":e[e.length-1]}function gl(n){let e=new Blob([n]);return URL.createObjectURL(e)}function kv(n,e){let t=new Blob([n],{type:e});return URL.createObjectURL(t)}function Uv(n){URL.revokeObjectURL(n)}var zi={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},es={SCALAR:0,VEC2:1,VEC3:2,VEC4:3,MAT2:4,MAT3:5,MAT4:6},wc={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Rb={GLTF_STRING:1179937895,JSON_CHUNK_TYPE:1313821514,BINARY_CHUNK_TYPE:5130562};function Qd(n){return Ji(Zl(n[0]),Zl(n[1]),Zl(n[2]))}function QO(n,e){function t(r,i){let o=r;return i===zi.UNSIGNED_BYTE?o/=255:i===zi.UNSIGNED_SHORT&&(o/=65535),vr(Zl(o))}return new ft(t(n[0],e),t(n[1],e),t(n[2],e))}var Pb=class{constructor(e){this.reader=new wi(e,!0),this.componentType=null,this.dataType=null,this.byteStride=null,this.dataCount=null,this.sparseReader=null}SetComponentType(e){this.componentType=e}SetDataType(e){e==="SCALAR"?this.dataType=es.SCALAR:e==="VEC2"?this.dataType=es.VEC2:e==="VEC3"?this.dataType=es.VEC3:e==="VEC4"?this.dataType=es.VEC4:e==="MAT2"?this.dataType=es.MAT2:e==="MAT3"?this.dataType=es.MAT3:e==="MAT4"&&(this.dataType=es.MAT4)}SetByteStride(e){this.byteStride=e}SetDataCount(e){this.dataCount=e}SetSparseReader(e,t){this.sparseReader={indexReader:e,valueReader:t}}ReadArrayBuffer(e){return this.reader.ReadArrayBuffer(e)}GetDataCount(){return this.dataCount}ReadData(){if(this.dataType===null)return null;if(this.dataType===es.SCALAR){let e=this.ReadComponent();return this.SkipBytesByStride(1),e}else if(this.dataType===es.VEC2){let e=this.ReadComponent(),t=this.ReadComponent();return this.SkipBytesByStride(2),new on(e,t)}else if(this.dataType===es.VEC3){let e=this.ReadComponent(),t=this.ReadComponent(),r=this.ReadComponent();return this.SkipBytesByStride(3),new $e(e,t,r)}else if(this.dataType===es.VEC4){let e=this.ReadComponent(),t=this.ReadComponent(),r=this.ReadComponent(),i=this.ReadComponent();return this.SkipBytesByStride(4),new Qo(e,t,r,i)}return null}EnumerateData(e){if(this.sparseReader===null)for(let t=0;t<this.dataCount;t++)e(this.ReadData());else{let t=[];for(let i=0;i<this.sparseReader.indexReader.GetDataCount();i++){let o=this.sparseReader.indexReader.ReadData(),s=this.sparseReader.valueReader.ReadData();t.push({index:o,value:s})}let r=0;for(let i=0;i<this.dataCount;i++){let o=this.ReadData();r<t.length&&t[r].index===i?(e(t[r].value),r+=1):e(o)}}}SkipBytes(e){this.reader.Skip(e)}ReadComponent(){return this.componentType===null?null:this.componentType===zi.BYTE?this.reader.ReadCharacter8():this.componentType===zi.UNSIGNED_BYTE?this.reader.ReadUnsignedCharacter8():this.componentType===zi.SHORT?this.reader.ReadInteger16():this.componentType===zi.UNSIGNED_SHORT?this.reader.ReadUnsignedInteger16():this.componentType===zi.UNSIGNED_INT?this.reader.ReadInteger32():this.componentType===zi.FLOAT?this.reader.ReadFloat32():null}SkipBytesByStride(e){if(this.byteStride===null)return;let t=e*this.GetComponentSize();this.reader.Skip(this.byteStride-t)}GetComponentSize(){return this.componentType===zi.BYTE||this.componentType===zi.UNSIGNED_BYTE?1:this.componentType===zi.SHORT||this.componentType===zi.UNSIGNED_SHORT?2:this.componentType===zi.UNSIGNED_INT||this.componentType===zi.FLOAT?4:0}},Db=class{constructor(){this.supportedExtensions=["KHR_draco_mesh_compression","KHR_materials_pbrSpecularGlossiness","KHR_texture_transform"],this.draco=null}LoadLibraries(e,t){if(e===void 0){t.onSuccess();return}this.draco===null&&e.indexOf("KHR_draco_mesh_compression")!==-1?pl("draco3d").then(()=>{DracoDecoderModule().then(r=>{this.draco=r,t.onSuccess()})}).catch(()=>{t.onError(be("Failed to load draco decoder."))}):t.onSuccess()}GetUnsupportedExtensions(e){let t=[];if(e===void 0)return t;for(let r=0;r<e.length;r++){let i=e[r];this.supportedExtensions.indexOf(i)===-1&&t.push(i)}return t}ProcessMaterial(e,t,r){if(e.extensions===void 0)return null;let i=e.extensions.KHR_materials_pbrSpecularGlossiness;if(i===void 0)return null;let o=new yr,s=i.diffuseFactor;s!==void 0&&(o.color=Qd(s),o.opacity=s[3]);let a=i.diffuseTexture;a!==void 0&&(o.diffuseMap=r(a));let c=i.specularFactor;c!==void 0&&(o.specular=Qd(c));let l=i.specularGlossinessTexture;l!==void 0&&(o.specularMap=r(l));let u=i.glossinessFactor;return u!==void 0&&(o.shininess=u),o}ProcessTexture(e,t){if(e.extensions===void 0)return;let r=e.extensions.KHR_texture_transform;r!==void 0&&(r.offset!==void 0&&(t.offset.x=r.offset[0],t.offset.y=-r.offset[1]),r.scale!==void 0&&(t.scale.x=r.scale[0],t.scale.y=r.scale[1]),r.rotation!==void 0&&(t.rotation=-r.rotation))}ProcessPrimitive(e,t,r,i){function o(N,P,E,U,k){let B=P.GetAttributeByUniqueId(E,U),O=B.num_components(),ne=E.num_points()*O,ae=ne*4,ye=N._malloc(ae);P.GetAttributeDataArrayForAllPoints(E,B,N.DT_FLOAT32,ae,ye);let fe=new Float32Array(N.HEAPF32.buffer,ye,ne).slice();if(O===2)for(let L=0;L<fe.length;L+=2)k(new on(fe[L+0],fe[L+1]));else if(O===3)for(let L=0;L<fe.length;L+=3)k(new $e(fe[L+0],fe[L+1],fe[L+2]));else if(O===4)for(let L=0;L<fe.length;L+=4)k(new Qo(fe[L+0],fe[L+1],fe[L+2],fe[L+3]));N._free(ye)}if(this.draco===null||r.extensions===void 0||r.extensions.KHR_draco_mesh_compression===void 0)return!1;let s=new this.draco.Decoder,a=new this.draco.DecoderBuffer,c=r.extensions.KHR_draco_mesh_compression,l=t.bufferViews[c.bufferView],h=e.GetReaderFromBufferView(l).ReadArrayBuffer(l.byteLength);if(a.Init(new Int8Array(h),h.byteLength),s.GetEncodedGeometryType(a)!==this.draco.TRIANGULAR_MESH)return!0;let d=new this.draco.Mesh;if(!s.DecodeBufferToMesh(a,d).ok())return!0;let v=c.attributes.POSITION!==void 0,p=!1,g=c.attributes.NORMAL!==void 0,x=c.attributes.TEXCOORD_0!==void 0;if(!v)return!0;let y=i.VertexCount(),b=i.VertexColorCount(),S=i.NormalCount(),_=i.TextureUVCount();o(this.draco,s,d,c.attributes.POSITION,N=>{i.AddVertex(N)}),g&&o(this.draco,s,d,c.attributes.NORMAL,N=>{i.AddNormal(N)}),x&&o(this.draco,s,d,c.attributes.TEXCOORD_0,N=>{N.y=-N.y,i.AddTextureUV(N)});let A=d.num_faces()*3,w=A*4,T=this.draco._malloc(w);s.GetTrianglesUInt32Array(d,w,T);let D=new Uint32Array(this.draco.HEAPU32.buffer,T,A).slice();for(let N=0;N<D.length;N+=3){let P=D[N],E=D[N+1],U=D[N+2];e.AddTriangle(r,i,P,E,U,p,g,x,y,b,S,_)}return this.draco._free(T),!0}},wh=class extends Pn{constructor(){super(),this.gltfExtensions=new Db}CanImportExtension(e){return e==="gltf"||e==="glb"}GetUpDirection(){return Mt.Y}ClearContent(){this.bufferContents=null,this.imageIndexToTextureParams=null}ResetContent(){this.bufferContents=[],this.imageIndexToTextureParams=new Map}ImportContent(e,t){this.extension==="gltf"?this.ProcessGltf(e,t):this.extension==="glb"&&this.ProcessBinaryGltf(e,t)}ProcessGltf(e,t){let r=_r(e),i=JSON.parse(r);if(i.asset.version!=="2.0"){this.SetError(be("Invalid glTF version.")),t();return}for(let o=0;o<i.buffers.length;o++){let s=null,a=i.buffers[o],c=bc(a.uri);if(c!==null)s=c.buffer;else{let l=this.callbacks.getFileBuffer(a.uri);l!==null&&(s=l)}if(s===null){this.SetError(be("One of the requested buffers is missing.")),t();return}this.bufferContents.push(s)}this.ProcessMainFile(i,t)}ProcessBinaryGltf(e,t){function r(l){let u=l.ReadUnsignedInteger32(),h=l.ReadUnsignedInteger32(),f=l.ReadArrayBuffer(u);return{type:h,buffer:f}}let i=new wi(e,!0);if(i.ReadUnsignedInteger32()!==Rb.GLTF_STRING){this.SetError(be("Invalid glTF file.")),t();return}if(i.ReadUnsignedInteger32()!==2){this.SetError(be("Invalid glTF version.")),t();return}if(i.ReadUnsignedInteger32()!==i.GetByteLength()){this.SetError(be("Invalid glTF file.")),t();return}let c=null;for(;!i.End();){let l=r(i);l.type===Rb.JSON_CHUNK_TYPE?c=_r(l.buffer):l.type===Rb.BINARY_CHUNK_TYPE&&this.bufferContents.push(l.buffer)}if(c!==null){let l=JSON.parse(c);this.ProcessMainFile(l,t)}}ProcessMainFile(e,t){let r=this.gltfExtensions.GetUnsupportedExtensions(e.extensionsRequired);if(r.length>0){this.SetError(Ga("Unsupported extension: {0}.",r.join(", "))),t();return}this.gltfExtensions.LoadLibraries(e.extensionsRequired,{onSuccess:()=>{this.ImportModel(e),t()},onError:i=>{this.SetError(i),t()}})}ImportModel(e){let t=e.materials;if(t!==void 0)for(let i of t)this.ImportMaterial(e,i);let r=e.meshes;if(r!==void 0)for(let i of r)this.ImportMesh(e,i);this.ImportProperties(this.model,e.asset,be("Asset properties")),this.ImportScene(e)}ImportProperties(e,t,r){if(t==null)return;let i=new ni(r);for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let s=null,a=t[o];typeof a=="string"?s=new Wt(Dt.Text,o,a):typeof a=="number"&&(Number.isInteger(a)?s=new Wt(Dt.Integer,o,a):s=new Wt(Dt.Number,o,a)),s!==null&&i.AddProperty(s)}i.PropertyCount()!==0&&e.AddPropertyGroup(i)}GetDefaultScene(e){let t=e.scene||0;return t>=e.scenes.length?null:e.scenes[t]}ImportMaterial(e,t){let r=new ja;if(t.name!==void 0&&(r.name=t.name),r.color=Qd([1,1,1]),t.pbrMetallicRoughness!==void 0){let o=t.pbrMetallicRoughness.baseColorFactor;o!==void 0&&(r.color=Qd(o),r.opacity=o[3]);let s=t.pbrMetallicRoughness.metallicFactor;s!==void 0&&(r.metalness=s);let a=t.pbrMetallicRoughness.roughnessFactor;a!==void 0&&(r.roughness=a);let c=t.emissiveFactor;c!==void 0&&(r.emissive=Qd(c)),r.diffuseMap=this.ImportTexture(e,t.pbrMetallicRoughness.baseColorTexture),r.metalnessMap=this.ImportTexture(e,t.pbrMetallicRoughness.metallicRoughnessTexture),r.normalMap=this.ImportTexture(e,t.normalTexture),r.emissiveMap=this.ImportTexture(e,t.emissiveTexture),r.diffuseMap!==null&&(r.multiplyDiffuseMap=!0);let l=t.alphaMode;l!==void 0&&(l==="BLEND"?r.transparent=!0:l==="MASK"&&(r.transparent=!0,r.alphaTest=t.alphaCutoff||.5))}let i=this.gltfExtensions.ProcessMaterial(t,r,o=>this.ImportTexture(e,o));i!==null&&(r=i),this.model.AddMaterial(r)}ImportTexture(e,t){if(t==null)return null;let r=new Ni,o=e.textures[t.index].source,s=e.images[o],a=null;if(this.imageIndexToTextureParams.has(o))a=this.imageIndexToTextureParams.get(o);else{a={name:null,mimeType:null,buffer:null};let c=o.toString();if(s.uri!==void 0){let l=bc(s.uri);if(l!==null)a.name="Embedded_"+c+"."+ml(l.mimeType),a.mimeType=l.mimeType,a.buffer=l.buffer;else{let u=this.callbacks.getFileBuffer(s.uri);a.name=s.uri,a.buffer=u}}else if(s.bufferView!==void 0){let l=e.bufferViews[s.bufferView],u=this.GetReaderFromBufferView(l);if(u!==null){let h=u.ReadArrayBuffer(l.byteLength);a.name="Binary_"+c+"."+ml(s.mimeType),a.mimeType=s.mimeType,a.buffer=h}}this.imageIndexToTextureParams.set(o,a)}return r.name=a.name,r.mimeType=a.mimeType,r.buffer=a.buffer,this.gltfExtensions.ProcessTexture(t,r),r}ImportMesh(e,t){let r=new Un;this.model.AddMesh(r),t.name!==void 0&&r.SetName(t.name);for(let i=0;i<t.primitives.length;i++){let o=t.primitives[i];this.ImportPrimitive(e,o,r)}this.ImportProperties(r,t.extras,be("Mesh properties"))}ImportPrimitive(e,t,r){function i(g,x,y){let b=x.attributes[y];if(b===void 0)return!1;let S=g.accessors[b];return!(S===void 0||S.count===0)}if(this.gltfExtensions.ProcessPrimitive(this,e,t,r)||t.attributes===void 0)return;let o=i(e,t,"POSITION"),s=i(e,t,"COLOR_0"),a=i(e,t,"NORMAL"),c=i(e,t,"TEXCOORD_0"),l=t.indices!==void 0,u=wc.TRIANGLES;if(t.mode!==void 0&&(u=t.mode),u!==wc.TRIANGLES&&u!==wc.TRIANGLE_STRIP&&u!==wc.TRIANGLE_FAN)return;let h=r.VertexCount(),f=r.VertexColorCount(),d=r.NormalCount(),m=r.TextureUVCount();if(o){let g=e.accessors[t.attributes.POSITION],x=this.GetReaderFromAccessor(e,g);if(x===null)return;x.EnumerateData(y=>{r.AddVertex(y)})}else return;let v=r.VertexCount()-h;if(s){let g=e.accessors[t.attributes.COLOR_0],x=this.GetReaderFromAccessor(e,g);if(x===null)return;x.EnumerateData(y=>{let b=QO([y.x,y.y,y.z],x.componentType);r.AddVertexColor(b)}),r.VertexColorCount()-f!==v&&(s=!1)}if(a){let g=e.accessors[t.attributes.NORMAL],x=this.GetReaderFromAccessor(e,g);if(x===null)return;x.EnumerateData(y=>{r.AddNormal(y)}),r.NormalCount()-d!==v&&(a=!1)}if(c){let g=e.accessors[t.attributes.TEXCOORD_0],x=this.GetReaderFromAccessor(e,g);if(x===null)return;x.EnumerateData(y=>{y.y=-y.y,r.AddTextureUV(y)}),r.TextureUVCount()-m!==v&&(c=!1)}let p=[];if(l){let g=e.accessors[t.indices],x=this.GetReaderFromAccessor(e,g);if(x===null)return;x.EnumerateData(y=>{p.push(y)})}else{let g=r.VertexCount()-h;for(let x=0;x<g;x++)p.push(x)}if(u===wc.TRIANGLES)for(let g=0;g<p.length;g+=3){let x=p[g],y=p[g+1],b=p[g+2];this.AddTriangle(t,r,x,y,b,s,a,c,h,f,d,m)}else if(u===wc.TRIANGLE_STRIP)for(let g=0;g<p.length-2;g++){let x=p[g],y=p[g+1],b=p[g+2];if(g%2===1){let S=y;y=b,b=S}this.AddTriangle(t,r,x,y,b,s,a,c,h,f,d,m)}else if(u===wc.TRIANGLE_FAN)for(let g=1;g<p.length-1;g++){let x=p[0],y=p[g],b=p[g+1];this.AddTriangle(t,r,x,y,b,s,a,c,h,f,d,m)}}AddTriangle(e,t,r,i,o,s,a,c,l,u,h,f){let d=new Nn(l+r,l+i,l+o);s&&d.SetVertexColors(u+r,u+i,u+o),a&&d.SetNormals(h+r,h+i,h+o),c&&d.SetTextureUVs(f+r,f+i,f+o),e.material!==void 0&&(d.mat=e.material),t.AddTriangle(d)}ImportScene(e){let t=this.GetDefaultScene(e);if(t===null)return;let r=this.model.GetRootNode();for(let i of t.nodes){let o=e.nodes[i];this.ImportNode(e,o,r)}this.ImportProperties(this.model,t.extras,be("Scene properties"))}ImportNode(e,t,r){function i(s){let a=new sr().CreateIdentity();if(s.matrix!==void 0)a.Set(s.matrix);else{let c=[0,0,0],l=[0,0,0,1],u=[1,1,1];s.translation!==void 0&&(c=s.translation),s.rotation!==void 0&&(l=s.rotation),s.scale!==void 0&&(u=s.scale),a.ComposeTRS(fo(c),fh(l),fo(u))}return new tr(a)}if(t.children===void 0&&t.mesh===void 0)return;let o=new Vr;if(t.name!==void 0&&o.SetName(t.name),o.SetTransformation(i(t)),r.AddChildNode(o),t.children!==void 0)for(let s of t.children){let a=e.nodes[s];this.ImportNode(e,a,o)}if(t.mesh!==void 0){let s=this.model.GetMesh(t.mesh);this.ImportProperties(s,t.extras,be("Node properties")),o.AddMeshIndex(t.mesh)}}GetReaderFromBufferView(e){let t=e.buffer||0,r=this.bufferContents[t];if(r==null)return null;let i=new Pb(r);i.SkipBytes(e.byteOffset||0);let o=e.byteStride;return o!==void 0&&o!==0&&i.SetByteStride(o),i}GetReaderFromAccessor(e,t){let r=t.bufferView||0,i=e.bufferViews[r],o=this.GetReaderFromBufferView(i);if(o===null)return null;if(o.SetComponentType(t.componentType),o.SetDataType(t.type),o.SetDataCount(t.count),o.SkipBytes(t.byteOffset||0),t.sparse!==void 0){let s=this.GetReaderFromSparseAccessor(e,t.sparse.indices,t.sparse.indices.componentType,"SCALAR",t.sparse.count),a=this.GetReaderFromSparseAccessor(e,t.sparse.values,t.componentType,t.type,t.sparse.count);s!==null&&a!==null&&o.SetSparseReader(s,a)}return o}GetReaderFromSparseAccessor(e,t,r,i,o){if(t.bufferView===void 0)return null;let s=e.bufferViews[t.bufferView],a=this.GetReaderFromBufferView(s);return a===null?null:(a.SetComponentType(r),a.SetDataType(i),a.SetDataCount(o),a.SkipBytes(t.byteOffset||0),a)}};var Sh=class extends Pn{constructor(){super(),this.ifc=null}CanImportExtension(e){return e==="ifc"}GetUpDirection(){return Mt.Y}ClearContent(){this.expressIDToMesh=null,this.colorToMaterial=null}ResetContent(){this.expressIDToMesh=new Map,this.colorToMaterial=new Ui(this.model)}ImportContent(e,t){this.ifc===null?qm("web-ifc-api-browser.js").then(()=>{this.ifc=new WebIFC.IfcAPI,this.ifc.Init().then(()=>{this.ImportIfcContent(e),t()})}).catch(()=>{this.SetError(be("Failed to load web-ifc.")),t()}):(this.ImportIfcContent(e),t())}ImportIfcContent(e){let t=new Uint8Array(e),r=this.ifc.OpenModel(t,{COORDINATE_TO_ORIGIN:!0}),i=this.ifc.LoadAllGeometry(r);for(let o=0;o<i.size();o++){let s=i.get(o);s.geometries.size()>0&&this.ImportIfcMesh(r,s)}this.ImportProperties(r),this.ifc.CloseModel(r)}ImportIfcMesh(e,t){let r=new Un;r.SetName(Ga("Mesh {0}",t.expressID.toString()));let i=0,o=t.geometries;for(let s=0;s<o.size();s++){let a=o.get(s),c=this.ifc.GetGeometry(e,a.geometryExpressID),l=this.ifc.GetVertexArray(c.GetVertexData(),c.GetVertexDataSize()),u=this.ifc.GetIndexArray(c.GetIndexData(),c.GetIndexDataSize()),h=this.GetMaterialIndexByColor(a.color),f=new sr(a.flatTransformation),d=new tr(f);for(let m=0;m<l.length;m+=6){let v=l[m],p=l[m+1],g=l[m+2],x=new $e(v,p,g),y=d.TransformCoord3D(x);r.AddVertex(y)}for(let m=0;m<u.length;m+=3){let v=u[m],p=u[m+1],g=u[m+2],x=new Nn(i+v,i+p,i+g);x.SetMaterial(h),r.AddTriangle(x)}i+=l.length/6}this.expressIDToMesh.set(t.expressID,r),this.model.AddMeshToRootNode(r)}ImportProperties(e){let t=this.ifc.GetLineIDsWithType(e,WebIFC.IFCRELDEFINESBYPROPERTIES);for(let r=0;r<t.size();r++){let i=t.get(r),o=this.ifc.GetLine(e,i);Array.isArray(o.RelatingPropertyDefinition)||o.RelatedObjects.forEach(s=>{let a=null;if(this.expressIDToMesh.has(s.value)?a=this.expressIDToMesh.get(s.value):this.ifc.GetLine(e,s.value,!0).type===WebIFC.IFCBUILDING&&(a=this.model),a===null)return;let c=o.RelatingPropertyDefinition,l=this.ifc.GetLine(e,c.value,!0);if(!l||!l.HasProperties)return;let u=new ni(l.Name.value);l.HasProperties.forEach(h=>{if(!h||!h.Name||!h.NominalValue||!h.NominalValue.constructor||h.type!==WebIFC.IFCPROPERTYSINGLEVALUE)return;let f=this.GetIFCString(h.Name.value),d=null,m=null;switch(h.NominalValue.constructor.name){case"IfcText":case"IfcLabel":case"IfcIdentifier":case WebIFC.IFCLABEL:d=new Wt(Dt.Text,f,this.GetIFCString(h.NominalValue.value));break;case"IfcBoolean":case"IfcLogical":m=be("Unknown"),h.NominalValue.value==="T"?m=be("True"):h.NominalValue.value==="F"&&(m=be("False")),d=new Wt(Dt.Text,f,m);break;case"IfcInteger":case"IfcCountMeasure":d=new Wt(Dt.Integer,f,h.NominalValue.value);break;case"IfcReal":case"IfcLengthMeasure":case"IfcPositiveLengthMeasure":case"IfcAreaMeasure":case"IfcVolumeMeasure":case"IfcRatioMeasure":case"IfcPositiveRatioMeasure":case"IfcMassMeasure":case"IfcMassPerLengthMeasure":case"IfcPlaneAngleMeasure":case"IfcThermalTransmittanceMeasure":d=new Wt(Dt.Number,f,h.NominalValue.value);break;default:console.log(h);break}d!==null&&u.AddProperty(d)}),u.PropertyCount()>0&&a.AddPropertyGroup(u)})}}GetMaterialIndexByColor(e){let t=Ji(e.x,e.y,e.z),r=parseInt(e.w*255,10);return this.colorToMaterial.GetMaterialIndex(t.r,t.g,t.b,r)}GetIFCString(e){let t=this.DecodeIFCString(e);return t.length===0&&(t="-"),t}DecodeIFCString(e){let t=/\\X2\\(.*?)\\X0\\/uig,r=e,i=t.exec(e);for(;i;){let o=String.fromCharCode(parseInt(i[1],16));r=r.replace(i[0],o),i=t.exec(e)}return r}};var Fb=class{constructor(e){this.mesh=e,this.globalToMeshVertices=new Map,this.globalToMeshVertexColors=new Map,this.globalToMeshNormals=new Map,this.globalToMeshUvs=new Map}AddVertex(e,t){return this.GetMeshIndex(e,t,this.globalToMeshVertices,r=>this.mesh.AddVertex(new $e(r.x,r.y,r.z)))}AddVertexColor(e,t){return this.GetMeshIndex(e,t,this.globalToMeshVertexColors,r=>this.mesh.AddVertexColor(new ft(r.r,r.g,r.b)))}AddNormal(e,t){return this.GetMeshIndex(e,t,this.globalToMeshNormals,r=>this.mesh.AddNormal(new $e(r.x,r.y,r.z)))}AddUV(e,t){return this.GetMeshIndex(e,t,this.globalToMeshUvs,r=>this.mesh.AddTextureUV(new on(r.x,r.y)))}AddLine(e){this.mesh.AddLine(e)}AddTriangle(e){this.mesh.AddTriangle(e)}GetMeshIndex(e,t,r,i){if(isNaN(e)||e<0||e>=t.length)return null;if(r.has(e))return r.get(e);{let o=t[e],s=i(o);return r.set(e,s),s}}};function Bv(n,e,t){return Ji(parseFloat(n),parseFloat(e),parseFloat(t))}var _h=class extends Pn{constructor(){super()}CanImportExtension(e){return e==="obj"}GetUpDirection(){return Mt.Y}ClearContent(){this.globalVertices=null,this.globalVertexColors=null,this.globalNormals=null,this.globalUvs=null,this.currentMeshConverter=null,this.currentMaterial=null,this.currentMaterialIndex=null,this.meshNameToConverter=null,this.materialNameToIndex=null}ResetContent(){this.globalVertices=[],this.globalVertexColors=[],this.globalNormals=[],this.globalUvs=[],this.currentMeshConverter=null,this.currentMaterial=null,this.currentMaterialIndex=null,this.meshNameToConverter=new Map,this.materialNameToIndex=new Map}ImportContent(e,t){let r=_r(e);_o(r,i=>{this.WasError()||this.ProcessLine(i)}),t()}ProcessLine(e){if(e[0]==="#")return;let t=$o(e,"#");if(t.length===0)return;let r=t[0].toLowerCase();t.shift(),!this.ProcessMeshParameter(r,t,e)&&this.ProcessMaterialParameter(r,t,e)}AddNewMesh(e){if(this.meshNameToConverter.has(e))this.currentMeshConverter=this.meshNameToConverter.get(e);else{let t=new Un;t.SetName(e),this.model.AddMeshToRootNode(t),this.currentMeshConverter=new Fb(t),this.meshNameToConverter.set(e,this.currentMeshConverter)}}ProcessMeshParameter(e,t,r){if(e==="g"||e==="o"){if(t.length===0)return!0;let i=_a(r,e.length,"#");return this.AddNewMesh(i),!0}else{if(e==="v")return t.length<3||(this.globalVertices.push(new $e(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]))),t.length>=6&&this.globalVertexColors.push(Bv(t[3],t[4],t[5]))),!0;if(e==="vn")return t.length<3||this.globalNormals.push(new $e(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]))),!0;if(e==="vt")return t.length<2||this.globalUvs.push(new on(parseFloat(t[0]),parseFloat(t[1]))),!0;if(e==="l"){if(t.length<2)return!0;this.ProcessLineCommand(t)}else if(e==="f")return t.length<3||this.ProcessFaceCommand(t),!0}return!1}ProcessMaterialParameter(e,t,r){function i(s){let a=new Map,c=null;for(let l=0;l<s.length-1;l++){let u=s[l];if(u.startsWith("-")){c=u,a.set(c,[]);continue}c!==null&&a.get(c).push(u)}return a}function o(s,a){let c=new Ni,l=s[s.length-1],u=a.getFileBuffer(l);c.name=l,c.buffer=u;let h=i(s);if(h.has("-o")){let f=h.get("-o");f.length>0&&(c.offset.x=parseFloat(f[0])),f.length>1&&(c.offset.y=parseFloat(f[1]))}if(h.has("-s")){let f=h.get("-s");f.length>0&&(c.scale.x=parseFloat(f[0])),f.length>1&&(c.scale.y=parseFloat(f[1]))}return c}if(e==="newmtl"){if(t.length===0)return!0;let s=new yr,a=_a(r,e.length,"#"),c=this.model.AddMaterial(s);return s.name=a,this.currentMaterial=s,this.materialNameToIndex.set(a,c),!0}else if(e==="usemtl"){if(t.length===0)return!0;let s=_a(r,e.length,"#");return this.materialNameToIndex.has(s)&&(this.currentMaterialIndex=this.materialNameToIndex.get(s)),!0}else if(e==="mtllib"){if(t.length===0)return!0;let s=_a(r,e.length,"#"),a=this.callbacks.getFileBuffer(s);if(a!==null){let c=_r(a);_o(c,l=>{this.WasError()||this.ProcessLine(l)})}return!0}else{if(e==="map_kd")return this.currentMaterial===null||t.length===0||(this.currentMaterial.diffuseMap=o(t,this.callbacks),Bi(this.currentMaterial)),!0;if(e==="map_ks")return this.currentMaterial===null||t.length===0||(this.currentMaterial.specularMap=o(t,this.callbacks)),!0;if(e==="map_bump"||e==="bump")return this.currentMaterial===null||t.length===0||(this.currentMaterial.bumpMap=o(t,this.callbacks)),!0;if(e==="ka")return this.currentMaterial===null||t.length<3||(this.currentMaterial.ambient=Bv(t[0],t[1],t[2])),!0;if(e==="kd")return this.currentMaterial===null||t.length<3||(this.currentMaterial.color=Bv(t[0],t[1],t[2])),!0;if(e==="ks")return this.currentMaterial===null||t.length<3||(this.currentMaterial.specular=Bv(t[0],t[1],t[2])),!0;if(e==="ns")return this.currentMaterial===null||t.length<1||(this.currentMaterial.shininess=parseFloat(t[0])/1e3),!0;if(e==="tr")return this.currentMaterial===null||t.length<1||(this.currentMaterial.opacity=1-parseFloat(t[0]),Bi(this.currentMaterial)),!0;if(e==="d")return this.currentMaterial===null||t.length<1||(this.currentMaterial.opacity=parseFloat(t[0]),Bi(this.currentMaterial)),!0}return!1}ProcessLineCommand(e){this.currentMeshConverter===null&&this.AddNewMesh("");let t=[];for(let i=0;i<e.length;i++){let o=e[i].split("/"),s=this.GetRelativeIndex(parseInt(o[0],10),this.globalVertices.length),a=this.currentMeshConverter.AddVertex(s,this.globalVertices);if(a===null){this.SetError(be("Invalid vertex index."));break}t.push(a)}let r=new Ta(t);this.currentMaterialIndex!==null&&(r.mat=this.currentMaterialIndex),this.currentMeshConverter.AddLine(r)}ProcessFaceCommand(e){let t=[],r=[],i=[],o=[];this.currentMeshConverter===null&&this.AddNewMesh("");for(let s=0;s<e.length;s++){let a=e[s].split("/");t.push(this.GetRelativeIndex(parseInt(a[0],10),this.globalVertices.length)),this.globalVertices.length===this.globalVertexColors.length&&r.push(this.GetRelativeIndex(parseInt(a[0],10),this.globalVertices.length)),a.length>1&&a[1].length>0&&o.push(this.GetRelativeIndex(parseInt(a[1],10),this.globalUvs.length)),a.length>2&&a[2].length>0&&i.push(this.GetRelativeIndex(parseInt(a[2],10),this.globalNormals.length))}for(let s=0;s<t.length-2;s++){let a=this.currentMeshConverter.AddVertex(t[0],this.globalVertices),c=this.currentMeshConverter.AddVertex(t[s+1],this.globalVertices),l=this.currentMeshConverter.AddVertex(t[s+2],this.globalVertices);if(a===null||c===null||l===null){this.SetError(be("Invalid vertex index."));break}let u=new Nn(a,c,l);if(r.length===t.length){let h=this.currentMeshConverter.AddVertexColor(r[0],this.globalVertexColors),f=this.currentMeshConverter.AddVertexColor(r[s+1],this.globalVertexColors),d=this.currentMeshConverter.AddVertexColor(r[s+2],this.globalVertexColors);if(h===null||f===null||d===null){this.SetError(be("Invalid vertex color index."));break}u.SetVertexColors(h,f,d)}if(i.length===t.length){let h=this.currentMeshConverter.AddNormal(i[0],this.globalNormals),f=this.currentMeshConverter.AddNormal(i[s+1],this.globalNormals),d=this.currentMeshConverter.AddNormal(i[s+2],this.globalNormals);if(h===null||f===null||d===null){this.SetError(be("Invalid normal index."));break}u.SetNormals(h,f,d)}if(o.length===t.length){let h=this.currentMeshConverter.AddUV(o[0],this.globalUvs),f=this.currentMeshConverter.AddUV(o[s+1],this.globalUvs),d=this.currentMeshConverter.AddUV(o[s+2],this.globalUvs);if(h===null||f===null||d===null){this.SetError(be("Invalid uv index."));break}u.SetTextureUVs(h,f,d)}this.currentMaterialIndex!==null&&(u.mat=this.currentMaterialIndex),this.currentMeshConverter.AddTriangle(u)}}GetRelativeIndex(e,t){return e>0?e-1:t+e}};var Th=class extends Pn{constructor(){super()}CanImportExtension(e){return e==="off"}GetUpDirection(){return Mt.Y}ClearContent(){this.mesh=null,this.status=null,this.colorToMaterial=null}ResetContent(){this.mesh=new Un,this.model.AddMeshToRootNode(this.mesh),this.status={vertexCount:0,faceCount:0,foundVertex:0,foundFace:0},this.colorToMaterial=new Ui(this.model)}ImportContent(e,t){let r=_r(e);_o(r,i=>{this.WasError()||this.ProcessLine(i)}),t()}ProcessLine(e){function t(o){return o.indexOf(".")!==-1?vr(parseFloat(o)):parseInt(o,10)}if(e[0]==="#")return;let r=$o(e,"#");if(r.length===0||r[0]==="OFF")return;if(this.status.vertexCount===0&&this.status.faceCount===0){r.length>1&&(this.status.vertexCount=parseInt(r[0],10),this.status.faceCount=parseInt(r[1],10));return}if(this.status.foundVertex<this.status.vertexCount){r.length>=3&&(this.mesh.AddVertex(new $e(parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]))),this.status.foundVertex+=1),r.length>=6&&this.mesh.AddVertexColor(new ft(t(r[3]),t(r[4]),t(r[5])));return}let i=this.mesh.VertexCount()===this.mesh.VertexColorCount();if(this.status.foundFace<this.status.faceCount){if(r.length>=4){let o=parseInt(r[0],10);if(r.length<o+1)return;let s=null;if(!i&&r.length>=o+4){let a=new ft(t(r[o+1]),t(r[o+2]),t(r[o+3]));s=this.colorToMaterial.GetMaterialIndex(a.r,a.g,a.b)}for(let a=0;a<o-2;a++){let c=parseInt(r[1]),l=parseInt(r[a+2]),u=parseInt(r[a+3]),h=new Nn(c,l,u);i?h.SetVertexColors(c,l,u):h.SetMaterial(s),this.mesh.AddTriangle(h)}this.status.foundFace+=1}return}}};var vl={Ok:1,NoVertices:2,NoFaces:3,UnknownError:4},Nb=class{constructor(){this.format=null,this.elements=[]}SetFormat(e){this.format=e}AddElement(e,t){this.elements.push({name:e,count:t,format:[]})}GetElements(){return this.elements}AddSingleFormat(e,t){this.elements[this.elements.length-1].format.push({name:t,isSingle:!0,elemType:e})}AddListFormat(e,t,r){this.elements[this.elements.length-1].format.push({name:r,isSingle:!1,countType:e,elemType:t})}GetElement(e){for(let t=0;t<this.elements.length;t++){let r=this.elements[t];if(r.name===e)return r}return null}Check(){let e=this.GetElement("vertex");if(e===null||e.length===0||e.format.length<3)return vl.NoVertices;let t=this.GetElement("face");if(this.format==="ascii"){if(t===null||t.count===0||t.format.length<0)return vl.NoFaces}else if(this.format==="binary_little_endian"||this.format==="binary_big_endian"){let r=this.GetElement("tristrips"),i=t!==null&&t.count>0&&t.format.length>0,o=r!==null&&r.count>0&&r.format.length>0;if(!i&&!o)return vl.NoFaces}else return vl.UnknownError;return vl.Ok}},Lb=class{constructor(e){this.model=e,this.colorToMaterial=new Map}GetMaterialIndexByColor(e){let t="Color "+Ar(e[0])+Ar(e[1])+Ar(e[2])+Ar(e[3]);if(this.colorToMaterial.has(t))return this.colorToMaterial.get(t);{let r=new yr;r.name=t,r.color=new ft(e[0],e[1],e[2]),r.opacity=e[3]/255,Bi(r);let i=this.model.AddMaterial(r);return this.colorToMaterial.set(t,i),i}}},Mh=class extends Pn{constructor(){super()}CanImportExtension(e){return e==="ply"}GetUpDirection(){return Mt.Y}ClearContent(){this.mesh=null}ResetContent(){this.mesh=new Un,this.model.AddMeshToRootNode(this.mesh)}ImportContent(e,t){let r=this.GetHeaderContent(e),i=this.ReadHeader(r),o=i.Check();if(o===vl.Ok)if(i.format==="ascii"){let s=_r(e);s=s.substring(r.length),this.ReadAsciiContent(i,s)}else(i.format==="binary_little_endian"||i.format==="binary_big_endian")&&this.ReadBinaryContent(i,e,r.length);else o===vl.NoVertices?this.SetError(be("The model contains no vertices.")):o===vl.NoFaces?this.SetError(be("The model contains no faces.")):this.SetError(be("Invalid header information."));t()}GetHeaderContent(e){let t="",r=new Uint8Array(e),i=0;for(i=0;i<e.byteLength&&(t+=String.fromCharCode(r[i]),!t.endsWith("end_header"));i++);for(i+=1;i<e.byteLength;){let o=String.fromCharCode(r[i]);if(t+=o,i+=1,o===`
`)break}return t}ReadHeader(e){let t=new Nb;return _o(e,r=>{let i=$o(r,null);i.length===0||i[0]==="comment"||i[0]!=="ply"&&(i[0]==="format"&&i.length>=2?t.SetFormat(i[1]):i[0]==="element"&&i.length>=3?t.AddElement(i[1],parseInt(i[2],10)):i[0]==="property"&&i.length>=3&&(i[1]==="list"&&i.length>=5?t.AddListFormat(i[2],i[3],i[4]):t.AddSingleFormat(i[1],i[2])))}),t}ReadAsciiContent(e,t){let r=e.GetElement("vertex"),i=e.GetElement("face"),o=0,s=0;_o(t,a=>{if(this.WasError())return;let c=$o(a,null);if(!(c.length===0||c[0]==="comment")){if(o<r.count){c.length>=3&&(this.mesh.AddVertex(new $e(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]))),o+=1);return}if(i!==null&&s<i.count){if(c.length>=4){let l=parseInt(c[0],10);if(c.length<l+1)return;for(let u=0;u<l-2;u++){let h=parseInt(c[1]),f=parseInt(c[u+2]),d=parseInt(c[u+3]),m=new Nn(h,f,d);this.mesh.AddTriangle(m)}s+=1}return}}})}ReadBinaryContent(e,t,r){function i(u,h){function f(d,m){return m==="char"||m==="int8"?d.ReadCharacter8():m==="uchar"||m==="uint8"?d.ReadUnsignedCharacter8():m==="short"||m==="int16"?d.ReadInteger16():m==="ushort"||m==="uint16"?d.ReadUnsignedInteger16():m==="int"||m==="int32"?d.ReadInteger32():m==="uint"||m==="uint32"?d.ReadUnsignedInteger32():m==="float"||m==="float32"?d.ReadFloat32():m==="double"||m==="double64"?d.ReadDouble64():null}if(h.isSingle)return f(u,h.elemType);{let d=[],m=f(u,h.countType);for(let v=0;v<m;v++)d.push(f(u,h.elemType));return d}}function o(u,h,f){for(let d=f;d<h.length;d++)i(u,h[d])}function s(u,h,f){let d=null,m=null,v=null,p=255;for(let g=f;g<h.length;g++){let x=h[g],y=i(u,x);x.name==="red"?d=y:x.name==="green"?m=y:x.name==="blue"?v=y:x.name==="alpha"&&(p=y)}return d!==null&&m!==null&&v!==null?[d,m,v,p]:null}let a=null;if(e.format==="binary_little_endian")a=new wi(t,!0);else if(e.format==="binary_big_endian")a=new wi(t,!1);else return;a.Skip(r);let c=new Lb(this.model),l=e.GetElements();for(let u=0;u<l.length;u++){let h=l[u];if(h.name==="vertex")for(let f=0;f<h.count;f++){let d=i(a,h.format[0]),m=i(a,h.format[1]),v=i(a,h.format[2]),p=s(a,h.format,3);p!==null&&this.mesh.AddVertexColor(new ft(p[0],p[1],p[2])),this.mesh.AddVertex(new $e(d,m,v))}else if(h.name==="face")for(let f=0;f<h.count;f++){let d=i(a,h.format[0]),m=s(a,h.format,1);for(let v=0;v<d.length-2;v++){let p=d[0],g=d[v+1],x=d[v+2],y=new Nn(p,g,x);m!==null?y.mat=c.GetMaterialIndexByColor(m):this.mesh.VertexColorCount()>0&&y.SetVertexColors(p,g,x),this.mesh.AddTriangle(y)}}else if(h.name==="tristrips")for(let f=0;f<h.count;f++){let d=i(a,h.format[0]);o(a,h.format,1);let m=!0;for(let v=0;v<d.length-2;v++){let p=d[v],g=d[v+1],x=d[v+2];if(x===-1){v+=2,m=!0;continue}if(!m){let b=g;g=x,x=b}m=!m;let y=new Nn(p,g,x);this.mesh.AddTriangle(y)}}else o(a,h.format,0)}}};var Eh=class extends Pn{constructor(){super(),this.worker=null}CanImportExtension(e){return e==="stp"||e==="step"||e==="igs"||e==="iges"||e==="brp"||e==="brep"}GetUpDirection(){return Mt.Y}ClearContent(){this.worker!==null&&(this.worker.terminate(),this.worker=null)}ResetContent(){this.worker=null}ImportContent(e,t){vh().then(r=>{this.worker=r,this.worker.addEventListener("message",a=>{this.ImportResultJson(a.data,t)}),this.worker.addEventListener("error",a=>{this.SetError(be("Failed to load occt-import-js.")),t()});let i=null;if(this.extension==="stp"||this.extension==="step")i="step";else if(this.extension==="igs"||this.extension==="iges")i="iges";else if(this.extension==="brp"||this.extension==="brep")i="brep";else{t();return}(i==="step"||i==="iges")&&this.model.SetUnit(bi.Millimeter);let o={linearUnit:"millimeter",linearDeflectionType:"bounding_box_ratio",linearDeflection:.001,angularDeflection:.5},s=new Uint8Array(e);this.worker.postMessage({format:i,buffer:s,params:o})}).catch(()=>{this.SetError(be("Failed to load occt-import-js.")),t()})}ImportResultJson(e,t){if(!e.success){t();return}let r=new Ui(this.model),i=this.model.GetRootNode();this.ImportNode(e,e.root,i,r),t()}ImportNode(e,t,r,i){for(let o of t.meshes){let s=e.meshes[o],a=this.ImportMesh(s,i),c=this.model.AddMesh(a);r.AddMeshIndex(c)}for(let o of t.children){let s=new Vr;s.SetName(o.name),r.AddChildNode(s),this.ImportNode(e,o,s,i)}}ImportMesh(e,t){let r=null;if(e.color){let o=Ji(e.color[0],e.color[1],e.color[2]);r=t.GetMaterialIndex(o.r,o.g,o.b,null)}let i=Yo(e,r,null);e.name&&i.SetName(e.name);for(let o of e.brep_faces){if(o.color===null)continue;let s=Ji(o.color[0],o.color[1],o.color[2]),a=t.GetMaterialIndex(s.r,s.g,s.b,null);for(let c=o.first;c<=o.last;c++)i.GetTriangle(c).SetMaterial(a)}return i}};var Ah=class extends Pn{constructor(){super()}CanImportExtension(e){return e==="stl"}GetUpDirection(){return Mt.Z}ClearContent(){this.mesh=null,this.triangle=null}ResetContent(){this.mesh=new Un,this.model.AddMeshToRootNode(this.mesh),this.triangle=null}ImportContent(e,t){if(this.IsBinaryStlFile(e))this.ProcessBinary(e);else{let r=_r(e);_o(r,i=>{this.WasError()||this.ProcessLine(i)})}t()}IsBinaryStlFile(e){let t=e.byteLength;if(t<84)return!1;let r=new wi(e,!0);r.Skip(80);let i=r.ReadUnsignedInteger32();return t===i*50+84}ProcessLine(e){if(e[0]==="#")return;let t=$o(e,"#");if(t.length===0)return;let r=t[0];if(r==="solid"){if(t.length>1){let i=_a(e,r.length,"#");this.mesh.SetName(i)}return}if(r==="facet"){if(this.triangle=new Nn(-1,-1,-1),t.length>=5&&t[1]==="normal"){let i=new $e(parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4]));if(uo(i.Length())){let o=this.mesh.AddNormal(i);this.triangle.SetNormals(o,o,o)}}return}if(r==="vertex"&&this.triangle!==null){if(t.length>=4){let i=this.mesh.AddVertex(new $e(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])));this.triangle.v0===-1?this.triangle.v0=i:this.triangle.v1===-1?this.triangle.v1=i:this.triangle.v2===-1&&(this.triangle.v2=i)}return}if(r==="endfacet"&&this.triangle!==null){this.triangle.v0!==-1&&this.triangle.v1!==-1&&this.triangle.v2!==null&&this.mesh.AddTriangle(this.triangle),this.triangle=null;return}}ProcessBinary(e){function t(s){let a=new $e;return a.x=s.ReadFloat32(),a.y=s.ReadFloat32(),a.z=s.ReadFloat32(),a}function r(s,a){let c=t(a);return s.AddVertex(c)}let i=new wi(e,!0);i.Skip(80);let o=i.ReadUnsignedInteger32();for(let s=0;s<o;s++){let a=t(i),c=r(this.mesh,i),l=r(this.mesh,i),u=r(this.mesh,i);i.Skip(2);let h=new Nn(c,l,u);if(uo(a.Length())){let f=this.mesh.AddNormal(a);h.SetNormals(f,f,f)}this.mesh.AddTriangle(h)}}};var Ch=class extends Pn{constructor(){super()}CanImportExtension(e){return e==="bim"}GetUpDirection(){return Mt.Z}ClearContent(){this.meshIdToMesh=null,this.colorToMaterial=null}ResetContent(){this.meshIdToMesh=new Map,this.colorToMaterial=new Ui(this.model)}ImportContent(e,t){this.model.SetUnit(bi.Meter);let r=_r(e),i=null;try{i=JSON.parse(r)}catch{this.SetError(be("Failed to parse bim file.")),t();return}for(let o of i.meshes)this.meshIdToMesh.set(o.mesh_id,o);this.ImportProperties(i,this.model);for(let o of i.elements){let s=this.ImportElement(o);s.SetName(o.type),this.ImportProperties(o,s)}t()}ImportElement(e){let t=null;e.color&&(t=this.colorToMaterial.GetMaterialIndex(e.color.r,e.color.g,e.color.b,e.color.a));let r=this.model.GetRootNode(),i=this.meshIdToMesh.get(e.mesh_id),o=this.ImportMesh(i,f=>e.face_colors?this.colorToMaterial.GetMaterialIndex(e.face_colors[f*4+0],e.face_colors[f*4+1],e.face_colors[f*4+2],e.face_colors[f*4+3]):t),s=this.model.AddMesh(o),a=new Vr;a.AddMeshIndex(s);let c=new $e(0,0,0);e.vector&&(c=new $e(e.vector.x,e.vector.y,e.vector.z));let l=new xi(0,0,0,1);e.rotation&&(l=new xi(e.rotation.qx,e.rotation.qy,e.rotation.qz,e.rotation.qw));let u=new $e(1,1,1),h=new sr().ComposeTRS(c,l,u);return a.SetTransformation(new tr(h)),r.AddChildNode(a),o}ImportMesh(e,t){let r=new Un;for(let i=0;i<e.coordinates.length;i+=3)r.AddVertex(new $e(e.coordinates[i+0],e.coordinates[i+1],e.coordinates[i+2]));for(let i=0;i<e.indices.length;i+=3){let o=new Nn(e.indices[i+0],e.indices[i+1],e.indices[i+2]);o.SetMaterial(t(i/3)),r.AddTriangle(o)}return r}ImportProperties(e,t){function r(s,a,c){if(c==null)return;let l=new Wt(Dt.Text,a,c);s.AddProperty(l)}if(!e.info||Xm(e.info))return;let i=e.info,o=new ni(be("Info"));r(o,be("Guid"),e.guid),r(o,be("Type"),e.type);for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&typeof i[s]=="string"&&r(o,s,i[s]);t.AddPropertyGroup(o)}};var yl=class extends fv{constructor(e){super(e)}parse(e){function t(k){switch(k.image_type){case f:case v:if(k.colormap_length>256||k.colormap_size!==24||k.colormap_type!==1)throw new Error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case d:case m:case p:case g:if(k.colormap_type)throw new Error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case h:throw new Error("THREE.TGALoader: No data.");default:throw new Error("THREE.TGALoader: Invalid type "+k.image_type)}if(k.width<=0||k.height<=0)throw new Error("THREE.TGALoader: Invalid image size.");if(k.pixel_size!==8&&k.pixel_size!==16&&k.pixel_size!==24&&k.pixel_size!==32)throw new Error("THREE.TGALoader: Invalid pixel size "+k.pixel_size)}function r(k,B,O,q,ne){let ae,ye,fe=O.pixel_size>>3,L=O.width*O.height*fe;if(B&&(ye=ne.subarray(q,q+=O.colormap_length*(O.colormap_size>>3))),k){ae=new Uint8Array(L);let C,R,I,j=0,Z=new Uint8Array(fe);for(;j<L;)if(C=ne[q++],R=(C&127)+1,C&128){for(I=0;I<fe;++I)Z[I]=ne[q++];for(I=0;I<R;++I)ae.set(Z,j+I*fe);j+=fe*R}else{for(R*=fe,I=0;I<R;++I)ae[j+I]=ne[q++];j+=R}}else ae=ne.subarray(q,q+=B?O.width*O.height:L);return{pixel_data:ae,palettes:ye}}function i(k,B,O,q,ne,ae,ye,fe,L){let C=L,R,I=0,j,Z,J=T.width;for(Z=B;Z!==q;Z+=O)for(j=ne;j!==ye;j+=ae,I++)R=fe[I],k[(j+J*Z)*4+3]=255,k[(j+J*Z)*4+2]=C[R*3+0],k[(j+J*Z)*4+1]=C[R*3+1],k[(j+J*Z)*4+0]=C[R*3+2];return k}function o(k,B,O,q,ne,ae,ye,fe){let L,C=0,R,I,j=T.width;for(I=B;I!==q;I+=O)for(R=ne;R!==ye;R+=ae,C+=2)L=fe[C+0]+(fe[C+1]<<8),k[(R+j*I)*4+0]=(L&31744)>>7,k[(R+j*I)*4+1]=(L&992)>>2,k[(R+j*I)*4+2]=(L&31)<<3,k[(R+j*I)*4+3]=L&32768?0:255;return k}function s(k,B,O,q,ne,ae,ye,fe){let L=0,C,R,I=T.width;for(R=B;R!==q;R+=O)for(C=ne;C!==ye;C+=ae,L+=3)k[(C+I*R)*4+3]=255,k[(C+I*R)*4+2]=fe[L+0],k[(C+I*R)*4+1]=fe[L+1],k[(C+I*R)*4+0]=fe[L+2];return k}function a(k,B,O,q,ne,ae,ye,fe){let L=0,C,R,I=T.width;for(R=B;R!==q;R+=O)for(C=ne;C!==ye;C+=ae,L+=4)k[(C+I*R)*4+2]=fe[L+0],k[(C+I*R)*4+1]=fe[L+1],k[(C+I*R)*4+0]=fe[L+2],k[(C+I*R)*4+3]=fe[L+3];return k}function c(k,B,O,q,ne,ae,ye,fe){let L,C=0,R,I,j=T.width;for(I=B;I!==q;I+=O)for(R=ne;R!==ye;R+=ae,C++)L=fe[C],k[(R+j*I)*4+0]=L,k[(R+j*I)*4+1]=L,k[(R+j*I)*4+2]=L,k[(R+j*I)*4+3]=255;return k}function l(k,B,O,q,ne,ae,ye,fe){let L=0,C,R,I=T.width;for(R=B;R!==q;R+=O)for(C=ne;C!==ye;C+=ae,L+=2)k[(C+I*R)*4+0]=fe[L+0],k[(C+I*R)*4+1]=fe[L+0],k[(C+I*R)*4+2]=fe[L+0],k[(C+I*R)*4+3]=fe[L+1];return k}function u(k,B,O,q,ne){let ae,ye,fe,L,C,R;switch((T.flags&x)>>y){default:case _:ae=0,fe=1,C=B,ye=0,L=1,R=O;break;case b:ae=0,fe=1,C=B,ye=O-1,L=-1,R=-1;break;case M:ae=B-1,fe=-1,C=-1,ye=0,L=1,R=O;break;case S:ae=B-1,fe=-1,C=-1,ye=O-1,L=-1,R=-1;break}if(P)switch(T.pixel_size){case 8:c(k,ye,L,R,ae,fe,C,q);break;case 16:l(k,ye,L,R,ae,fe,C,q);break;default:throw new Error("THREE.TGALoader: Format not supported.")}else switch(T.pixel_size){case 8:i(k,ye,L,R,ae,fe,C,q,ne);break;case 16:o(k,ye,L,R,ae,fe,C,q);break;case 24:s(k,ye,L,R,ae,fe,C,q);break;case 32:a(k,ye,L,R,ae,fe,C,q);break;default:throw new Error("THREE.TGALoader: Format not supported.")}return k}let h=0,f=1,d=2,m=3,v=9,p=10,g=11,x=48,y=4,b=0,S=1,_=2,M=3;if(e.length<19)throw new Error("THREE.TGALoader: Not enough data to contain header.");let A=0,w=new Uint8Array(e),T={id_length:w[A++],colormap_type:w[A++],image_type:w[A++],colormap_index:w[A++]|w[A++]<<8,colormap_length:w[A++]|w[A++]<<8,colormap_size:w[A++],origin:[w[A++]|w[A++]<<8,w[A++]|w[A++]<<8],width:w[A++]|w[A++]<<8,height:w[A++]|w[A++]<<8,pixel_size:w[A++],flags:w[A++]};if(t(T),T.id_length+A>e.length)throw new Error("THREE.TGALoader: No data.");A+=T.id_length;let D=!1,N=!1,P=!1;switch(T.image_type){case v:D=!0,N=!0;break;case f:N=!0;break;case p:D=!0;break;case d:break;case g:D=!0,P=!0;break;case m:P=!0;break}let E=new Uint8Array(T.width*T.height*4),U=r(D,N,T,A,w);return u(E,T.width,T.height,U.pixel_data,U.palettes),{data:E,width:T.width,height:T.height,flipY:!0,generateMipmaps:!0,minFilter:eo}}};var no=Uint8Array,Ih=Uint16Array,$O=Int32Array,ZT=new no([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JT=new no([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ek=new no([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),QT=function(n,e){for(var t=new Ih(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new $O(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},$T=QT(ZT,2),eM=$T.b,tk=$T.r;eM[28]=258,tk[258]=28;var tM=QT(JT,0),nk=tM.b,cW=tM.r,Bb=new Ih(32768);for(wn=0;wn<32768;++wn)Ma=(wn&43690)>>1|(wn&21845)<<1,Ma=(Ma&52428)>>2|(Ma&13107)<<2,Ma=(Ma&61680)>>4|(Ma&3855)<<4,Bb[wn]=((Ma&65280)>>8|(Ma&255)<<8)>>1;var Ma,wn,$d=function(n,e,t){for(var r=n.length,i=0,o=new Ih(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new Ih(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new Ih(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],h=s[n[i]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)a[Bb[h]>>c]=l}else for(a=new Ih(r),i=0;i<r;++i)n[i]&&(a[i]=Bb[s[n[i]-1]++]>>15-n[i]);return a},ep=new no(288);for(wn=0;wn<144;++wn)ep[wn]=8;var wn;for(wn=144;wn<256;++wn)ep[wn]=9;var wn;for(wn=256;wn<280;++wn)ep[wn]=7;var wn;for(wn=280;wn<288;++wn)ep[wn]=8;var wn,nM=new no(32);for(wn=0;wn<32;++wn)nM[wn]=5;var wn;var rk=$d(ep,9,1);var ik=$d(nM,5,1),Ob=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ts=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},kb=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},ok=function(n){return(n+7)/8|0},Gb=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new no(n.subarray(e,t))};var sk=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Gi=function(n,e,t){var r=new Error(e||sk[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Gi),!t)throw r;return r},rM=function(n,e,t,r){var i=n.length,o=r?r.length:0;if(!i||e.f&&!e.l)return t||new no(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new no(i*3));var l=function(W){var K=t.length;if(W>K){var le=new no(Math.max(K*2,W));le.set(t),t=le}},u=e.f||0,h=e.p||0,f=e.b||0,d=e.l,m=e.d,v=e.m,p=e.n,g=i*8;do{if(!d){u=ts(n,h,1);var x=ts(n,h+1,3);if(h+=3,x)if(x==1)d=rk,m=ik,v=9,p=5;else if(x==2){var _=ts(n,h,31)+257,M=ts(n,h+10,15)+4,A=_+ts(n,h+5,31)+1;h+=14;for(var w=new no(A),T=new no(19),D=0;D<M;++D)T[ek[D]]=ts(n,h+D*3,7);h+=M*3;for(var N=Ob(T),P=(1<<N)-1,E=$d(T,N,1),D=0;D<A;){var U=E[ts(n,h,P)];h+=U&15;var y=U>>4;if(y<16)w[D++]=y;else{var k=0,B=0;for(y==16?(B=3+ts(n,h,3),h+=2,k=w[D-1]):y==17?(B=3+ts(n,h,7),h+=3):y==18&&(B=11+ts(n,h,127),h+=7);B--;)w[D++]=k}}var O=w.subarray(0,_),q=w.subarray(_);v=Ob(O),p=Ob(q),d=$d(O,v,1),m=$d(q,p,1)}else Gi(1);else{var y=ok(h)+4,b=n[y-4]|n[y-3]<<8,S=y+b;if(S>i){c&&Gi(0);break}a&&l(f+b),t.set(n.subarray(y,S),f),e.b=f+=b,e.p=h=S*8,e.f=u;continue}if(h>g){c&&Gi(0);break}}a&&l(f+131072);for(var ne=(1<<v)-1,ae=(1<<p)-1,ye=h;;ye=h){var k=d[kb(n,h)&ne],fe=k>>4;if(h+=k&15,h>g){c&&Gi(0);break}if(k||Gi(2),fe<256)t[f++]=fe;else if(fe==256){ye=h,d=null;break}else{var L=fe-254;if(fe>264){var D=fe-257,C=ZT[D];L=ts(n,h,(1<<C)-1)+eM[D],h+=C}var R=m[kb(n,h)&ae],I=R>>4;R||Gi(3),h+=R&15;var q=nk[I];if(I>3){var C=JT[I];q+=kb(n,h)&(1<<C)-1,h+=C}if(h>g){c&&Gi(0);break}a&&l(f+131072);var j=f+L;if(f<q){var Z=o-q,J=Math.min(q,j);for(Z+f<0&&Gi(3);f<J;++f)t[f]=r[Z+f]}for(;f<j;++f)t[f]=t[f-q]}}e.l=d,e.p=ye,e.b=f,e.f=u,d&&(u=1,e.m=v,e.d=m,e.n=p)}while(!u);return f!=t.length&&s?Gb(t,0,f):t.subarray(0,f)};var ak=new no(0);var Os=function(n,e){return n[e]|n[e+1]<<8},ns=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},Ub=function(n,e){return ns(n,e)+ns(n,e+4)*4294967296};var lk=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Gi(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Gi(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ck(n,e){return rM(n,{i:2},e&&e.out,e&&e.dictionary)}function iM(n,e){return rM(n.subarray(lk(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var zb=typeof TextDecoder<"u"&&new TextDecoder,uk=0;try{zb.decode(ak,{stream:!0}),uk=1}catch{}var hk=function(n){for(var e="",t=0;;){var r=n[t++],i=(r>127)+(r>223)+(r>239);if(t+i>n.length)return{s:e,r:Gb(n,t-1)};i?i==3?(r=((r&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?e+=String.fromCharCode((r&31)<<6|n[t++]&63):e+=String.fromCharCode((r&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(r)}};function fk(n,e){if(e){for(var t="",r=0;r<n.length;r+=16384)t+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return t}else{if(zb)return zb.decode(n);var i=hk(n),o=i.s,t=i.r;return t.length&&Gi(8),o}}var dk=function(n,e){return e+30+Os(n,e+26)+Os(n,e+28)},pk=function(n,e,t){var r=Os(n,e+28),i=fk(n.subarray(e+46,e+46+r),!(Os(n,e+8)&2048)),o=e+46+r,s=ns(n,e+20),a=t&&s==4294967295?mk(n,o):[s,ns(n,e+24),ns(n,e+42)],c=a[0],l=a[1],u=a[2];return[Os(n,e+10),c,l,i,o+Os(n,e+30)+Os(n,e+32),u]},mk=function(n,e){for(;Os(n,e)!=1;e+=4+Os(n,e+2));return[Ub(n,e+12),Ub(n,e+4),Ub(n,e+20)]};function zv(n,e){for(var t={},r=n.length-22;ns(n,r)!=101010256;--r)(!r||n.length-r>65558)&&Gi(13);var i=Os(n,r+8);if(!i)return{};var o=ns(n,r+16),s=o==4294967295||i==65535;if(s){var a=ns(n,r-12);s=ns(n,a)==101075792,s&&(i=ns(n,a+32),o=ns(n,a+48))}for(var c=e&&e.filter,l=0;l<i;++l){var u=pk(n,o,s),h=u[0],f=u[1],d=u[2],m=u[3],v=u[4],p=u[5],g=dk(n,p);o=v,(!c||c({name:m,size:f,originalSize:d,compression:h}))&&(h?h==8?t[m]=ck(n.subarray(g,g+f),{out:new no(d)}):Gi(14,"unknown compression type "+h):t[m]=Gb(n,g,g+f))}return t}function oM(n,e,t){let r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,o=r,s=Math.floor((i+o)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?o=s:i=s,s=Math.floor((i+o)/2);return s}function gk(n,e,t,r){let i=[],o=[],s=[];i[0]=1;for(let a=1;a<=t;++a){o[a]=e-r[n+1-a],s[a]=r[n+a]-e;let c=0;for(let l=0;l<a;++l){let u=s[l+1],h=o[a-l],f=i[l]/(u+h);i[l]=c+u*f,c=h*f}i[a]=c}return i}function sM(n,e,t,r){let i=oM(n,r,e),o=gk(i,r,n,e),s=new dn(0,0,0,0);for(let a=0;a<=n;++a){let c=t[i-n+a],l=o[a],u=c.w*l;s.x+=c.x*u,s.y+=c.y*u,s.z+=c.z*u,s.w+=c.w*l}return s}function vk(n,e,t,r,i){let o=[];for(let h=0;h<=t;++h)o[h]=0;let s=[];for(let h=0;h<=r;++h)s[h]=o.slice(0);let a=[];for(let h=0;h<=t;++h)a[h]=o.slice(0);a[0][0]=1;let c=o.slice(0),l=o.slice(0);for(let h=1;h<=t;++h){c[h]=e-i[n+1-h],l[h]=i[n+h]-e;let f=0;for(let d=0;d<h;++d){let m=l[d+1],v=c[h-d];a[h][d]=m+v;let p=a[d][h-1]/a[h][d];a[d][h]=f+m*p,f=v*p}a[h][h]=f}for(let h=0;h<=t;++h)s[0][h]=a[h][t];for(let h=0;h<=t;++h){let f=0,d=1,m=[];for(let v=0;v<=t;++v)m[v]=o.slice(0);m[0][0]=1;for(let v=1;v<=r;++v){let p=0,g=h-v,x=t-v;h>=v&&(m[d][0]=m[f][0]/a[x+1][g],p=m[d][0]*a[g][x]);let y=g>=-1?1:-g,b=h-1<=x?v-1:t-h;for(let _=y;_<=b;++_)m[d][_]=(m[f][_]-m[f][_-1])/a[x+1][g+_],p+=m[d][_]*a[g+_][x];h<=x&&(m[d][v]=-m[f][v-1]/a[x+1][h],p+=m[d][v]*a[h][x]),s[v][h]=p;let S=f;f=d,d=S}}let u=t;for(let h=1;h<=r;++h){for(let f=0;f<=t;++f)s[h][f]*=u;u*=t-h}return s}function yk(n,e,t,r,i){let o=i<n?i:n,s=[],a=oM(n,r,e),c=vk(a,r,n,o,e),l=[];for(let u=0;u<t.length;++u){let h=t[u].clone(),f=h.w;h.x*=f,h.y*=f,h.z*=f,l[u]=h}for(let u=0;u<=o;++u){let h=l[a-n].clone().multiplyScalar(c[u][0]);for(let f=1;f<=n;++f)h.add(l[a-n+f].clone().multiplyScalar(c[u][f]));s[u]=h}for(let u=o+1;u<=i+1;++u)s[u]=new dn(0,0,0);return s}function xk(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function bk(n){let e=n.length,t=[],r=[];for(let o=0;o<e;++o){let s=n[o];t[o]=new he(s.x,s.y,s.z),r[o]=s.w}let i=[];for(let o=0;o<e;++o){let s=t[o].clone();for(let a=1;a<=o;++a)s.sub(i[o-a].clone().multiplyScalar(xk(o,a)*r[a]));i[o]=s.divideScalar(r[0])}return i}function aM(n,e,t,r,i){let o=yk(n,e,t,r,i);return bk(o)}var Gv=class extends Li{constructor(e,t,r,i,o){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(let s=0;s<r.length;++s){let a=r[s];this.controlPoints[s]=new dn(a.x,a.y,a.z,a.w)}}getPoint(e,t=new he){let r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=sM(this.degree,this.knots,this.controlPoints,i);return o.w!==1&&o.divideScalar(o.w),r.set(o.x,o.y,o.z)}getTangent(e,t=new he){let r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=aM(this.degree,this.knots,this.controlPoints,i,1);return r.copy(o[1]).normalize(),r}};var nn,hr,Si,Hv=class extends xn{constructor(e){super(e)}load(e,t,r,i){let o=this,s=o.path===""?ul.extractUrlBase(e):o.path,a=new yi(this.manager);a.setPath(o.path),a.setResponseType("arraybuffer"),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(c){try{t(o.parse(c,s))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e,t){if(Sk(e))nn=new Yb().parse(e);else{let i=hM(e);if(!_k(i))throw new Error("THREE.FBXLoader: Unknown format.");if(lM(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+lM(i));nn=new Kb().parse(i)}let r=new wo(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new jb(r,this.manager).parse(nn)}},jb=class{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){hr=this.parseConnections();let e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),o=new qb().parse(i);return this.parseScene(i,o,r),Si}parseConnections(){let e=new Map;return"Connections"in nn&&nn.Connections.connections.forEach(function(r){let i=r[0],o=r[1],s=r[2];e.has(i)||e.set(i,{parents:[],children:[]});let a={ID:o,relationship:s};e.get(i).parents.push(a),e.has(o)||e.set(o,{parents:[],children:[]});let c={ID:i,relationship:s};e.get(o).children.push(c)}),e}parseImages(){let e={},t={};if("Video"in nn.Objects){let r=nn.Objects.Video;for(let i in r){let o=r[i],s=parseInt(i);if(e[s]=o.RelativeFilename||o.Filename,"Content"in o){let a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,c=typeof o.Content=="string"&&o.Content!=="";if(a||c){let l=this.parseImage(r[i]);t[o.RelativeFilename||o.Filename]=l}}}}for(let r in e){let i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){let t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase(),o;switch(i){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+o+";base64,"+t;{let s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:o}))}}parseTextures(e){let t=new Map;if("Texture"in nn.Objects){let r=nn.Objects.Texture;for(let i in r){let o=this.parseTexture(r[i],e);t.set(parseInt(i),o)}}return t}parseTexture(e,t){let r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;let i=e.WrapModeU,o=e.WrapModeV,s=i!==void 0?i.value:0,a=o!==void 0?o.value:0;if(r.wrapS=s===0?qn:Qn,r.wrapT=a===0?qn:Qn,"Scaling"in e){let c=e.Scaling.value;r.repeat.x=c[0],r.repeat.y=c[1]}if("Translation"in e){let c=e.Translation.value;r.offset.x=c[0],r.offset.y=c[1]}return r}loadTexture(e,t){let r,i=this.textureLoader.path,o=hr.get(e.id).children;o!==void 0&&o.length>0&&t[o[0].ID]!==void 0&&(r=t[o[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let s,a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){let c=this.manager.getHandler(".tga");c===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),s=new zr):(c.setPath(this.textureLoader.path),s=c.load(r))}else if(a==="dds"){let c=this.manager.getHandler(".dds");c===null?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),s=new zr):(c.setPath(this.textureLoader.path),s=c.load(r))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),s=new zr):s=this.textureLoader.load(r);return this.textureLoader.setPath(i),s}parseMaterials(e){let t=new Map;if("Material"in nn.Objects){let r=nn.Objects.Material;for(let i in r){let o=this.parseMaterial(r[i],e);o!==null&&t.set(parseInt(i),o)}}return t}parseMaterial(e,t){let r=e.id,i=e.attrName,o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!hr.has(r))return null;let s=this.parseParameters(e,t,r),a;switch(o.toLowerCase()){case"phong":a=new Rn;break;case"lambert":a=new $u;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new Rn;break}return a.setValues(s),a.name=i,a}parseParameters(e,t,r){let i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Ke().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Ke().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Ke().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Ke().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Ke().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Ke().fromArray(e.SpecularColor.value).convertSRGBToLinear());let o=this;return hr.get(r).children.forEach(function(s){let a=s.relationship;switch(a){case"Bump":i.bumpMap=o.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":i.aoMap=o.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=o.getTexture(t,s.ID),i.map!==void 0&&(i.map.colorSpace=Ln);break;case"DisplacementColor":i.displacementMap=o.getTexture(t,s.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(t,s.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=Ln);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=o.getTexture(t,s.ID);break;case"ReflectionColor":i.envMap=o.getTexture(t,s.ID),i.envMap!==void 0&&(i.envMap.mapping=Ad,i.envMap.colorSpace=Ln);break;case"SpecularColor":i.specularMap=o.getTexture(t,s.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=Ln);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=o.getTexture(t,s.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in nn.Objects&&t in nn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=hr.get(t).children[0].ID),e.get(t)}parseDeformers(){let e={},t={};if("Deformer"in nn.Objects){let r=nn.Objects.Deformer;for(let i in r){let o=r[i],s=hr.get(parseInt(i));if(o.attrType==="Skin"){let a=this.parseSkeleton(s,r);a.ID=i,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=s.parents[0].ID,e[i]=a}else if(o.attrType==="BlendShape"){let a={id:i};a.rawTargets=this.parseMorphTargets(s,r),a.id=i,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){let r=[];return e.children.forEach(function(i){let o=t[i.ID];if(o.attrType!=="Cluster")return;let s={ID:i.ID,indices:[],weights:[],transformLink:new tt().fromArray(o.TransformLink.a)};"Indexes"in o&&(s.indices=o.Indexes.a,s.weights=o.Weights.a),r.push(s)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){let r=[];for(let i=0;i<e.children.length;i++){let o=e.children[i],s=t[o.ID],a={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;a.geoID=hr.get(parseInt(o.ID)).children.filter(function(c){return c.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){Si=new rr;let i=this.parseModels(e.skeletons,t,r),o=nn.Objects.Model,s=this;i.forEach(function(c){let l=o[c.ID];s.setLookAtProperties(c,l),hr.get(c.ID).parents.forEach(function(h){let f=i.get(h.ID);f!==void 0&&f.add(c)}),c.parent===null&&Si.add(c)}),this.bindSkeleton(e.skeletons,t,i),this.addGlobalSceneSettings(),Si.traverse(function(c){if(c.userData.transformData){c.parent&&(c.userData.transformData.parentMatrix=c.parent.matrix,c.userData.transformData.parentMatrixWorld=c.parent.matrixWorld);let l=cM(c.userData.transformData);c.applyMatrix4(l),c.updateWorldMatrix()}});let a=new Xb().parse();Si.children.length===1&&Si.children[0].isGroup&&(Si.children[0].animations=a,Si=Si.children[0]),Si.animations=a}parseModels(e,t,r){let i=new Map,o=nn.Objects.Model;for(let s in o){let a=parseInt(s),c=o[s],l=hr.get(a),u=this.buildSkeleton(l,e,a,c.attrName);if(!u){switch(c.attrType){case"Camera":u=this.createCamera(l);break;case"Light":u=this.createLight(l);break;case"Mesh":u=this.createMesh(l,t,r);break;case"NurbsCurve":u=this.createCurve(l,t);break;case"LimbNode":case"Root":u=new ol;break;case"Null":default:u=new rr;break}u.name=c.attrName?An.sanitizeNodeName(c.attrName):"",u.userData.originalName=c.attrName,u.ID=a}this.getTransformData(u,c),i.set(a,u)}return i}buildSkeleton(e,t,r,i){let o=null;return e.parents.forEach(function(s){for(let a in t){let c=t[a];c.rawBones.forEach(function(l,u){if(l.ID===s.ID){let h=o;o=new ol,o.matrixWorld.copy(l.transformLink),o.name=i?An.sanitizeNodeName(i):"",o.userData.originalName=i,o.ID=r,c.bones[u]=o,h!==null&&o.add(h)}})}}),o}createCamera(e){let t,r;if(e.children.forEach(function(i){let o=nn.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)t=new an;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let o=1;r.NearPlane!==void 0&&(o=r.NearPlane.value/1e3);let s=1e3;r.FarPlane!==void 0&&(s=r.FarPlane.value/1e3);let a=window.innerWidth,c=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,c=r.AspectHeight.value);let l=a/c,u=45;r.FieldOfView!==void 0&&(u=r.FieldOfView.value);let h=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new Gn(u,l,o,s),h!==null&&t.setFocalLength(h);break;case 1:t=new Cs(-a/2,a/2,c/2,-c/2,o,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new an;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){let o=nn.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)t=new an;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let o=16777215;r.Color!==void 0&&(o=new Ke().fromArray(r.Color.value).convertSRGBToLinear());let s=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(s=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);let c=1;switch(i){case 0:t=new fc(o,s,a,c);break;case 1:t=new Ps(o,s);break;case 2:let l=Math.PI/3;r.InnerAngle!==void 0&&(l=ir.degToRad(r.InnerAngle.value));let u=0;r.OuterAngle!==void 0&&(u=ir.degToRad(r.OuterAngle.value),u=Math.max(u,1)),t=new nh(o,s,a,l,u,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new fc(o,s);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,o=null,s=null,a=[];return e.children.forEach(function(c){t.has(c.ID)&&(o=t.get(c.ID)),r.has(c.ID)&&a.push(r.get(c.ID))}),a.length>1?s=a:a.length>0?s=a[0]:(s=new Rn({name:xn.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(s)),"color"in o.attributes&&a.forEach(function(c){c.vertexColors=!0}),o.FBX_Deformer?(i=new Yu(o,s),i.normalizeSkinWeights()):i=new hn(o,s),i}createCurve(e,t){let r=e.children.reduce(function(o,s){return t.has(s.ID)&&(o=t.get(s.ID)),o},null),i=new Gr({name:xn.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new va(r,i)}getTransformData(e,t){let r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=uM(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&hr.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){let o=nn.Objects.Model[i.ID];if("Lcl_Translation"in o){let s=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),Si.add(e.target)):e.lookAt(new he().fromArray(s))}}})}bindSkeleton(e,t,r){let i=this.parsePoseNodes();for(let o in e){let s=e[o];hr.get(parseInt(s.ID)).parents.forEach(function(c){if(t.has(c.ID)){let l=c.ID;hr.get(l).parents.forEach(function(h){r.has(h.ID)&&r.get(h.ID).bind(new Ju(s.bones),i[h.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in nn.Objects){let t=nn.Objects.Pose;for(let r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){let i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(o){e[o.Node]=new tt().fromArray(o.Matrix.a)}):e[i.Node]=new tt().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in nn){if("AmbientColor"in nn.GlobalSettings){let e=nn.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){let o=new Ke(t,r,i).convertSRGBToLinear();Si.add(new Ds(o,1))}}"UnitScaleFactor"in nn.GlobalSettings&&(Si.userData.unitScaleFactor=nn.GlobalSettings.UnitScaleFactor.value)}}},qb=class{constructor(){this.negativeMaterialIndices=!1}parse(e){let t=new Map;if("Geometry"in nn.Objects){let r=nn.Objects.Geometry;for(let i in r){let o=hr.get(parseInt(i)),s=this.parseGeometry(o,r[i],e);t.set(parseInt(i),s)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){let i=r.skeletons,o=[],s=e.parents.map(function(h){return nn.Objects.Model[h.ID]});if(s.length===0)return;let a=e.children.reduce(function(h,f){return i[f.ID]!==void 0&&(h=i[f.ID]),h},null);e.children.forEach(function(h){r.morphTargets[h.ID]!==void 0&&o.push(r.morphTargets[h.ID])});let c=s[0],l={};"RotationOrder"in c&&(l.eulerOrder=uM(c.RotationOrder.value)),"InheritType"in c&&(l.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(l.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(l.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(l.scale=c.GeometricScaling.value);let u=cM(l);return this.genGeometry(t,a,o,u)}genGeometry(e,t,r,i){let o=new Yt;e.attrName&&(o.name=e.attrName);let s=this.parseGeoNode(e,t),a=this.genBuffers(s),c=new Ye(a.vertex,3);if(c.applyMatrix4(i),o.setAttribute("position",c),a.colors.length>0&&o.setAttribute("color",new Ye(a.colors,3)),t&&(o.setAttribute("skinIndex",new qu(a.weightsIndices,4)),o.setAttribute("skinWeight",new Ye(a.vertexWeights,4)),o.FBX_Deformer=t),a.normal.length>0){let l=new kt().getNormalMatrix(i),u=new Ye(a.normal,3);u.applyNormalMatrix(l),o.setAttribute("normal",u)}if(a.uvs.forEach(function(l,u){let h=u===0?"uv":`uv${u}`;o.setAttribute(h,new Ye(a.uvs[u],2))}),s.material&&s.material.mappingType!=="AllSame"){let l=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(h,f){h!==l&&(o.addGroup(u,f-u,l),l=h,u=f)}),o.groups.length>0){let h=o.groups[o.groups.length-1],f=h.start+h.count;f!==a.materialIndex.length&&o.addGroup(f,a.materialIndex.length-f,l)}o.groups.length===0&&o.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(o,e,r,i),o}parseGeoNode(e,t){let r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,o){i.indices.forEach(function(s,a){r.weightTable[s]===void 0&&(r.weightTable[s]=[]),r.weightTable[s].push({id:o,weight:i.weights[a]})})})),r}genBuffers(e){let t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,i=0,o=!1,s=[],a=[],c=[],l=[],u=[],h=[],f=this;return e.vertexIndices.forEach(function(d,m){let v,p=!1;d<0&&(d=d^-1,p=!0);let g=[],x=[];if(s.push(d*3,d*3+1,d*3+2),e.color){let y=Vv(m,r,d,e.color);c.push(y[0],y[1],y[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(y){x.push(y.weight),g.push(y.id)}),x.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let y=[0,0,0,0],b=[0,0,0,0];x.forEach(function(S,_){let M=S,A=g[_];b.forEach(function(w,T,D){if(M>w){D[T]=M,M=w;let N=y[T];y[T]=A,A=N}})}),g=y,x=b}for(;x.length<4;)x.push(0),g.push(0);for(let y=0;y<4;++y)u.push(x[y]),h.push(g[y])}if(e.normal){let y=Vv(m,r,d,e.normal);a.push(y[0],y[1],y[2])}e.material&&e.material.mappingType!=="AllSame"&&(v=Vv(m,r,d,e.material)[0],v<0&&(f.negativeMaterialIndices=!0,v=0)),e.uv&&e.uv.forEach(function(y,b){let S=Vv(m,r,d,y);l[b]===void 0&&(l[b]=[]),l[b].push(S[0]),l[b].push(S[1])}),i++,p&&(f.genFace(t,e,s,v,a,c,l,u,h,i),r++,i=0,s=[],a=[],c=[],l=[],u=[],h=[])}),t}getNormalNewell(e){let t=new he(0,0,0);for(let r=0;r<e.length;r++){let i=e[r],o=e[(r+1)%e.length];t.x+=(i.y-o.y)*(i.z+o.z),t.y+=(i.z-o.z)*(i.x+o.x),t.z+=(i.x-o.x)*(i.y+o.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){let t=this.getNormalNewell(e),i=(Math.abs(t.z)>.5?new he(0,1,0):new he(0,0,1)).cross(t).normalize(),o=t.clone().cross(i).normalize();return{normal:t,tangent:i,bitangent:o}}flattenVertex(e,t,r){return new Ne(e.dot(t),e.dot(r))}genFace(e,t,r,i,o,s,a,c,l,u){let h;if(u>3){let f=[];for(let p=0;p<r.length;p+=3)f.push(new he(t.vertexPositions[r[p]],t.vertexPositions[r[p+1]],t.vertexPositions[r[p+2]]));let{tangent:d,bitangent:m}=this.getNormalTangentAndBitangent(f),v=[];for(let p of f)v.push(this.flattenVertex(p,d,m));h=go.triangulateShape(v,[])}else h=[[0,1,2]];for(let[f,d,m]of h)e.vertex.push(t.vertexPositions[r[f*3]]),e.vertex.push(t.vertexPositions[r[f*3+1]]),e.vertex.push(t.vertexPositions[r[f*3+2]]),e.vertex.push(t.vertexPositions[r[d*3]]),e.vertex.push(t.vertexPositions[r[d*3+1]]),e.vertex.push(t.vertexPositions[r[d*3+2]]),e.vertex.push(t.vertexPositions[r[m*3]]),e.vertex.push(t.vertexPositions[r[m*3+1]]),e.vertex.push(t.vertexPositions[r[m*3+2]]),t.skeleton&&(e.vertexWeights.push(c[f*4]),e.vertexWeights.push(c[f*4+1]),e.vertexWeights.push(c[f*4+2]),e.vertexWeights.push(c[f*4+3]),e.vertexWeights.push(c[d*4]),e.vertexWeights.push(c[d*4+1]),e.vertexWeights.push(c[d*4+2]),e.vertexWeights.push(c[d*4+3]),e.vertexWeights.push(c[m*4]),e.vertexWeights.push(c[m*4+1]),e.vertexWeights.push(c[m*4+2]),e.vertexWeights.push(c[m*4+3]),e.weightsIndices.push(l[f*4]),e.weightsIndices.push(l[f*4+1]),e.weightsIndices.push(l[f*4+2]),e.weightsIndices.push(l[f*4+3]),e.weightsIndices.push(l[d*4]),e.weightsIndices.push(l[d*4+1]),e.weightsIndices.push(l[d*4+2]),e.weightsIndices.push(l[d*4+3]),e.weightsIndices.push(l[m*4]),e.weightsIndices.push(l[m*4+1]),e.weightsIndices.push(l[m*4+2]),e.weightsIndices.push(l[m*4+3])),t.color&&(e.colors.push(s[f*3]),e.colors.push(s[f*3+1]),e.colors.push(s[f*3+2]),e.colors.push(s[d*3]),e.colors.push(s[d*3+1]),e.colors.push(s[d*3+2]),e.colors.push(s[m*3]),e.colors.push(s[m*3+1]),e.colors.push(s[m*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(o[f*3]),e.normal.push(o[f*3+1]),e.normal.push(o[f*3+2]),e.normal.push(o[d*3]),e.normal.push(o[d*3+1]),e.normal.push(o[d*3+2]),e.normal.push(o[m*3]),e.normal.push(o[m*3+1]),e.normal.push(o[m*3+2])),t.uv&&t.uv.forEach(function(v,p){e.uvs[p]===void 0&&(e.uvs[p]=[]),e.uvs[p].push(a[p][f*2]),e.uvs[p].push(a[p][f*2+1]),e.uvs[p].push(a[p][d*2]),e.uvs[p].push(a[p][d*2+1]),e.uvs[p].push(a[p][m*2]),e.uvs[p].push(a[p][m*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let o=this;r.forEach(function(s){s.rawTargets.forEach(function(a){let c=nn.Objects.Geometry[a.geoID];c!==void 0&&o.genMorphGeometry(e,t,c,i,a.name)})})}genMorphGeometry(e,t,r,i,o){let s=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=r.Vertices!==void 0?r.Vertices.a:[],c=r.Indexes!==void 0?r.Indexes.a:[],l=e.attributes.position.count*3,u=new Float32Array(l);for(let m=0;m<c.length;m++){let v=c[m]*3;u[v]=a[m*3],u[v+1]=a[m*3+1],u[v+2]=a[m*3+2]}let h={vertexIndices:s,vertexPositions:u},f=this.genBuffers(h),d=new Ye(f.vertex,3);d.name=o||r.attrName,d.applyMatrix4(i),e.morphAttributes.position.push(d)}parseNormals(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a,o=[];return r==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:o,mappingType:t,referenceType:r}}parseUVs(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a,o=[];return r==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:i,indices:o,mappingType:t,referenceType:r}}parseVertexColors(e){let t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a,o=[];r==="IndexToDirect"&&(o=e.ColorIndex.a);for(let s=0,a=new Ke;s<i.length;s+=4)a.fromArray(i,s).convertSRGBToLinear().toArray(i,s);return{dataSize:4,buffer:i,indices:o,mappingType:t,referenceType:r}}parseMaterialIndices(e){let t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};let i=e.Materials.a,o=[];for(let s=0;s<i.length;++s)o.push(s);return{dataSize:1,buffer:i,indices:o,mappingType:t,referenceType:r}}parseNurbsGeometry(e){let t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Yt;let r=t-1,i=e.KnotVector.a,o=[],s=e.Points.a;for(let h=0,f=s.length;h<f;h+=4)o.push(new dn().fromArray(s,h));let a,c;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){a=r,c=i.length-1-a;for(let h=0;h<r;++h)o.push(o[h])}let u=new Gv(r,i,o,a,c).getPoints(o.length*12);return new Yt().setFromPoints(u)}},Xb=class{parse(){let e=[],t=this.parseClips();if(t!==void 0)for(let r in t){let i=t[r],o=this.addClip(i);e.push(o)}return e}parseClips(){if(nn.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){let e=nn.Objects.AnimationCurveNode,t=new Map;for(let r in e){let i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){let o={id:i.id,attr:i.attrName,curves:{}};t.set(o.id,o)}}return t}parseAnimationCurves(e){let t=nn.Objects.AnimationCurve;for(let r in t){let i={id:t[r].id,times:t[r].KeyTime.a.map(Tk),values:t[r].KeyValueFloat.a},o=hr.get(i.id);if(o!==void 0){let s=o.parents[0].ID,a=o.parents[0].relationship;a.match(/X/)?e.get(s).curves.x=i:a.match(/Y/)?e.get(s).curves.y=i:a.match(/Z/)?e.get(s).curves.z=i:a.match(/DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=i)}}}parseAnimationLayers(e){let t=nn.Objects.AnimationLayer,r=new Map;for(let i in t){let o=[],s=hr.get(parseInt(i));s!==void 0&&(s.children.forEach(function(c,l){if(e.has(c.ID)){let u=e.get(c.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(o[l]===void 0){let h=hr.get(c.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(h!==void 0){let f=nn.Objects.Model[h.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",c);return}let d={modelName:f.attrName?An.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Si.traverse(function(m){m.ID===f.id&&(d.transform=m.matrix,m.userData.transformData&&(d.eulerOrder=m.userData.transformData.eulerOrder))}),d.transform||(d.transform=new tt),"PreRotation"in f&&(d.preRotation=f.PreRotation.value),"PostRotation"in f&&(d.postRotation=f.PostRotation.value),o[l]=d}}o[l]&&(o[l][u.attr]=u)}else if(u.curves.morph!==void 0){if(o[l]===void 0){let h=hr.get(c.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,f=hr.get(h).parents[0].ID,d=hr.get(f).parents[0].ID,m=hr.get(d).parents[0].ID,v=nn.Objects.Model[m],p={modelName:v.attrName?An.sanitizeNodeName(v.attrName):"",morphName:nn.Objects.Deformer[h].attrName};o[l]=p}o[l][u.attr]=u}}}),r.set(parseInt(i),o))}return r}parseAnimStacks(e){let t=nn.Objects.AnimationStack,r={};for(let i in t){let o=hr.get(parseInt(i)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(o[0].ID);r[i]={name:t[i].attrName,layer:s}}return r}addClip(e){let t=[],r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new hc(e.name,-1,t)}generateTracks(e){let t=[],r=new he,i=new he;if(e.transform&&e.transform.decompose(r,new Xn,i),r=r.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let o=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){let o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,r,i){let o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,r);return new Ko(e+"."+i,o,s)}generateRotationTrack(e,t,r,i,o){let s,a;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){let h=this.interpolateRotations(t.x,t.y,t.z,o);s=h[0],a=h[1]}r!==void 0&&(r=r.map(ir.degToRad),r.push(o),r=new $n().fromArray(r),r=new Xn().setFromEuler(r)),i!==void 0&&(i=i.map(ir.degToRad),i.push(o),i=new $n().fromArray(i),i=new Xn().setFromEuler(i).invert());let c=new Xn,l=new $n,u=[];if(!a||!s)return new bo(e+".quaternion",[0],[0]);for(let h=0;h<a.length;h+=3)l.set(a[h],a[h+1],a[h+2],o),c.setFromEuler(l),r!==void 0&&c.premultiply(r),i!==void 0&&c.multiply(i),h>2&&new Xn().fromArray(u,(h-3)/3*4).dot(c)<0&&c.set(-c.x,-c.y,-c.z,-c.w),c.toArray(u,h/3*4);return new bo(e+".quaternion",s,u)}generateMorphTrack(e){let t=e.DeformPercent.curves.morph,r=t.values.map(function(o){return o/100}),i=Si.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ll(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let o=1;o<t.length;o++){let s=t[o];s!==i&&(t[r]=s,i=s,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){let i=r,o=[],s=-1,a=-1,c=-1;return e.forEach(function(l){if(t.x&&(s=t.x.times.indexOf(l)),t.y&&(a=t.y.times.indexOf(l)),t.z&&(c=t.z.times.indexOf(l)),s!==-1){let u=t.x.values[s];o.push(u),i[0]=u}else o.push(i[0]);if(a!==-1){let u=t.y.values[a];o.push(u),i[1]=u}else o.push(i[1]);if(c!==-1){let u=t.z.values[c];o.push(u),i[2]=u}else o.push(i[2])}),o}interpolateRotations(e,t,r,i){let o=[],s=[];o.push(e.times[0]),s.push(ir.degToRad(e.values[0])),s.push(ir.degToRad(t.values[0])),s.push(ir.degToRad(r.values[0]));for(let a=1;a<e.values.length;a++){let c=[e.values[a-1],t.values[a-1],r.values[a-1]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;let l=c.map(ir.degToRad),u=[e.values[a],t.values[a],r.values[a]];if(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))continue;let h=u.map(ir.degToRad),f=[u[0]-c[0],u[1]-c[1],u[2]-c[2]],d=[Math.abs(f[0]),Math.abs(f[1]),Math.abs(f[2])];if(d[0]>=180||d[1]>=180||d[2]>=180){let v=Math.max(...d)/180,p=new $n(...l,i),g=new $n(...h,i),x=new Xn().setFromEuler(p),y=new Xn().setFromEuler(g);x.dot(y)&&y.set(-y.x,-y.y,-y.z,-y.w);let b=e.times[a-1],S=e.times[a]-b,_=new Xn,M=new $n;for(let A=0;A<1;A+=1/v)_.copy(x.clone().slerp(y.clone(),A)),o.push(b+A*S),M.setFromQuaternion(_,i),s.push(M.x),s.push(M.y),s.push(M.z)}else o.push(e.times[a]),s.push(ir.degToRad(e.values[a])),s.push(ir.degToRad(t.values[a])),s.push(ir.degToRad(r.values[a]))}return[o,s]}},Kb=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new jv,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,o){let s=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(s||a)return;let c=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),l=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=i.match("^\\t{"+(t.currentIndent-1)+"}}");c?t.parseNodeBegin(i,c):l?t.parseNodeProperty(i,l,r[++o]):u?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){let r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:r},s=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,o):r in a?(r==="PoseNode"?a.PoseNode.push(o):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),s.id!==""&&(a[r][s.id]=o)):typeof s.id=="number"?(a[r]={},a[r][s.id]=o):r!=="Properties70"&&(r==="PoseNode"?a[r]=[o]:a[r]=o),typeof s.id=="number"&&(o.id=s.id),s.name!==""&&(o.attrName=s.name),s.type!==""&&(o.attrType=s.type),this.pushStack(o)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&o===","&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());let s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,i,o);return}if(i==="C"){let c=o.split(",").slice(1),l=parseInt(c[0]),u=parseInt(c[1]),h=o.split(",").slice(3);h=h.map(function(f){return f.trim().replace(/^"/,"")}),i="connections",o=[l,u],Ek(o,h),s[i]===void 0&&(s[i]=[])}i==="Node"&&(s.id=o),i in s&&Array.isArray(s[i])?s[i].push(o):i!=="a"?s[i]=o:s.a=o,this.setCurrentProp(s,i),i==="a"&&o.slice(-1)!==","&&(s.a=Wb(o))}parseNodePropertyContinued(e){let t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Wb(t.a))}parseNodeSpecialProperty(e,t,r){let i=r.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=i[0],s=i[1],a=i[2],c=i[3],l=i[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=Wb(l);break}this.getPrevNode()[o]={type:s,type2:a,flag:c,value:l},this.setCurrentProp(this.getPrevNode(),o)}},Yb=class{parse(e){let t=new Wv(e);t.skip(23);let r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);let i=new jv;for(;!this.endOfContent(t);){let o=this.parseNode(t,r);o!==null&&i.add(o.name,o)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){let r={},i=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();let s=e.getUint8(),a=e.getString(s);if(i===0)return null;let c=[];for(let f=0;f<o;f++)c.push(this.parseProperty(e));let l=c.length>0?c[0]:"",u=c.length>1?c[1]:"",h=c.length>2?c[2]:"";for(r.singleProperty=o===1&&e.getOffset()===i;i>e.getOffset();){let f=this.parseNode(e,t);f!==null&&this.parseSubNode(a,r,f)}return r.propertyList=c,typeof l=="number"&&(r.id=l),u!==""&&(r.attrName=u),h!==""&&(r.attrType=h),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){let i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){let i=[];r.propertyList.forEach(function(o,s){s!==0&&i.push(o)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(o){t[o]=r[o]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],o=r.propertyList[1],s=r.propertyList[2],a=r.propertyList[3],c;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?c=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:c=r.propertyList[4],t[i]={type:o,type2:s,flag:a,value:c}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){let t=e.getString(1),r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let i=e.getUint32(),o=e.getUint32(),s=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}let a=iM(new Uint8Array(e.getArrayBuffer(s))),c=new Wv(a.buffer);switch(t){case"b":case"c":return c.getBooleanArray(i);case"d":return c.getFloat64Array(i);case"f":return c.getFloat32Array(i);case"i":return c.getInt32Array(i);case"l":return c.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},Wv=class{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){let t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=this.offset,r=new Uint8Array(this.dv.buffer,t,e);this.skip(e);let i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,t,i)),this._textDecoder.decode(r)}},jv=class{add(e,t){this[e]=t}};function Sk(n){let e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===hM(n,0,e.length)}function _k(n){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],t=0;function r(i){let o=n[i-1];return n=n.slice(t+i),t++,o}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function lM(n){let e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Tk(n){return n/46186158e3}var Mk=[];function Vv(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);let o=i*r.dataSize,s=o+r.dataSize;return Ak(Mk,r.buffer,o,s)}var Hb=new $n,Rh=new he;function cM(n){let e=new tt,t=new tt,r=new tt,i=new tt,o=new tt,s=new tt,a=new tt,c=new tt,l=new tt,u=new tt,h=new tt,f=new tt,d=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Rh.fromArray(n.translation)),n.preRotation){let T=n.preRotation.map(ir.degToRad);T.push(n.eulerOrder||$n.DEFAULT_ORDER),t.makeRotationFromEuler(Hb.fromArray(T))}if(n.rotation){let T=n.rotation.map(ir.degToRad);T.push(n.eulerOrder||$n.DEFAULT_ORDER),r.makeRotationFromEuler(Hb.fromArray(T))}if(n.postRotation){let T=n.postRotation.map(ir.degToRad);T.push(n.eulerOrder||$n.DEFAULT_ORDER),i.makeRotationFromEuler(Hb.fromArray(T)),i.invert()}n.scale&&o.scale(Rh.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Rh.fromArray(n.scalingOffset)),n.scalingPivot&&s.setPosition(Rh.fromArray(n.scalingPivot)),n.rotationOffset&&c.setPosition(Rh.fromArray(n.rotationOffset)),n.rotationPivot&&l.setPosition(Rh.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));let m=t.clone().multiply(r).multiply(i),v=new tt;v.extractRotation(u);let p=new tt;p.copyPosition(u);let g=p.clone().invert().multiply(u),x=v.clone().invert().multiply(g),y=o,b=new tt;if(d===0)b.copy(v).multiply(m).multiply(x).multiply(y);else if(d===1)b.copy(v).multiply(x).multiply(m).multiply(y);else{let D=new tt().scale(new he().setFromMatrixScale(h)).clone().invert(),N=x.clone().multiply(D);b.copy(v).multiply(m).multiply(N).multiply(y)}let S=l.clone().invert(),_=s.clone().invert(),M=e.clone().multiply(c).multiply(l).multiply(t).multiply(r).multiply(i).multiply(S).multiply(a).multiply(s).multiply(o).multiply(_),A=new tt().copyPosition(M),w=u.clone().multiply(A);return f.copyPosition(w),M=f.clone().multiply(b),M.premultiply(u.invert()),M}function uM(n){n=n||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function Wb(n){return n.split(",").map(function(t){return parseFloat(t)})}function hM(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function Ek(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function Ak(n,e,t,r){for(let i=t,o=0;i<r;i++,o++)n[o]=e[i];return n}var qv=class extends xn{load(e,t,r,i){let o=this,s=o.path===""?ul.extractUrlBase(e):o.path,a=new yi(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(c){try{t(o.parse(c,s))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e,t){function r(V,z){let $=[],Y=V.childNodes;for(let te=0,Ce=Y.length;te<Ce;te++){let Oe=Y[te];Oe.nodeName===z&&$.push(Oe)}return $}function i(V){if(V.length===0)return[];let z=V.trim().split(/\s+/),$=new Array(z.length);for(let Y=0,te=z.length;Y<te;Y++)$[Y]=z[Y];return $}function o(V){if(V.length===0)return[];let z=V.trim().split(/\s+/),$=new Array(z.length);for(let Y=0,te=z.length;Y<te;Y++)$[Y]=parseFloat(z[Y]);return $}function s(V){if(V.length===0)return[];let z=V.trim().split(/\s+/),$=new Array(z.length);for(let Y=0,te=z.length;Y<te;Y++)$[Y]=parseInt(z[Y]);return $}function a(V){return V.substring(1)}function c(){return"three_default_"+zR++}function l(V){return Object.keys(V).length===0}function u(V){return{unit:h(r(V,"unit")[0]),upAxis:f(r(V,"up_axis")[0])}}function h(V){return V!==void 0&&V.hasAttribute("meter")===!0?parseFloat(V.getAttribute("meter")):1}function f(V){return V!==void 0?V.textContent:"Y_UP"}function d(V,z,$,Y){let te=r(V,z)[0];if(te!==void 0){let Ce=r(te,$);for(let Oe=0;Oe<Ce.length;Oe++)Y(Ce[Oe])}}function m(V,z){for(let $ in V){let Y=V[$];Y.build=z(V[$])}}function v(V,z){return V.build!==void 0||(V.build=z(V)),V.build}function p(V){let z={sources:{},samplers:{},channels:{}},$=!1;for(let Y=0,te=V.childNodes.length;Y<te;Y++){let Ce=V.childNodes[Y];if(Ce.nodeType!==1)continue;let Oe;switch(Ce.nodeName){case"source":Oe=Ce.getAttribute("id"),z.sources[Oe]=je(Ce);break;case"sampler":Oe=Ce.getAttribute("id"),z.samplers[Oe]=g(Ce);break;case"channel":Oe=Ce.getAttribute("target"),z.channels[Oe]=x(Ce);break;case"animation":p(Ce),$=!0;break;default:console.log(Ce)}}$===!1&&(Ot.animations[V.getAttribute("id")||ir.generateUUID()]=z)}function g(V){let z={inputs:{}};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"input":let Ce=a(te.getAttribute("source")),Oe=te.getAttribute("semantic");z.inputs[Oe]=Ce;break}}return z}function x(V){let z={},Y=V.getAttribute("target").split("/"),te=Y.shift(),Ce=Y.shift(),Oe=Ce.indexOf("(")!==-1,st=Ce.indexOf(".")!==-1;if(st)Y=Ce.split("."),Ce=Y.shift(),z.member=Y.shift();else if(Oe){let Xe=Ce.split("(");Ce=Xe.shift();for(let et=0;et<Xe.length;et++)Xe[et]=parseInt(Xe[et].replace(/\)/,""));z.indices=Xe}return z.id=te,z.sid=Ce,z.arraySyntax=Oe,z.memberSyntax=st,z.sampler=a(V.getAttribute("source")),z}function y(V){let z=[],$=V.channels,Y=V.samplers,te=V.sources;for(let Ce in $)if($.hasOwnProperty(Ce)){let Oe=$[Ce],st=Y[Oe.sampler],Xe=st.inputs.INPUT,et=st.inputs.OUTPUT,vt=te[Xe],Ge=te[et],gt=S(Oe,vt,Ge);T(gt,z)}return z}function b(V){return v(Ot.animations[V],y)}function S(V,z,$){let Y=Ot.nodes[V.id],te=vs(Y.id),Ce=Y.transforms[V.sid],Oe=Y.matrix.clone().transpose(),st,Xe,et,vt,Ge,gt,lt={};switch(Ce){case"matrix":for(et=0,vt=z.array.length;et<vt;et++)if(st=z.array[et],Xe=et*$.stride,lt[st]===void 0&&(lt[st]={}),V.arraySyntax===!0){let Zn=$.array[Xe],En=V.indices[0]+4*V.indices[1];lt[st][En]=Zn}else for(Ge=0,gt=$.stride;Ge<gt;Ge++)lt[st][Ge]=$.array[Xe+Ge];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Ce);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Ce);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Ce);break}let It=_(lt,Oe);return{name:te.uuid,keyframes:It}}function _(V,z){let $=[];for(let te in V)$.push({time:parseFloat(te),value:V[te]});$.sort(Y);for(let te=0;te<16;te++)D($,te,z.elements[te]);return $;function Y(te,Ce){return te.time-Ce.time}}let M=new he,A=new he,w=new Xn;function T(V,z){let $=V.keyframes,Y=V.name,te=[],Ce=[],Oe=[],st=[];for(let Xe=0,et=$.length;Xe<et;Xe++){let vt=$[Xe],Ge=vt.time,gt=vt.value;ut.fromArray(gt).transpose(),ut.decompose(M,w,A),te.push(Ge),Ce.push(M.x,M.y,M.z),Oe.push(w.x,w.y,w.z,w.w),st.push(A.x,A.y,A.z)}return Ce.length>0&&z.push(new Ko(Y+".position",te,Ce)),Oe.length>0&&z.push(new bo(Y+".quaternion",te,Oe)),st.length>0&&z.push(new Ko(Y+".scale",te,st)),z}function D(V,z,$){let Y,te=!0,Ce,Oe;for(Ce=0,Oe=V.length;Ce<Oe;Ce++)Y=V[Ce],Y.value[z]===void 0?Y.value[z]=null:te=!1;if(te===!0)for(Ce=0,Oe=V.length;Ce<Oe;Ce++)Y=V[Ce],Y.value[z]=$;else N(V,z)}function N(V,z){let $,Y;for(let te=0,Ce=V.length;te<Ce;te++){let Oe=V[te];if(Oe.value[z]===null){if($=P(V,te,z),Y=E(V,te,z),$===null){Oe.value[z]=Y.value[z];continue}if(Y===null){Oe.value[z]=$.value[z];continue}U(Oe,$,Y,z)}}}function P(V,z,$){for(;z>=0;){let Y=V[z];if(Y.value[$]!==null)return Y;z--}return null}function E(V,z,$){for(;z<V.length;){let Y=V[z];if(Y.value[$]!==null)return Y;z++}return null}function U(V,z,$,Y){if($.time-z.time===0){V.value[Y]=z.value[Y];return}V.value[Y]=(V.time-z.time)*($.value[Y]-z.value[Y])/($.time-z.time)+z.value[Y]}function k(V){let z={name:V.getAttribute("id")||"default",start:parseFloat(V.getAttribute("start")||0),end:parseFloat(V.getAttribute("end")||0),animations:[]};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"instance_animation":z.animations.push(a(te.getAttribute("url")));break}}Ot.clips[V.getAttribute("id")]=z}function B(V){let z=[],$=V.name,Y=V.end-V.start||-1,te=V.animations;for(let Ce=0,Oe=te.length;Ce<Oe;Ce++){let st=b(te[Ce]);for(let Xe=0,et=st.length;Xe<et;Xe++)z.push(st[Xe])}return new hc($,Y,z)}function O(V){return v(Ot.clips[V],B)}function q(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"skin":z.id=a(te.getAttribute("source")),z.skin=ne(te);break;case"morph":z.id=a(te.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}Ot.controllers[V.getAttribute("id")]=z}function ne(V){let z={sources:{}};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"bind_shape_matrix":z.bindShapeMatrix=o(te.textContent);break;case"source":let Ce=te.getAttribute("id");z.sources[Ce]=je(te);break;case"joints":z.joints=ae(te);break;case"vertex_weights":z.vertexWeights=ye(te);break}}return z}function ae(V){let z={inputs:{}};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"input":let Ce=te.getAttribute("semantic"),Oe=a(te.getAttribute("source"));z.inputs[Ce]=Oe;break}}return z}function ye(V){let z={inputs:{}};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"input":let Ce=te.getAttribute("semantic"),Oe=a(te.getAttribute("source")),st=parseInt(te.getAttribute("offset"));z.inputs[Ce]={id:Oe,offset:st};break;case"vcount":z.vcount=s(te.textContent);break;case"v":z.v=s(te.textContent);break}}return z}function fe(V){let z={id:V.id},$=Ot.geometries[z.id];return V.skin!==void 0&&(z.skin=L(V.skin),$.sources.skinIndices=z.skin.indices,$.sources.skinWeights=z.skin.weights),z}function L(V){let $={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},Y=V.sources,te=V.vertexWeights,Ce=te.vcount,Oe=te.v,st=te.inputs.JOINT.offset,Xe=te.inputs.WEIGHT.offset,et=V.sources[V.joints.inputs.JOINT],vt=V.sources[V.joints.inputs.INV_BIND_MATRIX],Ge=Y[te.inputs.WEIGHT.id].array,gt=0,lt,It,Tt;for(lt=0,Tt=Ce.length;lt<Tt;lt++){let En=Ce[lt],gn=[];for(It=0;It<En;It++){let vn=Oe[gt+st],ea=Oe[gt+Xe],Di=Ge[ea];gn.push({index:vn,weight:Di}),gt+=2}for(gn.sort(Zn),It=0;It<4;It++){let vn=gn[It];vn!==void 0?($.indices.array.push(vn.index),$.weights.array.push(vn.weight)):($.indices.array.push(0),$.weights.array.push(0))}}for(V.bindShapeMatrix?$.bindMatrix=new tt().fromArray(V.bindShapeMatrix).transpose():$.bindMatrix=new tt().identity(),lt=0,Tt=et.array.length;lt<Tt;lt++){let En=et.array[lt],gn=new tt().fromArray(vt.array,lt*vt.stride).transpose();$.joints.push({name:En,boneInverse:gn})}return $;function Zn(En,gn){return gn.weight-En.weight}}function C(V){return v(Ot.controllers[V],fe)}function R(V){let z={init_from:r(V,"init_from")[0].textContent};Ot.images[V.getAttribute("id")]=z}function I(V){return V.build!==void 0?V.build:V.init_from}function j(V){let z=Ot.images[V];return z!==void 0?v(z,I):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",V),null)}function Z(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"profile_COMMON":z.profile=J(te);break}}Ot.effects[V.getAttribute("id")]=z}function J(V){let z={surfaces:{},samplers:{}};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"newparam":W(te,z);break;case"technique":z.technique=ue(te);break;case"extra":z.extra=ge(te);break}}return z}function W(V,z){let $=V.getAttribute("sid");for(let Y=0,te=V.childNodes.length;Y<te;Y++){let Ce=V.childNodes[Y];if(Ce.nodeType===1)switch(Ce.nodeName){case"surface":z.surfaces[$]=K(Ce);break;case"sampler2D":z.samplers[$]=le(Ce);break}}}function K(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"init_from":z.init_from=te.textContent;break}}return z}function le(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"source":z.source=te.textContent;break}}return z}function ue(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"constant":case"lambert":case"blinn":case"phong":z.type=te.nodeName,z.parameters=de(te);break;case"extra":z.extra=ge(te);break}}return z}function de(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":z[te.nodeName]=Te(te);break;case"transparent":z[te.nodeName]={opaque:te.hasAttribute("opaque")?te.getAttribute("opaque"):"A_ONE",data:Te(te)};break}}return z}function Te(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"color":z[te.nodeName]=o(te.textContent);break;case"float":z[te.nodeName]=parseFloat(te.textContent);break;case"texture":z[te.nodeName]={id:te.getAttribute("texture"),extra:X(te)};break}}return z}function X(V){let z={technique:{}};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"extra":F(te,z);break}}return z}function F(V,z){for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"technique":G(te,z);break}}}function G(V,z){for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":z.technique[te.nodeName]=parseFloat(te.textContent);break;case"wrapU":case"wrapV":te.textContent.toUpperCase()==="TRUE"?z.technique[te.nodeName]=1:te.textContent.toUpperCase()==="FALSE"?z.technique[te.nodeName]=0:z.technique[te.nodeName]=parseInt(te.textContent);break;case"bump":z[te.nodeName]=Ee(te);break}}}function ge(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"technique":z.technique=we(te);break}}return z}function we(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"double_sided":z[te.nodeName]=parseInt(te.textContent);break;case"bump":z[te.nodeName]=Ee(te);break}}return z}function Ee(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"texture":z[te.nodeName]={id:te.getAttribute("texture"),texcoord:te.getAttribute("texcoord"),extra:X(te)};break}}return z}function se(V){return V}function H(V){return v(Ot.effects[V],se)}function re(V){let z={name:V.getAttribute("name")};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"instance_effect":z.url=a(te.getAttribute("url"));break}}Ot.materials[V.getAttribute("id")]=z}function pe(V){let z,$=V.slice((V.lastIndexOf(".")-1>>>0)+2);switch($=$.toLowerCase(),$){case"tga":z=Gy;break;default:z=u_}return z}function ee(V){let z=H(V.url),$=z.profile.technique,Y;switch($.type){case"phong":case"blinn":Y=new Rn;break;case"lambert":Y=new $u;break;default:Y=new yo;break}Y.name=V.name||"";function te(Xe,et=null){let vt=z.profile.samplers[Xe.id],Ge=null;if(vt!==void 0){let gt=z.profile.surfaces[vt.source];Ge=j(gt.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),Ge=j(Xe.id);if(Ge!==null){let gt=pe(Ge);if(gt!==void 0){let lt=gt.load(Ge),It=Xe.extra;if(It!==void 0&&It.technique!==void 0&&l(It.technique)===!1){let Tt=It.technique;lt.wrapS=Tt.wrapU?qn:Qn,lt.wrapT=Tt.wrapV?qn:Qn,lt.offset.set(Tt.offsetU||0,Tt.offsetV||0),lt.repeat.set(Tt.repeatU||1,Tt.repeatV||1)}else lt.wrapS=qn,lt.wrapT=qn;return et!==null&&(lt.colorSpace=et),lt}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",Ge),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",Xe.id),null}let Ce=$.parameters;for(let Xe in Ce){let et=Ce[Xe];switch(Xe){case"diffuse":et.color&&Y.color.fromArray(et.color),et.texture&&(Y.map=te(et.texture,Ln));break;case"specular":et.color&&Y.specular&&Y.specular.fromArray(et.color),et.texture&&(Y.specularMap=te(et.texture));break;case"bump":et.texture&&(Y.normalMap=te(et.texture));break;case"ambient":et.texture&&(Y.lightMap=te(et.texture,Ln));break;case"shininess":et.float&&Y.shininess&&(Y.shininess=et.float);break;case"emission":et.color&&Y.emissive&&Y.emissive.fromArray(et.color),et.texture&&(Y.emissiveMap=te(et.texture,Ln));break}}Y.color.convertSRGBToLinear(),Y.specular&&Y.specular.convertSRGBToLinear(),Y.emissive&&Y.emissive.convertSRGBToLinear();let Oe=Ce.transparent,st=Ce.transparency;if(st===void 0&&Oe&&(st={float:1}),Oe===void 0&&st&&(Oe={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Oe&&st)if(Oe.data.texture)Y.transparent=!0;else{let Xe=Oe.data.color;switch(Oe.opaque){case"A_ONE":Y.opacity=Xe[3]*st.float;break;case"RGB_ZERO":Y.opacity=1-Xe[0]*st.float;break;case"A_ZERO":Y.opacity=1-Xe[3]*st.float;break;case"RGB_ONE":Y.opacity=Xe[0]*st.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Oe.opaque)}Y.opacity<1&&(Y.transparent=!0)}if($.extra!==void 0&&$.extra.technique!==void 0){let Xe=$.extra.technique;for(let et in Xe){let vt=Xe[et];switch(et){case"double_sided":Y.side=vt===1?br:vo;break;case"bump":Y.normalMap=te(vt.texture),Y.normalScale=new Ne(1,1);break}}}return Y}function me(V){return v(Ot.materials[V],ee)}function xe(V){let z={name:V.getAttribute("name")};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"optics":z.optics=ve(te);break}}Ot.cameras[V.getAttribute("id")]=z}function ve(V){for(let z=0;z<V.childNodes.length;z++){let $=V.childNodes[z];switch($.nodeName){case"technique_common":return Se($)}}return{}}function Se(V){let z={};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];switch(Y.nodeName){case"perspective":case"orthographic":z.technique=Y.nodeName,z.parameters=Ie(Y);break}}return z}function Ie(V){let z={};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];switch(Y.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":z[Y.nodeName]=parseFloat(Y.textContent);break}}return z}function Le(V){let z;switch(V.optics.technique){case"perspective":z=new Gn(V.optics.parameters.yfov,V.optics.parameters.aspect_ratio,V.optics.parameters.znear,V.optics.parameters.zfar);break;case"orthographic":let $=V.optics.parameters.ymag,Y=V.optics.parameters.xmag,te=V.optics.parameters.aspect_ratio;Y=Y===void 0?$*te:Y,$=$===void 0?Y/te:$,Y*=.5,$*=.5,z=new Cs(-Y,Y,$,-$,V.optics.parameters.znear,V.optics.parameters.zfar);break;default:z=new Gn;break}return z.name=V.name||"",z}function He(V){let z=Ot.cameras[V];return z!==void 0?v(z,Le):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",V),null)}function ot(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"technique_common":z=Et(te);break}}Ot.lights[V.getAttribute("id")]=z}function Et(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"directional":case"point":case"spot":case"ambient":z.technique=te.nodeName,z.parameters=Ve(te)}}return z}function Ve(V){let z={};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"color":let Ce=o(te.textContent);z.color=new Ke().fromArray(Ce).convertSRGBToLinear();break;case"falloff_angle":z.falloffAngle=parseFloat(te.textContent);break;case"quadratic_attenuation":let Oe=parseFloat(te.textContent);z.distance=Oe?Math.sqrt(1/Oe):0;break}}return z}function ce(V){let z;switch(V.technique){case"directional":z=new Ps;break;case"point":z=new fc;break;case"spot":z=new nh;break;case"ambient":z=new Ds;break}return V.parameters.color&&z.color.copy(V.parameters.color),V.parameters.distance&&(z.distance=V.parameters.distance),z}function ke(V){let z=Ot.lights[V];return z!==void 0?v(z,ce):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",V),null)}function Ue(V){let z={name:V.getAttribute("name"),sources:{},vertices:{},primitives:[]},$=r(V,"mesh")[0];if($!==void 0){for(let Y=0;Y<$.childNodes.length;Y++){let te=$.childNodes[Y];if(te.nodeType!==1)continue;let Ce=te.getAttribute("id");switch(te.nodeName){case"source":z.sources[Ce]=je(te);break;case"vertices":z.vertices=We(te);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",te.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":z.primitives.push(Pt(te));break;default:console.log(te)}}Ot.geometries[V.getAttribute("id")]=z}}function je(V){let z={array:[],stride:3};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"float_array":z.array=o(Y.textContent);break;case"Name_array":z.array=i(Y.textContent);break;case"technique_common":let te=r(Y,"accessor")[0];te!==void 0&&(z.stride=parseInt(te.getAttribute("stride")));break}}return z}function We(V){let z={};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];Y.nodeType===1&&(z[Y.getAttribute("semantic")]=a(Y.getAttribute("source")))}return z}function Pt(V){let z={type:V.nodeName,material:V.getAttribute("material"),count:parseInt(V.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let $=0,Y=V.childNodes.length;$<Y;$++){let te=V.childNodes[$];if(te.nodeType===1)switch(te.nodeName){case"input":let Ce=a(te.getAttribute("source")),Oe=te.getAttribute("semantic"),st=parseInt(te.getAttribute("offset")),Xe=parseInt(te.getAttribute("set")),et=Xe>0?Oe+Xe:Oe;z.inputs[et]={id:Ce,offset:st},z.stride=Math.max(z.stride,st+1),Oe==="TEXCOORD"&&(z.hasUV=!0);break;case"vcount":z.vcount=s(te.textContent);break;case"p":z.p=s(te.textContent);break}}return z}function At(V){let z={};for(let $=0;$<V.length;$++){let Y=V[$];z[Y.type]===void 0&&(z[Y.type]=[]),z[Y.type].push(Y)}return z}function qt(V){let z=0;for(let $=0,Y=V.length;$<Y;$++)V[$].hasUV===!0&&z++;z>0&&z<V.length&&(V.uvsNeedsFix=!0)}function sn(V){let z={},$=V.sources,Y=V.vertices,te=V.primitives;if(te.length===0)return{};let Ce=At(te);for(let Oe in Ce){let st=Ce[Oe];qt(st),z[Oe]=ct(st,$,Y)}return z}function ct(V,z,$){let Y={},te={array:[],stride:0},Ce={array:[],stride:0},Oe={array:[],stride:0},st={array:[],stride:0},Xe={array:[],stride:0},et={array:[],stride:4},vt={array:[],stride:4},Ge=new Yt,gt=[],lt=0;for(let It=0;It<V.length;It++){let Tt=V[It],Zn=Tt.inputs,En=0;switch(Tt.type){case"lines":case"linestrips":En=Tt.count*2;break;case"triangles":En=Tt.count*3;break;case"polylist":for(let gn=0;gn<Tt.count;gn++){let vn=Tt.vcount[gn];switch(vn){case 3:En+=3;break;case 4:En+=6;break;default:En+=(vn-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",Tt.type)}Ge.addGroup(lt,En,It),lt+=En,Tt.material&&gt.push(Tt.material);for(let gn in Zn){let vn=Zn[gn];switch(gn){case"VERTEX":for(let ea in $){let Di=$[ea];switch(ea){case"POSITION":let iu=te.array.length;if(qe(Tt,z[Di],vn.offset,te.array),te.stride=z[Di].stride,z.skinWeights&&z.skinIndices&&(qe(Tt,z.skinIndices,vn.offset,et.array),qe(Tt,z.skinWeights,vn.offset,vt.array)),Tt.hasUV===!1&&V.uvsNeedsFix===!0){let GR=(te.array.length-iu)/te.stride;for(let f_=0;f_<GR;f_++)Oe.array.push(0,0)}break;case"NORMAL":qe(Tt,z[Di],vn.offset,Ce.array),Ce.stride=z[Di].stride;break;case"COLOR":qe(Tt,z[Di],vn.offset,Xe.array),Xe.stride=z[Di].stride;break;case"TEXCOORD":qe(Tt,z[Di],vn.offset,Oe.array),Oe.stride=z[Di].stride;break;case"TEXCOORD1":qe(Tt,z[Di],vn.offset,st.array),Oe.stride=z[Di].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',ea)}}break;case"NORMAL":qe(Tt,z[vn.id],vn.offset,Ce.array),Ce.stride=z[vn.id].stride;break;case"COLOR":qe(Tt,z[vn.id],vn.offset,Xe.array,!0),Xe.stride=z[vn.id].stride;break;case"TEXCOORD":qe(Tt,z[vn.id],vn.offset,Oe.array),Oe.stride=z[vn.id].stride;break;case"TEXCOORD1":qe(Tt,z[vn.id],vn.offset,st.array),st.stride=z[vn.id].stride;break}}}return te.array.length>0&&Ge.setAttribute("position",new Ye(te.array,te.stride)),Ce.array.length>0&&Ge.setAttribute("normal",new Ye(Ce.array,Ce.stride)),Xe.array.length>0&&Ge.setAttribute("color",new Ye(Xe.array,Xe.stride)),Oe.array.length>0&&Ge.setAttribute("uv",new Ye(Oe.array,Oe.stride)),st.array.length>0&&Ge.setAttribute("uv1",new Ye(st.array,st.stride)),et.array.length>0&&Ge.setAttribute("skinIndex",new Ye(et.array,et.stride)),vt.array.length>0&&Ge.setAttribute("skinWeight",new Ye(vt.array,vt.stride)),Y.data=Ge,Y.type=V[0].type,Y.materialKeys=gt,Y}function qe(V,z,$,Y,te=!1){let Ce=V.p,Oe=V.stride,st=V.vcount;function Xe(Ge){let gt=Ce[Ge+$]*vt,lt=gt+vt;for(;gt<lt;gt++)Y.push(et[gt]);if(te){let It=Y.length-vt-1;Vm.setRGB(Y[It+0],Y[It+1],Y[It+2]).convertSRGBToLinear(),Y[It+0]=Vm.r,Y[It+1]=Vm.g,Y[It+2]=Vm.b}}let et=z.array,vt=z.stride;if(V.vcount!==void 0){let Ge=0;for(let gt=0,lt=st.length;gt<lt;gt++){let It=st[gt];if(It===4){let Tt=Ge+Oe*0,Zn=Ge+Oe*1,En=Ge+Oe*2,gn=Ge+Oe*3;Xe(Tt),Xe(Zn),Xe(gn),Xe(Zn),Xe(En),Xe(gn)}else if(It===3){let Tt=Ge+Oe*0,Zn=Ge+Oe*1,En=Ge+Oe*2;Xe(Tt),Xe(Zn),Xe(En)}else if(It>4)for(let Tt=1,Zn=It-2;Tt<=Zn;Tt++){let En=Ge+Oe*0,gn=Ge+Oe*Tt,vn=Ge+Oe*(Tt+1);Xe(En),Xe(gn),Xe(vn)}Ge+=Oe*It}}else for(let Ge=0,gt=Ce.length;Ge<gt;Ge+=Oe)Xe(Ge)}function nt(V){return v(Ot.geometries[V],sn)}function Je(V){let z={name:V.getAttribute("name")||"",joints:{},links:[]};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"technique_common":Fn(Y,z);break}}Ot.kinematicsModels[V.getAttribute("id")]=z}function ht(V){return V.build!==void 0?V.build:V}function wt(V){return v(Ot.kinematicsModels[V],ht)}function Fn(V,z){for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"joint":z.joints[Y.getAttribute("sid")]=hi(Y);break;case"link":z.links.push(Oo(Y));break}}}function hi(V){let z;for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"prismatic":case"revolute":z=Yi(Y);break}}return z}function Yi(V){let z={sid:V.getAttribute("sid"),name:V.getAttribute("name")||"",axis:new he,limits:{min:0,max:0},type:V.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"axis":let te=o(Y.textContent);z.axis.fromArray(te);break;case"limits":let Ce=Y.getElementsByTagName("max")[0],Oe=Y.getElementsByTagName("min")[0];z.limits.max=parseFloat(Ce.textContent),z.limits.min=parseFloat(Oe.textContent);break}}return z.limits.min>=z.limits.max&&(z.static=!0),z.middlePosition=(z.limits.min+z.limits.max)/2,z}function Oo(V){let z={sid:V.getAttribute("sid"),name:V.getAttribute("name")||"",attachments:[],transforms:[]};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"attachment_full":z.attachments.push(zm(Y));break;case"matrix":case"translate":case"rotate":z.transforms.push(nd(Y));break}}return z}function zm(V){let z={joint:V.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"link":z.links.push(Oo(Y));break;case"matrix":case"translate":case"rotate":z.transforms.push(nd(Y));break}}return z}function nd(V){let z={type:V.nodeName},$=o(V.textContent);switch(z.type){case"matrix":z.obj=new tt,z.obj.fromArray($).transpose();break;case"translate":z.obj=new he,z.obj.fromArray($);break;case"rotate":z.obj=new he,z.obj.fromArray($),z.angle=ir.degToRad($[3]);break}return z}function ky(V){let z={name:V.getAttribute("name")||"",rigidBodies:{}};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"rigid_body":z.rigidBodies[Y.getAttribute("name")]={},Uy(Y,z.rigidBodies[Y.getAttribute("name")]);break}}Ot.physicsModels[V.getAttribute("id")]=z}function Uy(V,z){for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"technique_common":By(Y,z);break}}}function By(V,z){for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"inertia":z.inertia=o(Y.textContent);break;case"mass":z.mass=o(Y.textContent)[0];break}}}function oe(V){let z={bindJointAxis:[]};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"bind_joint_axis":z.bindJointAxis.push(Me(Y));break}}Ot.kinematicsScenes[a(V.getAttribute("url"))]=z}function Me(V){let z={target:V.getAttribute("target").split("/").pop()};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType===1)switch(Y.nodeName){case"axis":let te=Y.getElementsByTagName("param")[0];z.axis=te.textContent;let Ce=z.axis.split("inst_").pop().split("axis")[0];z.jointIndex=Ce.substring(0,Ce.length-1);break}}return z}function Re(V){return V.build!==void 0?V.build:V}function De(V){return v(Ot.kinematicsScenes[V],Re)}function Ae(){let V=Object.keys(Ot.kinematicsModels)[0],z=Object.keys(Ot.kinematicsScenes)[0],$=Object.keys(Ot.visualScenes)[0];if(V===void 0||z===void 0)return;let Y=wt(V),te=De(z),Ce=za($),Oe=te.bindJointAxis,st={};for(let vt=0,Ge=Oe.length;vt<Ge;vt++){let gt=Oe[vt],lt=mn.querySelector('[sid="'+gt.target+'"]');if(lt){let It=lt.parentElement;Xe(gt.jointIndex,It)}}function Xe(vt,Ge){let gt=Ge.getAttribute("name"),lt=Y.joints[vt];Ce.traverse(function(It){It.name===gt&&(st[vt]={object:It,transforms:Qe(Ge),joint:lt,position:lt.zeroPosition})})}let et=new tt;h_={joints:Y&&Y.joints,getJointValue:function(vt){let Ge=st[vt];if(Ge)return Ge.position;console.warn("THREE.ColladaLoader: Joint "+vt+" doesn't exist.")},setJointValue:function(vt,Ge){let gt=st[vt];if(gt){let lt=gt.joint;if(Ge>lt.limits.max||Ge<lt.limits.min)console.warn("THREE.ColladaLoader: Joint "+vt+" value "+Ge+" outside of limits (min: "+lt.limits.min+", max: "+lt.limits.max+").");else if(lt.static)console.warn("THREE.ColladaLoader: Joint "+vt+" is static.");else{let It=gt.object,Tt=lt.axis,Zn=gt.transforms;ut.identity();for(let En=0;En<Zn.length;En++){let gn=Zn[En];if(gn.sid&&gn.sid.indexOf(vt)!==-1)switch(lt.type){case"revolute":ut.multiply(et.makeRotationAxis(Tt,ir.degToRad(Ge)));break;case"prismatic":ut.multiply(et.makeTranslation(Tt.x*Ge,Tt.y*Ge,Tt.z*Ge));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+lt.type);break}else switch(gn.type){case"matrix":ut.multiply(gn.obj);break;case"translate":ut.multiply(et.makeTranslation(gn.obj.x,gn.obj.y,gn.obj.z));break;case"scale":ut.scale(gn.obj);break;case"rotate":ut.multiply(et.makeRotationAxis(gn.obj,gn.angle));break}}It.matrix.copy(ut),It.matrix.decompose(It.position,It.quaternion,It.scale),st[vt].position=Ge}}else console.log("THREE.ColladaLoader: "+vt+" does not exist.")}}}function Qe(V){let z=[],$=mn.querySelector('[id="'+V.id+'"]');for(let Y=0;Y<$.childNodes.length;Y++){let te=$.childNodes[Y];if(te.nodeType!==1)continue;let Ce,Oe;switch(te.nodeName){case"matrix":Ce=o(te.textContent);let st=new tt().fromArray(Ce).transpose();z.push({sid:te.getAttribute("sid"),type:te.nodeName,obj:st});break;case"translate":case"scale":Ce=o(te.textContent),Oe=new he().fromArray(Ce),z.push({sid:te.getAttribute("sid"),type:te.nodeName,obj:Oe});break;case"rotate":Ce=o(te.textContent),Oe=new he().fromArray(Ce);let Xe=ir.degToRad(Ce[3]);z.push({sid:te.getAttribute("sid"),type:te.nodeName,obj:Oe,angle:Xe});break}}return z}function St(V){let z=V.getElementsByTagName("node");for(let $=0;$<z.length;$++){let Y=z[$];Y.hasAttribute("id")===!1&&Y.setAttribute("id",c())}}let ut=new tt,Ct=new he;function Gt(V){let z={name:V.getAttribute("name")||"",type:V.getAttribute("type"),id:V.getAttribute("id"),sid:V.getAttribute("sid"),matrix:new tt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];if(Y.nodeType!==1)continue;let te;switch(Y.nodeName){case"node":z.nodes.push(Y.getAttribute("id")),Gt(Y);break;case"instance_camera":z.instanceCameras.push(a(Y.getAttribute("url")));break;case"instance_controller":z.instanceControllers.push(Vt(Y));break;case"instance_light":z.instanceLights.push(a(Y.getAttribute("url")));break;case"instance_geometry":z.instanceGeometries.push(Vt(Y));break;case"instance_node":z.instanceNodes.push(a(Y.getAttribute("url")));break;case"matrix":te=o(Y.textContent),z.matrix.multiply(ut.fromArray(te).transpose()),z.transforms[Y.getAttribute("sid")]=Y.nodeName;break;case"translate":te=o(Y.textContent),Ct.fromArray(te),z.matrix.multiply(ut.makeTranslation(Ct.x,Ct.y,Ct.z)),z.transforms[Y.getAttribute("sid")]=Y.nodeName;break;case"rotate":te=o(Y.textContent);let Ce=ir.degToRad(te[3]);z.matrix.multiply(ut.makeRotationAxis(Ct.fromArray(te),Ce)),z.transforms[Y.getAttribute("sid")]=Y.nodeName;break;case"scale":te=o(Y.textContent),z.matrix.scale(Ct.fromArray(te)),z.transforms[Y.getAttribute("sid")]=Y.nodeName;break;case"extra":break;default:console.log(Y)}}return Kt(z.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",z.id):Ot.nodes[z.id]=z,z}function Vt(V){let z={id:a(V.getAttribute("url")),materials:{},skeletons:[]};for(let $=0;$<V.childNodes.length;$++){let Y=V.childNodes[$];switch(Y.nodeName){case"bind_material":let te=Y.getElementsByTagName("instance_material");for(let Ce=0;Ce<te.length;Ce++){let Oe=te[Ce],st=Oe.getAttribute("symbol"),Xe=Oe.getAttribute("target");z.materials[st]=a(Xe)}break;case"skeleton":z.skeletons.push(a(Y.textContent));break;default:break}}return z}function Xt(V,z){let $=[],Y=[],te,Ce,Oe;for(te=0;te<V.length;te++){let et=V[te],vt;if(Kt(et))vt=vs(et),Wn(vt,z,$);else if(Gm(et)){let gt=Ot.visualScenes[et].children;for(let lt=0;lt<gt.length;lt++){let It=gt[lt];if(It.type==="JOINT"){let Tt=vs(It.id);Wn(Tt,z,$)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",et)}for(te=0;te<z.length;te++)for(Ce=0;Ce<$.length;Ce++)if(Oe=$[Ce],Oe.bone.name===z[te].name){Y[te]=Oe,Oe.processed=!0;break}for(te=0;te<$.length;te++)Oe=$[te],Oe.processed===!1&&(Y.push(Oe),Oe.processed=!0);let st=[],Xe=[];for(te=0;te<Y.length;te++)Oe=Y[te],st.push(Oe.bone),Xe.push(Oe.boneInverse);return new Ju(st,Xe)}function Wn(V,z,$){V.traverse(function(Y){if(Y.isBone===!0){let te;for(let Ce=0;Ce<z.length;Ce++){let Oe=z[Ce];if(Oe.name===Y.name){te=Oe.boneInverse;break}}te===void 0&&(te=new tt),$.push({bone:Y,boneInverse:te,processed:!1})}})}function fi(V){let z=[],$=V.matrix,Y=V.nodes,te=V.type,Ce=V.instanceCameras,Oe=V.instanceControllers,st=V.instanceLights,Xe=V.instanceGeometries,et=V.instanceNodes;for(let Ge=0,gt=Y.length;Ge<gt;Ge++)z.push(vs(Y[Ge]));for(let Ge=0,gt=Ce.length;Ge<gt;Ge++){let lt=He(Ce[Ge]);lt!==null&&z.push(lt.clone())}for(let Ge=0,gt=Oe.length;Ge<gt;Ge++){let lt=Oe[Ge],It=C(lt.id),Tt=nt(It.id),Zn=On(Tt,lt.materials),En=lt.skeletons,gn=It.skin.joints,vn=Xt(En,gn);for(let ea=0,Di=Zn.length;ea<Di;ea++){let iu=Zn[ea];iu.isSkinnedMesh&&(iu.bind(vn,It.skin.bindMatrix),iu.normalizeSkinWeights()),z.push(iu)}}for(let Ge=0,gt=st.length;Ge<gt;Ge++){let lt=ke(st[Ge]);lt!==null&&z.push(lt.clone())}for(let Ge=0,gt=Xe.length;Ge<gt;Ge++){let lt=Xe[Ge],It=nt(lt.id),Tt=On(It,lt.materials);for(let Zn=0,En=Tt.length;Zn<En;Zn++)z.push(Tt[Zn])}for(let Ge=0,gt=et.length;Ge<gt;Ge++)z.push(vs(et[Ge]).clone());let vt;if(Y.length===0&&z.length===1)vt=z[0];else{vt=te==="JOINT"?new ol:new rr;for(let Ge=0;Ge<z.length;Ge++)vt.add(z[Ge])}return vt.name=te==="JOINT"?V.sid:V.name,vt.matrix.copy($),vt.matrix.decompose(vt.position,vt.quaternion,vt.scale),vt}let pr=new yo({name:xn.DEFAULT_MATERIAL_NAME,color:16711935});function ko(V,z){let $=[];for(let Y=0,te=V.length;Y<te;Y++){let Ce=z[V[Y]];Ce===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",V[Y]),$.push(pr)):$.push(me(Ce))}return $}function On(V,z){let $=[];for(let Y in V){let te=V[Y],Ce=ko(te.materialKeys,z);if(Ce.length===0&&(Y==="lines"||Y==="linestrips"?Ce.push(new Gr):Ce.push(new Rn)),Y==="lines"||Y==="linestrips")for(let et=0,vt=Ce.length;et<vt;et++){let Ge=Ce[et];if(Ge.isMeshPhongMaterial===!0||Ge.isMeshLambertMaterial===!0){let gt=new Gr;gt.color.copy(Ge.color),gt.opacity=Ge.opacity,gt.transparent=Ge.transparent,Ce[et]=gt}}let Oe=te.data.attributes.skinIndex!==void 0,st=Ce.length===1?Ce[0]:Ce,Xe;switch(Y){case"lines":Xe=new Rs(te.data,st);break;case"linestrips":Xe=new va(te.data,st);break;case"triangles":case"polylist":Oe?Xe=new Yu(te.data,st):Xe=new hn(te.data,st);break}$.push(Xe)}return $}function Kt(V){return Ot.nodes[V]!==void 0}function vs(V){return v(Ot.nodes[V],fi)}function kn(V){let z={name:V.getAttribute("name"),children:[]};St(V);let $=r(V,"node");for(let Y=0;Y<$.length;Y++)z.children.push(Gt($[Y]));Ot.visualScenes[V.getAttribute("id")]=z}function ys(V){let z=new rr;z.name=V.name;let $=V.children;for(let Y=0;Y<$.length;Y++){let te=$[Y];z.add(vs(te.id))}return z}function Gm(V){return Ot.visualScenes[V]!==void 0}function za(V){return v(Ot.visualScenes[V],ys)}function rd(V){let z=r(V,"instance_visual_scene")[0];return za(a(z.getAttribute("url")))}function Lr(){let V=Ot.clips;if(l(V)===!0){if(l(Ot.animations)===!1){let z=[];for(let $ in Ot.animations){let Y=b($);for(let te=0,Ce=Y.length;te<Ce;te++)z.push(Y[te])}Hm.push(new hc("default",-1,z))}}else for(let z in V)Hm.push(O(z))}function xs(V){let z="",$=[V];for(;$.length;){let Y=$.shift();Y.nodeType===Node.TEXT_NODE?z+=Y.textContent:(z+=`
`,$.push.apply($,Y.childNodes))}return z.trim()}if(e.length===0)return{scene:new Is};let ru=new DOMParser().parseFromString(e,"application/xml"),mn=r(ru,"COLLADA")[0],Kl=ru.getElementsByTagName("parsererror")[0];if(Kl!==void 0){let V=r(Kl,"div")[0],z;return V?z=V.textContent:z=xs(Kl),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,z),null}let zy=mn.getAttribute("version");console.debug("THREE.ColladaLoader: File version",zy);let id=u(r(mn,"asset")[0]),u_=new wo(this.manager);u_.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let Gy;yl&&(Gy=new yl(this.manager),Gy.setPath(this.resourcePath||t));let Vm=new Ke,Hm=[],h_={},zR=0,Ot={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};d(mn,"library_animations","animation",p),d(mn,"library_animation_clips","animation_clip",k),d(mn,"library_controllers","controller",q),d(mn,"library_images","image",R),d(mn,"library_effects","effect",Z),d(mn,"library_materials","material",re),d(mn,"library_cameras","camera",xe),d(mn,"library_lights","light",ot),d(mn,"library_geometries","geometry",Ue),d(mn,"library_nodes","node",Gt),d(mn,"library_visual_scenes","visual_scene",kn),d(mn,"library_kinematics_models","kinematics_model",Je),d(mn,"library_physics_models","physics_model",ky),d(mn,"scene","instance_kinematics_scene",oe),m(Ot.animations,y),m(Ot.clips,B),m(Ot.controllers,fe),m(Ot.images,I),m(Ot.effects,se),m(Ot.materials,ee),m(Ot.cameras,Le),m(Ot.lights,ce),m(Ot.geometries,sn),m(Ot.visualScenes,ys),Lr(),Ae();let Wm=rd(r(mn,"scene")[0]);return Wm.animations=Hm,id.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),Wm.rotation.set(-Math.PI/2,0,0)),Wm.scale.multiplyScalar(id.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),Hm},kinematics:h_,library:Ot,scene:Wm}}};var Zt=(n,e)=>()=>(e||(e={exports:{}},n(e.exports,e)),e.exports),fM=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VERSION=void 0,n.VERSION="9.0.1"}),Sn=Zt((exports,module)=>{"use strict";var __spreadArray=exports&&exports.__spreadArray||function(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n};Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFastProperties=exports.timer=exports.peek=exports.isES2015MapSupported=exports.PRINT_WARNING=exports.PRINT_ERROR=exports.packArray=exports.IDENTITY=exports.NOOP=exports.merge=exports.groupBy=exports.defaults=exports.assignNoOverwrite=exports.assign=exports.zipObject=exports.sortBy=exports.indexOf=exports.some=exports.difference=exports.every=exports.isObject=exports.isRegExp=exports.isArray=exports.partial=exports.uniq=exports.compact=exports.reduce=exports.findAll=exports.find=exports.cloneObj=exports.cloneArr=exports.contains=exports.has=exports.pick=exports.reject=exports.filter=exports.dropRight=exports.drop=exports.isFunction=exports.isUndefined=exports.isString=exports.forEach=exports.last=exports.first=exports.flatten=exports.map=exports.mapValues=exports.values=exports.keys=exports.isEmpty=void 0;function isEmpty(n){return n&&n.length===0}exports.isEmpty=isEmpty;function keys(n){return n==null?[]:Object.keys(n)}exports.keys=keys;function values(n){for(var e=[],t=Object.keys(n),r=0;r<t.length;r++)e.push(n[t[r]]);return e}exports.values=values;function mapValues(n,e){for(var t=[],r=keys(n),i=0;i<r.length;i++){var o=r[i];t.push(e.call(null,n[o],o))}return t}exports.mapValues=mapValues;function map(n,e){for(var t=[],r=0;r<n.length;r++)t.push(e.call(null,n[r],r));return t}exports.map=map;function flatten(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];Array.isArray(r)?e=e.concat(flatten(r)):e.push(r)}return e}exports.flatten=flatten;function first(n){return isEmpty(n)?void 0:n[0]}exports.first=first;function last(n){var e=n&&n.length;return e?n[e-1]:void 0}exports.last=last;function forEach(n,e){if(Array.isArray(n))for(var t=0;t<n.length;t++)e.call(null,n[t],t);else if(isObject(n))for(var r=keys(n),t=0;t<r.length;t++){var i=r[t],o=n[i];e.call(null,o,i)}else throw Error("non exhaustive match")}exports.forEach=forEach;function isString(n){return typeof n=="string"}exports.isString=isString;function isUndefined(n){return n===void 0}exports.isUndefined=isUndefined;function isFunction(n){return n instanceof Function}exports.isFunction=isFunction;function drop(n,e){return e===void 0&&(e=1),n.slice(e,n.length)}exports.drop=drop;function dropRight(n,e){return e===void 0&&(e=1),n.slice(0,n.length-e)}exports.dropRight=dropRight;function filter(n,e){var t=[];if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];e.call(null,i)&&t.push(i)}return t}exports.filter=filter;function reject(n,e){return filter(n,function(t){return!e(t)})}exports.reject=reject;function pick(n,e){for(var t=Object.keys(n),r={},i=0;i<t.length;i++){var o=t[i],s=n[o];e(s)&&(r[o]=s)}return r}exports.pick=pick;function has(n,e){return isObject(n)?n.hasOwnProperty(e):!1}exports.has=has;function contains(n,e){return find(n,function(t){return t===e})!==void 0}exports.contains=contains;function cloneArr(n){for(var e=[],t=0;t<n.length;t++)e.push(n[t]);return e}exports.cloneArr=cloneArr;function cloneObj(n){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}exports.cloneObj=cloneObj;function find(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(e.call(null,r))return r}}exports.find=find;function findAll(n,e){for(var t=[],r=0;r<n.length;r++){var i=n[r];e.call(null,i)&&t.push(i)}return t}exports.findAll=findAll;function reduce(n,e,t){for(var r=Array.isArray(n),i=r?n:values(n),o=r?[]:keys(n),s=t,a=0;a<i.length;a++)s=e.call(null,s,i[a],r?a:o[a]);return s}exports.reduce=reduce;function compact(n){return reject(n,function(e){return e==null})}exports.compact=compact;function uniq(n,e){e===void 0&&(e=function(r){return r});var t=[];return reduce(n,function(r,i){var o=e(i);return contains(t,o)?r:(t.push(o),r.concat(i))},[])}exports.uniq=uniq;function partial(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=[null],i=r.concat(e);return Function.bind.apply(n,i)}exports.partial=partial;function isArray(n){return Array.isArray(n)}exports.isArray=isArray;function isRegExp(n){return n instanceof RegExp}exports.isRegExp=isRegExp;function isObject(n){return n instanceof Object}exports.isObject=isObject;function every(n,e){for(var t=0;t<n.length;t++)if(!e(n[t],t))return!1;return!0}exports.every=every;function difference(n,e){return reject(n,function(t){return contains(e,t)})}exports.difference=difference;function some(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}exports.some=some;function indexOf(n,e){for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1}exports.indexOf=indexOf;function sortBy(n,e){var t=cloneArr(n);return t.sort(function(r,i){return e(r)-e(i)}),t}exports.sortBy=sortBy;function zipObject(n,e){if(n.length!==e.length)throw Error("can't zipObject with different number of keys and values!");for(var t={},r=0;r<n.length;r++)t[n[r]]=e[r];return t}exports.zipObject=zipObject;function assign(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0;r<e.length;r++)for(var i=e[r],o=keys(i),s=0;s<o.length;s++){var a=o[s];n[a]=i[a]}return n}exports.assign=assign;function assignNoOverwrite(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0;r<e.length;r++)for(var i=e[r],o=keys(i),s=0;s<o.length;s++){var a=o[s];has(n,a)||(n[a]=i[a])}return n}exports.assignNoOverwrite=assignNoOverwrite;function defaults(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return assignNoOverwrite.apply(void 0,__spreadArray([{}],n))}exports.defaults=defaults;function groupBy(n,e){var t={};return forEach(n,function(r){var i=e(r),o=t[i];o?o.push(r):t[i]=[r]}),t}exports.groupBy=groupBy;function merge(n,e){for(var t=cloneObj(n),r=keys(e),i=0;i<r.length;i++){var o=r[i],s=e[o];t[o]=s}return t}exports.merge=merge;function NOOP(){}exports.NOOP=NOOP;function IDENTITY(n){return n}exports.IDENTITY=IDENTITY;function packArray(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r!==void 0?r:void 0)}return e}exports.packArray=packArray;function PRINT_ERROR(n){console&&console.error&&console.error("Error: "+n)}exports.PRINT_ERROR=PRINT_ERROR;function PRINT_WARNING(n){console&&console.warn&&console.warn("Warning: "+n)}exports.PRINT_WARNING=PRINT_WARNING;function isES2015MapSupported(){return typeof Map=="function"}exports.isES2015MapSupported=isES2015MapSupported;function peek(n){return n[n.length-1]}exports.peek=peek;function timer(n){var e=new Date().getTime(),t=n(),r=new Date().getTime(),i=r-e;return{time:i,value:t}}exports.timer=timer;function toFastProperties(toBecomeFast){function FakeConstructor(){}FakeConstructor.prototype=toBecomeFast;var fakeInstance=new FakeConstructor;function fakeAccess(){return typeof fakeInstance.bar}return fakeAccess(),fakeAccess(),toBecomeFast}exports.toFastProperties=toFastProperties}),Zb=Zt((n,e)=>{(function(t,r){typeof define=="function"&&define.amd?define([],r):typeof e=="object"&&e.exports?e.exports=r():t.regexpToAst=r()})(typeof self<"u"?self:n,function(){function t(){}t.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},t.prototype.restoreState=function(p){this.idx=p.idx,this.input=p.input,this.groupIdx=p.groupIdx},t.prototype.pattern=function(p){this.idx=0,this.input=p,this.groupIdx=0,this.consumeChar("/");var g=this.disjunction();this.consumeChar("/");for(var x={type:"Flags",loc:{begin:this.idx,end:p.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":c(x,"global");break;case"i":c(x,"ignoreCase");break;case"m":c(x,"multiLine");break;case"u":c(x,"unicode");break;case"y":c(x,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:x,value:g,loc:this.loc(0)}},t.prototype.disjunction=function(){var p=[],g=this.idx;for(p.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),p.push(this.alternative());return{type:"Disjunction",value:p,loc:this.loc(g)}},t.prototype.alternative=function(){for(var p=[],g=this.idx;this.isTerm();)p.push(this.term());return{type:"Alternative",value:p,loc:this.loc(g)}},t.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},t.prototype.assertion=function(){var p=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(p)};case"$":return{type:"EndAnchor",loc:this.loc(p)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(p)};case"B":return{type:"NonWordBoundary",loc:this.loc(p)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var g;switch(this.popChar()){case"=":g="Lookahead";break;case"!":g="NegativeLookahead";break}l(g);var x=this.disjunction();return this.consumeChar(")"),{type:g,value:x,loc:this.loc(p)}}u()},t.prototype.quantifier=function(p){var g,x=this.idx;switch(this.popChar()){case"*":g={atLeast:0,atMost:1/0};break;case"+":g={atLeast:1,atMost:1/0};break;case"?":g={atLeast:0,atMost:1};break;case"{":var y=this.integerIncludingZero();switch(this.popChar()){case"}":g={atLeast:y,atMost:y};break;case",":var b;this.isDigit()?(b=this.integerIncludingZero(),g={atLeast:y,atMost:b}):g={atLeast:y,atMost:1/0},this.consumeChar("}");break}if(p===!0&&g===void 0)return;l(g);break}if(!(p===!0&&g===void 0))return l(g),this.peekChar(0)==="?"?(this.consumeChar("?"),g.greedy=!1):g.greedy=!0,g.type="Quantifier",g.loc=this.loc(x),g},t.prototype.atom=function(){var p,g=this.idx;switch(this.peekChar()){case".":p=this.dotAll();break;case"\\":p=this.atomEscape();break;case"[":p=this.characterClass();break;case"(":p=this.group();break}return p===void 0&&this.isPatternCharacter()&&(p=this.patternCharacter()),l(p),p.loc=this.loc(g),this.isQuantifier()&&(p.quantifier=this.quantifier()),p},t.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[s(`
`),s("\r"),s("\u2028"),s("\u2029")]}},t.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.decimalEscapeAtom=function(){var p=this.positiveInteger();return{type:"GroupBackReference",value:p}},t.prototype.characterClassEscape=function(){var p,g=!1;switch(this.popChar()){case"d":p=f;break;case"D":p=f,g=!0;break;case"s":p=m;break;case"S":p=m,g=!0;break;case"w":p=d;break;case"W":p=d,g=!0;break}return l(p),{type:"Set",value:p,complement:g}},t.prototype.controlEscapeAtom=function(){var p;switch(this.popChar()){case"f":p=s("\f");break;case"n":p=s(`
`);break;case"r":p=s("\r");break;case"t":p=s("	");break;case"v":p=s("\v");break}return l(p),{type:"Character",value:p}},t.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var p=this.popChar();if(/[a-zA-Z]/.test(p)===!1)throw Error("Invalid ");var g=p.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:g}},t.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:s("\0")}},t.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},t.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},t.prototype.identityEscapeAtom=function(){var p=this.popChar();return{type:"Character",value:s(p)}},t.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var p=this.popChar();return{type:"Character",value:s(p)}}},t.prototype.characterClass=function(){var p=[],g=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),g=!0);this.isClassAtom();){var x=this.classAtom(),y=x.type==="Character";if(y&&this.isRangeDash()){this.consumeChar("-");var b=this.classAtom(),S=b.type==="Character";if(S){if(b.value<x.value)throw Error("Range out of order in character class");p.push({from:x.value,to:b.value})}else a(x.value,p),p.push(s("-")),a(b.value,p)}else a(x.value,p)}return this.consumeChar("]"),{type:"Set",complement:g,value:p}},t.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},t.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:s("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.group=function(){var p=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),p=!1;break;default:this.groupIdx++;break}var g=this.disjunction();this.consumeChar(")");var x={type:"Group",capturing:p,value:g};return p&&(x.idx=this.groupIdx),x},t.prototype.positiveInteger=function(){var p=this.popChar();if(o.test(p)===!1)throw Error("Expecting a positive integer");for(;i.test(this.peekChar(0));)p+=this.popChar();return parseInt(p,10)},t.prototype.integerIncludingZero=function(){var p=this.popChar();if(i.test(p)===!1)throw Error("Expecting an integer");for(;i.test(this.peekChar(0));)p+=this.popChar();return parseInt(p,10)},t.prototype.patternCharacter=function(){var p=this.popChar();switch(p){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:s(p)}}},t.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},t.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},t.prototype.isDigit=function(){return i.test(this.peekChar(0))},t.prototype.isClassAtom=function(p){switch(p===void 0&&(p=0),this.peekChar(p)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},t.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},t.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},t.prototype.isQuantifier=function(){var p=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(p)}},t.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.parseHexDigits=function(p){for(var g="",x=0;x<p;x++){var y=this.popChar();if(r.test(y)===!1)throw Error("Expecting a HexDecimal digits");g+=y}var b=parseInt(g,16);return{type:"Character",value:b}},t.prototype.peekChar=function(p){return p===void 0&&(p=0),this.input[this.idx+p]},t.prototype.popChar=function(){var p=this.peekChar(0);return this.consumeChar(),p},t.prototype.consumeChar=function(p){if(p!==void 0&&this.input[this.idx]!==p)throw Error("Expected: '"+p+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},t.prototype.loc=function(p){return{begin:p,end:this.idx}};var r=/[0-9a-fA-F]/,i=/[0-9]/,o=/[1-9]/;function s(p){return p.charCodeAt(0)}function a(p,g){p.length!==void 0?p.forEach(function(x){g.push(x)}):g.push(p)}function c(p,g){if(p[g]===!0)throw"duplicate flag "+g;p[g]=!0}function l(p){if(p===void 0)throw Error("Internal Error - Should never get here!")}function u(){throw Error("Internal Error - Should never get here!")}var h,f=[];for(h=s("0");h<=s("9");h++)f.push(h);var d=[s("_")].concat(f);for(h=s("a");h<=s("z");h++)d.push(h);for(h=s("A");h<=s("Z");h++)d.push(h);var m=[s(" "),s("\f"),s(`
`),s("\r"),s("	"),s("\v"),s("	"),s("\xA0"),s("\u1680"),s("\u2000"),s("\u2001"),s("\u2002"),s("\u2003"),s("\u2004"),s("\u2005"),s("\u2006"),s("\u2007"),s("\u2008"),s("\u2009"),s("\u200A"),s("\u2028"),s("\u2029"),s("\u202F"),s("\u205F"),s("\u3000"),s("\uFEFF")];function v(){}return v.prototype.visitChildren=function(p){for(var g in p){var x=p[g];p.hasOwnProperty(g)&&(x.type!==void 0?this.visit(x):Array.isArray(x)&&x.forEach(function(y){this.visit(y)},this))}},v.prototype.visit=function(p){switch(p.type){case"Pattern":this.visitPattern(p);break;case"Flags":this.visitFlags(p);break;case"Disjunction":this.visitDisjunction(p);break;case"Alternative":this.visitAlternative(p);break;case"StartAnchor":this.visitStartAnchor(p);break;case"EndAnchor":this.visitEndAnchor(p);break;case"WordBoundary":this.visitWordBoundary(p);break;case"NonWordBoundary":this.visitNonWordBoundary(p);break;case"Lookahead":this.visitLookahead(p);break;case"NegativeLookahead":this.visitNegativeLookahead(p);break;case"Character":this.visitCharacter(p);break;case"Set":this.visitSet(p);break;case"Group":this.visitGroup(p);break;case"GroupBackReference":this.visitGroupBackReference(p);break;case"Quantifier":this.visitQuantifier(p);break}this.visitChildren(p)},v.prototype.visitPattern=function(p){},v.prototype.visitFlags=function(p){},v.prototype.visitDisjunction=function(p){},v.prototype.visitAlternative=function(p){},v.prototype.visitStartAnchor=function(p){},v.prototype.visitEndAnchor=function(p){},v.prototype.visitWordBoundary=function(p){},v.prototype.visitNonWordBoundary=function(p){},v.prototype.visitLookahead=function(p){},v.prototype.visitNegativeLookahead=function(p){},v.prototype.visitCharacter=function(p){},v.prototype.visitSet=function(p){},v.prototype.visitGroup=function(p){},v.prototype.visitGroupBackReference=function(p){},v.prototype.visitQuantifier=function(p){},{RegExpParser:t,BaseRegExpVisitor:v,VERSION:"0.5.0"}})}),Jb=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clearRegExpParserCache=n.getRegExpAst=void 0;var e=Zb(),t={},r=new e.RegExpParser;function i(s){var a=s.toString();if(t.hasOwnProperty(a))return t[a];var c=r.pattern(a);return t[a]=c,c}n.getRegExpAst=i;function o(){t={}}n.clearRegExpParserCache=o}),Ck=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var v=function(p,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(x[b]=y[b])},v(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");v(p,g);function x(){this.constructor=p}p.prototype=g===null?Object.create(g):(x.prototype=g.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.canMatchCharCode=n.firstCharOptimizedIndices=n.getOptimizedStartCodesIndices=n.failedOptimizationPrefixMsg=void 0;var t=Zb(),r=Sn(),i=Jb(),o=dM(),s="Complement Sets are not supported for first char optimization";n.failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function a(v,p){p===void 0&&(p=!1);try{var g=i.getRegExpAst(v),x=c(g.value,{},g.flags.ignoreCase);return x}catch(b){if(b.message===s)p&&r.PRINT_WARNING(""+n.failedOptimizationPrefixMsg+("	Unable to optimize: < "+v.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var y="";p&&(y=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),r.PRINT_ERROR(n.failedOptimizationPrefixMsg+`
`+("	Failed parsing: < "+v.toString()+` >
`)+("	Using the regexp-to-ast library version: "+t.VERSION+`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+y)}}return[]}n.getOptimizedStartCodesIndices=a;function c(v,p,g){switch(v.type){case"Disjunction":for(var x=0;x<v.value.length;x++)c(v.value[x],p,g);break;case"Alternative":for(var y=v.value,x=0;x<y.length;x++){var b=y[x];switch(b.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var S=b;switch(S.type){case"Character":l(S.value,p,g);break;case"Set":if(S.complement===!0)throw Error(s);r.forEach(S.value,function(A){if(typeof A=="number")l(A,p,g);else{var w=A;if(g===!0)for(var T=w.from;T<=w.to;T++)l(T,p,g);else{for(var T=w.from;T<=w.to&&T<o.minOptimizationVal;T++)l(T,p,g);if(w.to>=o.minOptimizationVal)for(var D=w.from>=o.minOptimizationVal?w.from:o.minOptimizationVal,N=w.to,P=o.charCodeToOptimizedIndex(D),E=o.charCodeToOptimizedIndex(N),U=P;U<=E;U++)p[U]=U}}});break;case"Group":c(S.value,p,g);break;default:throw Error("Non Exhaustive Match")}var _=S.quantifier!==void 0&&S.quantifier.atLeast===0;if(S.type==="Group"&&f(S)===!1||S.type!=="Group"&&_===!1)break}break;default:throw Error("non exhaustive match!")}return r.values(p)}n.firstCharOptimizedIndices=c;function l(v,p,g){var x=o.charCodeToOptimizedIndex(v);p[x]=x,g===!0&&u(v,p)}function u(v,p){var g=String.fromCharCode(v),x=g.toUpperCase();if(x!==g){var y=o.charCodeToOptimizedIndex(x.charCodeAt(0));p[y]=y}else{var b=g.toLowerCase();if(b!==g){var y=o.charCodeToOptimizedIndex(b.charCodeAt(0));p[y]=y}}}function h(v,p){return r.find(v.value,function(g){if(typeof g=="number")return r.contains(p,g);var x=g;return r.find(p,function(y){return x.from<=y&&y<=x.to})!==void 0})}function f(v){return v.quantifier&&v.quantifier.atLeast===0?!0:v.value?r.isArray(v.value)?r.every(v.value,f):f(v.value):!1}var d=function(v){e(p,v);function p(g){var x=v.call(this)||this;return x.targetCharCodes=g,x.found=!1,x}return p.prototype.visitChildren=function(g){if(this.found!==!0){switch(g.type){case"Lookahead":this.visitLookahead(g);return;case"NegativeLookahead":this.visitNegativeLookahead(g);return}v.prototype.visitChildren.call(this,g)}},p.prototype.visitCharacter=function(g){r.contains(this.targetCharCodes,g.value)&&(this.found=!0)},p.prototype.visitSet=function(g){g.complement?h(g,this.targetCharCodes)===void 0&&(this.found=!0):h(g,this.targetCharCodes)!==void 0&&(this.found=!0)},p}(t.BaseRegExpVisitor);function m(v,p){if(p instanceof RegExp){var g=i.getRegExpAst(p),x=new d(v);return x.visit(g),x.found}else return r.find(p,function(y){return r.contains(v,y.charCodeAt(0))})!==void 0}n.canMatchCharCode=m}),dM=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var C=function(R,I){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,Z){j.__proto__=Z}||function(j,Z){for(var J in Z)Object.prototype.hasOwnProperty.call(Z,J)&&(j[J]=Z[J])},C(R,I)};return function(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");C(R,I);function j(){this.constructor=R}R.prototype=I===null?Object.create(I):(j.prototype=I.prototype,new j)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.charCodeToOptimizedIndex=n.minOptimizationVal=n.buildLineBreakIssueMessage=n.LineTerminatorOptimizedTester=n.isShortPattern=n.isCustomPattern=n.cloneEmptyGroups=n.performWarningRuntimeChecks=n.performRuntimeChecks=n.addStickyFlag=n.addStartOfInput=n.findUnreachablePatterns=n.findModesThatDoNotExist=n.findInvalidGroupType=n.findDuplicatePatterns=n.findUnsupportedFlags=n.findStartOfInputAnchor=n.findEmptyMatchRegExps=n.findEndOfInputAnchor=n.findInvalidPatterns=n.findMissingPatterns=n.validatePatterns=n.analyzeTokenTypes=n.enableSticky=n.disableSticky=n.SUPPORT_STICKY=n.MODES=n.DEFAULT_MODE=void 0;var t=Zb(),r=Xv(),i=Sn(),o=Ck(),s=Jb(),a="PATTERN";n.DEFAULT_MODE="defaultMode",n.MODES="modes",n.SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function c(){n.SUPPORT_STICKY=!1}n.disableSticky=c;function l(){n.SUPPORT_STICKY=!0}n.enableSticky=l;function u(C,R){R=i.defaults(R,{useSticky:n.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(se,H){return H()}});var I=R.tracer;I("initCharCodeToOptimizedIndexMap",function(){L()});var j;I("Reject Lexer.NA",function(){j=i.reject(C,function(se){return se[a]===r.Lexer.NA})});var Z=!1,J;I("Transform Patterns",function(){Z=!1,J=i.map(j,function(se){var H=se[a];if(i.isRegExp(H)){var re=H.source;return re.length===1&&re!=="^"&&re!=="$"&&re!=="."&&!H.ignoreCase?re:re.length===2&&re[0]==="\\"&&!i.contains(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],re[1])?re[1]:R.useSticky?N(H):D(H)}else{if(i.isFunction(H))return Z=!0,{exec:H};if(i.has(H,"exec"))return Z=!0,H;if(typeof H=="string"){if(H.length===1)return H;var pe=H.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),ee=new RegExp(pe);return R.useSticky?N(ee):D(ee)}else throw Error("non exhaustive match")}})});var W,K,le,ue,de;I("misc mapping",function(){W=i.map(j,function(se){return se.tokenTypeIdx}),K=i.map(j,function(se){var H=se.GROUP;if(H!==r.Lexer.SKIPPED){if(i.isString(H))return H;if(i.isUndefined(H))return!1;throw Error("non exhaustive match")}}),le=i.map(j,function(se){var H=se.LONGER_ALT;if(H){var re=i.indexOf(j,H);return re}}),ue=i.map(j,function(se){return se.PUSH_MODE}),de=i.map(j,function(se){return i.has(se,"POP_MODE")})});var Te;I("Line Terminator Handling",function(){var se=ne(R.lineTerminatorCharacters);Te=i.map(j,function(H){return!1}),R.positionTracking!=="onlyOffset"&&(Te=i.map(j,function(H){if(i.has(H,"LINE_BREAKS"))return H.LINE_BREAKS;if(O(H,se)===!1)return o.canMatchCharCode(se,H.PATTERN)}))});var X,F,G,ge;I("Misc Mapping #2",function(){X=i.map(j,k),F=i.map(J,B),G=i.reduce(j,function(se,H){var re=H.GROUP;return i.isString(re)&&re!==r.Lexer.SKIPPED&&(se[re]=[]),se},{}),ge=i.map(J,function(se,H){return{pattern:J[H],longerAlt:le[H],canLineTerminator:Te[H],isCustom:X[H],short:F[H],group:K[H],push:ue[H],pop:de[H],tokenTypeIdx:W[H],tokenType:j[H]}})});var we=!0,Ee=[];return R.safeMode||I("First Char Optimization",function(){Ee=i.reduce(j,function(se,H,re){if(typeof H.PATTERN=="string"){var pe=H.PATTERN.charCodeAt(0),ee=fe(pe);ae(se,ee,ge[re])}else if(i.isArray(H.START_CHARS_HINT)){var me;i.forEach(H.START_CHARS_HINT,function(ve){var Se=typeof ve=="string"?ve.charCodeAt(0):ve,Ie=fe(Se);me!==Ie&&(me=Ie,ae(se,Ie,ge[re]))})}else if(i.isRegExp(H.PATTERN))if(H.PATTERN.unicode)we=!1,R.ensureOptimizations&&i.PRINT_ERROR(""+o.failedOptimizationPrefixMsg+("	Unable to analyze < "+H.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var xe=o.getOptimizedStartCodesIndices(H.PATTERN,R.ensureOptimizations);i.isEmpty(xe)&&(we=!1),i.forEach(xe,function(ve){ae(se,ve,ge[re])})}else R.ensureOptimizations&&i.PRINT_ERROR(""+o.failedOptimizationPrefixMsg+("	TokenType: <"+H.name+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),we=!1;return se},[])}),I("ArrayPacking",function(){Ee=i.packArray(Ee)}),{emptyGroups:G,patternIdxToConfig:ge,charCodeToPatternIdxToConfig:Ee,hasCustom:Z,canBeOptimized:we}}n.analyzeTokenTypes=u;function h(C,R){var I=[],j=d(C);I=I.concat(j.errors);var Z=m(j.valid),J=Z.valid;return I=I.concat(Z.errors),I=I.concat(f(J)),I=I.concat(_(J)),I=I.concat(M(J,R)),I=I.concat(A(J)),I}n.validatePatterns=h;function f(C){var R=[],I=i.filter(C,function(j){return i.isRegExp(j[a])});return R=R.concat(p(I)),R=R.concat(y(I)),R=R.concat(b(I)),R=R.concat(S(I)),R=R.concat(g(I)),R}function d(C){var R=i.filter(C,function(Z){return!i.has(Z,a)}),I=i.map(R,function(Z){return{message:"Token Type: ->"+Z.name+"<- missing static 'PATTERN' property",type:r.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[Z]}}),j=i.difference(C,R);return{errors:I,valid:j}}n.findMissingPatterns=d;function m(C){var R=i.filter(C,function(Z){var J=Z[a];return!i.isRegExp(J)&&!i.isFunction(J)&&!i.has(J,"exec")&&!i.isString(J)}),I=i.map(R,function(Z){return{message:"Token Type: ->"+Z.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:r.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[Z]}}),j=i.difference(C,R);return{errors:I,valid:j}}n.findInvalidPatterns=m;var v=/[^\\][\$]/;function p(C){var R=function(Z){e(J,Z);function J(){var W=Z!==null&&Z.apply(this,arguments)||this;return W.found=!1,W}return J.prototype.visitEndAnchor=function(W){this.found=!0},J}(t.BaseRegExpVisitor),I=i.filter(C,function(Z){var J=Z[a];try{var W=s.getRegExpAst(J),K=new R;return K.visit(W),K.found}catch{return v.test(J.source)}}),j=i.map(I,function(Z){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+Z.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:r.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[Z]}});return j}n.findEndOfInputAnchor=p;function g(C){var R=i.filter(C,function(j){var Z=j[a];return Z.test("")}),I=i.map(R,function(j){return{message:"Token Type: ->"+j.name+"<- static 'PATTERN' must not match an empty string",type:r.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[j]}});return I}n.findEmptyMatchRegExps=g;var x=/[^\\[][\^]|^\^/;function y(C){var R=function(Z){e(J,Z);function J(){var W=Z!==null&&Z.apply(this,arguments)||this;return W.found=!1,W}return J.prototype.visitStartAnchor=function(W){this.found=!0},J}(t.BaseRegExpVisitor),I=i.filter(C,function(Z){var J=Z[a];try{var W=s.getRegExpAst(J),K=new R;return K.visit(W),K.found}catch{return x.test(J.source)}}),j=i.map(I,function(Z){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+Z.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:r.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[Z]}});return j}n.findStartOfInputAnchor=y;function b(C){var R=i.filter(C,function(j){var Z=j[a];return Z instanceof RegExp&&(Z.multiline||Z.global)}),I=i.map(R,function(j){return{message:"Token Type: ->"+j.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:r.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[j]}});return I}n.findUnsupportedFlags=b;function S(C){var R=[],I=i.map(C,function(J){return i.reduce(C,function(W,K){return J.PATTERN.source===K.PATTERN.source&&!i.contains(R,K)&&K.PATTERN!==r.Lexer.NA&&(R.push(K),W.push(K)),W},[])});I=i.compact(I);var j=i.filter(I,function(J){return J.length>1}),Z=i.map(j,function(J){var W=i.map(J,function(le){return le.name}),K=i.first(J).PATTERN;return{message:"The same RegExp pattern ->"+K+"<-"+("has been used in all of the following Token Types: "+W.join(", ")+" <-"),type:r.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:J}});return Z}n.findDuplicatePatterns=S;function _(C){var R=i.filter(C,function(j){if(!i.has(j,"GROUP"))return!1;var Z=j.GROUP;return Z!==r.Lexer.SKIPPED&&Z!==r.Lexer.NA&&!i.isString(Z)}),I=i.map(R,function(j){return{message:"Token Type: ->"+j.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:r.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[j]}});return I}n.findInvalidGroupType=_;function M(C,R){var I=i.filter(C,function(Z){return Z.PUSH_MODE!==void 0&&!i.contains(R,Z.PUSH_MODE)}),j=i.map(I,function(Z){var J="Token Type: ->"+Z.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+Z.PUSH_MODE+"<-which does not exist";return{message:J,type:r.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[Z]}});return j}n.findModesThatDoNotExist=M;function A(C){var R=[],I=i.reduce(C,function(j,Z,J){var W=Z.PATTERN;return W===r.Lexer.NA||(i.isString(W)?j.push({str:W,idx:J,tokenType:Z}):i.isRegExp(W)&&T(W)&&j.push({str:W.source,idx:J,tokenType:Z})),j},[]);return i.forEach(C,function(j,Z){i.forEach(I,function(J){var W=J.str,K=J.idx,le=J.tokenType;if(Z<K&&w(W,j.PATTERN)){var ue="Token: ->"+le.name+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+j.name+"<-")+`in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;R.push({message:ue,type:r.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[j,le]})}})}),R}n.findUnreachablePatterns=A;function w(C,R){if(i.isRegExp(R)){var I=R.exec(C);return I!==null&&I.index===0}else{if(i.isFunction(R))return R(C,0,[],{});if(i.has(R,"exec"))return R.exec(C,0,[],{});if(typeof R=="string")return R===C;throw Error("non exhaustive match")}}function T(C){var R=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return i.find(R,function(I){return C.source.indexOf(I)!==-1})===void 0}function D(C){var R=C.ignoreCase?"i":"";return new RegExp("^(?:"+C.source+")",R)}n.addStartOfInput=D;function N(C){var R=C.ignoreCase?"iy":"y";return new RegExp(""+C.source,R)}n.addStickyFlag=N;function P(C,R,I){var j=[];return i.has(C,n.DEFAULT_MODE)||j.push({message:"A MultiMode Lexer cannot be initialized without a <"+n.DEFAULT_MODE+`> property in its definition
`,type:r.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),i.has(C,n.MODES)||j.push({message:"A MultiMode Lexer cannot be initialized without a <"+n.MODES+`> property in its definition
`,type:r.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),i.has(C,n.MODES)&&i.has(C,n.DEFAULT_MODE)&&!i.has(C.modes,C.defaultMode)&&j.push({message:"A MultiMode Lexer cannot be initialized with a "+n.DEFAULT_MODE+": <"+C.defaultMode+`>which does not exist
`,type:r.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),i.has(C,n.MODES)&&i.forEach(C.modes,function(Z,J){i.forEach(Z,function(W,K){i.isUndefined(W)&&j.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+J+"> at index: <"+K+`>
`),type:r.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),j}n.performRuntimeChecks=P;function E(C,R,I){var j=[],Z=!1,J=i.compact(i.flatten(i.mapValues(C.modes,function(le){return le}))),W=i.reject(J,function(le){return le[a]===r.Lexer.NA}),K=ne(I);return R&&i.forEach(W,function(le){var ue=O(le,K);if(ue!==!1){var de=q(le,ue),Te={message:de,type:ue.issue,tokenType:le};j.push(Te)}else i.has(le,"LINE_BREAKS")?le.LINE_BREAKS===!0&&(Z=!0):o.canMatchCharCode(K,le.PATTERN)&&(Z=!0)}),R&&!Z&&j.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS
	for details.`,type:r.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),j}n.performWarningRuntimeChecks=E;function U(C){var R={},I=i.keys(C);return i.forEach(I,function(j){var Z=C[j];if(i.isArray(Z))R[j]=[];else throw Error("non exhaustive match")}),R}n.cloneEmptyGroups=U;function k(C){var R=C.PATTERN;if(i.isRegExp(R))return!1;if(i.isFunction(R)||i.has(R,"exec"))return!0;if(i.isString(R))return!1;throw Error("non exhaustive match")}n.isCustomPattern=k;function B(C){return i.isString(C)&&C.length===1?C.charCodeAt(0):!1}n.isShortPattern=B,n.LineTerminatorOptimizedTester={test:function(C){for(var R=C.length,I=this.lastIndex;I<R;I++){var j=C.charCodeAt(I);if(j===10)return this.lastIndex=I+1,!0;if(j===13)return C.charCodeAt(I+1)===10?this.lastIndex=I+2:this.lastIndex=I+1,!0}return!1},lastIndex:0};function O(C,R){if(i.has(C,"LINE_BREAKS"))return!1;if(i.isRegExp(C.PATTERN)){try{o.canMatchCharCode(R,C.PATTERN)}catch(I){return{issue:r.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:I.message}}return!1}else{if(i.isString(C.PATTERN))return!1;if(k(C))return{issue:r.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function q(C,R){if(R.issue===r.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("	The problem is in the <"+C.name+`> Token Type
`)+("	 Root cause: "+R.errMsg+`.
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(R.issue===r.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("	The problem is in the <"+C.name+`> Token Type
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}n.buildLineBreakIssueMessage=q;function ne(C){var R=i.map(C,function(I){return i.isString(I)&&I.length>0?I.charCodeAt(0):I});return R}function ae(C,R,I){C[R]===void 0?C[R]=[I]:C[R].push(I)}n.minOptimizationVal=256;var ye=[];function fe(C){return C<n.minOptimizationVal?C:ye[C]}n.charCodeToOptimizedIndex=fe;function L(){if(i.isEmpty(ye)){ye=new Array(65536);for(var C=0;C<65536;C++)ye[C]=C>255?255+~~(C/255):C}}}),tp=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isTokenType=n.hasExtendingTokensTypesMapProperty=n.hasExtendingTokensTypesProperty=n.hasCategoriesProperty=n.hasShortKeyProperty=n.singleAssignCategoriesToksMap=n.assignCategoriesMapProp=n.assignCategoriesTokensProp=n.assignTokenDefaultProps=n.expandCategories=n.augmentTokenTypes=n.tokenIdxToClass=n.tokenShortNameIdx=n.tokenStructuredMatcherNoCategories=n.tokenStructuredMatcher=void 0;var e=Sn();function t(v,p){var g=v.tokenTypeIdx;return g===p.tokenTypeIdx?!0:p.isParent===!0&&p.categoryMatchesMap[g]===!0}n.tokenStructuredMatcher=t;function r(v,p){return v.tokenTypeIdx===p.tokenTypeIdx}n.tokenStructuredMatcherNoCategories=r,n.tokenShortNameIdx=1,n.tokenIdxToClass={};function i(v){var p=o(v);s(p),c(p),a(p),e.forEach(p,function(g){g.isParent=g.categoryMatches.length>0})}n.augmentTokenTypes=i;function o(v){for(var p=e.cloneArr(v),g=v,x=!0;x;){g=e.compact(e.flatten(e.map(g,function(b){return b.CATEGORIES})));var y=e.difference(g,p);p=p.concat(y),e.isEmpty(y)?x=!1:g=y}return p}n.expandCategories=o;function s(v){e.forEach(v,function(p){u(p)||(n.tokenIdxToClass[n.tokenShortNameIdx]=p,p.tokenTypeIdx=n.tokenShortNameIdx++),h(p)&&!e.isArray(p.CATEGORIES)&&(p.CATEGORIES=[p.CATEGORIES]),h(p)||(p.CATEGORIES=[]),f(p)||(p.categoryMatches=[]),d(p)||(p.categoryMatchesMap={})})}n.assignTokenDefaultProps=s;function a(v){e.forEach(v,function(p){p.categoryMatches=[],e.forEach(p.categoryMatchesMap,function(g,x){p.categoryMatches.push(n.tokenIdxToClass[x].tokenTypeIdx)})})}n.assignCategoriesTokensProp=a;function c(v){e.forEach(v,function(p){l([],p)})}n.assignCategoriesMapProp=c;function l(v,p){e.forEach(v,function(g){p.categoryMatchesMap[g.tokenTypeIdx]=!0}),e.forEach(p.CATEGORIES,function(g){var x=v.concat(p);e.contains(x,g)||l(x,g)})}n.singleAssignCategoriesToksMap=l;function u(v){return e.has(v,"tokenTypeIdx")}n.hasShortKeyProperty=u;function h(v){return e.has(v,"CATEGORIES")}n.hasCategoriesProperty=h;function f(v){return e.has(v,"categoryMatches")}n.hasExtendingTokensTypesProperty=f;function d(v){return e.has(v,"categoryMatchesMap")}n.hasExtendingTokensTypesMapProperty=d;function m(v){return e.has(v,"tokenTypeIdx")}n.isTokenType=m}),pM=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultLexerErrorProvider=void 0,n.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(e){return"Unable to pop Lexer Mode after encountering Token ->"+e.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(e,t,r,i,o){return"unexpected character: ->"+e.charAt(t)+"<- at offset: "+t+","+(" skipped "+r+" characters.")}}}),Xv=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Lexer=n.LexerDefinitionErrorType=void 0;var e=dM(),t=Sn(),r=tp(),i=pM(),o=Jb(),s;(function(l){l[l.MISSING_PATTERN=0]="MISSING_PATTERN",l[l.INVALID_PATTERN=1]="INVALID_PATTERN",l[l.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",l[l.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",l[l.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",l[l.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",l[l.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",l[l.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",l[l.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",l[l.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",l[l.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",l[l.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",l[l.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",l[l.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",l[l.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",l[l.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",l[l.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(s=n.LexerDefinitionErrorType||(n.LexerDefinitionErrorType={}));var a={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:i.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(a);var c=function(){function l(u,h){var f=this;if(h===void 0&&(h=a),this.lexerDefinition=u,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof h=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=t.merge(a,h);var d=this.config.traceInitPerf;d===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof d=="number"&&(this.traceInitMaxIdent=d,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var m,v=!0;f.TRACE_INIT("Lexer Config handling",function(){if(f.config.lineTerminatorsPattern===a.lineTerminatorsPattern)f.config.lineTerminatorsPattern=e.LineTerminatorOptimizedTester;else if(f.config.lineTerminatorCharacters===a.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(h.safeMode&&h.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');f.trackStartLines=/full|onlyStart/i.test(f.config.positionTracking),f.trackEndLines=/full/i.test(f.config.positionTracking),t.isArray(u)?(m={modes:{}},m.modes[e.DEFAULT_MODE]=t.cloneArr(u),m[e.DEFAULT_MODE]=e.DEFAULT_MODE):(v=!1,m=t.cloneObj(u))}),f.config.skipValidations===!1&&(f.TRACE_INIT("performRuntimeChecks",function(){f.lexerDefinitionErrors=f.lexerDefinitionErrors.concat(e.performRuntimeChecks(m,f.trackStartLines,f.config.lineTerminatorCharacters))}),f.TRACE_INIT("performWarningRuntimeChecks",function(){f.lexerDefinitionWarning=f.lexerDefinitionWarning.concat(e.performWarningRuntimeChecks(m,f.trackStartLines,f.config.lineTerminatorCharacters))})),m.modes=m.modes?m.modes:{},t.forEach(m.modes,function(y,b){m.modes[b]=t.reject(y,function(S){return t.isUndefined(S)})});var p=t.keys(m.modes);if(t.forEach(m.modes,function(y,b){f.TRACE_INIT("Mode: <"+b+"> processing",function(){if(f.modes.push(b),f.config.skipValidations===!1&&f.TRACE_INIT("validatePatterns",function(){f.lexerDefinitionErrors=f.lexerDefinitionErrors.concat(e.validatePatterns(y,p))}),t.isEmpty(f.lexerDefinitionErrors)){r.augmentTokenTypes(y);var S;f.TRACE_INIT("analyzeTokenTypes",function(){S=e.analyzeTokenTypes(y,{lineTerminatorCharacters:f.config.lineTerminatorCharacters,positionTracking:h.positionTracking,ensureOptimizations:h.ensureOptimizations,safeMode:h.safeMode,tracer:f.TRACE_INIT.bind(f)})}),f.patternIdxToConfig[b]=S.patternIdxToConfig,f.charCodeToPatternIdxToConfig[b]=S.charCodeToPatternIdxToConfig,f.emptyGroups=t.merge(f.emptyGroups,S.emptyGroups),f.hasCustom=S.hasCustom||f.hasCustom,f.canModeBeOptimized[b]=S.canBeOptimized}})}),f.defaultMode=m.defaultMode,!t.isEmpty(f.lexerDefinitionErrors)&&!f.config.deferDefinitionErrorsHandling){var g=t.map(f.lexerDefinitionErrors,function(y){return y.message}),x=g.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+x)}t.forEach(f.lexerDefinitionWarning,function(y){t.PRINT_WARNING(y.message)}),f.TRACE_INIT("Choosing sub-methods implementations",function(){if(e.SUPPORT_STICKY?(f.chopInput=t.IDENTITY,f.match=f.matchWithTest):(f.updateLastIndex=t.NOOP,f.match=f.matchWithExec),v&&(f.handleModes=t.NOOP),f.trackStartLines===!1&&(f.computeNewColumn=t.IDENTITY),f.trackEndLines===!1&&(f.updateTokenEndLineColumnLocation=t.NOOP),/full/i.test(f.config.positionTracking))f.createTokenInstance=f.createFullToken;else if(/onlyStart/i.test(f.config.positionTracking))f.createTokenInstance=f.createStartOnlyToken;else if(/onlyOffset/i.test(f.config.positionTracking))f.createTokenInstance=f.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+f.config.positionTracking+'"');f.hasCustom?(f.addToken=f.addTokenUsingPush,f.handlePayload=f.handlePayloadWithCustom):(f.addToken=f.addTokenUsingMemberAccess,f.handlePayload=f.handlePayloadNoCustom)}),f.TRACE_INIT("Failed Optimization Warnings",function(){var y=t.reduce(f.canModeBeOptimized,function(b,S,_){return S===!1&&b.push(_),b},[]);if(h.ensureOptimizations&&!t.isEmpty(y))throw Error("Lexer Modes: < "+y.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),f.TRACE_INIT("clearRegExpParserCache",function(){o.clearRegExpParserCache()}),f.TRACE_INIT("toFastProperties",function(){t.toFastProperties(f)})})}return l.prototype.tokenize=function(u,h){if(h===void 0&&(h=this.defaultMode),!t.isEmpty(this.lexerDefinitionErrors)){var f=t.map(this.lexerDefinitionErrors,function(v){return v.message}),d=f.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+d)}var m=this.tokenizeInternal(u,h);return m},l.prototype.tokenizeInternal=function(u,h){var f=this,d,m,v,p,g,x,y,b,S,_,M,A,w,T,D,N=u,P=N.length,E=0,U=0,k=this.hasCustom?0:Math.floor(u.length/10),B=new Array(k),O=[],q=this.trackStartLines?1:void 0,ne=this.trackStartLines?1:void 0,ae=e.cloneEmptyGroups(this.emptyGroups),ye=this.trackStartLines,fe=this.config.lineTerminatorsPattern,L=0,C=[],R=[],I=[],j=[];Object.freeze(j);var Z=void 0;function J(){return C}function W(ve){var Se=e.charCodeToOptimizedIndex(ve),Ie=R[Se];return Ie===void 0?j:Ie}var K=function(ve){if(I.length===1&&ve.tokenType.PUSH_MODE===void 0){var Se=f.config.errorMessageProvider.buildUnableToPopLexerModeMessage(ve);O.push({offset:ve.startOffset,line:ve.startLine!==void 0?ve.startLine:void 0,column:ve.startColumn!==void 0?ve.startColumn:void 0,length:ve.image.length,message:Se})}else{I.pop();var Ie=t.last(I);C=f.patternIdxToConfig[Ie],R=f.charCodeToPatternIdxToConfig[Ie],L=C.length;var Le=f.canModeBeOptimized[Ie]&&f.config.safeMode===!1;R&&Le?Z=W:Z=J}};function le(ve){I.push(ve),R=this.charCodeToPatternIdxToConfig[ve],C=this.patternIdxToConfig[ve],L=C.length,L=C.length;var Se=this.canModeBeOptimized[ve]&&this.config.safeMode===!1;R&&Se?Z=W:Z=J}le.call(this,h);for(var ue;E<P;){g=null;var de=N.charCodeAt(E),Te=Z(de),X=Te.length;for(d=0;d<X;d++){ue=Te[d];var F=ue.pattern;x=null;var G=ue.short;if(G!==!1?de===G&&(g=F):ue.isCustom===!0?(D=F.exec(N,E,B,ae),D!==null?(g=D[0],D.payload!==void 0&&(x=D.payload)):g=null):(this.updateLastIndex(F,E),g=this.match(F,u,E)),g!==null){if(p=ue.longerAlt,p!==void 0){var ge=C[p],we=ge.pattern;y=null,ge.isCustom===!0?(D=we.exec(N,E,B,ae),D!==null?(v=D[0],D.payload!==void 0&&(y=D.payload)):v=null):(this.updateLastIndex(we,E),v=this.match(we,u,E)),v&&v.length>g.length&&(g=v,x=y,ue=ge)}break}}if(g!==null){if(b=g.length,S=ue.group,S!==void 0&&(_=ue.tokenTypeIdx,M=this.createTokenInstance(g,E,_,ue.tokenType,q,ne,b),this.handlePayload(M,x),S===!1?U=this.addToken(B,U,M):ae[S].push(M)),u=this.chopInput(u,b),E=E+b,ne=this.computeNewColumn(ne,b),ye===!0&&ue.canLineTerminator===!0){var Ee=0,se=void 0,H=void 0;fe.lastIndex=0;do se=fe.test(g),se===!0&&(H=fe.lastIndex-1,Ee++);while(se===!0);Ee!==0&&(q=q+Ee,ne=b-H,this.updateTokenEndLineColumnLocation(M,S,H,Ee,q,ne,b))}this.handleModes(ue,K,le,M)}else{for(var re=E,pe=q,ee=ne,me=!1;!me&&E<P;)for(w=N.charCodeAt(E),u=this.chopInput(u,1),E++,m=0;m<L;m++){var xe=C[m],F=xe.pattern,G=xe.short;if(G!==!1?N.charCodeAt(E)===G&&(me=!0):xe.isCustom===!0?me=F.exec(N,E,B,ae)!==null:(this.updateLastIndex(F,E),me=F.exec(u)!==null),me===!0)break}A=E-re,T=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(N,re,A,pe,ee),O.push({offset:re,line:pe,column:ee,length:A,message:T})}}return this.hasCustom||(B.length=U),{tokens:B,groups:ae,errors:O}},l.prototype.handleModes=function(u,h,f,d){if(u.pop===!0){var m=u.push;h(d),m!==void 0&&f.call(this,m)}else u.push!==void 0&&f.call(this,u.push)},l.prototype.chopInput=function(u,h){return u.substring(h)},l.prototype.updateLastIndex=function(u,h){u.lastIndex=h},l.prototype.updateTokenEndLineColumnLocation=function(u,h,f,d,m,v,p){var g,x;h!==void 0&&(g=f===p-1,x=g?-1:0,d===1&&g===!0||(u.endLine=m+x,u.endColumn=v-1+-x))},l.prototype.computeNewColumn=function(u,h){return u+h},l.prototype.createTokenInstance=function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return null},l.prototype.createOffsetOnlyToken=function(u,h,f,d){return{image:u,startOffset:h,tokenTypeIdx:f,tokenType:d}},l.prototype.createStartOnlyToken=function(u,h,f,d,m,v){return{image:u,startOffset:h,startLine:m,startColumn:v,tokenTypeIdx:f,tokenType:d}},l.prototype.createFullToken=function(u,h,f,d,m,v,p){return{image:u,startOffset:h,endOffset:h+p-1,startLine:m,endLine:m,startColumn:v,endColumn:v+p-1,tokenTypeIdx:f,tokenType:d}},l.prototype.addToken=function(u,h,f){return 666},l.prototype.addTokenUsingPush=function(u,h,f){return u.push(f),h},l.prototype.addTokenUsingMemberAccess=function(u,h,f){return u[h]=f,h++,h},l.prototype.handlePayload=function(u,h){},l.prototype.handlePayloadNoCustom=function(u,h){},l.prototype.handlePayloadWithCustom=function(u,h){h!==null&&(u.payload=h)},l.prototype.match=function(u,h,f){return null},l.prototype.matchWithTest=function(u,h,f){var d=u.test(h);return d===!0?h.substring(f,u.lastIndex):null},l.prototype.matchWithExec=function(u,h){var f=u.exec(h);return f!==null?f[0]:f},l.prototype.TRACE_INIT=function(u,h){if(this.traceInitPerf===!0){this.traceInitIndent++;var f=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(f+"--> <"+u+">");var d=t.timer(h),m=d.time,v=d.value,p=m>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&p(f+"<-- <"+u+"> time: "+m+"ms"),this.traceInitIndent--,v}else return h()},l.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",l.NA=/NOT_APPLICABLE/,l}();n.Lexer=c}),Sc=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tokenMatcher=n.createTokenInstance=n.EOF=n.createToken=n.hasTokenLabel=n.tokenName=n.tokenLabel=void 0;var e=Sn(),t=Xv(),r=tp();function i(b){return s(b)?b.LABEL:b.name}n.tokenLabel=i;function o(b){return b.name}n.tokenName=o;function s(b){return e.isString(b.LABEL)&&b.LABEL!==""}n.hasTokenLabel=s;var a="parent",c="categories",l="label",u="group",h="push_mode",f="pop_mode",d="longer_alt",m="line_breaks",v="start_chars_hint";function p(b){return g(b)}n.createToken=p;function g(b){var S=b.pattern,_={};if(_.name=b.name,e.isUndefined(S)||(_.PATTERN=S),e.has(b,a))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return e.has(b,c)&&(_.CATEGORIES=b[c]),r.augmentTokenTypes([_]),e.has(b,l)&&(_.LABEL=b[l]),e.has(b,u)&&(_.GROUP=b[u]),e.has(b,f)&&(_.POP_MODE=b[f]),e.has(b,h)&&(_.PUSH_MODE=b[h]),e.has(b,d)&&(_.LONGER_ALT=b[d]),e.has(b,m)&&(_.LINE_BREAKS=b[m]),e.has(b,v)&&(_.START_CHARS_HINT=b[v]),_}n.EOF=p({name:"EOF",pattern:t.Lexer.NA}),r.augmentTokenTypes([n.EOF]);function x(b,S,_,M,A,w,T,D){return{image:S,startOffset:_,endOffset:M,startLine:A,endLine:w,startColumn:T,endColumn:D,tokenTypeIdx:b.tokenTypeIdx,tokenType:b}}n.createTokenInstance=x;function y(b,S){return r.tokenStructuredMatcher(b,S)}n.tokenMatcher=y}),ro=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var g=function(x,y){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(b[_]=S[_])},g(x,y)};return function(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");g(x,y);function b(){this.constructor=x}x.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.serializeProduction=n.serializeGrammar=n.Terminal=n.Alternation=n.RepetitionWithSeparator=n.Repetition=n.RepetitionMandatoryWithSeparator=n.RepetitionMandatory=n.Option=n.Alternative=n.Rule=n.NonTerminal=n.AbstractProduction=void 0;var t=Sn(),r=Sc(),i=function(){function g(x){this._definition=x}return Object.defineProperty(g.prototype,"definition",{get:function(){return this._definition},set:function(x){this._definition=x},enumerable:!1,configurable:!0}),g.prototype.accept=function(x){x.visit(this),t.forEach(this.definition,function(y){y.accept(x)})},g}();n.AbstractProduction=i;var o=function(g){e(x,g);function x(y){var b=g.call(this,[])||this;return b.idx=1,t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return Object.defineProperty(x.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(y){},enumerable:!1,configurable:!0}),x.prototype.accept=function(y){y.visit(this)},x}(i);n.NonTerminal=o;var s=function(g){e(x,g);function x(y){var b=g.call(this,y.definition)||this;return b.orgText="",t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return x}(i);n.Rule=s;var a=function(g){e(x,g);function x(y){var b=g.call(this,y.definition)||this;return b.ignoreAmbiguities=!1,t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return x}(i);n.Alternative=a;var c=function(g){e(x,g);function x(y){var b=g.call(this,y.definition)||this;return b.idx=1,t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return x}(i);n.Option=c;var l=function(g){e(x,g);function x(y){var b=g.call(this,y.definition)||this;return b.idx=1,t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return x}(i);n.RepetitionMandatory=l;var u=function(g){e(x,g);function x(y){var b=g.call(this,y.definition)||this;return b.idx=1,t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return x}(i);n.RepetitionMandatoryWithSeparator=u;var h=function(g){e(x,g);function x(y){var b=g.call(this,y.definition)||this;return b.idx=1,t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return x}(i);n.Repetition=h;var f=function(g){e(x,g);function x(y){var b=g.call(this,y.definition)||this;return b.idx=1,t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return x}(i);n.RepetitionWithSeparator=f;var d=function(g){e(x,g);function x(y){var b=g.call(this,y.definition)||this;return b.idx=1,b.ignoreAmbiguities=!1,b.hasPredicates=!1,t.assign(b,t.pick(y,function(S){return S!==void 0})),b}return Object.defineProperty(x.prototype,"definition",{get:function(){return this._definition},set:function(y){this._definition=y},enumerable:!1,configurable:!0}),x}(i);n.Alternation=d;var m=function(){function g(x){this.idx=1,t.assign(this,t.pick(x,function(y){return y!==void 0}))}return g.prototype.accept=function(x){x.visit(this)},g}();n.Terminal=m;function v(g){return t.map(g,p)}n.serializeGrammar=v;function p(g){function x(S){return t.map(S,p)}if(g instanceof o)return{type:"NonTerminal",name:g.nonTerminalName,idx:g.idx};if(g instanceof a)return{type:"Alternative",definition:x(g.definition)};if(g instanceof c)return{type:"Option",idx:g.idx,definition:x(g.definition)};if(g instanceof l)return{type:"RepetitionMandatory",idx:g.idx,definition:x(g.definition)};if(g instanceof u)return{type:"RepetitionMandatoryWithSeparator",idx:g.idx,separator:p(new m({terminalType:g.separator})),definition:x(g.definition)};if(g instanceof f)return{type:"RepetitionWithSeparator",idx:g.idx,separator:p(new m({terminalType:g.separator})),definition:x(g.definition)};if(g instanceof h)return{type:"Repetition",idx:g.idx,definition:x(g.definition)};if(g instanceof d)return{type:"Alternation",idx:g.idx,definition:x(g.definition)};if(g instanceof m){var y={type:"Terminal",name:g.terminalType.name,label:r.tokenLabel(g.terminalType),idx:g.idx},b=g.terminalType.PATTERN;return g.terminalType.PATTERN&&(y.pattern=t.isRegExp(b)?b.source:b),y}else{if(g instanceof s)return{type:"Rule",name:g.name,orgText:g.orgText,definition:x(g.definition)};throw Error("non exhaustive match")}}n.serializeProduction=p}),Qb=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RestWalker=void 0;var e=Sn(),t=ro(),r=function(){function o(){}return o.prototype.walk=function(s,a){var c=this;a===void 0&&(a=[]),e.forEach(s.definition,function(l,u){var h=e.drop(s.definition,u+1);if(l instanceof t.NonTerminal)c.walkProdRef(l,h,a);else if(l instanceof t.Terminal)c.walkTerminal(l,h,a);else if(l instanceof t.Alternative)c.walkFlat(l,h,a);else if(l instanceof t.Option)c.walkOption(l,h,a);else if(l instanceof t.RepetitionMandatory)c.walkAtLeastOne(l,h,a);else if(l instanceof t.RepetitionMandatoryWithSeparator)c.walkAtLeastOneSep(l,h,a);else if(l instanceof t.RepetitionWithSeparator)c.walkManySep(l,h,a);else if(l instanceof t.Repetition)c.walkMany(l,h,a);else if(l instanceof t.Alternation)c.walkOr(l,h,a);else throw Error("non exhaustive match")})},o.prototype.walkTerminal=function(s,a,c){},o.prototype.walkProdRef=function(s,a,c){},o.prototype.walkFlat=function(s,a,c){var l=a.concat(c);this.walk(s,l)},o.prototype.walkOption=function(s,a,c){var l=a.concat(c);this.walk(s,l)},o.prototype.walkAtLeastOne=function(s,a,c){var l=[new t.Option({definition:s.definition})].concat(a,c);this.walk(s,l)},o.prototype.walkAtLeastOneSep=function(s,a,c){var l=i(s,a,c);this.walk(s,l)},o.prototype.walkMany=function(s,a,c){var l=[new t.Option({definition:s.definition})].concat(a,c);this.walk(s,l)},o.prototype.walkManySep=function(s,a,c){var l=i(s,a,c);this.walk(s,l)},o.prototype.walkOr=function(s,a,c){var l=this,u=a.concat(c);e.forEach(s.definition,function(h){var f=new t.Alternative({definition:[h]});l.walk(f,u)})},o}();n.RestWalker=r;function i(o,s,a){var c=[new t.Option({definition:[new t.Terminal({terminalType:o.separator})].concat(o.definition)})],l=c.concat(s,a);return l}}),np=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GAstVisitor=void 0;var e=ro(),t=function(){function r(){}return r.prototype.visit=function(i){var o=i;switch(o.constructor){case e.NonTerminal:return this.visitNonTerminal(o);case e.Alternative:return this.visitAlternative(o);case e.Option:return this.visitOption(o);case e.RepetitionMandatory:return this.visitRepetitionMandatory(o);case e.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(o);case e.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(o);case e.Repetition:return this.visitRepetition(o);case e.Alternation:return this.visitAlternation(o);case e.Terminal:return this.visitTerminal(o);case e.Rule:return this.visitRule(o);default:throw Error("non exhaustive match")}},r.prototype.visitNonTerminal=function(i){},r.prototype.visitAlternative=function(i){},r.prototype.visitOption=function(i){},r.prototype.visitRepetition=function(i){},r.prototype.visitRepetitionMandatory=function(i){},r.prototype.visitRepetitionMandatoryWithSeparator=function(i){},r.prototype.visitRepetitionWithSeparator=function(i){},r.prototype.visitAlternation=function(i){},r.prototype.visitTerminal=function(i){},r.prototype.visitRule=function(i){},r}();n.GAstVisitor=t}),Kv=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var f=function(d,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},f(d,m)};return function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");f(d,m);function v(){this.constructor=d}d.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.collectMethods=n.DslMethodsCollectorVisitor=n.getProductionDslName=n.isBranchingProd=n.isOptionalProd=n.isSequenceProd=void 0;var t=Sn(),r=ro(),i=np();function o(f){return f instanceof r.Alternative||f instanceof r.Option||f instanceof r.Repetition||f instanceof r.RepetitionMandatory||f instanceof r.RepetitionMandatoryWithSeparator||f instanceof r.RepetitionWithSeparator||f instanceof r.Terminal||f instanceof r.Rule}n.isSequenceProd=o;function s(f,d){d===void 0&&(d=[]);var m=f instanceof r.Option||f instanceof r.Repetition||f instanceof r.RepetitionWithSeparator;return m?!0:f instanceof r.Alternation?t.some(f.definition,function(v){return s(v,d)}):f instanceof r.NonTerminal&&t.contains(d,f)?!1:f instanceof r.AbstractProduction?(f instanceof r.NonTerminal&&d.push(f),t.every(f.definition,function(v){return s(v,d)})):!1}n.isOptionalProd=s;function a(f){return f instanceof r.Alternation}n.isBranchingProd=a;function c(f){if(f instanceof r.NonTerminal)return"SUBRULE";if(f instanceof r.Option)return"OPTION";if(f instanceof r.Alternation)return"OR";if(f instanceof r.RepetitionMandatory)return"AT_LEAST_ONE";if(f instanceof r.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(f instanceof r.RepetitionWithSeparator)return"MANY_SEP";if(f instanceof r.Repetition)return"MANY";if(f instanceof r.Terminal)return"CONSUME";throw Error("non exhaustive match")}n.getProductionDslName=c;var l=function(f){e(d,f);function d(){var m=f!==null&&f.apply(this,arguments)||this;return m.separator="-",m.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},m}return d.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},d.prototype.visitTerminal=function(m){var v=m.terminalType.name+this.separator+"Terminal";t.has(this.dslMethods,v)||(this.dslMethods[v]=[]),this.dslMethods[v].push(m)},d.prototype.visitNonTerminal=function(m){var v=m.nonTerminalName+this.separator+"Terminal";t.has(this.dslMethods,v)||(this.dslMethods[v]=[]),this.dslMethods[v].push(m)},d.prototype.visitOption=function(m){this.dslMethods.option.push(m)},d.prototype.visitRepetitionWithSeparator=function(m){this.dslMethods.repetitionWithSeparator.push(m)},d.prototype.visitRepetitionMandatory=function(m){this.dslMethods.repetitionMandatory.push(m)},d.prototype.visitRepetitionMandatoryWithSeparator=function(m){this.dslMethods.repetitionMandatoryWithSeparator.push(m)},d.prototype.visitRepetition=function(m){this.dslMethods.repetition.push(m)},d.prototype.visitAlternation=function(m){this.dslMethods.alternation.push(m)},d}(i.GAstVisitor);n.DslMethodsCollectorVisitor=l;var u=new l;function h(f){u.reset(),f.accept(u);var d=u.dslMethods;return u.reset(),d}n.collectMethods=h}),mM=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.firstForTerminal=n.firstForBranching=n.firstForSequence=n.first=void 0;var e=Sn(),t=ro(),r=Kv();function i(c){if(c instanceof t.NonTerminal)return i(c.referencedRule);if(c instanceof t.Terminal)return a(c);if(r.isSequenceProd(c))return o(c);if(r.isBranchingProd(c))return s(c);throw Error("non exhaustive match")}n.first=i;function o(c){for(var l=[],u=c.definition,h=0,f=u.length>h,d,m=!0;f&&m;)d=u[h],m=r.isOptionalProd(d),l=l.concat(i(d)),h=h+1,f=u.length>h;return e.uniq(l)}n.firstForSequence=o;function s(c){var l=e.map(c.definition,function(u){return i(u)});return e.uniq(e.flatten(l))}n.firstForBranching=s;function a(c){return[c.terminalType]}n.firstForTerminal=a}),gM=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IN=void 0,n.IN="_~IN~_"}),Ik=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var h=function(f,d){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(m[p]=v[p])},h(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");h(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.buildInProdFollowPrefix=n.buildBetweenProdsFollowPrefix=n.computeAllProdsFollows=n.ResyncFollowsWalker=void 0;var t=Qb(),r=mM(),i=Sn(),o=gM(),s=ro(),a=function(h){e(f,h);function f(d){var m=h.call(this)||this;return m.topProd=d,m.follows={},m}return f.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},f.prototype.walkTerminal=function(d,m,v){},f.prototype.walkProdRef=function(d,m,v){var p=l(d.referencedRule,d.idx)+this.topProd.name,g=m.concat(v),x=new s.Alternative({definition:g}),y=r.first(x);this.follows[p]=y},f}(t.RestWalker);n.ResyncFollowsWalker=a;function c(h){var f={};return i.forEach(h,function(d){var m=new a(d).startWalking();i.assign(f,m)}),f}n.computeAllProdsFollows=c;function l(h,f){return h.name+f+o.IN}n.buildBetweenProdsFollowPrefix=l;function u(h){var f=h.terminalType.name;return f+h.idx+o.IN}n.buildInProdFollowPrefix=u}),Yv=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultGrammarValidatorErrorProvider=n.defaultGrammarResolverErrorProvider=n.defaultParserErrorProvider=void 0;var e=Sc(),t=Sn(),r=Sn(),i=ro(),o=Kv();n.defaultParserErrorProvider={buildMismatchTokenMessage:function(s){var a=s.expected,c=s.actual,l=s.previous,u=s.ruleName,h=e.hasTokenLabel(a),f=h?"--> "+e.tokenLabel(a)+" <--":"token of type --> "+a.name+" <--",d="Expecting "+f+" but found --> '"+c.image+"' <--";return d},buildNotAllInputParsedMessage:function(s){var a=s.firstRedundant,c=s.ruleName;return"Redundant input, expecting EOF but found: "+a.image},buildNoViableAltMessage:function(s){var a=s.expectedPathsPerAlt,c=s.actual,l=s.previous,u=s.customUserDescription,h=s.ruleName,f="Expecting: ",d=r.first(c).image,m=`
but found: '`+d+"'";if(u)return f+u+m;var v=r.reduce(a,function(y,b){return y.concat(b)},[]),p=r.map(v,function(y){return"["+r.map(y,function(b){return e.tokenLabel(b)}).join(", ")+"]"}),g=r.map(p,function(y,b){return"  "+(b+1)+". "+y}),x=`one of these possible Token sequences:
`+g.join(`
`);return f+x+m},buildEarlyExitMessage:function(s){var a=s.expectedIterationPaths,c=s.actual,l=s.customUserDescription,u=s.ruleName,h="Expecting: ",f=r.first(c).image,d=`
but found: '`+f+"'";if(l)return h+l+d;var m=r.map(a,function(p){return"["+r.map(p,function(g){return e.tokenLabel(g)}).join(",")+"]"}),v=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+m.join(" ,")+">");return h+v+d}},Object.freeze(n.defaultParserErrorProvider),n.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(s,a){var c="Invalid grammar, reference to a rule which is not defined: ->"+a.nonTerminalName+`<-
inside top level rule: ->`+s.name+"<-";return c}},n.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(s,a){function c(p){return p instanceof i.Terminal?p.terminalType.name:p instanceof i.NonTerminal?p.nonTerminalName:""}var l=s.name,u=r.first(a),h=u.idx,f=o.getProductionDslName(u),d=c(u),m=h>0,v="->"+f+(m?h:"")+"<- "+(d?"with argument: ->"+d+"<-":"")+`
                  appears more than once (`+a.length+" times) in the top level rule: ->"+l+`<-.
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES
                  `;return v=v.replace(/[ \t]+/g," "),v=v.replace(/\s\s+/g,`
`),v},buildNamespaceConflictError:function(s){var a=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+s.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return a},buildAlternationPrefixAmbiguityError:function(s){var a=r.map(s.prefixPath,function(u){return e.tokenLabel(u)}).join(", "),c=s.alternation.idx===0?"":s.alternation.idx,l="Ambiguous alternatives: <"+s.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+c+"> inside <"+s.topLevelRule.name+`> Rule,
`)+("<"+a+`> may appears as a prefix path in all these alternatives.
`)+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return l},buildAlternationAmbiguityError:function(s){var a=r.map(s.prefixPath,function(u){return e.tokenLabel(u)}).join(", "),c=s.alternation.idx===0?"":s.alternation.idx,l="Ambiguous Alternatives Detected: <"+s.ambiguityIndices.join(" ,")+"> in <OR"+c+">"+(" inside <"+s.topLevelRule.name+`> Rule,
`)+("<"+a+`> may appears as a prefix path in all these alternatives.
`);return l=l+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,l},buildEmptyRepetitionError:function(s){var a=o.getProductionDslName(s.repetition);s.repetition.idx!==0&&(a+=s.repetition.idx);var c="The repetition <"+a+"> within Rule <"+s.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return c},buildTokenNameError:function(s){return"deprecated"},buildEmptyAlternationError:function(s){var a="Ambiguous empty alternative: <"+(s.emptyChoiceIdx+1)+">"+(" in <OR"+s.alternation.idx+"> inside <"+s.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return a},buildTooManyAlternativesError:function(s){var a=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+s.alternation.idx+"> inside <"+s.topLevelRule.name+`> Rule.
 has `+(s.alternation.definition.length+1)+" alternatives.");return a},buildLeftRecursionError:function(s){var a=s.topLevelRule.name,c=t.map(s.leftRecursionPath,function(h){return h.name}),l=a+" --> "+c.concat([a]).join(" --> "),u=`Left Recursion found in grammar.
`+("rule: <"+a+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is:
 `+l+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return u},buildInvalidRuleNameError:function(s){return"deprecated"},buildDuplicateRuleNameError:function(s){var a;s.topLevelRule instanceof i.Rule?a=s.topLevelRule.name:a=s.topLevelRule;var c="Duplicate definition, rule: ->"+a+"<- is already defined in the grammar: ->"+s.grammarName+"<-";return c}}}),Rk=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(u[f]=h[f])},a(c,l)};return function(c,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.GastRefResolverVisitor=n.resolveGrammar=void 0;var t=To(),r=Sn(),i=np();function o(a,c){var l=new s(a,c);return l.resolveRefs(),l.errors}n.resolveGrammar=o;var s=function(a){e(c,a);function c(l,u){var h=a.call(this)||this;return h.nameToTopRule=l,h.errMsgProvider=u,h.errors=[],h}return c.prototype.resolveRefs=function(){var l=this;r.forEach(r.values(this.nameToTopRule),function(u){l.currTopLevel=u,u.accept(l)})},c.prototype.visitNonTerminal=function(l){var u=this.nameToTopRule[l.nonTerminalName];if(u)l.referencedRule=u;else{var h=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,l);this.errors.push({message:h,type:t.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:l.nonTerminalName})}},c}(i.GAstVisitor);n.GastRefResolverVisitor=s}),Zv=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var p=function(g,x){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(y[S]=b[S])},p(g,x)};return function(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");p(g,x);function y(){this.constructor=g}g.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.nextPossibleTokensAfter=n.possiblePathsFrom=n.NextTerminalAfterAtLeastOneSepWalker=n.NextTerminalAfterAtLeastOneWalker=n.NextTerminalAfterManySepWalker=n.NextTerminalAfterManyWalker=n.AbstractNextTerminalAfterProductionWalker=n.NextAfterTokenWalker=n.AbstractNextPossibleTokensWalker=void 0;var t=Qb(),r=Sn(),i=mM(),o=ro(),s=function(p){e(g,p);function g(x,y){var b=p.call(this)||this;return b.topProd=x,b.path=y,b.possibleTokTypes=[],b.nextProductionName="",b.nextProductionOccurrence=0,b.found=!1,b.isAtEndOfPath=!1,b}return g.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=r.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=r.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},g.prototype.walk=function(x,y){y===void 0&&(y=[]),this.found||p.prototype.walk.call(this,x,y)},g.prototype.walkProdRef=function(x,y,b){if(x.referencedRule.name===this.nextProductionName&&x.idx===this.nextProductionOccurrence){var S=y.concat(b);this.updateExpectedNext(),this.walk(x.referencedRule,S)}},g.prototype.updateExpectedNext=function(){r.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},g}(t.RestWalker);n.AbstractNextPossibleTokensWalker=s;var a=function(p){e(g,p);function g(x,y){var b=p.call(this,x,y)||this;return b.path=y,b.nextTerminalName="",b.nextTerminalOccurrence=0,b.nextTerminalName=b.path.lastTok.name,b.nextTerminalOccurrence=b.path.lastTokOccurrence,b}return g.prototype.walkTerminal=function(x,y,b){if(this.isAtEndOfPath&&x.terminalType.name===this.nextTerminalName&&x.idx===this.nextTerminalOccurrence&&!this.found){var S=y.concat(b),_=new o.Alternative({definition:S});this.possibleTokTypes=i.first(_),this.found=!0}},g}(s);n.NextAfterTokenWalker=a;var c=function(p){e(g,p);function g(x,y){var b=p.call(this)||this;return b.topRule=x,b.occurrence=y,b.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},b}return g.prototype.startWalking=function(){return this.walk(this.topRule),this.result},g}(t.RestWalker);n.AbstractNextTerminalAfterProductionWalker=c;var l=function(p){e(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.prototype.walkMany=function(x,y,b){if(x.idx===this.occurrence){var S=r.first(y.concat(b));this.result.isEndOfRule=S===void 0,S instanceof o.Terminal&&(this.result.token=S.terminalType,this.result.occurrence=S.idx)}else p.prototype.walkMany.call(this,x,y,b)},g}(c);n.NextTerminalAfterManyWalker=l;var u=function(p){e(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.prototype.walkManySep=function(x,y,b){if(x.idx===this.occurrence){var S=r.first(y.concat(b));this.result.isEndOfRule=S===void 0,S instanceof o.Terminal&&(this.result.token=S.terminalType,this.result.occurrence=S.idx)}else p.prototype.walkManySep.call(this,x,y,b)},g}(c);n.NextTerminalAfterManySepWalker=u;var h=function(p){e(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.prototype.walkAtLeastOne=function(x,y,b){if(x.idx===this.occurrence){var S=r.first(y.concat(b));this.result.isEndOfRule=S===void 0,S instanceof o.Terminal&&(this.result.token=S.terminalType,this.result.occurrence=S.idx)}else p.prototype.walkAtLeastOne.call(this,x,y,b)},g}(c);n.NextTerminalAfterAtLeastOneWalker=h;var f=function(p){e(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.prototype.walkAtLeastOneSep=function(x,y,b){if(x.idx===this.occurrence){var S=r.first(y.concat(b));this.result.isEndOfRule=S===void 0,S instanceof o.Terminal&&(this.result.token=S.terminalType,this.result.occurrence=S.idx)}else p.prototype.walkAtLeastOneSep.call(this,x,y,b)},g}(c);n.NextTerminalAfterAtLeastOneSepWalker=f;function d(p,g,x){x===void 0&&(x=[]),x=r.cloneArr(x);var y=[],b=0;function S(w){return w.concat(r.drop(p,b+1))}function _(w){var T=d(S(w),g,x);return y.concat(T)}for(;x.length<g&&b<p.length;){var M=p[b];if(M instanceof o.Alternative||M instanceof o.NonTerminal)return _(M.definition);if(M instanceof o.Option)y=_(M.definition);else if(M instanceof o.RepetitionMandatory){var A=M.definition.concat([new o.Repetition({definition:M.definition})]);return _(A)}else if(M instanceof o.RepetitionMandatoryWithSeparator){var A=[new o.Alternative({definition:M.definition}),new o.Repetition({definition:[new o.Terminal({terminalType:M.separator})].concat(M.definition)})];return _(A)}else if(M instanceof o.RepetitionWithSeparator){var A=M.definition.concat([new o.Repetition({definition:[new o.Terminal({terminalType:M.separator})].concat(M.definition)})]);y=_(A)}else if(M instanceof o.Repetition){var A=M.definition.concat([new o.Repetition({definition:M.definition})]);y=_(A)}else{if(M instanceof o.Alternation)return r.forEach(M.definition,function(w){r.isEmpty(w.definition)===!1&&(y=_(w.definition))}),y;if(M instanceof o.Terminal)x.push(M.terminalType);else throw Error("non exhaustive match")}b++}return y.push({partialPath:x,suffixDef:r.drop(p,b)}),y}n.possiblePathsFrom=d;function m(p,g,x,y){var b="EXIT_NONE_TERMINAL",S=[b],_="EXIT_ALTERNATIVE",M=!1,A=g.length,w=A-y-1,T=[],D=[];for(D.push({idx:-1,def:p,ruleStack:[],occurrenceStack:[]});!r.isEmpty(D);){var N=D.pop();if(N===_){M&&r.last(D).idx<=w&&D.pop();continue}var P=N.def,E=N.idx,U=N.ruleStack,k=N.occurrenceStack;if(!r.isEmpty(P)){var B=P[0];if(B===b){var O={idx:E,def:r.drop(P),ruleStack:r.dropRight(U),occurrenceStack:r.dropRight(k)};D.push(O)}else if(B instanceof o.Terminal)if(E<A-1){var q=E+1,ne=g[q];if(x(ne,B.terminalType)){var O={idx:q,def:r.drop(P),ruleStack:U,occurrenceStack:k};D.push(O)}}else if(E===A-1)T.push({nextTokenType:B.terminalType,nextTokenOccurrence:B.idx,ruleStack:U,occurrenceStack:k}),M=!0;else throw Error("non exhaustive match");else if(B instanceof o.NonTerminal){var ae=r.cloneArr(U);ae.push(B.nonTerminalName);var ye=r.cloneArr(k);ye.push(B.idx);var O={idx:E,def:B.definition.concat(S,r.drop(P)),ruleStack:ae,occurrenceStack:ye};D.push(O)}else if(B instanceof o.Option){var fe={idx:E,def:r.drop(P),ruleStack:U,occurrenceStack:k};D.push(fe),D.push(_);var L={idx:E,def:B.definition.concat(r.drop(P)),ruleStack:U,occurrenceStack:k};D.push(L)}else if(B instanceof o.RepetitionMandatory){var C=new o.Repetition({definition:B.definition,idx:B.idx}),R=B.definition.concat([C],r.drop(P)),O={idx:E,def:R,ruleStack:U,occurrenceStack:k};D.push(O)}else if(B instanceof o.RepetitionMandatoryWithSeparator){var I=new o.Terminal({terminalType:B.separator}),C=new o.Repetition({definition:[I].concat(B.definition),idx:B.idx}),R=B.definition.concat([C],r.drop(P)),O={idx:E,def:R,ruleStack:U,occurrenceStack:k};D.push(O)}else if(B instanceof o.RepetitionWithSeparator){var fe={idx:E,def:r.drop(P),ruleStack:U,occurrenceStack:k};D.push(fe),D.push(_);var I=new o.Terminal({terminalType:B.separator}),j=new o.Repetition({definition:[I].concat(B.definition),idx:B.idx}),R=B.definition.concat([j],r.drop(P)),L={idx:E,def:R,ruleStack:U,occurrenceStack:k};D.push(L)}else if(B instanceof o.Repetition){var fe={idx:E,def:r.drop(P),ruleStack:U,occurrenceStack:k};D.push(fe),D.push(_);var j=new o.Repetition({definition:B.definition,idx:B.idx}),R=B.definition.concat([j],r.drop(P)),L={idx:E,def:R,ruleStack:U,occurrenceStack:k};D.push(L)}else if(B instanceof o.Alternation)for(var Z=B.definition.length-1;Z>=0;Z--){var J=B.definition[Z],W={idx:E,def:J.definition.concat(r.drop(P)),ruleStack:U,occurrenceStack:k};D.push(W),D.push(_)}else if(B instanceof o.Alternative)D.push({idx:E,def:B.definition.concat(r.drop(P)),ruleStack:U,occurrenceStack:k});else if(B instanceof o.Rule)D.push(v(B,E,U,k));else throw Error("non exhaustive match")}}return T}n.nextPossibleTokensAfter=m;function v(p,g,x,y){var b=r.cloneArr(x);b.push(p.name);var S=r.cloneArr(y);return S.push(1),{idx:g,def:p.definition,ruleStack:b,occurrenceStack:S}}}),Jv=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var w=function(T,D){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,P){N.__proto__=P}||function(N,P){for(var E in P)Object.prototype.hasOwnProperty.call(P,E)&&(N[E]=P[E])},w(T,D)};return function(T,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");w(T,D);function N(){this.constructor=T}T.prototype=D===null?Object.create(D):(N.prototype=D.prototype,new N)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.areTokenCategoriesNotUsed=n.isStrictPrefixOfPath=n.containsPath=n.getLookaheadPathsForOptionalProd=n.getLookaheadPathsForOr=n.lookAheadSequenceFromAlternatives=n.buildSingleAlternativeLookaheadFunction=n.buildAlternativesLookAheadFunc=n.buildLookaheadFuncForOptionalProd=n.buildLookaheadFuncForOr=n.getProdType=n.PROD_TYPE=void 0;var t=Sn(),r=Zv(),i=Qb(),o=tp(),s=ro(),a=np(),c;(function(w){w[w.OPTION=0]="OPTION",w[w.REPETITION=1]="REPETITION",w[w.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",w[w.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",w[w.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",w[w.ALTERNATION=5]="ALTERNATION"})(c=n.PROD_TYPE||(n.PROD_TYPE={}));function l(w){if(w instanceof s.Option)return c.OPTION;if(w instanceof s.Repetition)return c.REPETITION;if(w instanceof s.RepetitionMandatory)return c.REPETITION_MANDATORY;if(w instanceof s.RepetitionMandatoryWithSeparator)return c.REPETITION_MANDATORY_WITH_SEPARATOR;if(w instanceof s.RepetitionWithSeparator)return c.REPETITION_WITH_SEPARATOR;if(w instanceof s.Alternation)return c.ALTERNATION;throw Error("non exhaustive match")}n.getProdType=l;function u(w,T,D,N,P,E){var U=b(w,T,D),k=A(U)?o.tokenStructuredMatcherNoCategories:o.tokenStructuredMatcher;return E(U,N,k,P)}n.buildLookaheadFuncForOr=u;function h(w,T,D,N,P,E){var U=S(w,T,P,D),k=A(U)?o.tokenStructuredMatcherNoCategories:o.tokenStructuredMatcher;return E(U[0],k,N)}n.buildLookaheadFuncForOptionalProd=h;function f(w,T,D,N){var P=w.length,E=t.every(w,function(B){return t.every(B,function(O){return O.length===1})});if(T)return function(B){for(var O=t.map(B,function(j){return j.GATE}),q=0;q<P;q++){var ne=w[q],ae=ne.length,ye=O[q];if(!(ye!==void 0&&ye.call(this)===!1))e:for(var fe=0;fe<ae;fe++){for(var L=ne[fe],C=L.length,R=0;R<C;R++){var I=this.LA(R+1);if(D(I,L[R])===!1)continue e}return q}}};if(E&&!N){var U=t.map(w,function(B){return t.flatten(B)}),k=t.reduce(U,function(B,O,q){return t.forEach(O,function(ne){t.has(B,ne.tokenTypeIdx)||(B[ne.tokenTypeIdx]=q),t.forEach(ne.categoryMatches,function(ae){t.has(B,ae)||(B[ae]=q)})}),B},[]);return function(){var B=this.LA(1);return k[B.tokenTypeIdx]}}else return function(){for(var B=0;B<P;B++){var O=w[B],q=O.length;e:for(var ne=0;ne<q;ne++){for(var ae=O[ne],ye=ae.length,fe=0;fe<ye;fe++){var L=this.LA(fe+1);if(D(L,ae[fe])===!1)continue e}return B}}}}n.buildAlternativesLookAheadFunc=f;function d(w,T,D){var N=t.every(w,function(O){return O.length===1}),P=w.length;if(N&&!D){var E=t.flatten(w);if(E.length===1&&t.isEmpty(E[0].categoryMatches)){var U=E[0],k=U.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===k}}else{var B=t.reduce(E,function(O,q,ne){return O[q.tokenTypeIdx]=!0,t.forEach(q.categoryMatches,function(ae){O[ae]=!0}),O},[]);return function(){var O=this.LA(1);return B[O.tokenTypeIdx]===!0}}}else return function(){e:for(var O=0;O<P;O++){for(var q=w[O],ne=q.length,ae=0;ae<ne;ae++){var ye=this.LA(ae+1);if(T(ye,q[ae])===!1)continue e}return!0}return!1}}n.buildSingleAlternativeLookaheadFunction=d;var m=function(w){e(T,w);function T(D,N,P){var E=w.call(this)||this;return E.topProd=D,E.targetOccurrence=N,E.targetProdType=P,E}return T.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},T.prototype.checkIsTarget=function(D,N,P,E){return D.idx===this.targetOccurrence&&this.targetProdType===N?(this.restDef=P.concat(E),!0):!1},T.prototype.walkOption=function(D,N,P){this.checkIsTarget(D,c.OPTION,N,P)||w.prototype.walkOption.call(this,D,N,P)},T.prototype.walkAtLeastOne=function(D,N,P){this.checkIsTarget(D,c.REPETITION_MANDATORY,N,P)||w.prototype.walkOption.call(this,D,N,P)},T.prototype.walkAtLeastOneSep=function(D,N,P){this.checkIsTarget(D,c.REPETITION_MANDATORY_WITH_SEPARATOR,N,P)||w.prototype.walkOption.call(this,D,N,P)},T.prototype.walkMany=function(D,N,P){this.checkIsTarget(D,c.REPETITION,N,P)||w.prototype.walkOption.call(this,D,N,P)},T.prototype.walkManySep=function(D,N,P){this.checkIsTarget(D,c.REPETITION_WITH_SEPARATOR,N,P)||w.prototype.walkOption.call(this,D,N,P)},T}(i.RestWalker),v=function(w){e(T,w);function T(D,N,P){var E=w.call(this)||this;return E.targetOccurrence=D,E.targetProdType=N,E.targetRef=P,E.result=[],E}return T.prototype.checkIsTarget=function(D,N){D.idx===this.targetOccurrence&&this.targetProdType===N&&(this.targetRef===void 0||D===this.targetRef)&&(this.result=D.definition)},T.prototype.visitOption=function(D){this.checkIsTarget(D,c.OPTION)},T.prototype.visitRepetition=function(D){this.checkIsTarget(D,c.REPETITION)},T.prototype.visitRepetitionMandatory=function(D){this.checkIsTarget(D,c.REPETITION_MANDATORY)},T.prototype.visitRepetitionMandatoryWithSeparator=function(D){this.checkIsTarget(D,c.REPETITION_MANDATORY_WITH_SEPARATOR)},T.prototype.visitRepetitionWithSeparator=function(D){this.checkIsTarget(D,c.REPETITION_WITH_SEPARATOR)},T.prototype.visitAlternation=function(D){this.checkIsTarget(D,c.ALTERNATION)},T}(a.GAstVisitor);function p(w){for(var T=new Array(w),D=0;D<w;D++)T[D]=[];return T}function g(w){for(var T=[""],D=0;D<w.length;D++){for(var N=w[D],P=[],E=0;E<T.length;E++){var U=T[E];P.push(U+"_"+N.tokenTypeIdx);for(var k=0;k<N.categoryMatches.length;k++){var B="_"+N.categoryMatches[k];P.push(U+B)}}T=P}return T}function x(w,T,D){for(var N=0;N<w.length;N++)if(N!==D)for(var P=w[N],E=0;E<T.length;E++){var U=T[E];if(P[U]===!0)return!1}return!0}function y(w,T){for(var D=t.map(w,function(q){return r.possiblePathsFrom([q],1)}),N=p(D.length),P=t.map(D,function(q){var ne={};return t.forEach(q,function(ae){var ye=g(ae.partialPath);t.forEach(ye,function(fe){ne[fe]=!0})}),ne}),E=D,U=1;U<=T;U++){var k=E;E=p(k.length);for(var B=function(q){for(var ne=k[q],ae=0;ae<ne.length;ae++){var ye=ne[ae].partialPath,fe=ne[ae].suffixDef,L=g(ye),C=x(P,L,q);if(C||t.isEmpty(fe)||ye.length===T){var R=N[q];if(_(R,ye)===!1){R.push(ye);for(var I=0;I<L.length;I++){var j=L[I];P[q][j]=!0}}}else{var Z=r.possiblePathsFrom(fe,U+1,ye);E[q]=E[q].concat(Z),t.forEach(Z,function(J){var W=g(J.partialPath);t.forEach(W,function(K){P[q][K]=!0})})}}},O=0;O<k.length;O++)B(O)}return N}n.lookAheadSequenceFromAlternatives=y;function b(w,T,D,N){var P=new v(w,c.ALTERNATION,N);return T.accept(P),y(P.result,D)}n.getLookaheadPathsForOr=b;function S(w,T,D,N){var P=new v(w,D);T.accept(P);var E=P.result,U=new m(T,w,D),k=U.startWalking(),B=new s.Alternative({definition:E}),O=new s.Alternative({definition:k});return y([B,O],N)}n.getLookaheadPathsForOptionalProd=S;function _(w,T){e:for(var D=0;D<w.length;D++){var N=w[D];if(N.length===T.length){for(var P=0;P<N.length;P++){var E=T[P],U=N[P],k=E===U||U.categoryMatchesMap[E.tokenTypeIdx]!==void 0;if(k===!1)continue e}return!0}}return!1}n.containsPath=_;function M(w,T){return w.length<T.length&&t.every(w,function(D,N){var P=T[N];return D===P||P.categoryMatchesMap[D.tokenTypeIdx]})}n.isStrictPrefixOfPath=M;function A(w){return t.every(w,function(T){return t.every(T,function(D){return t.every(D,function(N){return t.isEmpty(N.categoryMatches)})})})}n.areTokenCategoriesNotUsed=A}),vM=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var N=function(P,E){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,k){U.__proto__=k}||function(U,k){for(var B in k)Object.prototype.hasOwnProperty.call(k,B)&&(U[B]=k[B])},N(P,E)};return function(P,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");N(P,E);function U(){this.constructor=P}P.prototype=E===null?Object.create(E):(U.prototype=E.prototype,new U)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.checkPrefixAlternativesAmbiguities=n.validateSomeNonEmptyLookaheadPath=n.validateTooManyAlts=n.RepetionCollector=n.validateAmbiguousAlternationAlternatives=n.validateEmptyOrAlternative=n.getFirstNoneTerminal=n.validateNoLeftRecursion=n.validateRuleIsOverridden=n.validateRuleDoesNotAlreadyExist=n.OccurrenceValidationCollector=n.identifyProductionForDuplicates=n.validateGrammar=void 0;var t=Sn(),r=Sn(),i=To(),o=Kv(),s=Jv(),a=Zv(),c=ro(),l=np();function u(N,P,E,U,k){var B=t.map(N,function(C){return h(C,U)}),O=t.map(N,function(C){return g(C,C,U)}),q=[],ne=[],ae=[];r.every(O,r.isEmpty)&&(q=r.map(N,function(C){return b(C,U)}),ne=r.map(N,function(C){return S(C,P,U)}),ae=A(N,P,U));var ye=D(N,E,U),fe=r.map(N,function(C){return M(C,U)}),L=r.map(N,function(C){return v(C,N,k,U)});return t.flatten(B.concat(ae,O,q,ne,ye,fe,L))}n.validateGrammar=u;function h(N,P){var E=new m;N.accept(E);var U=E.allProductions,k=t.groupBy(U,f),B=t.pick(k,function(q){return q.length>1}),O=t.map(t.values(B),function(q){var ne=t.first(q),ae=P.buildDuplicateFoundError(N,q),ye=o.getProductionDslName(ne),fe={message:ae,type:i.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:N.name,dslName:ye,occurrence:ne.idx},L=d(ne);return L&&(fe.parameter=L),fe});return O}function f(N){return o.getProductionDslName(N)+"_#_"+N.idx+"_#_"+d(N)}n.identifyProductionForDuplicates=f;function d(N){return N instanceof c.Terminal?N.terminalType.name:N instanceof c.NonTerminal?N.nonTerminalName:""}var m=function(N){e(P,N);function P(){var E=N!==null&&N.apply(this,arguments)||this;return E.allProductions=[],E}return P.prototype.visitNonTerminal=function(E){this.allProductions.push(E)},P.prototype.visitOption=function(E){this.allProductions.push(E)},P.prototype.visitRepetitionWithSeparator=function(E){this.allProductions.push(E)},P.prototype.visitRepetitionMandatory=function(E){this.allProductions.push(E)},P.prototype.visitRepetitionMandatoryWithSeparator=function(E){this.allProductions.push(E)},P.prototype.visitRepetition=function(E){this.allProductions.push(E)},P.prototype.visitAlternation=function(E){this.allProductions.push(E)},P.prototype.visitTerminal=function(E){this.allProductions.push(E)},P}(l.GAstVisitor);n.OccurrenceValidationCollector=m;function v(N,P,E,U){var k=[],B=r.reduce(P,function(q,ne){return ne.name===N.name?q+1:q},0);if(B>1){var O=U.buildDuplicateRuleNameError({topLevelRule:N,grammarName:E});k.push({message:O,type:i.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:N.name})}return k}n.validateRuleDoesNotAlreadyExist=v;function p(N,P,E){var U=[],k;return t.contains(P,N)||(k="Invalid rule override, rule: ->"+N+"<- cannot be overridden in the grammar: ->"+E+"<-as it is not defined in any of the super grammars ",U.push({message:k,type:i.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:N})),U}n.validateRuleIsOverridden=p;function g(N,P,E,U){U===void 0&&(U=[]);var k=[],B=x(P.definition);if(t.isEmpty(B))return[];var O=N.name,q=t.contains(B,N);q&&k.push({message:E.buildLeftRecursionError({topLevelRule:N,leftRecursionPath:U}),type:i.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:O});var ne=t.difference(B,U.concat([N])),ae=t.map(ne,function(ye){var fe=t.cloneArr(U);return fe.push(ye),g(N,ye,E,fe)});return k.concat(t.flatten(ae))}n.validateNoLeftRecursion=g;function x(N){var P=[];if(t.isEmpty(N))return P;var E=t.first(N);if(E instanceof c.NonTerminal)P.push(E.referencedRule);else if(E instanceof c.Alternative||E instanceof c.Option||E instanceof c.RepetitionMandatory||E instanceof c.RepetitionMandatoryWithSeparator||E instanceof c.RepetitionWithSeparator||E instanceof c.Repetition)P=P.concat(x(E.definition));else if(E instanceof c.Alternation)P=t.flatten(t.map(E.definition,function(O){return x(O.definition)}));else if(!(E instanceof c.Terminal))throw Error("non exhaustive match");var U=o.isOptionalProd(E),k=N.length>1;if(U&&k){var B=t.drop(N);return P.concat(x(B))}else return P}n.getFirstNoneTerminal=x;var y=function(N){e(P,N);function P(){var E=N!==null&&N.apply(this,arguments)||this;return E.alternations=[],E}return P.prototype.visitAlternation=function(E){this.alternations.push(E)},P}(l.GAstVisitor);function b(N,P){var E=new y;N.accept(E);var U=E.alternations,k=t.reduce(U,function(B,O){var q=t.dropRight(O.definition),ne=t.map(q,function(ae,ye){var fe=a.nextPossibleTokensAfter([ae],[],null,1);return t.isEmpty(fe)?{message:P.buildEmptyAlternationError({topLevelRule:N,alternation:O,emptyChoiceIdx:ye}),type:i.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:N.name,occurrence:O.idx,alternative:ye+1}:null});return B.concat(t.compact(ne))},[]);return k}n.validateEmptyOrAlternative=b;function S(N,P,E){var U=new y;N.accept(U);var k=U.alternations;k=r.reject(k,function(O){return O.ignoreAmbiguities===!0});var B=t.reduce(k,function(O,q){var ne=q.idx,ae=q.maxLookahead||P,ye=s.getLookaheadPathsForOr(ne,N,ae,q),fe=w(ye,q,N,E),L=T(ye,q,N,E);return O.concat(fe,L)},[]);return B}n.validateAmbiguousAlternationAlternatives=S;var _=function(N){e(P,N);function P(){var E=N!==null&&N.apply(this,arguments)||this;return E.allProductions=[],E}return P.prototype.visitRepetitionWithSeparator=function(E){this.allProductions.push(E)},P.prototype.visitRepetitionMandatory=function(E){this.allProductions.push(E)},P.prototype.visitRepetitionMandatoryWithSeparator=function(E){this.allProductions.push(E)},P.prototype.visitRepetition=function(E){this.allProductions.push(E)},P}(l.GAstVisitor);n.RepetionCollector=_;function M(N,P){var E=new y;N.accept(E);var U=E.alternations,k=t.reduce(U,function(B,O){return O.definition.length>255&&B.push({message:P.buildTooManyAlternativesError({topLevelRule:N,alternation:O}),type:i.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:N.name,occurrence:O.idx}),B},[]);return k}n.validateTooManyAlts=M;function A(N,P,E){var U=[];return r.forEach(N,function(k){var B=new _;k.accept(B);var O=B.allProductions;r.forEach(O,function(q){var ne=s.getProdType(q),ae=q.maxLookahead||P,ye=q.idx,fe=s.getLookaheadPathsForOptionalProd(ye,k,ne,ae),L=fe[0];if(r.isEmpty(r.flatten(L))){var C=E.buildEmptyRepetitionError({topLevelRule:k,repetition:q});U.push({message:C,type:i.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:k.name})}})}),U}n.validateSomeNonEmptyLookaheadPath=A;function w(N,P,E,U){var k=[],B=r.reduce(N,function(q,ne,ae){return P.definition[ae].ignoreAmbiguities===!0||r.forEach(ne,function(ye){var fe=[ae];r.forEach(N,function(L,C){ae!==C&&s.containsPath(L,ye)&&P.definition[C].ignoreAmbiguities!==!0&&fe.push(C)}),fe.length>1&&!s.containsPath(k,ye)&&(k.push(ye),q.push({alts:fe,path:ye}))}),q},[]),O=t.map(B,function(q){var ne=r.map(q.alts,function(ye){return ye+1}),ae=U.buildAlternationAmbiguityError({topLevelRule:E,alternation:P,ambiguityIndices:ne,prefixPath:q.path});return{message:ae,type:i.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:E.name,occurrence:P.idx,alternatives:[q.alts]}});return O}function T(N,P,E,U){var k=[],B=r.reduce(N,function(O,q,ne){var ae=r.map(q,function(ye){return{idx:ne,path:ye}});return O.concat(ae)},[]);return r.forEach(B,function(O){var q=P.definition[O.idx];if(q.ignoreAmbiguities!==!0){var ne=O.idx,ae=O.path,ye=r.findAll(B,function(L){return P.definition[L.idx].ignoreAmbiguities!==!0&&L.idx<ne&&s.isStrictPrefixOfPath(L.path,ae)}),fe=r.map(ye,function(L){var C=[L.idx+1,ne+1],R=P.idx===0?"":P.idx,I=U.buildAlternationPrefixAmbiguityError({topLevelRule:E,alternation:P,ambiguityIndices:C,prefixPath:L.path});return{message:I,type:i.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:E.name,occurrence:R,alternatives:C}});k=k.concat(fe)}}),k}n.checkPrefixAlternativesAmbiguities=T;function D(N,P,E){var U=[],k=r.map(P,function(B){return B.name});return r.forEach(N,function(B){var O=B.name;if(r.contains(k,O)){var q=E.buildNamespaceConflictError(B);U.push({message:q,type:i.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:O})}}),U}}),Pk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateGrammar=n.resolveGrammar=void 0;var e=Sn(),t=Rk(),r=vM(),i=Yv();function o(a){a=e.defaults(a,{errMsgProvider:i.defaultGrammarResolverErrorProvider});var c={};return e.forEach(a.rules,function(l){c[l.name]=l}),t.resolveGrammar(c,a.errMsgProvider)}n.resolveGrammar=o;function s(a){return a=e.defaults(a,{errMsgProvider:i.defaultGrammarValidatorErrorProvider}),r.validateGrammar(a.rules,a.maxLookahead,a.tokenTypes,a.errMsgProvider,a.grammarName)}n.validateGrammar=s}),rp=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var m=function(v,p){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(g[y]=x[y])},m(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");m(v,p);function g(){this.constructor=v}v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.EarlyExitException=n.NotAllInputParsedException=n.NoViableAltException=n.MismatchedTokenException=n.isRecognitionException=void 0;var t=Sn(),r="MismatchedTokenException",i="NoViableAltException",o="EarlyExitException",s="NotAllInputParsedException",a=[r,i,o,s];Object.freeze(a);function c(m){return t.contains(a,m.name)}n.isRecognitionException=c;var l=function(m){e(v,m);function v(p,g){var x=this.constructor,y=m.call(this,p)||this;return y.token=g,y.resyncedTokens=[],Object.setPrototypeOf(y,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(y,y.constructor),y}return v}(Error),u=function(m){e(v,m);function v(p,g,x){var y=m.call(this,p,g)||this;return y.previousToken=x,y.name=r,y}return v}(l);n.MismatchedTokenException=u;var h=function(m){e(v,m);function v(p,g,x){var y=m.call(this,p,g)||this;return y.previousToken=x,y.name=i,y}return v}(l);n.NoViableAltException=h;var f=function(m){e(v,m);function v(p,g){var x=m.call(this,p,g)||this;return x.name=s,x}return v}(l);n.NotAllInputParsedException=f;var d=function(m){e(v,m);function v(p,g,x){var y=m.call(this,p,g)||this;return y.previousToken=x,y.name=o,y}return v}(l);n.EarlyExitException=d}),yM=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.attemptInRepetitionRecovery=n.Recoverable=n.InRuleRecoveryException=n.IN_RULE_RECOVERY_EXCEPTION=n.EOF_FOLLOW_KEY=void 0;var e=Sc(),t=Sn(),r=rp(),i=gM(),o=To();n.EOF_FOLLOW_KEY={},n.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";function s(l){this.name=n.IN_RULE_RECOVERY_EXCEPTION,this.message=l}n.InRuleRecoveryException=s,s.prototype=Error.prototype;var a=function(){function l(){}return l.prototype.initRecoverable=function(u){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=t.has(u,"recoveryEnabled")?u.recoveryEnabled:o.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=c)},l.prototype.getTokenToInsert=function(u){var h=e.createTokenInstance(u,"",NaN,NaN,NaN,NaN,NaN,NaN);return h.isInsertedInRecovery=!0,h},l.prototype.canTokenTypeBeInsertedInRecovery=function(u){return!0},l.prototype.tryInRepetitionRecovery=function(u,h,f,d){for(var m=this,v=this.findReSyncTokenType(),p=this.exportLexerState(),g=[],x=!1,y=this.LA(1),b=this.LA(1),S=function(){var _=m.LA(0),M=m.errorMessageProvider.buildMismatchTokenMessage({expected:d,actual:y,previous:_,ruleName:m.getCurrRuleFullName()}),A=new r.MismatchedTokenException(M,y,m.LA(0));A.resyncedTokens=t.dropRight(g),m.SAVE_ERROR(A)};!x;)if(this.tokenMatcher(b,d)){S();return}else if(f.call(this)){S(),u.apply(this,h);return}else this.tokenMatcher(b,v)?x=!0:(b=this.SKIP_TOKEN(),this.addToResyncTokens(b,g));this.importLexerState(p)},l.prototype.shouldInRepetitionRecoveryBeTried=function(u,h,f){return!(f===!1||u===void 0||h===void 0||this.tokenMatcher(this.LA(1),u)||this.isBackTracking()||this.canPerformInRuleRecovery(u,this.getFollowsForInRuleRecovery(u,h)))},l.prototype.getFollowsForInRuleRecovery=function(u,h){var f=this.getCurrentGrammarPath(u,h),d=this.getNextPossibleTokenTypes(f);return d},l.prototype.tryInRuleRecovery=function(u,h){if(this.canRecoverWithSingleTokenInsertion(u,h)){var f=this.getTokenToInsert(u);return f}if(this.canRecoverWithSingleTokenDeletion(u)){var d=this.SKIP_TOKEN();return this.consumeToken(),d}throw new s("sad sad panda")},l.prototype.canPerformInRuleRecovery=function(u,h){return this.canRecoverWithSingleTokenInsertion(u,h)||this.canRecoverWithSingleTokenDeletion(u)},l.prototype.canRecoverWithSingleTokenInsertion=function(u,h){var f=this;if(!this.canTokenTypeBeInsertedInRecovery(u)||t.isEmpty(h))return!1;var d=this.LA(1),m=t.find(h,function(v){return f.tokenMatcher(d,v)})!==void 0;return m},l.prototype.canRecoverWithSingleTokenDeletion=function(u){var h=this.tokenMatcher(this.LA(2),u);return h},l.prototype.isInCurrentRuleReSyncSet=function(u){var h=this.getCurrFollowKey(),f=this.getFollowSetFromFollowKey(h);return t.contains(f,u)},l.prototype.findReSyncTokenType=function(){for(var u=this.flattenFollowSet(),h=this.LA(1),f=2;;){var d=h.tokenType;if(t.contains(u,d))return d;h=this.LA(f),f++}},l.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return n.EOF_FOLLOW_KEY;var u=this.getLastExplicitRuleShortName(),h=this.getLastExplicitRuleOccurrenceIndex(),f=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(u),idxInCallingRule:h,inRule:this.shortRuleNameToFullName(f)}},l.prototype.buildFullFollowKeyStack=function(){var u=this,h=this.RULE_STACK,f=this.RULE_OCCURRENCE_STACK;return t.map(h,function(d,m){return m===0?n.EOF_FOLLOW_KEY:{ruleName:u.shortRuleNameToFullName(d),idxInCallingRule:f[m],inRule:u.shortRuleNameToFullName(h[m-1])}})},l.prototype.flattenFollowSet=function(){var u=this,h=t.map(this.buildFullFollowKeyStack(),function(f){return u.getFollowSetFromFollowKey(f)});return t.flatten(h)},l.prototype.getFollowSetFromFollowKey=function(u){if(u===n.EOF_FOLLOW_KEY)return[e.EOF];var h=u.ruleName+u.idxInCallingRule+i.IN+u.inRule;return this.resyncFollows[h]},l.prototype.addToResyncTokens=function(u,h){return this.tokenMatcher(u,e.EOF)||h.push(u),h},l.prototype.reSyncTo=function(u){for(var h=[],f=this.LA(1);this.tokenMatcher(f,u)===!1;)f=this.SKIP_TOKEN(),this.addToResyncTokens(f,h);return t.dropRight(h)},l.prototype.attemptInRepetitionRecovery=function(u,h,f,d,m,v,p){},l.prototype.getCurrentGrammarPath=function(u,h){var f=this.getHumanReadableRuleStack(),d=t.cloneArr(this.RULE_OCCURRENCE_STACK),m={ruleStack:f,occurrenceStack:d,lastTok:u,lastTokOccurrence:h};return m},l.prototype.getHumanReadableRuleStack=function(){var u=this;return t.map(this.RULE_STACK,function(h){return u.shortRuleNameToFullName(h)})},l}();n.Recoverable=a;function c(l,u,h,f,d,m,v){var p=this.getKeyForAutomaticLookahead(f,d),g=this.firstAfterRepMap[p];if(g===void 0){var x=this.getCurrRuleFullName(),y=this.getGAstProductions()[x],b=new m(y,d);g=b.startWalking(),this.firstAfterRepMap[p]=g}var S=g.token,_=g.occurrence,M=g.isEndOfRule;this.RULE_STACK.length===1&&M&&S===void 0&&(S=e.EOF,_=1),this.shouldInRepetitionRecoveryBeTried(S,_,v)&&this.tryInRepetitionRecovery(l,u,h,S)}n.attemptInRepetitionRecovery=c}),$b=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getKeyForAutomaticLookahead=n.AT_LEAST_ONE_SEP_IDX=n.MANY_SEP_IDX=n.AT_LEAST_ONE_IDX=n.MANY_IDX=n.OPTION_IDX=n.OR_IDX=n.BITS_FOR_ALT_IDX=n.BITS_FOR_RULE_IDX=n.BITS_FOR_OCCURRENCE_IDX=n.BITS_FOR_METHOD_TYPE=void 0,n.BITS_FOR_METHOD_TYPE=4,n.BITS_FOR_OCCURRENCE_IDX=8,n.BITS_FOR_RULE_IDX=12,n.BITS_FOR_ALT_IDX=8,n.OR_IDX=1<<n.BITS_FOR_OCCURRENCE_IDX,n.OPTION_IDX=2<<n.BITS_FOR_OCCURRENCE_IDX,n.MANY_IDX=3<<n.BITS_FOR_OCCURRENCE_IDX,n.AT_LEAST_ONE_IDX=4<<n.BITS_FOR_OCCURRENCE_IDX,n.MANY_SEP_IDX=5<<n.BITS_FOR_OCCURRENCE_IDX,n.AT_LEAST_ONE_SEP_IDX=6<<n.BITS_FOR_OCCURRENCE_IDX;function e(r,i,o){return o|i|r}n.getKeyForAutomaticLookahead=e;var t=32-n.BITS_FOR_ALT_IDX}),Dk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LooksAhead=void 0;var e=Jv(),t=Sn(),r=To(),i=$b(),o=Kv(),s=function(){function a(){}return a.prototype.initLooksAhead=function(c){this.dynamicTokensEnabled=t.has(c,"dynamicTokensEnabled")?c.dynamicTokensEnabled:r.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=t.has(c,"maxLookahead")?c.maxLookahead:r.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=t.isES2015MapSupported()?new Map:[],t.isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},a.prototype.preComputeLookaheadFunctions=function(c){var l=this;t.forEach(c,function(u){l.TRACE_INIT(u.name+" Rule Lookahead",function(){var h=o.collectMethods(u),f=h.alternation,d=h.repetition,m=h.option,v=h.repetitionMandatory,p=h.repetitionMandatoryWithSeparator,g=h.repetitionWithSeparator;t.forEach(f,function(x){var y=x.idx===0?"":x.idx;l.TRACE_INIT(""+o.getProductionDslName(x)+y,function(){var b=e.buildLookaheadFuncForOr(x.idx,u,x.maxLookahead||l.maxLookahead,x.hasPredicates,l.dynamicTokensEnabled,l.lookAheadBuilderForAlternatives),S=i.getKeyForAutomaticLookahead(l.fullRuleNameToShort[u.name],i.OR_IDX,x.idx);l.setLaFuncCache(S,b)})}),t.forEach(d,function(x){l.computeLookaheadFunc(u,x.idx,i.MANY_IDX,e.PROD_TYPE.REPETITION,x.maxLookahead,o.getProductionDslName(x))}),t.forEach(m,function(x){l.computeLookaheadFunc(u,x.idx,i.OPTION_IDX,e.PROD_TYPE.OPTION,x.maxLookahead,o.getProductionDslName(x))}),t.forEach(v,function(x){l.computeLookaheadFunc(u,x.idx,i.AT_LEAST_ONE_IDX,e.PROD_TYPE.REPETITION_MANDATORY,x.maxLookahead,o.getProductionDslName(x))}),t.forEach(p,function(x){l.computeLookaheadFunc(u,x.idx,i.AT_LEAST_ONE_SEP_IDX,e.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,x.maxLookahead,o.getProductionDslName(x))}),t.forEach(g,function(x){l.computeLookaheadFunc(u,x.idx,i.MANY_SEP_IDX,e.PROD_TYPE.REPETITION_WITH_SEPARATOR,x.maxLookahead,o.getProductionDslName(x))})})})},a.prototype.computeLookaheadFunc=function(c,l,u,h,f,d){var m=this;this.TRACE_INIT(""+d+(l===0?"":l),function(){var v=e.buildLookaheadFuncForOptionalProd(l,c,f||m.maxLookahead,m.dynamicTokensEnabled,h,m.lookAheadBuilderForOptional),p=i.getKeyForAutomaticLookahead(m.fullRuleNameToShort[c.name],u,l);m.setLaFuncCache(p,v)})},a.prototype.lookAheadBuilderForOptional=function(c,l,u){return e.buildSingleAlternativeLookaheadFunction(c,l,u)},a.prototype.lookAheadBuilderForAlternatives=function(c,l,u,h){return e.buildAlternativesLookAheadFunc(c,l,u,h)},a.prototype.getKeyForAutomaticLookahead=function(c,l){var u=this.getLastExplicitRuleShortName();return i.getKeyForAutomaticLookahead(u,c,l)},a.prototype.getLaFuncFromCache=function(c){},a.prototype.getLaFuncFromMap=function(c){return this.lookAheadFuncsCache.get(c)},a.prototype.getLaFuncFromObj=function(c){return this.lookAheadFuncsCache[c]},a.prototype.setLaFuncCache=function(c,l){},a.prototype.setLaFuncCacheUsingMap=function(c,l){this.lookAheadFuncsCache.set(c,l)},a.prototype.setLaFuncUsingObj=function(c,l){this.lookAheadFuncsCache[c]=l},a}();n.LooksAhead=s}),Fk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addNoneTerminalToCst=n.addTerminalToCst=n.setNodeLocationFull=n.setNodeLocationOnlyOffset=void 0;function e(o,s){isNaN(o.startOffset)===!0?(o.startOffset=s.startOffset,o.endOffset=s.endOffset):o.endOffset<s.endOffset&&(o.endOffset=s.endOffset)}n.setNodeLocationOnlyOffset=e;function t(o,s){isNaN(o.startOffset)===!0?(o.startOffset=s.startOffset,o.startColumn=s.startColumn,o.startLine=s.startLine,o.endOffset=s.endOffset,o.endColumn=s.endColumn,o.endLine=s.endLine):o.endOffset<s.endOffset&&(o.endOffset=s.endOffset,o.endColumn=s.endColumn,o.endLine=s.endLine)}n.setNodeLocationFull=t;function r(o,s,a){o.children[a]===void 0?o.children[a]=[s]:o.children[a].push(s)}n.addTerminalToCst=r;function i(o,s,a){o.children[s]===void 0?o.children[s]=[a]:o.children[s].push(a)}n.addNoneTerminalToCst=i}),xM=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defineNameProp=n.functionName=n.classNameFromInstance=void 0;var e=Sn();function t(s){return i(s.constructor)}n.classNameFromInstance=t;var r="name";function i(s){var a=s.name;return a||"anonymous"}n.functionName=i;function o(s,a){var c=Object.getOwnPropertyDescriptor(s,r);return e.isUndefined(c)||c.configurable?(Object.defineProperty(s,r,{enumerable:!1,configurable:!0,writable:!1,value:a}),!0):!1}n.defineNameProp=o}),Nk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateRedundantMethods=n.validateMissingCstMethods=n.validateVisitor=n.CstVisitorDefinitionError=n.createBaseVisitorConstructorWithDefaults=n.createBaseSemanticVisitorConstructor=n.defaultVisit=void 0;var e=Sn(),t=xM();function r(h,f){for(var d=e.keys(h),m=d.length,v=0;v<m;v++)for(var p=d[v],g=h[p],x=g.length,y=0;y<x;y++){var b=g[y];b.tokenTypeIdx===void 0&&this[b.name](b.children,f)}}n.defaultVisit=r;function i(h,f){var d=function(){};t.defineNameProp(d,h+"BaseSemantics");var m={visit:function(v,p){if(e.isArray(v)&&(v=v[0]),!e.isUndefined(v))return this[v.name](v.children,p)},validateVisitor:function(){var v=a(this,f);if(!e.isEmpty(v)){var p=e.map(v,function(g){return g.msg});throw Error("Errors Detected in CST Visitor <"+t.functionName(this.constructor)+`>:
	`+(""+p.join(`

`).replace(/\n/g,`
	`)))}}};return d.prototype=m,d.prototype.constructor=d,d._RULE_NAMES=f,d}n.createBaseSemanticVisitorConstructor=i;function o(h,f,d){var m=function(){};t.defineNameProp(m,h+"BaseSemanticsWithDefaults");var v=Object.create(d.prototype);return e.forEach(f,function(p){v[p]=r}),m.prototype=v,m.prototype.constructor=m,m}n.createBaseVisitorConstructorWithDefaults=o;var s;(function(h){h[h.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",h[h.MISSING_METHOD=1]="MISSING_METHOD"})(s=n.CstVisitorDefinitionError||(n.CstVisitorDefinitionError={}));function a(h,f){var d=c(h,f),m=u(h,f);return d.concat(m)}n.validateVisitor=a;function c(h,f){var d=e.map(f,function(m){if(!e.isFunction(h[m]))return{msg:"Missing visitor method: <"+m+"> on "+t.functionName(h.constructor)+" CST Visitor.",type:s.MISSING_METHOD,methodName:m}});return e.compact(d)}n.validateMissingCstMethods=c;var l=["constructor","visit","validateVisitor"];function u(h,f){var d=[];for(var m in h)e.isFunction(h[m])&&!e.contains(l,m)&&!e.contains(f,m)&&d.push({msg:"Redundant visitor method: <"+m+"> on "+t.functionName(h.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`,type:s.REDUNDANT_METHOD,methodName:m});return d}n.validateRedundantMethods=u}),Lk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TreeBuilder=void 0;var e=Fk(),t=Sn(),r=Nk(),i=To(),o=function(){function s(){}return s.prototype.initTreeBuilder=function(a){if(this.CST_STACK=[],this.outputCst=a.outputCst,this.nodeLocationTracking=t.has(a,"nodeLocationTracking")?a.nodeLocationTracking:i.DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=t.NOOP,this.cstFinallyStateUpdate=t.NOOP,this.cstPostTerminal=t.NOOP,this.cstPostNonTerminal=t.NOOP,this.cstPostRule=t.NOOP;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=e.setNodeLocationFull,this.setNodeLocationFromNode=e.setNodeLocationFull,this.cstPostRule=t.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=t.NOOP,this.setNodeLocationFromNode=t.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=e.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=e.setNodeLocationOnlyOffset,this.cstPostRule=t.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=t.NOOP,this.setNodeLocationFromNode=t.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=t.NOOP,this.setNodeLocationFromNode=t.NOOP,this.cstPostRule=t.NOOP,this.setInitialNodeLocation=t.NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+a.nodeLocationTracking+'"')},s.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(a){a.location={startOffset:NaN,endOffset:NaN}},s.prototype.setInitialNodeLocationOnlyOffsetRegular=function(a){a.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},s.prototype.setInitialNodeLocationFullRecovery=function(a){a.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},s.prototype.setInitialNodeLocationFullRegular=function(a){var c=this.LA(1);a.location={startOffset:c.startOffset,startLine:c.startLine,startColumn:c.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},s.prototype.cstInvocationStateUpdate=function(a,c){var l={name:a,children:{}};this.setInitialNodeLocation(l),this.CST_STACK.push(l)},s.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},s.prototype.cstPostRuleFull=function(a){var c=this.LA(0),l=a.location;l.startOffset<=c.startOffset?(l.endOffset=c.endOffset,l.endLine=c.endLine,l.endColumn=c.endColumn):(l.startOffset=NaN,l.startLine=NaN,l.startColumn=NaN)},s.prototype.cstPostRuleOnlyOffset=function(a){var c=this.LA(0),l=a.location;l.startOffset<=c.startOffset?l.endOffset=c.endOffset:l.startOffset=NaN},s.prototype.cstPostTerminal=function(a,c){var l=this.CST_STACK[this.CST_STACK.length-1];e.addTerminalToCst(l,c,a),this.setNodeLocationFromToken(l.location,c)},s.prototype.cstPostNonTerminal=function(a,c){var l=this.CST_STACK[this.CST_STACK.length-1];e.addNoneTerminalToCst(l,c,a),this.setNodeLocationFromNode(l.location,a.location)},s.prototype.getBaseCstVisitorConstructor=function(){if(t.isUndefined(this.baseCstVisitorConstructor)){var a=r.createBaseSemanticVisitorConstructor(this.className,t.keys(this.gastProductionsCache));return this.baseCstVisitorConstructor=a,a}return this.baseCstVisitorConstructor},s.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(t.isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var a=r.createBaseVisitorConstructorWithDefaults(this.className,t.keys(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=a,a}return this.baseCstVisitorWithDefaultsConstructor},s.prototype.getLastExplicitRuleShortName=function(){var a=this.RULE_STACK;return a[a.length-1]},s.prototype.getPreviousExplicitRuleShortName=function(){var a=this.RULE_STACK;return a[a.length-2]},s.prototype.getLastExplicitRuleOccurrenceIndex=function(){var a=this.RULE_OCCURRENCE_STACK;return a[a.length-1]},s}();n.TreeBuilder=o}),Ok=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LexerAdapter=void 0;var e=To(),t=function(){function r(){}return r.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(r.prototype,"input",{get:function(){return this.tokVector},set:function(i){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=i,this.tokVectorLength=i.length},enumerable:!1,configurable:!0}),r.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):e.END_OF_FILE},r.prototype.LA=function(i){var o=this.currIdx+i;return o<0||this.tokVectorLength<=o?e.END_OF_FILE:this.tokVector[o]},r.prototype.consumeToken=function(){this.currIdx++},r.prototype.exportLexerState=function(){return this.currIdx},r.prototype.importLexerState=function(i){this.currIdx=i},r.prototype.resetLexerState=function(){this.currIdx=-1},r.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},r.prototype.getLexerPosition=function(){return this.exportLexerState()},r}();n.LexerAdapter=t}),kk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RecognizerApi=void 0;var e=Sn(),t=rp(),r=To(),i=Yv(),o=vM(),s=ro(),a=function(){function c(){}return c.prototype.ACTION=function(l){return l.call(this)},c.prototype.consume=function(l,u,h){return this.consumeInternal(u,l,h)},c.prototype.subrule=function(l,u,h){return this.subruleInternal(u,l,h)},c.prototype.option=function(l,u){return this.optionInternal(u,l)},c.prototype.or=function(l,u){return this.orInternal(u,l)},c.prototype.many=function(l,u){return this.manyInternal(l,u)},c.prototype.atLeastOne=function(l,u){return this.atLeastOneInternal(l,u)},c.prototype.CONSUME=function(l,u){return this.consumeInternal(l,0,u)},c.prototype.CONSUME1=function(l,u){return this.consumeInternal(l,1,u)},c.prototype.CONSUME2=function(l,u){return this.consumeInternal(l,2,u)},c.prototype.CONSUME3=function(l,u){return this.consumeInternal(l,3,u)},c.prototype.CONSUME4=function(l,u){return this.consumeInternal(l,4,u)},c.prototype.CONSUME5=function(l,u){return this.consumeInternal(l,5,u)},c.prototype.CONSUME6=function(l,u){return this.consumeInternal(l,6,u)},c.prototype.CONSUME7=function(l,u){return this.consumeInternal(l,7,u)},c.prototype.CONSUME8=function(l,u){return this.consumeInternal(l,8,u)},c.prototype.CONSUME9=function(l,u){return this.consumeInternal(l,9,u)},c.prototype.SUBRULE=function(l,u){return this.subruleInternal(l,0,u)},c.prototype.SUBRULE1=function(l,u){return this.subruleInternal(l,1,u)},c.prototype.SUBRULE2=function(l,u){return this.subruleInternal(l,2,u)},c.prototype.SUBRULE3=function(l,u){return this.subruleInternal(l,3,u)},c.prototype.SUBRULE4=function(l,u){return this.subruleInternal(l,4,u)},c.prototype.SUBRULE5=function(l,u){return this.subruleInternal(l,5,u)},c.prototype.SUBRULE6=function(l,u){return this.subruleInternal(l,6,u)},c.prototype.SUBRULE7=function(l,u){return this.subruleInternal(l,7,u)},c.prototype.SUBRULE8=function(l,u){return this.subruleInternal(l,8,u)},c.prototype.SUBRULE9=function(l,u){return this.subruleInternal(l,9,u)},c.prototype.OPTION=function(l){return this.optionInternal(l,0)},c.prototype.OPTION1=function(l){return this.optionInternal(l,1)},c.prototype.OPTION2=function(l){return this.optionInternal(l,2)},c.prototype.OPTION3=function(l){return this.optionInternal(l,3)},c.prototype.OPTION4=function(l){return this.optionInternal(l,4)},c.prototype.OPTION5=function(l){return this.optionInternal(l,5)},c.prototype.OPTION6=function(l){return this.optionInternal(l,6)},c.prototype.OPTION7=function(l){return this.optionInternal(l,7)},c.prototype.OPTION8=function(l){return this.optionInternal(l,8)},c.prototype.OPTION9=function(l){return this.optionInternal(l,9)},c.prototype.OR=function(l){return this.orInternal(l,0)},c.prototype.OR1=function(l){return this.orInternal(l,1)},c.prototype.OR2=function(l){return this.orInternal(l,2)},c.prototype.OR3=function(l){return this.orInternal(l,3)},c.prototype.OR4=function(l){return this.orInternal(l,4)},c.prototype.OR5=function(l){return this.orInternal(l,5)},c.prototype.OR6=function(l){return this.orInternal(l,6)},c.prototype.OR7=function(l){return this.orInternal(l,7)},c.prototype.OR8=function(l){return this.orInternal(l,8)},c.prototype.OR9=function(l){return this.orInternal(l,9)},c.prototype.MANY=function(l){this.manyInternal(0,l)},c.prototype.MANY1=function(l){this.manyInternal(1,l)},c.prototype.MANY2=function(l){this.manyInternal(2,l)},c.prototype.MANY3=function(l){this.manyInternal(3,l)},c.prototype.MANY4=function(l){this.manyInternal(4,l)},c.prototype.MANY5=function(l){this.manyInternal(5,l)},c.prototype.MANY6=function(l){this.manyInternal(6,l)},c.prototype.MANY7=function(l){this.manyInternal(7,l)},c.prototype.MANY8=function(l){this.manyInternal(8,l)},c.prototype.MANY9=function(l){this.manyInternal(9,l)},c.prototype.MANY_SEP=function(l){this.manySepFirstInternal(0,l)},c.prototype.MANY_SEP1=function(l){this.manySepFirstInternal(1,l)},c.prototype.MANY_SEP2=function(l){this.manySepFirstInternal(2,l)},c.prototype.MANY_SEP3=function(l){this.manySepFirstInternal(3,l)},c.prototype.MANY_SEP4=function(l){this.manySepFirstInternal(4,l)},c.prototype.MANY_SEP5=function(l){this.manySepFirstInternal(5,l)},c.prototype.MANY_SEP6=function(l){this.manySepFirstInternal(6,l)},c.prototype.MANY_SEP7=function(l){this.manySepFirstInternal(7,l)},c.prototype.MANY_SEP8=function(l){this.manySepFirstInternal(8,l)},c.prototype.MANY_SEP9=function(l){this.manySepFirstInternal(9,l)},c.prototype.AT_LEAST_ONE=function(l){this.atLeastOneInternal(0,l)},c.prototype.AT_LEAST_ONE1=function(l){return this.atLeastOneInternal(1,l)},c.prototype.AT_LEAST_ONE2=function(l){this.atLeastOneInternal(2,l)},c.prototype.AT_LEAST_ONE3=function(l){this.atLeastOneInternal(3,l)},c.prototype.AT_LEAST_ONE4=function(l){this.atLeastOneInternal(4,l)},c.prototype.AT_LEAST_ONE5=function(l){this.atLeastOneInternal(5,l)},c.prototype.AT_LEAST_ONE6=function(l){this.atLeastOneInternal(6,l)},c.prototype.AT_LEAST_ONE7=function(l){this.atLeastOneInternal(7,l)},c.prototype.AT_LEAST_ONE8=function(l){this.atLeastOneInternal(8,l)},c.prototype.AT_LEAST_ONE9=function(l){this.atLeastOneInternal(9,l)},c.prototype.AT_LEAST_ONE_SEP=function(l){this.atLeastOneSepFirstInternal(0,l)},c.prototype.AT_LEAST_ONE_SEP1=function(l){this.atLeastOneSepFirstInternal(1,l)},c.prototype.AT_LEAST_ONE_SEP2=function(l){this.atLeastOneSepFirstInternal(2,l)},c.prototype.AT_LEAST_ONE_SEP3=function(l){this.atLeastOneSepFirstInternal(3,l)},c.prototype.AT_LEAST_ONE_SEP4=function(l){this.atLeastOneSepFirstInternal(4,l)},c.prototype.AT_LEAST_ONE_SEP5=function(l){this.atLeastOneSepFirstInternal(5,l)},c.prototype.AT_LEAST_ONE_SEP6=function(l){this.atLeastOneSepFirstInternal(6,l)},c.prototype.AT_LEAST_ONE_SEP7=function(l){this.atLeastOneSepFirstInternal(7,l)},c.prototype.AT_LEAST_ONE_SEP8=function(l){this.atLeastOneSepFirstInternal(8,l)},c.prototype.AT_LEAST_ONE_SEP9=function(l){this.atLeastOneSepFirstInternal(9,l)},c.prototype.RULE=function(l,u,h){if(h===void 0&&(h=r.DEFAULT_RULE_CONFIG),e.contains(this.definedRulesNames,l)){var f=i.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:l,grammarName:this.className}),d={message:f,type:r.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:l};this.definitionErrors.push(d)}this.definedRulesNames.push(l);var m=this.defineRule(l,u,h);return this[l]=m,m},c.prototype.OVERRIDE_RULE=function(l,u,h){h===void 0&&(h=r.DEFAULT_RULE_CONFIG);var f=[];f=f.concat(o.validateRuleIsOverridden(l,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(f);var d=this.defineRule(l,u,h);return this[l]=d,d},c.prototype.BACKTRACK=function(l,u){return function(){this.isBackTrackingStack.push(1);var h=this.saveRecogState();try{return l.apply(this,u),!0}catch(f){if(t.isRecognitionException(f))return!1;throw f}finally{this.reloadRecogState(h),this.isBackTrackingStack.pop()}}},c.prototype.getGAstProductions=function(){return this.gastProductionsCache},c.prototype.getSerializedGastProductions=function(){return s.serializeGrammar(e.values(this.gastProductionsCache))},c}();n.RecognizerApi=a}),Uk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RecognizerEngine=void 0;var e=Sn(),t=$b(),r=rp(),i=Jv(),o=Zv(),s=To(),a=yM(),c=Sc(),l=tp(),u=xM(),h=function(){function f(){}return f.prototype.initRecognizerEngine=function(d,m){if(this.className=u.classNameFromInstance(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=l.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},e.has(m,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(e.isArray(d)){if(e.isEmpty(d))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof d[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(e.isArray(d))this.tokensMap=e.reduce(d,function(x,y){return x[y.name]=y,x},{});else if(e.has(d,"modes")&&e.every(e.flatten(e.values(d.modes)),l.isTokenType)){var v=e.flatten(e.values(d.modes)),p=e.uniq(v);this.tokensMap=e.reduce(p,function(x,y){return x[y.name]=y,x},{})}else if(e.isObject(d))this.tokensMap=e.cloneObj(d);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=c.EOF;var g=e.every(e.values(d),function(x){return e.isEmpty(x.categoryMatches)});this.tokenMatcher=g?l.tokenStructuredMatcherNoCategories:l.tokenStructuredMatcher,l.augmentTokenTypes(e.values(this.tokensMap))},f.prototype.defineRule=function(d,m,v){if(this.selfAnalysisDone)throw Error("Grammar rule <"+d+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var p=e.has(v,"resyncEnabled")?v.resyncEnabled:s.DEFAULT_RULE_CONFIG.resyncEnabled,g=e.has(v,"recoveryValueFunc")?v.recoveryValueFunc:s.DEFAULT_RULE_CONFIG.recoveryValueFunc,x=this.ruleShortNameIdx<<t.BITS_FOR_METHOD_TYPE+t.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[x]=d,this.fullRuleNameToShort[d]=x;function y(_){try{if(this.outputCst===!0){m.apply(this,_);var M=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(M),M}else return m.apply(this,_)}catch(A){return this.invokeRuleCatch(A,p,g)}finally{this.ruleFinallyStateUpdate()}}var b=function(_,M){return _===void 0&&(_=0),this.ruleInvocationStateUpdate(x,d,_),y.call(this,M)},S="ruleName";return b[S]=d,b.originalGrammarAction=m,b},f.prototype.invokeRuleCatch=function(d,m,v){var p=this.RULE_STACK.length===1,g=m&&!this.isBackTracking()&&this.recoveryEnabled;if(r.isRecognitionException(d)){var x=d;if(g){var y=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(y))if(x.resyncedTokens=this.reSyncTo(y),this.outputCst){var b=this.CST_STACK[this.CST_STACK.length-1];return b.recoveredNode=!0,b}else return v();else{if(this.outputCst){var b=this.CST_STACK[this.CST_STACK.length-1];b.recoveredNode=!0,x.partialCstResult=b}throw x}}else{if(p)return this.moveToTerminatedState(),v();throw x}}else throw d},f.prototype.optionInternal=function(d,m){var v=this.getKeyForAutomaticLookahead(t.OPTION_IDX,m);return this.optionInternalLogic(d,m,v)},f.prototype.optionInternalLogic=function(d,m,v){var p=this,g=this.getLaFuncFromCache(v),x,y;if(d.DEF!==void 0){if(x=d.DEF,y=d.GATE,y!==void 0){var b=g;g=function(){return y.call(p)&&b.call(p)}}}else x=d;if(g.call(this)===!0)return x.call(this)},f.prototype.atLeastOneInternal=function(d,m){var v=this.getKeyForAutomaticLookahead(t.AT_LEAST_ONE_IDX,d);return this.atLeastOneInternalLogic(d,m,v)},f.prototype.atLeastOneInternalLogic=function(d,m,v){var p=this,g=this.getLaFuncFromCache(v),x,y;if(m.DEF!==void 0){if(x=m.DEF,y=m.GATE,y!==void 0){var b=g;g=function(){return y.call(p)&&b.call(p)}}}else x=m;if(g.call(this)===!0)for(var S=this.doSingleRepetition(x);g.call(this)===!0&&S===!0;)S=this.doSingleRepetition(x);else throw this.raiseEarlyExitException(d,i.PROD_TYPE.REPETITION_MANDATORY,m.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[d,m],g,t.AT_LEAST_ONE_IDX,d,o.NextTerminalAfterAtLeastOneWalker)},f.prototype.atLeastOneSepFirstInternal=function(d,m){var v=this.getKeyForAutomaticLookahead(t.AT_LEAST_ONE_SEP_IDX,d);this.atLeastOneSepFirstInternalLogic(d,m,v)},f.prototype.atLeastOneSepFirstInternalLogic=function(d,m,v){var p=this,g=m.DEF,x=m.SEP,y=this.getLaFuncFromCache(v);if(y.call(this)===!0){g.call(this);for(var b=function(){return p.tokenMatcher(p.LA(1),x)};this.tokenMatcher(this.LA(1),x)===!0;)this.CONSUME(x),g.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[d,x,b,g,o.NextTerminalAfterAtLeastOneSepWalker],b,t.AT_LEAST_ONE_SEP_IDX,d,o.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(d,i.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,m.ERR_MSG)},f.prototype.manyInternal=function(d,m){var v=this.getKeyForAutomaticLookahead(t.MANY_IDX,d);return this.manyInternalLogic(d,m,v)},f.prototype.manyInternalLogic=function(d,m,v){var p=this,g=this.getLaFuncFromCache(v),x,y;if(m.DEF!==void 0){if(x=m.DEF,y=m.GATE,y!==void 0){var b=g;g=function(){return y.call(p)&&b.call(p)}}}else x=m;for(var S=!0;g.call(this)===!0&&S===!0;)S=this.doSingleRepetition(x);this.attemptInRepetitionRecovery(this.manyInternal,[d,m],g,t.MANY_IDX,d,o.NextTerminalAfterManyWalker,S)},f.prototype.manySepFirstInternal=function(d,m){var v=this.getKeyForAutomaticLookahead(t.MANY_SEP_IDX,d);this.manySepFirstInternalLogic(d,m,v)},f.prototype.manySepFirstInternalLogic=function(d,m,v){var p=this,g=m.DEF,x=m.SEP,y=this.getLaFuncFromCache(v);if(y.call(this)===!0){g.call(this);for(var b=function(){return p.tokenMatcher(p.LA(1),x)};this.tokenMatcher(this.LA(1),x)===!0;)this.CONSUME(x),g.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[d,x,b,g,o.NextTerminalAfterManySepWalker],b,t.MANY_SEP_IDX,d,o.NextTerminalAfterManySepWalker)}},f.prototype.repetitionSepSecondInternal=function(d,m,v,p,g){for(;v();)this.CONSUME(m),p.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[d,m,v,p,g],v,t.AT_LEAST_ONE_SEP_IDX,d,g)},f.prototype.doSingleRepetition=function(d){var m=this.getLexerPosition();d.call(this);var v=this.getLexerPosition();return v>m},f.prototype.orInternal=function(d,m){var v=this.getKeyForAutomaticLookahead(t.OR_IDX,m),p=e.isArray(d)?d:d.DEF,g=this.getLaFuncFromCache(v),x=g.call(this,p);if(x!==void 0){var y=p[x];return y.ALT.call(this)}this.raiseNoAltException(m,d.ERR_MSG)},f.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var d=this.LA(1),m=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:d,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new r.NotAllInputParsedException(m,d))}},f.prototype.subruleInternal=function(d,m,v){var p;try{var g=v!==void 0?v.ARGS:void 0;return p=d.call(this,m,g),this.cstPostNonTerminal(p,v!==void 0&&v.LABEL!==void 0?v.LABEL:d.ruleName),p}catch(x){this.subruleInternalError(x,v,d.ruleName)}},f.prototype.subruleInternalError=function(d,m,v){throw r.isRecognitionException(d)&&d.partialCstResult!==void 0&&(this.cstPostNonTerminal(d.partialCstResult,m!==void 0&&m.LABEL!==void 0?m.LABEL:v),delete d.partialCstResult),d},f.prototype.consumeInternal=function(d,m,v){var p;try{var g=this.LA(1);this.tokenMatcher(g,d)===!0?(this.consumeToken(),p=g):this.consumeInternalError(d,g,v)}catch(x){p=this.consumeInternalRecovery(d,m,x)}return this.cstPostTerminal(v!==void 0&&v.LABEL!==void 0?v.LABEL:d.name,p),p},f.prototype.consumeInternalError=function(d,m,v){var p,g=this.LA(0);throw v!==void 0&&v.ERR_MSG?p=v.ERR_MSG:p=this.errorMessageProvider.buildMismatchTokenMessage({expected:d,actual:m,previous:g,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new r.MismatchedTokenException(p,m,g))},f.prototype.consumeInternalRecovery=function(d,m,v){if(this.recoveryEnabled&&v.name==="MismatchedTokenException"&&!this.isBackTracking()){var p=this.getFollowsForInRuleRecovery(d,m);try{return this.tryInRuleRecovery(d,p)}catch(g){throw g.name===a.IN_RULE_RECOVERY_EXCEPTION?v:g}}else throw v},f.prototype.saveRecogState=function(){var d=this.errors,m=e.cloneArr(this.RULE_STACK);return{errors:d,lexerState:this.exportLexerState(),RULE_STACK:m,CST_STACK:this.CST_STACK}},f.prototype.reloadRecogState=function(d){this.errors=d.errors,this.importLexerState(d.lexerState),this.RULE_STACK=d.RULE_STACK},f.prototype.ruleInvocationStateUpdate=function(d,m,v){this.RULE_OCCURRENCE_STACK.push(v),this.RULE_STACK.push(d),this.cstInvocationStateUpdate(m,d)},f.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},f.prototype.getCurrRuleFullName=function(){var d=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[d]},f.prototype.shortRuleNameToFullName=function(d){return this.shortRuleNameToFull[d]},f.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),c.EOF)},f.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},f}();n.RecognizerEngine=h}),Bk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorHandler=void 0;var e=rp(),t=Sn(),r=Jv(),i=To(),o=function(){function s(){}return s.prototype.initErrorHandler=function(a){this._errors=[],this.errorMessageProvider=t.has(a,"errorMessageProvider")?a.errorMessageProvider:i.DEFAULT_PARSER_CONFIG.errorMessageProvider},s.prototype.SAVE_ERROR=function(a){if(e.isRecognitionException(a))return a.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:t.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(a),a;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(s.prototype,"errors",{get:function(){return t.cloneArr(this._errors)},set:function(a){this._errors=a},enumerable:!1,configurable:!0}),s.prototype.raiseEarlyExitException=function(a,c,l){for(var u=this.getCurrRuleFullName(),h=this.getGAstProductions()[u],f=r.getLookaheadPathsForOptionalProd(a,h,c,this.maxLookahead),d=f[0],m=[],v=1;v<=this.maxLookahead;v++)m.push(this.LA(v));var p=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:d,actual:m,previous:this.LA(0),customUserDescription:l,ruleName:u});throw this.SAVE_ERROR(new e.EarlyExitException(p,this.LA(1),this.LA(0)))},s.prototype.raiseNoAltException=function(a,c){for(var l=this.getCurrRuleFullName(),u=this.getGAstProductions()[l],h=r.getLookaheadPathsForOr(a,u,this.maxLookahead),f=[],d=1;d<=this.maxLookahead;d++)f.push(this.LA(d));var m=this.LA(0),v=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:h,actual:f,previous:m,customUserDescription:c,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new e.NoViableAltException(v,this.LA(1),m))},s}();n.ErrorHandler=o}),zk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ContentAssist=void 0;var e=Zv(),t=Sn(),r=function(){function i(){}return i.prototype.initContentAssist=function(){},i.prototype.computeContentAssist=function(o,s){var a=this.gastProductionsCache[o];if(t.isUndefined(a))throw Error("Rule ->"+o+"<- does not exist in this grammar.");return e.nextPossibleTokensAfter([a],s,this.tokenMatcher,this.maxLookahead)},i.prototype.getNextPossibleTokenTypes=function(o){var s=t.first(o.ruleStack),a=this.getGAstProductions(),c=a[s],l=new e.NextAfterTokenWalker(c,o).startWalking();return l},i}();n.ContentAssist=r}),Gk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GastRecorder=void 0;var e=Sn(),t=ro(),r=Xv(),i=tp(),o=Sc(),s=To(),a=$b(),c={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(c);var l=!0,u=Math.pow(2,a.BITS_FOR_OCCURRENCE_IDX)-1,h=o.createToken({name:"RECORDING_PHASE_TOKEN",pattern:r.Lexer.NA});i.augmentTokenTypes([h]);var f=o.createTokenInstance(h,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(f);var d={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},m=function(){function y(){}return y.prototype.initGastRecorder=function(b){this.recordingProdStack=[],this.RECORDING_PHASE=!1},y.prototype.enableRecording=function(){var b=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var S=function(M){var A=M>0?M:"";b["CONSUME"+A]=function(w,T){return this.consumeInternalRecord(w,M,T)},b["SUBRULE"+A]=function(w,T){return this.subruleInternalRecord(w,M,T)},b["OPTION"+A]=function(w){return this.optionInternalRecord(w,M)},b["OR"+A]=function(w){return this.orInternalRecord(w,M)},b["MANY"+A]=function(w){this.manyInternalRecord(M,w)},b["MANY_SEP"+A]=function(w){this.manySepFirstInternalRecord(M,w)},b["AT_LEAST_ONE"+A]=function(w){this.atLeastOneInternalRecord(M,w)},b["AT_LEAST_ONE_SEP"+A]=function(w){this.atLeastOneSepFirstInternalRecord(M,w)}},_=0;_<10;_++)S(_);b.consume=function(M,A,w){return this.consumeInternalRecord(A,M,w)},b.subrule=function(M,A,w){return this.subruleInternalRecord(A,M,w)},b.option=function(M,A){return this.optionInternalRecord(A,M)},b.or=function(M,A){return this.orInternalRecord(A,M)},b.many=function(M,A){this.manyInternalRecord(M,A)},b.atLeastOne=function(M,A){this.atLeastOneInternalRecord(M,A)},b.ACTION=b.ACTION_RECORD,b.BACKTRACK=b.BACKTRACK_RECORD,b.LA=b.LA_RECORD})},y.prototype.disableRecording=function(){var b=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var S=0;S<10;S++){var _=S>0?S:"";delete b["CONSUME"+_],delete b["SUBRULE"+_],delete b["OPTION"+_],delete b["OR"+_],delete b["MANY"+_],delete b["MANY_SEP"+_],delete b["AT_LEAST_ONE"+_],delete b["AT_LEAST_ONE_SEP"+_]}delete b.consume,delete b.subrule,delete b.option,delete b.or,delete b.many,delete b.atLeastOne,delete b.ACTION,delete b.BACKTRACK,delete b.LA})},y.prototype.ACTION_RECORD=function(b){},y.prototype.BACKTRACK_RECORD=function(b,S){return function(){return!0}},y.prototype.LA_RECORD=function(b){return s.END_OF_FILE},y.prototype.topLevelRuleRecord=function(b,S){try{var _=new t.Rule({definition:[],name:b});return _.name=b,this.recordingProdStack.push(_),S.call(this),this.recordingProdStack.pop(),_}catch(M){if(M.KNOWN_RECORDER_ERROR!==!0)try{M.message=M.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw M}throw M}},y.prototype.optionInternalRecord=function(b,S){return v.call(this,t.Option,b,S)},y.prototype.atLeastOneInternalRecord=function(b,S){v.call(this,t.RepetitionMandatory,S,b)},y.prototype.atLeastOneSepFirstInternalRecord=function(b,S){v.call(this,t.RepetitionMandatoryWithSeparator,S,b,l)},y.prototype.manyInternalRecord=function(b,S){v.call(this,t.Repetition,S,b)},y.prototype.manySepFirstInternalRecord=function(b,S){v.call(this,t.RepetitionWithSeparator,S,b,l)},y.prototype.orInternalRecord=function(b,S){return p.call(this,b,S)},y.prototype.subruleInternalRecord=function(b,S,_){if(x(S),!b||e.has(b,"ruleName")===!1){var M=new Error("<SUBRULE"+g(S)+"> argument is invalid"+(" expecting a Parser method reference but got: <"+JSON.stringify(b)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw M.KNOWN_RECORDER_ERROR=!0,M}var A=e.peek(this.recordingProdStack),w=b.ruleName,T=new t.NonTerminal({idx:S,nonTerminalName:w,referencedRule:void 0});return A.definition.push(T),this.outputCst?d:c},y.prototype.consumeInternalRecord=function(b,S,_){if(x(S),!i.hasShortKeyProperty(b)){var M=new Error("<CONSUME"+g(S)+"> argument is invalid"+(" expecting a TokenType reference but got: <"+JSON.stringify(b)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw M.KNOWN_RECORDER_ERROR=!0,M}var A=e.peek(this.recordingProdStack),w=new t.Terminal({idx:S,terminalType:b});return A.definition.push(w),f},y}();n.GastRecorder=m;function v(y,b,S,_){_===void 0&&(_=!1),x(S);var M=e.peek(this.recordingProdStack),A=e.isFunction(b)?b:b.DEF,w=new y({definition:[],idx:S});return _&&(w.separator=b.SEP),e.has(b,"MAX_LOOKAHEAD")&&(w.maxLookahead=b.MAX_LOOKAHEAD),this.recordingProdStack.push(w),A.call(this),M.definition.push(w),this.recordingProdStack.pop(),c}function p(y,b){var S=this;x(b);var _=e.peek(this.recordingProdStack),M=e.isArray(y)===!1,A=M===!1?y:y.DEF,w=new t.Alternation({definition:[],idx:b,ignoreAmbiguities:M&&y.IGNORE_AMBIGUITIES===!0});e.has(y,"MAX_LOOKAHEAD")&&(w.maxLookahead=y.MAX_LOOKAHEAD);var T=e.some(A,function(D){return e.isFunction(D.GATE)});return w.hasPredicates=T,_.definition.push(w),e.forEach(A,function(D){var N=new t.Alternative({definition:[]});w.definition.push(N),e.has(D,"IGNORE_AMBIGUITIES")?N.ignoreAmbiguities=D.IGNORE_AMBIGUITIES:e.has(D,"GATE")&&(N.ignoreAmbiguities=!0),S.recordingProdStack.push(N),D.ALT.call(S),S.recordingProdStack.pop()}),c}function g(y){return y===0?"":""+y}function x(y){if(y<0||y>u){var b=new Error("Invalid DSL Method idx value: <"+y+`>
	`+("Idx value must be a none negative value smaller than "+(u+1)));throw b.KNOWN_RECORDER_ERROR=!0,b}}}),Vk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PerformanceTracer=void 0;var e=Sn(),t=To(),r=function(){function i(){}return i.prototype.initPerformanceTracer=function(o){if(e.has(o,"traceInitPerf")){var s=o.traceInitPerf,a=typeof s=="number";this.traceInitMaxIdent=a?s:1/0,this.traceInitPerf=a?s>0:s}else this.traceInitMaxIdent=0,this.traceInitPerf=t.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},i.prototype.TRACE_INIT=function(o,s){if(this.traceInitPerf===!0){this.traceInitIndent++;var a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(a+"--> <"+o+">");var c=e.timer(s),l=c.time,u=c.value,h=l>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&h(a+"<-- <"+o+"> time: "+l+"ms"),this.traceInitIndent--,u}else return s()},i}();n.PerformanceTracer=r}),Hk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.applyMixins=void 0;function e(t,r){r.forEach(function(i){var o=i.prototype;Object.getOwnPropertyNames(o).forEach(function(s){if(s!=="constructor"){var a=Object.getOwnPropertyDescriptor(o,s);a&&(a.get||a.set)?Object.defineProperty(t.prototype,s,a):t.prototype[s]=i.prototype[s]}})})}n.applyMixins=e}),To=Zt(n=>{"use strict";var e=n&&n.__extends||function(){var M=function(A,w){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,D){T.__proto__=D}||function(T,D){for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(T[N]=D[N])},M(A,w)};return function(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");M(A,w);function T(){this.constructor=A}A.prototype=w===null?Object.create(w):(T.prototype=w.prototype,new T)}}();Object.defineProperty(n,"__esModule",{value:!0}),n.EmbeddedActionsParser=n.CstParser=n.Parser=n.EMPTY_ALT=n.ParserDefinitionErrorType=n.DEFAULT_RULE_CONFIG=n.DEFAULT_PARSER_CONFIG=n.END_OF_FILE=void 0;var t=Sn(),r=Ik(),i=Sc(),o=Yv(),s=Pk(),a=yM(),c=Dk(),l=Lk(),u=Ok(),h=kk(),f=Uk(),d=Bk(),m=zk(),v=Gk(),p=Vk(),g=Hk();n.END_OF_FILE=i.createTokenInstance(i.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(n.END_OF_FILE),n.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:o.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),n.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});var x;(function(M){M[M.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",M[M.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",M[M.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",M[M.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",M[M.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",M[M.LEFT_RECURSION=5]="LEFT_RECURSION",M[M.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",M[M.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",M[M.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",M[M.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",M[M.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",M[M.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",M[M.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"})(x=n.ParserDefinitionErrorType||(n.ParserDefinitionErrorType={}));function y(M){return M===void 0&&(M=void 0),function(){return M}}n.EMPTY_ALT=y;var b=function(){function M(A,w){this.definitionErrors=[],this.selfAnalysisDone=!1;var T=this;if(T.initErrorHandler(w),T.initLexerAdapter(),T.initLooksAhead(w),T.initRecognizerEngine(A,w),T.initRecoverable(w),T.initTreeBuilder(w),T.initContentAssist(),T.initGastRecorder(w),T.initPerformanceTracer(w),t.has(w,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=t.has(w,"skipValidations")?w.skipValidations:n.DEFAULT_PARSER_CONFIG.skipValidations}return M.performSelfAnalysis=function(A){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},M.prototype.performSelfAnalysis=function(){var A=this;this.TRACE_INIT("performSelfAnalysis",function(){var w;A.selfAnalysisDone=!0;var T=A.className;A.TRACE_INIT("toFastProps",function(){t.toFastProperties(A)}),A.TRACE_INIT("Grammar Recording",function(){try{A.enableRecording(),t.forEach(A.definedRulesNames,function(N){var P=A[N],E=P.originalGrammarAction,U=void 0;A.TRACE_INIT(N+" Rule",function(){U=A.topLevelRuleRecord(N,E)}),A.gastProductionsCache[N]=U})}finally{A.disableRecording()}});var D=[];if(A.TRACE_INIT("Grammar Resolving",function(){D=s.resolveGrammar({rules:t.values(A.gastProductionsCache)}),A.definitionErrors=A.definitionErrors.concat(D)}),A.TRACE_INIT("Grammar Validations",function(){if(t.isEmpty(D)&&A.skipValidations===!1){var N=s.validateGrammar({rules:t.values(A.gastProductionsCache),maxLookahead:A.maxLookahead,tokenTypes:t.values(A.tokensMap),errMsgProvider:o.defaultGrammarValidatorErrorProvider,grammarName:T});A.definitionErrors=A.definitionErrors.concat(N)}}),t.isEmpty(A.definitionErrors)&&(A.recoveryEnabled&&A.TRACE_INIT("computeAllProdsFollows",function(){var N=r.computeAllProdsFollows(t.values(A.gastProductionsCache));A.resyncFollows=N}),A.TRACE_INIT("ComputeLookaheadFunctions",function(){A.preComputeLookaheadFunctions(t.values(A.gastProductionsCache))})),!M.DEFER_DEFINITION_ERRORS_HANDLING&&!t.isEmpty(A.definitionErrors))throw w=t.map(A.definitionErrors,function(N){return N.message}),new Error(`Parser Definition Errors detected:
 `+w.join(`
-------------------------------
`))})},M.DEFER_DEFINITION_ERRORS_HANDLING=!1,M}();n.Parser=b,g.applyMixins(b,[a.Recoverable,c.LooksAhead,l.TreeBuilder,u.LexerAdapter,f.RecognizerEngine,h.RecognizerApi,d.ErrorHandler,m.ContentAssist,v.GastRecorder,p.PerformanceTracer]);var S=function(M){e(A,M);function A(w,T){T===void 0&&(T=n.DEFAULT_PARSER_CONFIG);var D=this,N=t.cloneObj(T);return N.outputCst=!0,D=M.call(this,w,N)||this,D}return A}(b);n.CstParser=S;var _=function(M){e(A,M);function A(w,T){T===void 0&&(T=n.DEFAULT_PARSER_CONFIG);var D=this,N=t.cloneObj(T);return N.outputCst=!1,D=M.call(this,w,N)||this,D}return A}(b);n.EmbeddedActionsParser=_}),Wk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createSyntaxDiagramsCode=void 0;var e=fM();function t(r,i){var o=i===void 0?{}:i,s=o.resourceBase,a=s===void 0?"https://unpkg.com/chevrotain@"+e.VERSION+"/diagrams/":s,c=o.css,l=c===void 0?"https://unpkg.com/chevrotain@"+e.VERSION+"/diagrams/diagrams.css":c,u=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,h=`
<link rel='stylesheet' href='`+l+`'>
`,f=`
<script src='`+a+`vendor/railroad-diagrams.js'><\/script>
<script src='`+a+`src/diagrams_builder.js'><\/script>
<script src='`+a+`src/diagrams_behavior.js'><\/script>
<script src='`+a+`src/main.js'><\/script>
`,d=`
<div id="diagrams" align="center"></div>
`,m=`
<script>
    window.serializedGrammar = `+JSON.stringify(r,null,"  ")+`;
<\/script>
`,v=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return u+h+f+d+m+v}n.createSyntaxDiagramsCode=t}),jk=Zt(n=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Parser=n.createSyntaxDiagramsCode=n.clearCache=n.GAstVisitor=n.serializeProduction=n.serializeGrammar=n.Terminal=n.Rule=n.RepetitionWithSeparator=n.RepetitionMandatoryWithSeparator=n.RepetitionMandatory=n.Repetition=n.Option=n.NonTerminal=n.Alternative=n.Alternation=n.defaultLexerErrorProvider=n.NoViableAltException=n.NotAllInputParsedException=n.MismatchedTokenException=n.isRecognitionException=n.EarlyExitException=n.defaultParserErrorProvider=n.tokenName=n.tokenMatcher=n.tokenLabel=n.EOF=n.createTokenInstance=n.createToken=n.LexerDefinitionErrorType=n.Lexer=n.EMPTY_ALT=n.ParserDefinitionErrorType=n.EmbeddedActionsParser=n.CstParser=n.VERSION=void 0;var e=fM();Object.defineProperty(n,"VERSION",{enumerable:!0,get:function(){return e.VERSION}});var t=To();Object.defineProperty(n,"CstParser",{enumerable:!0,get:function(){return t.CstParser}}),Object.defineProperty(n,"EmbeddedActionsParser",{enumerable:!0,get:function(){return t.EmbeddedActionsParser}}),Object.defineProperty(n,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return t.ParserDefinitionErrorType}}),Object.defineProperty(n,"EMPTY_ALT",{enumerable:!0,get:function(){return t.EMPTY_ALT}});var r=Xv();Object.defineProperty(n,"Lexer",{enumerable:!0,get:function(){return r.Lexer}}),Object.defineProperty(n,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return r.LexerDefinitionErrorType}});var i=Sc();Object.defineProperty(n,"createToken",{enumerable:!0,get:function(){return i.createToken}}),Object.defineProperty(n,"createTokenInstance",{enumerable:!0,get:function(){return i.createTokenInstance}}),Object.defineProperty(n,"EOF",{enumerable:!0,get:function(){return i.EOF}}),Object.defineProperty(n,"tokenLabel",{enumerable:!0,get:function(){return i.tokenLabel}}),Object.defineProperty(n,"tokenMatcher",{enumerable:!0,get:function(){return i.tokenMatcher}}),Object.defineProperty(n,"tokenName",{enumerable:!0,get:function(){return i.tokenName}});var o=Yv();Object.defineProperty(n,"defaultParserErrorProvider",{enumerable:!0,get:function(){return o.defaultParserErrorProvider}});var s=rp();Object.defineProperty(n,"EarlyExitException",{enumerable:!0,get:function(){return s.EarlyExitException}}),Object.defineProperty(n,"isRecognitionException",{enumerable:!0,get:function(){return s.isRecognitionException}}),Object.defineProperty(n,"MismatchedTokenException",{enumerable:!0,get:function(){return s.MismatchedTokenException}}),Object.defineProperty(n,"NotAllInputParsedException",{enumerable:!0,get:function(){return s.NotAllInputParsedException}}),Object.defineProperty(n,"NoViableAltException",{enumerable:!0,get:function(){return s.NoViableAltException}});var a=pM();Object.defineProperty(n,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return a.defaultLexerErrorProvider}});var c=ro();Object.defineProperty(n,"Alternation",{enumerable:!0,get:function(){return c.Alternation}}),Object.defineProperty(n,"Alternative",{enumerable:!0,get:function(){return c.Alternative}}),Object.defineProperty(n,"NonTerminal",{enumerable:!0,get:function(){return c.NonTerminal}}),Object.defineProperty(n,"Option",{enumerable:!0,get:function(){return c.Option}}),Object.defineProperty(n,"Repetition",{enumerable:!0,get:function(){return c.Repetition}}),Object.defineProperty(n,"RepetitionMandatory",{enumerable:!0,get:function(){return c.RepetitionMandatory}}),Object.defineProperty(n,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return c.RepetitionMandatoryWithSeparator}}),Object.defineProperty(n,"RepetitionWithSeparator",{enumerable:!0,get:function(){return c.RepetitionWithSeparator}}),Object.defineProperty(n,"Rule",{enumerable:!0,get:function(){return c.Rule}}),Object.defineProperty(n,"Terminal",{enumerable:!0,get:function(){return c.Terminal}});var l=ro();Object.defineProperty(n,"serializeGrammar",{enumerable:!0,get:function(){return l.serializeGrammar}}),Object.defineProperty(n,"serializeProduction",{enumerable:!0,get:function(){return l.serializeProduction}});var u=np();Object.defineProperty(n,"GAstVisitor",{enumerable:!0,get:function(){return u.GAstVisitor}});function h(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}n.clearCache=h;var f=Wk();Object.defineProperty(n,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return f.createSyntaxDiagramsCode}});var d=function(){function m(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}return m}();n.Parser=d}),Ph=jk();var Qv=class extends xn{constructor(e){super(e)}load(e,t,r,i){let o=this,s=o.path===""?ul.extractUrlBase(e):o.path,a=new yi(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(c){try{t(o.parse(c,s))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e,t){let r={};function i(se){let H=o(),re=new ew(H.tokens),pe=new tw(H.tokenVocabulary),ee=s(pe.getBaseCstVisitorConstructor()),me=re.lex(se);pe.input=me.tokens;let xe=pe.vrml();if(pe.errors.length>0)throw console.error(pe.errors),Error("THREE.VRMLLoader: Parsing errors detected.");return ee.visit(xe)}function o(){let se=Ph.createToken,H=se({name:"RouteIdentifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*[\.][^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*/}),re=se({name:"Identifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]([^\0-\x20\x22\x27\x23\x2b\x2c\x2e\x5b\x5d\x5c\x7b\x7d])*/,longer_alt:H}),pe=["Anchor","Billboard","Collision","Group","Transform","Inline","LOD","Switch","AudioClip","DirectionalLight","PointLight","Script","Shape","Sound","SpotLight","WorldInfo","CylinderSensor","PlaneSensor","ProximitySensor","SphereSensor","TimeSensor","TouchSensor","VisibilitySensor","Box","Cone","Cylinder","ElevationGrid","Extrusion","IndexedFaceSet","IndexedLineSet","PointSet","Sphere","Color","Coordinate","Normal","TextureCoordinate","Appearance","FontStyle","ImageTexture","Material","MovieTexture","PixelTexture","TextureTransform","ColorInterpolator","CoordinateInterpolator","NormalInterpolator","OrientationInterpolator","PositionInterpolator","ScalarInterpolator","Background","Fog","NavigationInfo","Viewpoint","Text"],ee=se({name:"Version",pattern:/#VRML.*/,longer_alt:re}),me=se({name:"NodeName",pattern:new RegExp(pe.join("|")),longer_alt:re}),xe=se({name:"DEF",pattern:/DEF/,longer_alt:re}),ve=se({name:"USE",pattern:/USE/,longer_alt:re}),Se=se({name:"ROUTE",pattern:/ROUTE/,longer_alt:re}),Ie=se({name:"TO",pattern:/TO/,longer_alt:re}),Le=se({name:"StringLiteral",pattern:/"(?:[^\\"\n\r]|\\[bfnrtv"\\/]|\\u[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])*"/}),He=se({name:"HexLiteral",pattern:/0[xX][0-9a-fA-F]+/}),ot=se({name:"NumberLiteral",pattern:/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/}),Et=se({name:"TrueLiteral",pattern:/TRUE/}),Ve=se({name:"FalseLiteral",pattern:/FALSE/}),ce=se({name:"NullLiteral",pattern:/NULL/}),ke=se({name:"LSquare",pattern:/\[/}),Ue=se({name:"RSquare",pattern:/]/}),je=se({name:"LCurly",pattern:/{/}),We=se({name:"RCurly",pattern:/}/}),Pt=se({name:"Comment",pattern:/#.*/,group:Ph.Lexer.SKIPPED}),qt=[se({name:"WhiteSpace",pattern:/[ ,\s]/,group:Ph.Lexer.SKIPPED}),me,xe,ve,Se,Ie,Et,Ve,ce,ee,re,H,Le,He,ot,ke,Ue,je,We,Pt],sn={};for(let ct=0,qe=qt.length;ct<qe;ct++){let nt=qt[ct];sn[nt.name]=nt}return{tokens:qt,tokenVocabulary:sn}}function s(se){class H extends se{constructor(){super(),this.validateVisitor()}vrml(ee){let me={version:this.visit(ee.version),nodes:[],routes:[]};for(let xe=0,ve=ee.node.length;xe<ve;xe++){let Se=ee.node[xe];me.nodes.push(this.visit(Se))}if(ee.route)for(let xe=0,ve=ee.route.length;xe<ve;xe++){let Se=ee.route[xe];me.routes.push(this.visit(Se))}return me}version(ee){return ee.Version[0].image}node(ee){let me={name:ee.NodeName[0].image,fields:[]};if(ee.field)for(let xe=0,ve=ee.field.length;xe<ve;xe++){let Se=ee.field[xe];me.fields.push(this.visit(Se))}return ee.def&&(me.DEF=this.visit(ee.def[0])),me}field(ee){let me={name:ee.Identifier[0].image,type:null,values:null},xe;return ee.singleFieldValue&&(xe=this.visit(ee.singleFieldValue[0])),ee.multiFieldValue&&(xe=this.visit(ee.multiFieldValue[0])),me.type=xe.type,me.values=xe.values,me}def(ee){return(ee.Identifier||ee.NodeName)[0].image}use(ee){return{USE:(ee.Identifier||ee.NodeName)[0].image}}singleFieldValue(ee){return re(this,ee)}multiFieldValue(ee){return re(this,ee)}route(ee){return{FROM:ee.RouteIdentifier[0].image,TO:ee.RouteIdentifier[1].image}}}function re(pe,ee){let me={type:null,values:[]};if(ee.node){me.type="node";for(let xe=0,ve=ee.node.length;xe<ve;xe++){let Se=ee.node[xe];me.values.push(pe.visit(Se))}}if(ee.use){me.type="use";for(let xe=0,ve=ee.use.length;xe<ve;xe++){let Se=ee.use[xe];me.values.push(pe.visit(Se))}}if(ee.StringLiteral){me.type="string";for(let xe=0,ve=ee.StringLiteral.length;xe<ve;xe++){let Se=ee.StringLiteral[xe];me.values.push(Se.image.replace(/'|"/g,""))}}if(ee.NumberLiteral){me.type="number";for(let xe=0,ve=ee.NumberLiteral.length;xe<ve;xe++){let Se=ee.NumberLiteral[xe];me.values.push(parseFloat(Se.image))}}if(ee.HexLiteral){me.type="hex";for(let xe=0,ve=ee.HexLiteral.length;xe<ve;xe++){let Se=ee.HexLiteral[xe];me.values.push(Se.image)}}if(ee.TrueLiteral){me.type="boolean";for(let xe=0,ve=ee.TrueLiteral.length;xe<ve;xe++)ee.TrueLiteral[xe].image==="TRUE"&&me.values.push(!0)}if(ee.FalseLiteral){me.type="boolean";for(let xe=0,ve=ee.FalseLiteral.length;xe<ve;xe++)ee.FalseLiteral[xe].image==="FALSE"&&me.values.push(!1)}return ee.NullLiteral&&(me.type="null",ee.NullLiteral.forEach(function(){me.values.push(null)})),me}return new H}function a(se){let H=se.nodes,re=new Is;for(let pe=0,ee=H.length;pe<ee;pe++){let me=H[pe];c(me)}for(let pe=0,ee=H.length;pe<ee;pe++){let me=H[pe],xe=l(me);xe instanceof an&&re.add(xe),me.name==="WorldInfo"&&(re.userData.worldInfo=xe)}return re}function c(se){se.DEF&&(r[se.DEF]=se);let H=se.fields;for(let re=0,pe=H.length;re<pe;re++){let ee=H[re];if(ee.type==="node"){let me=ee.values;for(let xe=0,ve=me.length;xe<ve;xe++)c(me[xe])}}}function l(se){return se.USE?k(se.USE):(se.build!==void 0||(se.build=u(se)),se.build)}function u(se){let H=se.name,re;switch(H){case"Anchor":case"Group":case"Transform":case"Collision":re=h(se);break;case"Background":re=f(se);break;case"Shape":re=d(se);break;case"Appearance":re=m(se);break;case"Material":re=v(se);break;case"ImageTexture":re=y(se);break;case"PixelTexture":re=x(se);break;case"TextureTransform":re=b(se);break;case"IndexedFaceSet":re=M(se);break;case"IndexedLineSet":re=A(se);break;case"PointSet":re=w(se);break;case"Box":re=T(se);break;case"Cone":re=D(se);break;case"Cylinder":re=N(se);break;case"Sphere":re=P(se);break;case"ElevationGrid":re=E(se);break;case"Extrusion":re=U(se);break;case"Color":case"Coordinate":case"Normal":case"TextureCoordinate":re=S(se);break;case"WorldInfo":re=_(se);break;case"Billboard":case"Inline":case"LOD":case"Switch":case"AudioClip":case"DirectionalLight":case"PointLight":case"Script":case"Sound":case"SpotLight":case"CylinderSensor":case"PlaneSensor":case"ProximitySensor":case"SphereSensor":case"TimeSensor":case"TouchSensor":case"VisibilitySensor":case"Text":case"FontStyle":case"MovieTexture":case"ColorInterpolator":case"CoordinateInterpolator":case"NormalInterpolator":case"OrientationInterpolator":case"PositionInterpolator":case"ScalarInterpolator":case"Fog":case"NavigationInfo":case"Viewpoint":break;default:console.warn("THREE.VRMLLoader: Unknown node:",H);break}return re!==void 0&&se.DEF!==void 0&&re.hasOwnProperty("name")===!0&&(re.name=se.DEF),re}function h(se){let H=new rr,re=se.fields;for(let pe=0,ee=re.length;pe<ee;pe++){let me=re[pe],xe=me.name,ve=me.values;switch(xe){case"bboxCenter":break;case"bboxSize":break;case"center":break;case"children":B(ve,H);break;case"description":break;case"collide":break;case"parameter":break;case"rotation":let Se=new he(ve[0],ve[1],ve[2]),Ie=ve[3];H.quaternion.setFromAxisAngle(Se,Ie);break;case"scale":H.scale.set(ve[0],ve[1],ve[2]);break;case"scaleOrientation":break;case"translation":H.position.set(ve[0],ve[1],ve[2]);break;case"proxy":break;case"url":break;default:console.warn("THREE.VRMLLoader: Unknown field:",xe);break}}return H}function f(se){let H=new rr,re,pe,ee,me,xe=se.fields;for(let Se=0,Ie=xe.length;Se<Ie;Se++){let Le=xe[Se],He=Le.name,ot=Le.values;switch(He){case"groundAngle":re=ot;break;case"groundColor":pe=ot;break;case"backUrl":break;case"bottomUrl":break;case"frontUrl":break;case"leftUrl":break;case"rightUrl":break;case"topUrl":break;case"skyAngle":ee=ot;break;case"skyColor":me=ot;break;default:console.warn("THREE.VRMLLoader: Unknown field:",He);break}}let ve=1e4;if(me){let Se=new Qu(ve,32,16),Ie=new yo({fog:!1,side:wr,depthWrite:!1,depthTest:!1});me.length>3?(G(Se,ve,ee,X(me),!0),Ie.vertexColors=!0):(Ie.color.setRGB(me[0],me[1],me[2]),Ie.color.convertSRGBToLinear());let Le=new hn(Se,Ie);H.add(Le)}if(pe&&pe.length>0){let Se=new Qu(ve,32,16,0,2*Math.PI,.5*Math.PI,1.5*Math.PI),Ie=new yo({fog:!1,side:wr,vertexColors:!0,depthWrite:!1,depthTest:!1});G(Se,ve,re,X(pe),!1);let Le=new hn(Se,Ie);H.add(Le)}return H.renderOrder=-1/0,H}function d(se){let H=se.fields,re=new yo({name:xn.DEFAULT_MATERIAL_NAME,color:0}),pe;for(let me=0,xe=H.length;me<xe;me++){let ve=H[me],Se=ve.name,Ie=ve.values;switch(Se){case"appearance":Ie[0]!==null&&(re=l(Ie[0]));break;case"geometry":Ie[0]!==null&&(pe=l(Ie[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",Se);break}}let ee;if(pe&&pe.attributes.position){let me=pe._type;if(me==="points"){let xe=new Fd({name:xn.DEFAULT_MATERIAL_NAME,color:16777215,opacity:re.opacity,transparent:re.transparent});pe.attributes.color!==void 0?xe.vertexColors=!0:re.isMeshPhongMaterial&&xe.color.copy(re.emissive),ee=new ev(pe,xe)}else if(me==="line"){let xe=new Gr({name:xn.DEFAULT_MATERIAL_NAME,color:16777215,opacity:re.opacity,transparent:re.transparent});pe.attributes.color!==void 0?xe.vertexColors=!0:re.isMeshPhongMaterial&&xe.color.copy(re.emissive),ee=new Rs(pe,xe)}else pe._solid!==void 0&&(re.side=pe._solid?vo:br),pe.attributes.color!==void 0&&(re.vertexColors=!0),ee=new hn(pe,re)}else ee=new an,ee.visible=!1;return ee}function m(se){let H=new Rn,re,pe=se.fields;for(let ee=0,me=pe.length;ee<me;ee++){let xe=pe[ee],ve=xe.name,Se=xe.values;switch(ve){case"material":if(Se[0]!==null){let Le=l(Se[0]);Le.diffuseColor&&H.color.copy(Le.diffuseColor),Le.emissiveColor&&H.emissive.copy(Le.emissiveColor),Le.shininess&&(H.shininess=Le.shininess),Le.specularColor&&H.specular.copy(Le.specularColor),Le.transparency&&(H.opacity=1-Le.transparency),Le.transparency>0&&(H.transparent=!0)}else H=new yo({name:xn.DEFAULT_MATERIAL_NAME,color:0});break;case"texture":let Ie=Se[0];Ie!==null&&(Ie.name==="ImageTexture"||Ie.name==="PixelTexture")&&(H.map=l(Ie));break;case"textureTransform":Se[0]!==null&&(re=l(Se[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",ve);break}}if(H.map){if(H.map.__type){switch(H.map.__type){case rs.INTENSITY_ALPHA:H.opacity=1;break;case rs.RGB:H.color.set(16777215);break;case rs.RGBA:H.color.set(16777215),H.opacity=1;break;default:}delete H.map.__type}re&&(H.map.center.copy(re.center),H.map.rotation=re.rotation,H.map.repeat.copy(re.scale),H.map.offset.copy(re.translation))}return H}function v(se){let H={},re=se.fields;for(let pe=0,ee=re.length;pe<ee;pe++){let me=re[pe],xe=me.name,ve=me.values;switch(xe){case"ambientIntensity":break;case"diffuseColor":H.diffuseColor=new Ke(ve[0],ve[1],ve[2]),H.diffuseColor.convertSRGBToLinear();break;case"emissiveColor":H.emissiveColor=new Ke(ve[0],ve[1],ve[2]),H.emissiveColor.convertSRGBToLinear();break;case"shininess":H.shininess=ve[0];break;case"specularColor":H.specularColor=new Ke(ve[0],ve[1],ve[2]),H.specularColor.convertSRGBToLinear();break;case"transparency":H.transparency=ve[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",xe);break}}return H}function p(se,H,re){let pe;switch(H){case rs.INTENSITY:pe=parseInt(se),re.r=pe,re.g=pe,re.b=pe,re.a=1;break;case rs.INTENSITY_ALPHA:pe=parseInt("0x"+se.substring(2,4)),re.r=pe,re.g=pe,re.b=pe,re.a=parseInt("0x"+se.substring(4,6));break;case rs.RGB:re.r=parseInt("0x"+se.substring(2,4)),re.g=parseInt("0x"+se.substring(4,6)),re.b=parseInt("0x"+se.substring(6,8)),re.a=1;break;case rs.RGBA:re.r=parseInt("0x"+se.substring(2,4)),re.g=parseInt("0x"+se.substring(4,6)),re.b=parseInt("0x"+se.substring(6,8)),re.a=parseInt("0x"+se.substring(8,10));break;default:}}function g(se){let H;switch(se){case 1:H=rs.INTENSITY;break;case 2:H=rs.INTENSITY_ALPHA;break;case 3:H=rs.RGB;break;case 4:H=rs.RGBA;break;default:}return H}function x(se){let H,re=qn,pe=qn,ee=se.fields;for(let me=0,xe=ee.length;me<xe;me++){let ve=ee[me],Se=ve.name,Ie=ve.values;switch(Se){case"image":let Le=Ie[0],He=Ie[1],ot=Ie[2],Et=g(ot),Ve=new Uint8Array(4*Le*He),ce={r:0,g:0,b:0,a:0};for(let ke=3,Ue=0,je=Ie.length;ke<je;ke++,Ue++){p(Ie[ke],Et,ce);let We=Ue*4;Ve[We+0]=ce.r,Ve[We+1]=ce.g,Ve[We+2]=ce.b,Ve[We+3]=ce.a}H=new Zu(Ve,Le,He),H.colorSpace=Ln,H.needsUpdate=!0,H.__type=Et;break;case"repeatS":Ie[0]===!1&&(re=Qn);break;case"repeatT":Ie[0]===!1&&(pe=Qn);break;default:console.warn("THREE.VRMLLoader: Unknown field:",Se);break}}return H&&(H.wrapS=re,H.wrapT=pe),H}function y(se){let H,re=qn,pe=qn,ee=se.fields;for(let me=0,xe=ee.length;me<xe;me++){let ve=ee[me],Se=ve.name,Ie=ve.values;switch(Se){case"url":let Le=Ie[0];Le&&(H=ge.load(Le));break;case"repeatS":Ie[0]===!1&&(re=Qn);break;case"repeatT":Ie[0]===!1&&(pe=Qn);break;default:console.warn("THREE.VRMLLoader: Unknown field:",Se);break}}return H&&(H.wrapS=re,H.wrapT=pe,H.colorSpace=Ln),H}function b(se){let H={center:new Ne,rotation:new Ne,scale:new Ne,translation:new Ne},re=se.fields;for(let pe=0,ee=re.length;pe<ee;pe++){let me=re[pe],xe=me.name,ve=me.values;switch(xe){case"center":H.center.set(ve[0],ve[1]);break;case"rotation":H.rotation=ve[0];break;case"scale":H.scale.set(ve[0],ve[1]);break;case"translation":H.translation.set(ve[0],ve[1]);break;default:console.warn("THREE.VRMLLoader: Unknown field:",xe);break}}return H}function S(se){return se.fields[0].values}function _(se){let H={},re=se.fields;for(let pe=0,ee=re.length;pe<ee;pe++){let me=re[pe],xe=me.name,ve=me.values;switch(xe){case"title":H.title=ve[0];break;case"info":H.info=ve;break;default:console.warn("THREE.VRMLLoader: Unknown field:",xe);break}}return H}function M(se){let H,re,pe,ee,me=!0,xe=!0,ve=0,Se,Ie,Le,He,ot=!0,Et=!0,Ve=se.fields;for(let At=0,qt=Ve.length;At<qt;At++){let sn=Ve[At],ct=sn.name,qe=sn.values;switch(ct){case"color":let nt=qe[0];nt!==null&&(H=l(nt));break;case"coord":let Je=qe[0];Je!==null&&(re=l(Je));break;case"normal":let ht=qe[0];ht!==null&&(pe=l(ht));break;case"texCoord":let wt=qe[0];wt!==null&&(ee=l(wt));break;case"ccw":me=qe[0];break;case"colorIndex":Se=qe;break;case"colorPerVertex":ot=qe[0];break;case"convex":break;case"coordIndex":Ie=qe;break;case"creaseAngle":ve=qe[0];break;case"normalIndex":Le=qe;break;case"normalPerVertex":Et=qe[0];break;case"solid":xe=qe[0];break;case"texCoordIndex":He=qe;break;default:console.warn("THREE.VRMLLoader: Unknown field:",ct);break}}if(Ie===void 0)return console.warn("THREE.VRMLLoader: Missing coordIndex."),new Yt;let ce=O(Ie,me),ke,Ue,je;if(H){if(ot===!0)if(Se&&Se.length>0){let At=O(Se,me);ke=Z(ce,At,H,3)}else ke=K(ce,new Ye(H,3));else if(Se&&Se.length>0){let At=ne(H,Se),qt=q(At,Ie);ke=J(ce,qt)}else{let At=q(H,Ie);ke=J(ce,At)}F(ke)}if(pe)if(Et===!0)if(Le&&Le.length>0){let At=O(Le,me);Ue=Z(ce,At,pe,3)}else Ue=K(ce,new Ye(pe,3));else if(Le&&Le.length>0){let At=ne(pe,Le),qt=q(At,Ie);Ue=J(ce,qt)}else{let At=q(pe,Ie);Ue=J(ce,At)}else Ue=de(ce,re,ve);if(ee)if(He&&He.length>0){let At=O(He,me);je=Z(ce,At,ee,2)}else je=K(ce,new Ye(ee,2));let We=new Yt,Pt=K(ce,new Ye(re,3));return We.setAttribute("position",Pt),We.setAttribute("normal",Ue),ke&&We.setAttribute("color",ke),je&&We.setAttribute("uv",je),We._solid=xe,We._type="mesh",We}function A(se){let H,re,pe,ee,me=!0,xe=se.fields;for(let He=0,ot=xe.length;He<ot;He++){let Et=xe[He],Ve=Et.name,ce=Et.values;switch(Ve){case"color":let ke=ce[0];ke!==null&&(H=l(ke));break;case"coord":let Ue=ce[0];Ue!==null&&(re=l(Ue));break;case"colorIndex":pe=ce;break;case"colorPerVertex":me=ce[0];break;case"coordIndex":ee=ce;break;default:console.warn("THREE.VRMLLoader: Unknown field:",Ve);break}}let ve,Se=ae(ee);if(H){if(me===!0)if(pe.length>0){let He=ae(pe);ve=Z(Se,He,H,3)}else ve=K(Se,new Ye(H,3));else if(pe.length>0){let He=ne(H,pe),ot=ye(He,ee);ve=W(Se,ot)}else{let He=ye(H,ee);ve=W(Se,He)}F(ve)}let Ie=new Yt,Le=K(Se,new Ye(re,3));return Ie.setAttribute("position",Le),ve&&Ie.setAttribute("color",ve),Ie._type="line",Ie}function w(se){let H,re,pe=se.fields;for(let me=0,xe=pe.length;me<xe;me++){let ve=pe[me],Se=ve.name,Ie=ve.values;switch(Se){case"color":let Le=Ie[0];Le!==null&&(H=l(Le));break;case"coord":let He=Ie[0];He!==null&&(re=l(He));break;default:console.warn("THREE.VRMLLoader: Unknown field:",Se);break}}let ee=new Yt;if(ee.setAttribute("position",new Ye(re,3)),H){let me=new Ye(H,3);F(me),ee.setAttribute("color",me)}return ee._type="points",ee}function T(se){let H=new he(2,2,2),re=se.fields;for(let ee=0,me=re.length;ee<me;ee++){let xe=re[ee],ve=xe.name,Se=xe.values;switch(ve){case"size":H.x=Se[0],H.y=Se[1],H.z=Se[2];break;default:console.warn("THREE.VRMLLoader: Unknown field:",ve);break}}return new lc(H.x,H.y,H.z)}function D(se){let H=1,re=2,pe=!1,ee=se.fields;for(let xe=0,ve=ee.length;xe<ve;xe++){let Se=ee[xe],Ie=Se.name,Le=Se.values;switch(Ie){case"bottom":pe=!Le[0];break;case"bottomRadius":H=Le[0];break;case"height":re=Le[0];break;case"side":break;default:console.warn("THREE.VRMLLoader: Unknown field:",Ie);break}}return new ov(H,re,16,1,pe)}function N(se){let H=1,re=2,pe=se.fields;for(let me=0,xe=pe.length;me<xe;me++){let ve=pe[me],Se=ve.name,Ie=ve.values;switch(Se){case"bottom":break;case"radius":H=Ie[0];break;case"height":re=Ie[0];break;case"side":break;case"top":break;default:console.warn("THREE.VRMLLoader: Unknown field:",Se);break}}return new Nd(H,H,re,16,1)}function P(se){let H=1,re=se.fields;for(let ee=0,me=re.length;ee<me;ee++){let xe=re[ee],ve=xe.name,Se=xe.values;switch(ve){case"radius":H=Se[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",ve);break}}return new Qu(H,16,16)}function E(se){let H,re,pe,ee,me=!0,xe=!0,ve=!0,Se=!0,Ie=0,Le=2,He=2,ot=1,Et=1,Ve=se.fields;for(let qe=0,nt=Ve.length;qe<nt;qe++){let Je=Ve[qe],ht=Je.name,wt=Je.values;switch(ht){case"color":let Fn=wt[0];Fn!==null&&(H=l(Fn));break;case"normal":let hi=wt[0];hi!==null&&(re=l(hi));break;case"texCoord":let Yi=wt[0];Yi!==null&&(pe=l(Yi));break;case"height":ee=wt;break;case"ccw":Se=wt[0];break;case"colorPerVertex":me=wt[0];break;case"creaseAngle":Ie=wt[0];break;case"normalPerVertex":xe=wt[0];break;case"solid":ve=wt[0];break;case"xDimension":Le=wt[0];break;case"xSpacing":ot=wt[0];break;case"zDimension":He=wt[0];break;case"zSpacing":Et=wt[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",ht);break}}let ce=[],ke=[],Ue=[],je=[];for(let qe=0;qe<He;qe++)for(let nt=0;nt<Le;nt++){let Je=qe*Le+nt,ht=ot*qe,wt=ee[Je],Fn=Et*nt;if(ce.push(ht,wt,Fn),H&&me===!0){let hi=H[Je*3+0],Yi=H[Je*3+1],Oo=H[Je*3+2];Ue.push(hi,Yi,Oo)}if(re&&xe===!0){let hi=re[Je*3+0],Yi=re[Je*3+1],Oo=re[Je*3+2];ke.push(hi,Yi,Oo)}if(pe){let hi=pe[Je*2+0],Yi=pe[Je*2+1];je.push(hi,Yi)}else je.push(qe/(Le-1),nt/(He-1))}let We=[];for(let qe=0;qe<Le-1;qe++)for(let nt=0;nt<He-1;nt++){let Je=qe+nt*Le,ht=qe+(nt+1)*Le,wt=qe+1+(nt+1)*Le,Fn=qe+1+nt*Le;Se===!0?(We.push(Je,wt,ht),We.push(wt,Je,Fn)):(We.push(Je,ht,wt),We.push(wt,Fn,Je))}let Pt=K(We,new Ye(ce,3)),At=K(We,new Ye(je,2)),qt,sn;if(H){if(me===!1){for(let qe=0;qe<Le-1;qe++)for(let nt=0;nt<He-1;nt++){let Je=qe+nt*(Le-1),ht=H[Je*3+0],wt=H[Je*3+1],Fn=H[Je*3+2];Ue.push(ht,wt,Fn),Ue.push(ht,wt,Fn),Ue.push(ht,wt,Fn),Ue.push(ht,wt,Fn),Ue.push(ht,wt,Fn),Ue.push(ht,wt,Fn)}qt=new Ye(Ue,3)}else qt=K(We,new Ye(Ue,3));F(qt)}if(re)if(xe===!1){for(let qe=0;qe<Le-1;qe++)for(let nt=0;nt<He-1;nt++){let Je=qe+nt*(Le-1),ht=re[Je*3+0],wt=re[Je*3+1],Fn=re[Je*3+2];ke.push(ht,wt,Fn),ke.push(ht,wt,Fn),ke.push(ht,wt,Fn),ke.push(ht,wt,Fn),ke.push(ht,wt,Fn),ke.push(ht,wt,Fn)}sn=new Ye(ke,3)}else sn=K(We,new Ye(ke,3));else sn=de(We,ce,Ie);let ct=new Yt;return ct.setAttribute("position",Pt),ct.setAttribute("normal",sn),ct.setAttribute("uv",At),qt&&ct.setAttribute("color",qt),ct._solid=ve,ct._type="mesh",ct}function U(se){let H=[1,1,1,-1,-1,-1,-1,1,1,1],re=[0,0,0,0,1,0],pe,ee,me=!0,xe=!0,ve=0,Se=!0,Ie=!0,Le=se.fields;for(let ct=0,qe=Le.length;ct<qe;ct++){let nt=Le[ct],Je=nt.name,ht=nt.values;switch(Je){case"beginCap":me=ht[0];break;case"ccw":xe=ht[0];break;case"convex":break;case"creaseAngle":ve=ht[0];break;case"crossSection":H=ht;break;case"endCap":Se=ht[0];break;case"orientation":ee=ht;break;case"scale":pe=ht;break;case"solid":Ie=ht[0];break;case"spine":re=ht;break;default:console.warn("THREE.VRMLLoader: Unknown field:",Je);break}}let He=H[0]===H[H.length-2]&&H[1]===H[H.length-1],ot=[],Et=new he,Ve=new he,ce=new he,ke=new he,Ue=new Xn;for(let ct=0,qe=0,nt=0,Je=re.length;ct<Je;ct+=3,qe+=2,nt+=4){Et.fromArray(re,ct),Ve.x=pe?pe[qe+0]:1,Ve.y=1,Ve.z=pe?pe[qe+1]:1,ce.x=ee?ee[nt+0]:0,ce.y=ee?ee[nt+1]:0,ce.z=ee?ee[nt+2]:1;let ht=ee?ee[nt+3]:0;for(let wt=0,Fn=H.length;wt<Fn;wt+=2)ke.x=H[wt+0],ke.y=0,ke.z=H[wt+1],ke.multiply(Ve),Ue.setFromAxisAngle(ce,ht),ke.applyQuaternion(Ue),ke.add(Et),ot.push(ke.x,ke.y,ke.z)}let je=[],We=re.length/3,Pt=H.length/2;for(let ct=0;ct<We-1;ct++)for(let qe=0;qe<Pt-1;qe++){let nt=qe+ct*Pt,Je=qe+1+ct*Pt,ht=qe+(ct+1)*Pt,wt=qe+1+(ct+1)*Pt;qe===Pt-2&&He===!0&&(Je=ct*Pt,wt=(ct+1)*Pt),xe===!0?(je.push(nt,Je,ht),je.push(ht,Je,wt)):(je.push(nt,ht,Je),je.push(ht,wt,Je))}if(me===!0||Se===!0){let ct=[];for(let Je=0,ht=H.length;Je<ht;Je+=2)ct.push(new Ne(H[Je],H[Je+1]));let qe=go.triangulateShape(ct,[]),nt=[];for(let Je=0,ht=qe.length;Je<ht;Je++){let wt=qe[Je];nt.push(wt[0],wt[1],wt[2])}if(me===!0)for(let Je=0,ht=nt.length;Je<ht;Je+=3)xe===!0?je.push(nt[Je+0],nt[Je+1],nt[Je+2]):je.push(nt[Je+0],nt[Je+2],nt[Je+1]);if(Se===!0){let Je=Pt*(We-1);for(let ht=0,wt=nt.length;ht<wt;ht+=3)xe===!0?je.push(Je+nt[ht+0],Je+nt[ht+2],Je+nt[ht+1]):je.push(Je+nt[ht+0],Je+nt[ht+1],Je+nt[ht+2])}}let At=K(je,new Ye(ot,3)),qt=de(je,ot,ve),sn=new Yt;return sn.setAttribute("position",At),sn.setAttribute("normal",qt),sn._solid=Ie,sn._type="mesh",sn}function k(se){let H=r[se],re=l(H);return re.isObject3D||re.isMaterial?re.clone():re}function B(se,H){for(let re=0,pe=se.length;re<pe;re++){let ee=l(se[re]);ee instanceof an&&H.add(ee)}}function O(se,H){let re=[],pe=0;for(let ee=0,me=se.length;ee<me;ee++){let xe=se[pe],ve=se[ee+(H?1:2)],Se=se[ee+(H?2:1)];re.push(xe,ve,Se),(se[ee+3]===-1||ee+3>=me)&&(ee+=3,pe=ee+1)}return re}function q(se,H){let re=[],pe=0;for(let ee=0,me=H.length;ee<me;ee++){let xe=pe*3,ve=se[xe],Se=se[xe+1],Ie=se[xe+2];re.push(ve,Se,Ie),(H[ee+3]===-1||ee+3>=me)&&(ee+=3,pe++)}return re}function ne(se,H){let re=[];for(let pe=0,ee=H.length;pe<ee;pe++){let xe=H[pe]*3,ve=se[xe],Se=se[xe+1],Ie=se[xe+2];re.push(ve,Se,Ie)}return re}function ae(se){let H=[];for(let re=0,pe=se.length;re<pe;re++){let ee=se[re],me=se[re+1];H.push(ee,me),(se[re+2]===-1||re+2>=pe)&&(re+=2)}return H}function ye(se,H){let re=[],pe=0;for(let ee=0,me=H.length;ee<me;ee++){let xe=pe*3,ve=se[xe],Se=se[xe+1],Ie=se[xe+2];re.push(ve,Se,Ie),(H[ee+2]===-1||ee+2>=me)&&(ee+=2,pe++)}return re}let fe=new he,L=new he,C=new he,R=new Ne,I=new Ne,j=new Ne;function Z(se,H,re,pe){let ee=[];for(let me=0,xe=se.length;me<xe;me+=3){let ve=H[me],Se=H[me+1],Ie=H[me+2];pe===2?(R.fromArray(re,ve*pe),I.fromArray(re,Se*pe),j.fromArray(re,Ie*pe),ee.push(R.x,R.y),ee.push(I.x,I.y),ee.push(j.x,j.y)):(fe.fromArray(re,ve*pe),L.fromArray(re,Se*pe),C.fromArray(re,Ie*pe),ee.push(fe.x,fe.y,fe.z),ee.push(L.x,L.y,L.z),ee.push(C.x,C.y,C.z))}return new Ye(ee,pe)}function J(se,H){let re=[];for(let pe=0,ee=0,me=se.length;pe<me;pe+=3,ee++)fe.fromArray(H,ee*3),re.push(fe.x,fe.y,fe.z),re.push(fe.x,fe.y,fe.z),re.push(fe.x,fe.y,fe.z);return new Ye(re,3)}function W(se,H){let re=[];for(let pe=0,ee=0,me=se.length;pe<me;pe+=2,ee++)fe.fromArray(H,ee*3),re.push(fe.x,fe.y,fe.z),re.push(fe.x,fe.y,fe.z);return new Ye(re,3)}function K(se,H){let re=H.array,pe=H.itemSize,ee=new re.constructor(se.length*pe),me=0,xe=0;for(let ve=0,Se=se.length;ve<Se;ve++){me=se[ve]*pe;for(let Ie=0;Ie<pe;Ie++)ee[xe++]=re[me++]}return new Ye(ee,pe)}let le=new he,ue=new he;function de(se,H,re){let pe=[],ee={};for(let xe=0,ve=se.length;xe<ve;xe+=3){let Se=se[xe],Ie=se[xe+1],Le=se[xe+2],He=new nw(Se,Ie,Le);fe.fromArray(H,Se*3),L.fromArray(H,Ie*3),C.fromArray(H,Le*3),ue.subVectors(C,L),le.subVectors(fe,L),ue.cross(le),ue.normalize(),He.normal.copy(ue),ee[Se]===void 0&&(ee[Se]=[]),ee[Ie]===void 0&&(ee[Ie]=[]),ee[Le]===void 0&&(ee[Le]=[]),ee[Se].push(He.normal),ee[Ie].push(He.normal),ee[Le].push(He.normal),pe.push(He)}let me=[];for(let xe=0,ve=pe.length;xe<ve;xe++){let Se=pe[xe],Ie=Te(ee[Se.a],Se.normal,re),Le=Te(ee[Se.b],Se.normal,re),He=Te(ee[Se.c],Se.normal,re);fe.fromArray(H,Se.a*3),L.fromArray(H,Se.b*3),C.fromArray(H,Se.c*3),me.push(Ie.x,Ie.y,Ie.z),me.push(Le.x,Le.y,Le.z),me.push(He.x,He.y,He.z)}return new Ye(me,3)}function Te(se,H,re){let pe=new he;if(re===0)pe.copy(H);else for(let ee=0,me=se.length;ee<me;ee++)se[ee].angleTo(H)<re&&pe.add(se[ee]);return pe.normalize()}function X(se){let H=[];for(let re=0,pe=se.length;re<pe;re+=3)H.push(new Ke(se[re],se[re+1],se[re+2]));return H}function F(se){let H=new Ke;for(let re=0;re<se.count;re++)H.fromBufferAttribute(se,re),H.convertSRGBToLinear(),se.setXYZ(re,H.r,H.g,H.b)}function G(se,H,re,pe,ee){let me=[],xe=ee===!0?0:Math.PI;for(let ot=0,Et=pe.length;ot<Et;ot++){let Ve=ot===0?0:re[ot-1];Ve=ee===!0?Ve:xe-Ve;let ce=new he;ce.setFromSphericalCoords(H,Ve,0),me.push(ce)}let ve=se.index,Se=se.attributes.position,Ie=new Jr(new Float32Array(se.attributes.position.count*3),3),Le=new he,He=new Ke;for(let ot=0;ot<ve.count;ot++){let Et=ve.getX(ot);Le.fromBufferAttribute(Se,Et);let Ve,ce,ke=1;for(let We=1;We<me.length;We++){Ve=We-1,ce=We;let Pt=me[Ve],At=me[ce];if(ee===!0){if(Le.y<=Pt.y&&Le.y>At.y){ke=Math.abs(Pt.y-Le.y)/Math.abs(Pt.y-At.y);break}}else if(Le.y>=Pt.y&&Le.y<At.y){ke=Math.abs(Pt.y-Le.y)/Math.abs(Pt.y-At.y);break}}let Ue=pe[Ve],je=pe[ce];He.copy(Ue).lerp(je,ke).convertSRGBToLinear(),Ie.setXYZ(Et,He.r,He.g,He.b)}se.setAttribute("color",Ie)}let ge=new wo(this.manager);if(ge.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),e.indexOf("#VRML V2.0")===-1)throw Error("THREE.VRMLLexer: Version of VRML asset not supported.");let we=i(e);return a(we)}},ew=class{constructor(e){this.lexer=new Ph.Lexer(e)}lex(e){let t=this.lexer.tokenize(e);if(t.errors.length>0)throw console.error(t.errors),Error("THREE.VRMLLexer: Lexing errors detected.");return t}},qk=Ph.CstParser,tw=class extends qk{constructor(e){super(e);let t=this,r=e.Version,i=e.LCurly,o=e.RCurly,s=e.LSquare,a=e.RSquare,c=e.Identifier,l=e.RouteIdentifier,u=e.StringLiteral,h=e.HexLiteral,f=e.NumberLiteral,d=e.TrueLiteral,m=e.FalseLiteral,v=e.NullLiteral,p=e.DEF,g=e.USE,x=e.ROUTE,y=e.TO,b=e.NodeName;t.RULE("vrml",function(){t.SUBRULE(t.version),t.AT_LEAST_ONE(function(){t.SUBRULE(t.node)}),t.MANY(function(){t.SUBRULE(t.route)})}),t.RULE("version",function(){t.CONSUME(r)}),t.RULE("node",function(){t.OPTION(function(){t.SUBRULE(t.def)}),t.CONSUME(b),t.CONSUME(i),t.MANY(function(){t.SUBRULE(t.field)}),t.CONSUME(o)}),t.RULE("field",function(){t.CONSUME(c),t.OR2([{ALT:function(){t.SUBRULE(t.singleFieldValue)}},{ALT:function(){t.SUBRULE(t.multiFieldValue)}}])}),t.RULE("def",function(){t.CONSUME(p),t.OR([{ALT:function(){t.CONSUME(c)}},{ALT:function(){t.CONSUME(b)}}])}),t.RULE("use",function(){t.CONSUME(g),t.OR([{ALT:function(){t.CONSUME(c)}},{ALT:function(){t.CONSUME(b)}}])}),t.RULE("singleFieldValue",function(){t.AT_LEAST_ONE(function(){t.OR([{ALT:function(){t.SUBRULE(t.node)}},{ALT:function(){t.SUBRULE(t.use)}},{ALT:function(){t.CONSUME(u)}},{ALT:function(){t.CONSUME(h)}},{ALT:function(){t.CONSUME(f)}},{ALT:function(){t.CONSUME(d)}},{ALT:function(){t.CONSUME(m)}},{ALT:function(){t.CONSUME(v)}}])})}),t.RULE("multiFieldValue",function(){t.CONSUME(s),t.MANY(function(){t.OR([{ALT:function(){t.SUBRULE(t.node)}},{ALT:function(){t.SUBRULE(t.use)}},{ALT:function(){t.CONSUME(u)}},{ALT:function(){t.CONSUME(h)}},{ALT:function(){t.CONSUME(f)}},{ALT:function(){t.CONSUME(v)}}])}),t.CONSUME(a)}),t.RULE("route",function(){t.CONSUME(x),t.CONSUME(l),t.CONSUME(y),t.CONSUME2(l)}),this.performSelfAnalysis()}},nw=class{constructor(e,t,r){this.a=e,this.b=t,this.c=r,this.normal=new he}},rs={INTENSITY:1,INTENSITY_ALPHA:2,RGB:3,RGBA:4};var rw=Ln,$v=class extends xn{constructor(e){super(e),this.availableExtensions=[]}load(e,t,r,i){let o=this,s=new yi(o.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(c){i?i(c):console.error(c),o.manager.itemError(e)}},r,i)}parse(e){let t=this,r=new wo(this.manager);function i(L){let C=null,R=null,I,j,Z=[],J=[],W,K={},le={},ue={},de=new TextDecoder;try{C=zv(new Uint8Array(L))}catch(G){if(G instanceof ReferenceError)return console.error("THREE.3MFLoader: fflate missing and file is compressed."),null}for(R in C)R.match(/\_rels\/.rels$/)?I=R:R.match(/3D\/_rels\/.*\.model\.rels$/)?j=R:R.match(/^3D\/.*\.model$/)?Z.push(R):R.match(/^3D\/Textures?\/.*/)&&J.push(R);if(I===void 0)throw new Error("THREE.ThreeMFLoader: Cannot find relationship file `rels` in 3MF archive.");let Te=C[I],X=de.decode(Te),F=o(X);if(j){let G=C[j],ge=de.decode(G);W=o(ge)}for(let G=0;G<Z.length;G++){let ge=Z[G],we=C[ge],Ee=de.decode(we),se=new DOMParser().parseFromString(Ee,"application/xml");se.documentElement.nodeName.toLowerCase()!=="model"&&console.error("THREE.3MFLoader: Error loading 3MF - no 3MF document found: ",ge);let H=se.querySelector("model"),re={};for(let ee=0;ee<H.attributes.length;ee++){let me=H.attributes[ee];me.name.match(/^xmlns:(.+)$/)&&(re[me.value]=RegExp.$1)}let pe=b(H);pe.xml=H,0<Object.keys(re).length&&(pe.extensions=re),K[ge]=pe}for(let G=0;G<J.length;G++){let ge=J[G];ue[ge]=C[ge].buffer}return{rels:F,modelRels:W,model:K,printTicket:le,texture:ue}}function o(L){let C=[],I=new DOMParser().parseFromString(L,"application/xml").querySelectorAll("Relationship");for(let j=0;j<I.length;j++){let Z=I[j],J={target:Z.getAttribute("Target"),id:Z.getAttribute("Id"),type:Z.getAttribute("Type")};C.push(J)}return C}function s(L){let C={};for(let R=0;R<L.length;R++){let I=L[R],j=I.getAttribute("name");0<=["Title","Designer","Description","Copyright","LicenseTerms","Rating","CreationDate","ModificationDate"].indexOf(j)&&(C[j]=I.textContent)}return C}function a(L){let C={id:L.getAttribute("id"),basematerials:[]},R=L.querySelectorAll("base");for(let I=0;I<R.length;I++){let j=R[I],Z=f(j);Z.index=I,C.basematerials.push(Z)}return C}function c(L){return{id:L.getAttribute("id"),path:L.getAttribute("path"),contenttype:L.getAttribute("contenttype"),tilestyleu:L.getAttribute("tilestyleu"),tilestylev:L.getAttribute("tilestylev"),filter:L.getAttribute("filter")}}function l(L){let C={id:L.getAttribute("id"),texid:L.getAttribute("texid"),displaypropertiesid:L.getAttribute("displaypropertiesid")},R=L.querySelectorAll("tex2coord"),I=[];for(let j=0;j<R.length;j++){let Z=R[j],J=Z.getAttribute("u"),W=Z.getAttribute("v");I.push(parseFloat(J),parseFloat(W))}return C.uvs=new Float32Array(I),C}function u(L){let C={id:L.getAttribute("id"),displaypropertiesid:L.getAttribute("displaypropertiesid")},R=L.querySelectorAll("color"),I=[],j=new Ke;for(let Z=0;Z<R.length;Z++){let W=R[Z].getAttribute("color");j.setStyle(W.substring(0,7),rw),I.push(j.r,j.g,j.b)}return C.colors=new Float32Array(I),C}function h(L){let C={id:L.getAttribute("id")},R=L.querySelectorAll("pbmetallic"),I=[];for(let j=0;j<R.length;j++){let Z=R[j];I.push({name:Z.getAttribute("name"),metallicness:parseFloat(Z.getAttribute("metallicness")),roughness:parseFloat(Z.getAttribute("roughness"))})}return C.data=I,C}function f(L){let C={};return C.name=L.getAttribute("name"),C.displaycolor=L.getAttribute("displaycolor"),C.displaypropertiesid=L.getAttribute("displaypropertiesid"),C}function d(L){let C={},R=[],I=L.querySelectorAll("vertices vertex");for(let W=0;W<I.length;W++){let K=I[W],le=K.getAttribute("x"),ue=K.getAttribute("y"),de=K.getAttribute("z");R.push(parseFloat(le),parseFloat(ue),parseFloat(de))}C.vertices=new Float32Array(R);let j=[],Z=[],J=L.querySelectorAll("triangles triangle");for(let W=0;W<J.length;W++){let K=J[W],le=K.getAttribute("v1"),ue=K.getAttribute("v2"),de=K.getAttribute("v3"),Te=K.getAttribute("p1"),X=K.getAttribute("p2"),F=K.getAttribute("p3"),G=K.getAttribute("pid"),ge={};ge.v1=parseInt(le,10),ge.v2=parseInt(ue,10),ge.v3=parseInt(de,10),Z.push(ge.v1,ge.v2,ge.v3),Te&&(ge.p1=parseInt(Te,10)),X&&(ge.p2=parseInt(X,10)),F&&(ge.p3=parseInt(F,10)),G&&(ge.pid=G),0<Object.keys(ge).length&&j.push(ge)}return C.triangleProperties=j,C.triangles=new Uint32Array(Z),C}function m(L){let C=[],R=L.querySelectorAll("component");for(let I=0;I<R.length;I++){let j=R[I],Z=v(j);C.push(Z)}return C}function v(L){let C={};C.objectId=L.getAttribute("objectid");let R=L.getAttribute("transform");return R&&(C.transform=p(R)),C}function p(L){let C=[];L.split(" ").forEach(function(I){C.push(parseFloat(I))});let R=new tt;return R.set(C[0],C[3],C[6],C[9],C[1],C[4],C[7],C[10],C[2],C[5],C[8],C[11],0,0,0,1),R}function g(L){let C={type:L.getAttribute("type")},R=L.getAttribute("id");R&&(C.id=R);let I=L.getAttribute("pid");I&&(C.pid=I);let j=L.getAttribute("pindex");j&&(C.pindex=j);let Z=L.getAttribute("thumbnail");Z&&(C.thumbnail=Z);let J=L.getAttribute("partnumber");J&&(C.partnumber=J);let W=L.getAttribute("name");W&&(C.name=W);let K=L.querySelector("mesh");K&&(C.mesh=d(K));let le=L.querySelector("components");return le&&(C.components=m(le)),C}function x(L){let C={};C.basematerials={};let R=L.querySelectorAll("basematerials");for(let K=0;K<R.length;K++){let le=R[K],ue=a(le);C.basematerials[ue.id]=ue}C.texture2d={};let I=L.querySelectorAll("texture2d");for(let K=0;K<I.length;K++){let le=I[K],ue=c(le);C.texture2d[ue.id]=ue}C.colorgroup={};let j=L.querySelectorAll("colorgroup");for(let K=0;K<j.length;K++){let le=j[K],ue=u(le);C.colorgroup[ue.id]=ue}C.pbmetallicdisplayproperties={};let Z=L.querySelectorAll("pbmetallicdisplayproperties");for(let K=0;K<Z.length;K++){let le=Z[K],ue=h(le);C.pbmetallicdisplayproperties[ue.id]=ue}C.texture2dgroup={};let J=L.querySelectorAll("texture2dgroup");for(let K=0;K<J.length;K++){let le=J[K],ue=l(le);C.texture2dgroup[ue.id]=ue}C.object={};let W=L.querySelectorAll("object");for(let K=0;K<W.length;K++){let le=W[K],ue=g(le);C.object[ue.id]=ue}return C}function y(L){let C=[],R=L.querySelectorAll("item");for(let I=0;I<R.length;I++){let j=R[I],Z={objectId:j.getAttribute("objectid")},J=j.getAttribute("transform");J&&(Z.transform=p(J)),C.push(Z)}return C}function b(L){let C={unit:L.getAttribute("unit")||"millimeter"},R=L.querySelectorAll("metadata");R&&(C.metadata=s(R));let I=L.querySelector("resources");I&&(C.resources=x(I));let j=L.querySelector("build");return j&&(C.build=y(j)),C}function S(L,C,R,I){let j=L.texid,J=R.resources.texture2d[j];if(J){let W=I[J.path],K=J.contenttype,le=new Blob([W],{type:K}),ue=URL.createObjectURL(le),de=r.load(ue,function(){URL.revokeObjectURL(ue)});switch(de.colorSpace=rw,J.tilestyleu){case"wrap":de.wrapS=qn;break;case"mirror":de.wrapS=Vu;break;case"none":case"clamp":de.wrapS=Qn;break;default:de.wrapS=qn}switch(J.tilestylev){case"wrap":de.wrapT=qn;break;case"mirror":de.wrapT=Vu;break;case"none":case"clamp":de.wrapT=Qn;break;default:de.wrapT=qn}switch(J.filter){case"auto":de.magFilter=Cr,de.minFilter=eo;break;case"linear":de.magFilter=Cr,de.minFilter=Cr;break;case"nearest":de.magFilter=Zr,de.minFilter=Zr;break;default:de.magFilter=Cr,de.minFilter=eo}return de}else return null}function _(L,C,R,I,j,Z,J){let W=J.pindex,K={};for(let de=0,Te=C.length;de<Te;de++){let X=C[de],F=X.p1!==void 0?X.p1:W;K[F]===void 0&&(K[F]=[]),K[F].push(X)}let le=Object.keys(K),ue=[];for(let de=0,Te=le.length;de<Te;de++){let X=le[de],F=K[X],G=L.basematerials[X],ge=U(G,I,j,Z,J,k),we=new Yt,Ee=[],se=R.vertices;for(let re=0,pe=F.length;re<pe;re++){let ee=F[re];Ee.push(se[ee.v1*3+0]),Ee.push(se[ee.v1*3+1]),Ee.push(se[ee.v1*3+2]),Ee.push(se[ee.v2*3+0]),Ee.push(se[ee.v2*3+1]),Ee.push(se[ee.v2*3+2]),Ee.push(se[ee.v3*3+0]),Ee.push(se[ee.v3*3+1]),Ee.push(se[ee.v3*3+2])}we.setAttribute("position",new Ye(Ee,3));let H=new hn(we,ge);ue.push(H)}return ue}function M(L,C,R,I,j,Z,J){let W=new Yt,K=[],le=[],ue=R.vertices,de=L.uvs;for(let G=0,ge=C.length;G<ge;G++){let we=C[G];K.push(ue[we.v1*3+0]),K.push(ue[we.v1*3+1]),K.push(ue[we.v1*3+2]),K.push(ue[we.v2*3+0]),K.push(ue[we.v2*3+1]),K.push(ue[we.v2*3+2]),K.push(ue[we.v3*3+0]),K.push(ue[we.v3*3+1]),K.push(ue[we.v3*3+2]),le.push(de[we.p1*2+0]),le.push(de[we.p1*2+1]),le.push(de[we.p2*2+0]),le.push(de[we.p2*2+1]),le.push(de[we.p3*2+0]),le.push(de[we.p3*2+1])}W.setAttribute("position",new Ye(K,3)),W.setAttribute("uv",new Ye(le,2));let Te=U(L,I,j,Z,J,S),X=new Rn({map:Te,flatShading:!0});return new hn(W,X)}function A(L,C,R,I){let j=new Yt,Z=[],J=[],W=R.vertices,K=L.colors;for(let de=0,Te=C.length;de<Te;de++){let X=C[de],F=X.v1,G=X.v2,ge=X.v3;Z.push(W[F*3+0]),Z.push(W[F*3+1]),Z.push(W[F*3+2]),Z.push(W[G*3+0]),Z.push(W[G*3+1]),Z.push(W[G*3+2]),Z.push(W[ge*3+0]),Z.push(W[ge*3+1]),Z.push(W[ge*3+2]);let we=X.p1!==void 0?X.p1:I.pindex,Ee=X.p2!==void 0?X.p2:we,se=X.p3!==void 0?X.p3:we;J.push(K[we*3+0]),J.push(K[we*3+1]),J.push(K[we*3+2]),J.push(K[Ee*3+0]),J.push(K[Ee*3+1]),J.push(K[Ee*3+2]),J.push(K[se*3+0]),J.push(K[se*3+1]),J.push(K[se*3+2])}j.setAttribute("position",new Ye(Z,3)),j.setAttribute("color",new Ye(J,3));let le=new Rn({vertexColors:!0,flatShading:!0});return new hn(j,le)}function w(L){let C=new Yt;C.setIndex(new Jr(L.triangles,1)),C.setAttribute("position",new Jr(L.vertices,3));let R=new Rn({name:xn.DEFAULT_MATERIAL_NAME,color:16777215,flatShading:!0});return new hn(C,R)}function T(L,C,R,I,j,Z){let J=Object.keys(L),W=[];for(let K=0,le=J.length;K<le;K++){let ue=J[K],de=L[ue];switch(D(ue,I)){case"material":let X=I.resources.basematerials[ue],F=_(X,de,C,R,I,j,Z);for(let we=0,Ee=F.length;we<Ee;we++)W.push(F[we]);break;case"texture":let G=I.resources.texture2dgroup[ue];W.push(M(G,de,C,R,I,j,Z));break;case"vertexColors":let ge=I.resources.colorgroup[ue];W.push(A(ge,de,C,Z));break;case"default":W.push(w(C));break;default:console.error("THREE.3MFLoader: Unsupported resource type.")}}if(Z.name)for(let K=0;K<W.length;K++)W[K].name=Z.name;return W}function D(L,C){return C.resources.texture2dgroup[L]!==void 0?"texture":C.resources.basematerials[L]!==void 0?"material":C.resources.colorgroup[L]!==void 0?"vertexColors":L==="default"?"default":void 0}function N(L,C){let R={},I=L.triangleProperties,j=C.pid;for(let Z=0,J=I.length;Z<J;Z++){let W=I[Z],K=W.pid!==void 0?W.pid:j;K===void 0&&(K="default"),R[K]===void 0&&(R[K]=[]),R[K].push(W)}return R}function P(L,C,R,I,j){let Z=new rr,J=N(L,j),W=T(J,L,C,R,I,j);for(let K=0,le=W.length;K<le;K++)Z.add(W[K]);return Z}function E(L,C,R){if(!L)return;let I=[],j=Object.keys(L);for(let Z=0;Z<j.length;Z++){let J=j[Z];for(let W=0;W<t.availableExtensions.length;W++){let K=t.availableExtensions[W];K.ns===J&&I.push(K)}}for(let Z=0;Z<I.length;Z++){let J=I[Z];J.apply(R,L[J.ns],C)}}function U(L,C,R,I,j,Z){return L.build!==void 0||(L.build=Z(L,C,R,I,j)),L.build}function k(L,C,R){let I,j=L.displaypropertiesid,Z=R.resources.pbmetallicdisplayproperties;if(j!==null&&Z[j]!==void 0){let le=Z[j].data[L.index];I=new sl({flatShading:!0,roughness:le.roughness,metalness:le.metallicness})}else I=new Rn({flatShading:!0});I.name=L.name;let J=L.displaycolor,W=J.substring(0,7);return I.color.setStyle(W,rw),J.length===9&&(I.opacity=parseInt(J.charAt(7)+J.charAt(8),16)/255),I}function B(L,C,R,I){let j=new rr;for(let Z=0;Z<L.length;Z++){let J=L[Z],W=C[J.objectId];W===void 0&&(O(J.objectId,C,R,I),W=C[J.objectId]);let K=W.clone(),le=J.transform;le&&K.applyMatrix4(le),j.add(K)}return j}function O(L,C,R,I){let j=R.resources.object[L];if(j.mesh){let Z=j.mesh,J=R.extensions,W=R.xml;E(J,Z,W),C[j.id]=U(Z,C,R,I,j,P)}else{let Z=j.components;C[j.id]=U(Z,C,R,I,j,B)}j.name&&(C[j.id].name=j.name)}function q(L){let C=L.model,R=L.modelRels,I={},j=Object.keys(C),Z={};if(R)for(let J=0,W=R.length;J<W;J++){let K=R[J],le=K.target.substring(1);L.texture[le]&&(Z[K.target]=L.texture[le])}for(let J=0;J<j.length;J++){let W=j[J],K=C[W],le=Object.keys(K.resources.object);for(let ue=0;ue<le.length;ue++){let de=le[ue];O(de,I,K,Z)}}return I}function ne(L){for(let C=0;C<L.length;C++){let R=L[C];if(R.target.split(".").pop().toLowerCase()==="model")return R}}function ae(L,C){let R=new rr,I=ne(C.rels),j=C.model[I.target.substring(1)].build;for(let Z=0;Z<j.length;Z++){let J=j[Z],W=L[J.objectId].clone(),K=J.transform;K&&W.applyMatrix4(K),R.add(W)}return R}let ye=i(e),fe=q(ye);return ae(fe,ye)}addExtension(e){this.availableExtensions.push(e)}};var e0=class extends xn{constructor(e){super(e)}load(e,t,r,i){let o=this,s=new yi(o.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(c){i?i(c):console.error(c),o.manager.itemError(e)}},r,i)}parse(e){function t(b){let S=new DataView(b);if(String.fromCharCode(S.getUint8(0),S.getUint8(1))==="PK"){let w=null,T=null;console.log("THREE.AMFLoader: Loading Zip");try{w=zv(new Uint8Array(b))}catch(D){if(D instanceof ReferenceError)return console.log("THREE.AMFLoader: fflate missing and file is compressed."),null}for(T in w)if(T.toLowerCase().slice(-4)===".amf")break;console.log("THREE.AMFLoader: Trying to load file asset: "+T),S=new DataView(w[T].buffer)}let M=new TextDecoder().decode(S),A=new DOMParser().parseFromString(M,"application/xml");return A.documentElement.nodeName.toLowerCase()!=="amf"?(console.log("THREE.AMFLoader: Error loading AMF - no AMF document found."),null):A}function r(b){let S=1,_="millimeter";b.documentElement.attributes.unit!==void 0&&(_=b.documentElement.attributes.unit.value.toLowerCase());let M={millimeter:1,inch:25.4,feet:304.8,meter:1e3,micron:.001};return M[_]!==void 0&&(S=M[_]),console.log("THREE.AMFLoader: Unit scale: "+S),S}function i(b){let S="AMF Material",_=b.attributes.id.textContent,M={r:1,g:1,b:1,a:1},A=null;for(let w=0;w<b.childNodes.length;w++){let T=b.childNodes[w];T.nodeName==="metadata"&&T.attributes.type!==void 0?T.attributes.type.value==="name"&&(S=T.textContent):T.nodeName==="color"&&(M=o(T))}return A=new Rn({flatShading:!0,color:new Ke(M.r,M.g,M.b),name:S}),M.a!==1&&(A.transparent=!0,A.opacity=M.a),{id:_,material:A}}function o(b){let S={r:1,g:1,b:1,a:1};for(let _=0;_<b.childNodes.length;_++){let M=b.childNodes[_];M.nodeName==="r"?S.r=M.textContent:M.nodeName==="g"?S.g=M.textContent:M.nodeName==="b"?S.b=M.textContent:M.nodeName==="a"&&(S.a=M.textContent)}return S}function s(b){let S={name:"",triangles:[],materialid:null},_=b.firstElementChild;for(b.attributes.materialid!==void 0&&(S.materialId=b.attributes.materialid.nodeValue);_;){if(_.nodeName==="metadata")_.attributes.type!==void 0&&_.attributes.type.value==="name"&&(S.name=_.textContent);else if(_.nodeName==="triangle"){let M=_.getElementsByTagName("v1")[0].textContent,A=_.getElementsByTagName("v2")[0].textContent,w=_.getElementsByTagName("v3")[0].textContent;S.triangles.push(M,A,w)}_=_.nextElementSibling}return S}function a(b){let S=[],_=[],M=b.firstElementChild;for(;M;){if(M.nodeName==="vertex"){let A=M.firstElementChild;for(;A;){if(A.nodeName==="coordinates"){let w=A.getElementsByTagName("x")[0].textContent,T=A.getElementsByTagName("y")[0].textContent,D=A.getElementsByTagName("z")[0].textContent;S.push(w,T,D)}else if(A.nodeName==="normal"){let w=A.getElementsByTagName("nx")[0].textContent,T=A.getElementsByTagName("ny")[0].textContent,D=A.getElementsByTagName("nz")[0].textContent;_.push(w,T,D)}A=A.nextElementSibling}}M=M.nextElementSibling}return{vertices:S,normals:_}}function c(b){let S=b.attributes.id.textContent,_={name:"amfobject",meshes:[]},M=null,A=b.firstElementChild;for(;A;){if(A.nodeName==="metadata")A.attributes.type!==void 0&&A.attributes.type.value==="name"&&(_.name=A.textContent);else if(A.nodeName==="color")M=o(A);else if(A.nodeName==="mesh"){let w=A.firstElementChild,T={vertices:[],normals:[],volumes:[],color:M};for(;w;){if(w.nodeName==="vertices"){let D=a(w);T.normals=T.normals.concat(D.normals),T.vertices=T.vertices.concat(D.vertices)}else w.nodeName==="volume"&&T.volumes.push(s(w));w=w.nextElementSibling}_.meshes.push(T)}A=A.nextElementSibling}return{id:S,obj:_}}let l=t(e),u="",h="",f=r(l),d={},m={},v=l.documentElement.childNodes,p,g;for(p=0;p<v.length;p++){let b=v[p];if(b.nodeName==="metadata")b.attributes.type!==void 0&&(b.attributes.type.value==="name"?u=b.textContent:b.attributes.type.value==="author"&&(h=b.textContent));else if(b.nodeName==="material"){let S=i(b);d[S.id]=S.material}else if(b.nodeName==="object"){let S=c(b);m[S.id]=S.obj}}let x=new rr,y=new Rn({name:xn.DEFAULT_MATERIAL_NAME,color:11184895,flatShading:!0});x.name=u,x.userData.author=h,x.userData.loader="AMF";for(let b in m){let S=m[b],_=S.meshes,M=new rr;for(M.name=S.name||"",p=0;p<_.length;p++){let A=y,w=_[p],T=new Ye(w.vertices,3),D=null;if(w.normals.length&&(D=new Ye(w.normals,3)),w.color){let P=w.color;A=y.clone(),A.color=new Ke(P.r,P.g,P.b),P.a!==1&&(A.transparent=!0,A.opacity=P.a)}let N=w.volumes;for(g=0;g<N.length;g++){let P=N[g],E=new Yt,U=A;E.setIndex(P.triangles),E.setAttribute("position",T.clone()),D&&E.setAttribute("normal",D.clone()),d[P.materialId]!==void 0&&(U=d[P.materialId]),E.scale(f,f,f),M.add(new hn(E,U.clone()))}}x.add(M)}return x}};var is=class extends Pn{constructor(){super(),this.colorConverter=null}CreateLoader(e){return null}GetMainObject(e){return e}IsMeshVisible(e){return!0}ClearContent(){this.loader=null,this.materialIdToIndex=null,this.objectUrlToFileName=null}ResetContent(){this.loader=null,this.materialIdToIndex=new Map,this.objectUrlToFileName=new Map}ImportContent(e,t){this.LoadModel(e,t)}LoadModel(e,t){let r=!1,i=new Ud(()=>{r=!0}),o=gl(e);i.setURLModifier(a=>{if(a===o)return a;let c=ur(a);if(to(a).length>0){let u=this.callbacks.getFileBuffer(a);if(u!==null){let h=gl(u);return this.objectUrlToFileName.set(h,c),h}}return a});let s=this.CreateLoader(i);if(s===null){t();return}s.load(o,a=>{Rv(()=>r?(this.OnThreeObjectsLoaded(a,t),!1):!0)},()=>{},a=>{this.SetError(a),t()})}OnThreeObjectsLoaded(e,t){function r(a){let c=new sr().CreateIdentity();return a.updateMatrix(),a.matrix!==void 0&&a.matrix!==null&&c.Set(a.matrix.elements),new tr(c)}function i(a,c,l,u){let h=new Vr;l.name!==void 0&&h.SetName(l.name),h.SetTransformation(r(l)),u.AddChildNode(h);for(let f of l.children)i(a,c,f,h);if(l.isMesh&&a.IsMeshVisible(l)){let f=a.ConvertThreeMesh(l),d=c.AddMesh(f);h.AddMeshIndex(d)}}let o=this.GetMainObject(e),s=this.model.GetRootNode();s.SetTransformation(r(o));for(let a of o.children)i(this,this.model,a,s);t()}ConvertThreeMesh(e){let t=null;if(Array.isArray(e.material)){if(t=Yo(e.geometry,null,this.colorConverter),e.geometry.attributes.color===void 0||e.geometry.attributes.color===null){let r=[];for(let i=0;i<e.material.length;i++){let o=e.material[i],s=this.FindOrCreateMaterial(o);r.push(s)}for(let i=0;i<e.geometry.groups.length;i++){let o=e.geometry.groups[i],s=null;o.count===1/0?s=t.TriangleCount():s=o.start/3+o.count/3;for(let a=o.start/3;a<s;a++)t.GetTriangle(a).SetMaterial(r[o.materialIndex])}}}else{let r=this.FindOrCreateMaterial(e.material);t=Yo(e.geometry,r,this.colorConverter)}return e.name!==void 0&&e.name!==null&&t.SetName(e.name),t}FindOrCreateMaterial(e){if(this.materialIdToIndex.has(e.id))return this.materialIdToIndex.get(e.id);let t=this.ConvertThreeMaterial(e),r=null;return t!==null&&(r=this.model.AddMaterial(t)),this.materialIdToIndex.set(e.id,r),r}ConvertThreeMaterial(e){function t(i,o){function s(a){if(a.data!==void 0&&a.data!==null){let c=new ImageData(a.width,a.height),l=a.width*a.height*4;for(let u=0;u<l;u++)c.data[u]=a.data[u];return ju.getDataURL(c)}else return ju.getDataURL(a)}if(i==null||i.image===void 0||i.image===null)return null;try{let a=s(i.image),c=bc(a),l=new Ni,u=null;return o.has(i.image.src)?u=o.get(i.image.src):i.name!==void 0&&i.name!==null?u=i.name+"."+ml(c.mimeType):u="Embedded_"+i.id.toString()+"."+ml(c.mimeType),l.name=u,l.mimeType=c.mimeType,l.buffer=c.buffer,l.rotation=i.rotation,l.offset.x=i.offset.x,l.offset.y=i.offset.y,l.scale.x=i.repeat.x,l.scale.y=i.repeat.y,l}catch{return null}}if(e.name===xn.DEFAULT_MATERIAL_NAME)return null;let r=new yr;return r.name=e.name,r.color=this.ConvertThreeColor(e.color),r.opacity=e.opacity,r.transparent=e.transparent,r.alphaTest=e.alphaTest,e.type==="MeshPhongMaterial"&&(r.specular=this.ConvertThreeColor(e.specular),r.shininess=e.shininess/100),r.diffuseMap=t(e.map,this.objectUrlToFileName),r.normalMap=t(e.normalMap,this.objectUrlToFileName),r.bumpMap=t(e.bumpMap,this.objectUrlToFileName),r}ConvertThreeColor(e){return this.colorConverter!==null&&(e=this.colorConverter.Convert(e)),Gd(e)}},Dh=class extends is{constructor(){super(),this.colorConverter=new dc}CanImportExtension(e){return e==="fbx"}GetUpDirection(){return Mt.Y}CreateLoader(e){return e.addHandler(/\.tga$/i,new yl(e)),new Hv(e)}GetMainObject(e){return e}},Fh=class extends is{constructor(){super()}CanImportExtension(e){return e==="dae"}GetUpDirection(){return Mt.Y}CreateLoader(e){return e.addHandler(/\.tga$/i,new yl(e)),new qv(e)}GetMainObject(e){return e.scene}},Nh=class extends is{constructor(){super(),this.colorConverter=new dc}CanImportExtension(e){return e==="wrl"}GetUpDirection(){return Mt.Y}CreateLoader(e){return new Qv(e)}GetMainObject(e){return e}IsMeshVisible(e){let t=!0;if(Array.isArray(e.material)){for(let r=0;r<e.material.length;r++)if(e.material[r].side===wr){t=!1;break}}else t=e.material.side!==wr;return t}},Lh=class extends is{constructor(){super(),this.colorConverter=new oh}CanImportExtension(e){return e==="3mf"}GetUpDirection(){return Mt.Z}CreateLoader(e){return new $v(e)}GetMainObject(e){return e}},Oh=class extends is{constructor(){super()}CanImportExtension(e){return e==="amf"}GetUpDirection(){return Mt.Z}CreateLoader(e){return new e0(e)}GetMainObject(e){return e}};var io=Uint8Array,kh=Uint16Array,Xk=Int32Array,bM=new io([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wM=new io([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Kk=new io([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),SM=function(n,e){for(var t=new kh(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Xk(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},_M=SM(bM,2),TM=_M.b,Yk=_M.r;TM[28]=258,Yk[258]=28;var MM=SM(wM,0),Zk=MM.b,WW=MM.r,aw=new kh(32768);for(_n=0;_n<32768;++_n)Ea=(_n&43690)>>1|(_n&21845)<<1,Ea=(Ea&52428)>>2|(Ea&13107)<<2,Ea=(Ea&61680)>>4|(Ea&3855)<<4,aw[_n]=((Ea&65280)>>8|(Ea&255)<<8)>>1;var Ea,_n,ip=function(n,e,t){for(var r=n.length,i=0,o=new kh(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new kh(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new kh(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var l=i<<4|n[i],u=e-n[i],h=s[n[i]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)a[aw[h]>>c]=l}else for(a=new kh(r),i=0;i<r;++i)n[i]&&(a[i]=aw[s[n[i]-1]++]>>15-n[i]);return a},op=new io(288);for(_n=0;_n<144;++_n)op[_n]=8;var _n;for(_n=144;_n<256;++_n)op[_n]=9;var _n;for(_n=256;_n<280;++_n)op[_n]=7;var _n;for(_n=280;_n<288;++_n)op[_n]=8;var _n,EM=new io(32);for(_n=0;_n<32;++_n)EM[_n]=5;var _n;var Jk=ip(op,9,1);var Qk=ip(EM,5,1),iw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},os=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},ow=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},$k=function(n){return(n+7)/8|0},cw=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new io(n.subarray(e,t))};var e3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Mo=function(n,e,t){var r=new Error(e||e3[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Mo),!t)throw r;return r},t3=function(n,e,t,r){var i=n.length,o=r?r.length:0;if(!i||e.f&&!e.l)return t||new io(0);var s=!t,a=s||e.i!=2,c=e.i;s&&(t=new io(i*3));var l=function(W){var K=t.length;if(W>K){var le=new io(Math.max(K*2,W));le.set(t),t=le}},u=e.f||0,h=e.p||0,f=e.b||0,d=e.l,m=e.d,v=e.m,p=e.n,g=i*8;do{if(!d){u=os(n,h,1);var x=os(n,h+1,3);if(h+=3,x)if(x==1)d=Jk,m=Qk,v=9,p=5;else if(x==2){var _=os(n,h,31)+257,M=os(n,h+10,15)+4,A=_+os(n,h+5,31)+1;h+=14;for(var w=new io(A),T=new io(19),D=0;D<M;++D)T[Kk[D]]=os(n,h+D*3,7);h+=M*3;for(var N=iw(T),P=(1<<N)-1,E=ip(T,N,1),D=0;D<A;){var U=E[os(n,h,P)];h+=U&15;var y=U>>4;if(y<16)w[D++]=y;else{var k=0,B=0;for(y==16?(B=3+os(n,h,3),h+=2,k=w[D-1]):y==17?(B=3+os(n,h,7),h+=3):y==18&&(B=11+os(n,h,127),h+=7);B--;)w[D++]=k}}var O=w.subarray(0,_),q=w.subarray(_);v=iw(O),p=iw(q),d=ip(O,v,1),m=ip(q,p,1)}else Mo(1);else{var y=$k(h)+4,b=n[y-4]|n[y-3]<<8,S=y+b;if(S>i){c&&Mo(0);break}a&&l(f+b),t.set(n.subarray(y,S),f),e.b=f+=b,e.p=h=S*8,e.f=u;continue}if(h>g){c&&Mo(0);break}}a&&l(f+131072);for(var ne=(1<<v)-1,ae=(1<<p)-1,ye=h;;ye=h){var k=d[ow(n,h)&ne],fe=k>>4;if(h+=k&15,h>g){c&&Mo(0);break}if(k||Mo(2),fe<256)t[f++]=fe;else if(fe==256){ye=h,d=null;break}else{var L=fe-254;if(fe>264){var D=fe-257,C=bM[D];L=os(n,h,(1<<C)-1)+TM[D],h+=C}var R=m[ow(n,h)&ae],I=R>>4;R||Mo(3),h+=R&15;var q=Zk[I];if(I>3){var C=wM[I];q+=ow(n,h)&(1<<C)-1,h+=C}if(h>g){c&&Mo(0);break}a&&l(f+131072);var j=f+L;if(f<q){var Z=o-q,J=Math.min(q,j);for(Z+f<0&&Mo(3);f<J;++f)t[f]=r[Z+f]}for(;f<j;++f)t[f]=t[f-q]}}e.l=d,e.p=ye,e.b=f,e.f=u,d&&(u=1,e.m=v,e.d=m,e.n=p)}while(!u);return f!=t.length&&s?cw(t,0,f):t.subarray(0,f)};var n3=new io(0);var ks=function(n,e){return n[e]|n[e+1]<<8},ss=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},sw=function(n,e){return ss(n,e)+ss(n,e+4)*4294967296};function r3(n,e){return t3(n,{i:2},e&&e.out,e&&e.dictionary)}var lw=typeof TextDecoder<"u"&&new TextDecoder,i3=0;try{lw.decode(n3,{stream:!0}),i3=1}catch{}var o3=function(n){for(var e="",t=0;;){var r=n[t++],i=(r>127)+(r>223)+(r>239);if(t+i>n.length)return{s:e,r:cw(n,t-1)};i?i==3?(r=((r&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?e+=String.fromCharCode((r&31)<<6|n[t++]&63):e+=String.fromCharCode((r&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(r)}};function s3(n,e){if(e){for(var t="",r=0;r<n.length;r+=16384)t+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return t}else{if(lw)return lw.decode(n);var i=o3(n),o=i.s,t=i.r;return t.length&&Mo(8),o}}var a3=function(n,e){return e+30+ks(n,e+26)+ks(n,e+28)},l3=function(n,e,t){var r=ks(n,e+28),i=s3(n.subarray(e+46,e+46+r),!(ks(n,e+8)&2048)),o=e+46+r,s=ss(n,e+20),a=t&&s==4294967295?c3(n,o):[s,ss(n,e+24),ss(n,e+42)],c=a[0],l=a[1],u=a[2];return[ks(n,e+10),c,l,i,o+ks(n,e+30)+ks(n,e+32),u]},c3=function(n,e){for(;ks(n,e)!=1;e+=4+ks(n,e+2));return[sw(n,e+12),sw(n,e+4),sw(n,e+20)]};function t0(n,e){for(var t={},r=n.length-22;ss(n,r)!=101010256;--r)(!r||n.length-r>65558)&&Mo(13);var i=ks(n,r+8);if(!i)return{};var o=ss(n,r+16),s=o==4294967295||i==65535;if(s){var a=ss(n,r-12);s=ss(n,a)==101075792,s&&(i=ss(n,a+32),o=ss(n,a+48))}for(var c=e&&e.filter,l=0;l<i;++l){var u=l3(n,o,s),h=u[0],f=u[1],d=u[2],m=u[3],v=u[4],p=u[5],g=a3(n,p);o=v,(!c||c({name:m,size:f,originalSize:d,compression:h}))&&(h?h==8?t[m]=r3(n.subarray(g,g+f),{out:new io(d)}):Mo(14,"unknown compression type "+h):t[m]=cw(n,g,g+f))}return t}var uw={Success:0,NoDocumentXml:1},hw=class{constructor(e,t){this.name=e,this.type=t,this.shapeName=null,this.isVisible=!1,this.color=null,this.fileName=null,this.fileContent=null,this.inLinkCount=0,this.properties=null}IsConvertible(){return!(this.fileName===null||this.fileContent===null||!this.isVisible||this.inLinkCount>0)}},fw=class{constructor(){this.files=null,this.properties=null,this.objectNames=[],this.objectData=new Map}Init(e){let t=new Uint8Array(e);return this.files=t0(t),this.LoadDocumentXml()?(this.LoadGuiDocumentXml(),uw.Success):uw.NoDocumentXml}GetObjectListToConvert(){let e=[];for(let t of this.objectNames){let r=this.objectData.get(t);r.IsConvertible()&&e.push(r)}return e}IsSupportedType(e){return!(!e.startsWith("Part::")&&!e.startsWith("PartDesign::")||e.indexOf("Part2D")!==-1)}HasFile(e){return e in this.files}LoadDocumentXml(){let e=this.GetXMLContent("Document.xml");if(e===null)return!1;this.properties=new ni(be("Properties"));let t=e.getElementsByTagName("Document");for(let o of t)for(let s of o.childNodes)s.tagName==="Properties"&&this.GetPropertiesFromElement(s,this.properties);let r=e.getElementsByTagName("Objects");for(let o of r){let s=o.getElementsByTagName("Object");for(let a of s){let c=a.getAttribute("name"),l=a.getAttribute("type");if(!this.IsSupportedType(l))continue;let u=new hw(c,l);this.objectNames.push(c),this.objectData.set(c,u)}}let i=e.getElementsByTagName("ObjectData");for(let o of i){let s=o.getElementsByTagName("Object");for(let a of s){let c=a.getAttribute("name");if(!this.objectData.has(c))continue;let l=this.objectData.get(c);l.properties=new ni(be("Properties"));for(let f of a.childNodes)f.tagName==="Properties"&&this.GetPropertiesFromElement(f,l.properties);let u=a.getElementsByTagName("Property");for(let f of u){let d=f.getAttribute("name");if(d==="Label")l.shapeName=this.GetFirstChildValue(f,"String","value");else if(d==="Visibility"){let m=this.GetFirstChildValue(f,"Bool","value");l.isVisible=m==="true"}else if(d==="Visible"){let m=this.GetFirstChildValue(f,"Bool","value");l.isVisible=m==="true"}else if(d==="Shape"){let m=this.GetFirstChildValue(f,"Part","file");if(!this.HasFile(m))continue;let v=to(m);if(v!=="brp"&&v!=="brep")continue;l.fileName=m,l.fileContent=this.files[m]}}let h=a.getElementsByTagName("Link");for(let f of h){let d=f.getAttribute("value");if(this.objectData.has(d)){let m=this.objectData.get(d);m.inLinkCount+=1}}}}return!0}LoadGuiDocumentXml(){let e=this.GetXMLContent("GuiDocument.xml");if(e===null)return!1;let t=e.getElementsByTagName("ViewProvider");for(let r of t){let i=r.getAttribute("name");if(!this.objectData.has(i))continue;let o=this.objectData.get(i),s=r.getElementsByTagName("Property");for(let a of s){let c=a.getAttribute("name");if(c==="Visibility"){let l=this.GetFirstChildValue(a,"Bool","value");o.isVisible=l==="true"}else if(c==="ShapeColor"){let l=this.GetFirstChildValue(a,"PropertyColor","value"),u=parseInt(l,10);o.color=new di(u>>24&255,u>>16&255,u>>8&255,255)}}}return!0}GetPropertiesFromElement(e,t){let r=e.getElementsByTagName("Property");for(let i of r){let o=i.getAttribute("name"),s=i.getAttribute("type"),a=null;if(s==="App::PropertyBool"){let c=this.GetFirstChildValue(i,"String","bool");c!==null&&c.length>0&&(a=new Wt(Dt.Boolean,o,c==="true"))}else if(s==="App::PropertyInteger"){let c=this.GetFirstChildValue(i,"Integer","value");c!==null&&c.length>0&&(a=new Wt(Dt.Integer,o,parseInt(c)))}else if(s==="App::PropertyString"){let c=this.GetFirstChildValue(i,"String","value");c!==null&&c.length>0&&(a=new Wt(Dt.Text,o,c))}else if(s==="App::PropertyUUID"){let c=this.GetFirstChildValue(i,"Uuid","value");c!==null&&c.length>0&&(a=new Wt(Dt.Text,o,c))}else if(s==="App::PropertyFloat"||s==="App::PropertyLength"||s==="App::PropertyDistance"||s==="App::PropertyArea"||s==="App::PropertyVolume"){let c=this.GetFirstChildValue(i,"Float","value");c!==null&&c.length>0&&(a=new Wt(Dt.Number,o,parseFloat(c)))}a!==null&&t.AddProperty(a)}}GetXMLContent(e){if(!this.HasFile(e))return null;let t=new DOMParser,r=_r(this.files[e]);return t.parseFromString(r,"text/xml")}GetFirstChildValue(e,t,r){let i=e.getElementsByTagName(t);return i.length===0?null:i[0].getAttribute(r)}},Uh=class extends Pn{constructor(){super(),this.worker=null,this.document=null}CanImportExtension(e){return e==="fcstd"}GetUpDirection(){return Mt.Z}ClearContent(){this.worker!==null&&(this.worker.terminate(),this.worker=null),this.document=null}ResetContent(){this.worker=null,this.document=new fw}ImportContent(e,t){if(this.document.Init(e)===uw.NoDocumentXml){this.SetError(be("No Document.xml found.")),t();return}this.document.properties!==null&&this.document.properties.PropertyCount()>0&&this.model.AddPropertyGroup(this.document.properties);let i=this.document.GetObjectListToConvert();if(i.length===0){this.SetError(be("No importable object found.")),t();return}this.ConvertObjects(i,t)}ConvertObjects(e,t){vh().then(r=>{this.worker=r,this.worker.addEventListener("message",c=>{s(c.data)}),this.worker.addEventListener("error",c=>{s(null)});let i=0,o=new Ui(this.model),s=c=>{if(c!==null){let l=e[i];this.OnFileConverted(l,c,o)}if(i+=1,i===e.length)t();else{let l=e[i];this.worker.postMessage({format:"brep",buffer:l.fileContent})}},a=e[i];this.worker.postMessage({format:"brep",buffer:a.fileContent})}).catch(()=>{this.SetError(be("Failed to load occt-import-js.")),t()})}OnFileConverted(e,t,r){if(!t.success||t.meshes.length===0)return;let i=new Vr;e.shapeName!==null&&i.SetName(e.shapeName);let o=1;for(let a of t.meshes){let c=null;e.color!==null&&(c=r.GetMaterialIndex(e.color.r,e.color.g,e.color.b,e.color.a));let l=Yo(a,c,null);if(e.shapeName!==null){let h=o.toString().padStart(3,"0");l.SetName(e.shapeName+" "+h)}e.properties!==null&&e.properties.PropertyCount()>0&&l.AddPropertyGroup(e.properties);let u=this.model.AddMesh(l);i.AddMeshIndex(u),o+=1}this.model.GetRootNode().AddChildNode(i)}};var Vi=class{constructor(){this.defaultLineColor=new ft(100,100,100),this.defaultColor=new ft(200,200,200)}},Hr={NoImportableFile:1,FailedToLoadFile:2,ImportFailed:3,UnknownError:4},xl=class{constructor(e){this.code=e,this.mainFile=null,this.message=null}},sp=class{constructor(){this.model=null,this.mainFile=null,this.upVector=null,this.usedFiles=null,this.missingFiles=null}},ap=class{constructor(e){this.getBufferCallback=e,this.fileBuffers=new Map}GetFileBuffer(e){let t=ur(e);if(this.fileBuffers.has(t))return this.fileBuffers.get(t);let r=this.getBufferCallback(t);return this.fileBuffers.set(t,r),r}},Bh=class{constructor(){this.importers=[new _h,new Ah,new Th,new Mh,new xh,new wh,new Ch,new yh,new Sh,new Eh,new Uh,new Dh,new Fh,new Nh,new Lh,new Oh],this.fileList=new gc,this.model=null,this.usedFiles=[],this.missingFiles=[]}AddImporter(e){this.importers.push(e)}ImportFiles(e,t,r){r.onLoadStart(),this.LoadFiles(e,{onReady:()=>{r.onImportStart(),pc(()=>{this.DecompressArchives(this.fileList,()=>{this.ImportLoadedFiles(t,r)})})},onFileListProgress:r.onFileListProgress,onFileLoadProgress:r.onFileLoadProgress})}LoadFiles(e,t){let r=new gc;r.FillFromInputFiles(e);let i=!1;if(this.HasImportableFile(r))i=!0;else{let o=!1;for(let s=0;s<this.missingFiles.length;s++){let a=this.missingFiles[s];r.ContainsFileByPath(a)&&(o=!0)}o?(this.fileList.ExtendFromFileList(r),i=!1):i=!0}i&&(this.fileList=r),this.fileList.GetContent({onReady:t.onReady,onFileListProgress:t.onFileListProgress,onFileLoadProgress:t.onFileLoadProgress})}ImportLoadedFiles(e,t){let r=this.GetImportableFiles(this.fileList);if(r.length===0){t.onImportError(new xl(Hr.NoImportableFile));return}if(r.length===1||!t.onSelectMainFile){let i=r[0];this.ImportLoadedMainFile(i,e,t)}else{let i=r.map(o=>o.file.name);t.onSelectMainFile(i,o=>{if(o===null){t.onImportError(new xl(Hr.NoImportableFile));return}pc(()=>{let s=r[o];this.ImportLoadedMainFile(s,e,t)})})}}ImportLoadedMainFile(e,t,r){if(e===null||e.file===null||e.file.content===null){let s=new xl(Hr.FailedToLoadFile);e!==null&&e.file!==null&&(s.mainFile=e.file.name),r.onImportError(s);return}this.model=null,this.usedFiles=[],this.missingFiles=[],this.usedFiles.push(e.file.name);let i=e.importer,o=new ap(s=>{let a=null,c=this.fileList.FindFileByPath(s);return c===null||c.content===null?(this.missingFiles.push(s),a=null):(this.usedFiles.push(s),a=c.content),a});i.Import(e.file.name,e.file.extension,e.file.content,{getDefaultLineMaterialColor:()=>t.defaultLineColor,getDefaultMaterialColor:()=>t.defaultColor,getFileBuffer:s=>o.GetFileBuffer(s),onSuccess:()=>{this.model=i.GetModel();let s=new sp;s.mainFile=e.file.name,s.model=this.model,s.usedFiles=this.usedFiles,s.missingFiles=this.missingFiles,s.upVector=i.GetUpDirection(),r.onImportSuccess(s)},onError:()=>{let s=new xl(Hr.ImportFailed);s.mainFile=e.file.name,s.message=i.GetErrorMessage(),r.onImportError(s)},onComplete:()=>{i.Clear()}})}DecompressArchives(e,t){let r=e.GetFiles(),i=[];for(let o of r)o.extension==="zip"&&i.push(o);if(i.length===0){t();return}for(let o=0;o<i.length;o++){let s=i[o],a=new Uint8Array(s.content),c=t0(a);for(let l in c)if(Object.prototype.hasOwnProperty.call(c,l)){let u=new mc(l,Jo.Decompressed,null);u.SetContent(c[l].buffer),e.AddFile(u)}}t()}GetFileList(){return this.fileList}HasImportableFile(e){return this.GetImportableFiles(e).length>0}GetImportableFiles(e){function t(o,s){for(let a=0;a<s.length;a++){let c=s[a];if(c.CanImportExtension(o.extension))return c}return null}let r=[],i=e.GetFiles();for(let o=0;o<i.length;o++){let s=i[o],a=t(s,this.importers);a!==null&&r.push({file:s,importer:a})}return r}};function CM(n,e,t){let r=e/t;return n*(r*r*(3-2*r))}function IM(n,e,t){return e*n/t}function n0(n,e,t){let r=e/t,i=r*r;return n*(i/(2*(i-r)+1))}function zh(n,e,t,r){let i=gr(e,n).Normalize(),o=Ur(n,e),s=[];for(let a=0;a<t;a++){let c=r(o,a,t-1);s.push(n.Clone().Offset(i,c))}return s}var _c=class{constructor(){this.prev=new on(0,0),this.curr=new on(0,0),this.diff=new on(0,0),this.buttons=[]}Down(e,t){this.buttons.push(t.which),this.curr=this.GetPositionFromEvent(e,t),this.prev=this.curr.Clone()}Move(e,t){this.curr=this.GetPositionFromEvent(e,t),this.diff=Va(this.curr,this.prev),this.prev=this.curr.Clone()}Up(e,t){let r=this.buttons.indexOf(t.which);r!==-1&&this.buttons.splice(r,1),this.curr=this.GetPositionFromEvent(e,t)}Leave(e,t){this.buttons=[],this.curr=this.GetPositionFromEvent(e,t)}IsButtonDown(){return this.buttons.length>0}GetButton(){let e=this.buttons.length;return e===0?0:this.buttons[e-1]}GetPosition(){return this.curr}GetMoveDiff(){return this.diff}GetPositionFromEvent(e,t){return ra(e,t.clientX,t.clientY)}},Tc=class{constructor(){this.prevPos=new on(0,0),this.currPos=new on(0,0),this.diffPos=new on(0,0),this.prevDist=0,this.currDist=0,this.diffDist=0,this.fingers=0}Start(e,t){t.touches.length!==0&&(this.fingers=t.touches.length,this.currPos=this.GetPositionFromEvent(e,t),this.prevPos=this.currPos.Clone(),this.currDist=this.GetTouchDistanceFromEvent(e,t),this.prevDist=this.currDist)}Move(e,t){t.touches.length!==0&&(this.currPos=this.GetPositionFromEvent(e,t),this.diffPos=Va(this.currPos,this.prevPos),this.prevPos=this.currPos.Clone(),this.currDist=this.GetTouchDistanceFromEvent(e,t),this.diffDist=this.currDist-this.prevDist,this.prevDist=this.currDist)}End(e,t){t.touches.length!==0&&(this.fingers=0,this.currPos=this.GetPositionFromEvent(e,t),this.currDist=this.GetTouchDistanceFromEvent(e,t))}IsFingerDown(){return this.fingers!==0}GetFingerCount(){return this.fingers}GetPosition(){return this.currPos}GetMoveDiff(){return this.diffPos}GetDistanceDiff(){return this.diffDist}GetPositionFromEvent(e,t){let r=null;if(t.touches.length!==0){let i=t.touches[0];r=ra(e,i.pageX,i.pageY)}return r}GetTouchDistanceFromEvent(e,t){if(t.touches.length!==2)return 0;let r=t.touches[0],i=t.touches[1];return Yl(ra(e,r.pageX,r.pageY),ra(e,i.pageX,i.pageY))}},lp=class{constructor(){this.isClick=!1,this.startPosition=null}Start(e){this.isClick=!0,this.startPosition=e}Move(e){this.isClick&&(this.startPosition!==null?Yl(this.startPosition,e)>3&&this.Cancel():this.Cancel())}End(){this.startPosition=null}Cancel(){this.isClick=!1,this.startPosition=null}IsClick(){return this.isClick}},_i={None:0,Orbit:1,Pan:2,Zoom:3},Gh=class{constructor(e,t,r){this.canvas=e,this.camera=t,this.callbacks=r,this.navigationMode=zo.FixedUpVector,this.enableCameraMovement=!0,this.mouse=new _c,this.touch=new Tc,this.clickDetector=new lp,this.onMouseClick=null,this.onMouseMove=r.onMouseMove||null,this.onContext=null,this.onMouseDown=r.onMouseDown||null,this.onMouseUp=r.onMouseUp||null,this.canvas.addEventListener&&(this.canvas.addEventListener("mousedown",this.OnMouseDown.bind(this)),this.canvas.addEventListener("wheel",this.OnMouseWheel.bind(this)),this.canvas.addEventListener("touchstart",this.OnTouchStart.bind(this)),this.canvas.addEventListener("touchmove",this.OnTouchMove.bind(this)),this.canvas.addEventListener("touchcancel",this.OnTouchEnd.bind(this)),this.canvas.addEventListener("touchend",this.OnTouchEnd.bind(this)),this.canvas.addEventListener("contextmenu",this.OnContextMenu.bind(this))),document.addEventListener&&(document.addEventListener("mousemove",this.OnMouseMove.bind(this)),document.addEventListener("mouseup",this.OnMouseUp.bind(this)),document.addEventListener("mouseleave",this.OnMouseLeave.bind(this)))}SetMouseClickHandler(e){this.onMouseClick=e}SetMouseMoveHandler(e){this.onMouseMove=e}SetContextMenuHandler(e){this.onContext=e}EnableCameraMovement(e){this.enableCameraMovement=e}GetNavigationMode(){return this.navigationMode}SetNavigationMode(e){this.navigationMode=e}GetCamera(){return this.camera}SetCamera(e){this.camera=e}MoveCamera(e,t){function r(i,o,s,a){i.camera.eye=o.eye[a],i.camera.center=o.center[a],i.camera.up=o.up[a],i.Update(),a<s-1&&requestAnimationFrame(()=>{r(i,o,s,a+1)})}if(e!==null){if(t===0||og(this.camera,e))this.camera=e;else{let i=n0,o={eye:zh(this.camera.eye,e.eye,t,i),center:zh(this.camera.center,e.center,t,i),up:zh(this.camera.up,e.up,t,i)};requestAnimationFrame(()=>{r(this,o,t,0)})}this.Update()}}GetFitToSphereCamera(e,t){if(ta(t))return null;let r=this.camera.Clone(),i=gr(r.center,e);r.eye=gr(r.eye,i),r.center=e.Clone();let o=gr(r.eye,r.center).Normalize(),s=this.camera.fov/2;this.canvas.width<this.canvas.height&&(s=s*this.canvas.width/this.canvas.height);let a=t/Math.sin(s*ws);return r.eye=r.center.Clone().Offset(o,a),r}OnMouseDown(e){if(e.preventDefault(),this.mouse.Down(this.canvas,e),this.clickDetector.Start(this.mouse.GetPosition()),this.enableCameraMovement||(this.isMouseDown=!0),this.onMouseDown){let t=this.mouse.GetPosition();this.onMouseDown(t)}}OnMouseMove(e){if(this.mouse.Move(this.canvas,e),this.clickDetector.Move(this.mouse.GetPosition()),this.onMouseMove){let o=ra(this.canvas,e.clientX,e.clientY);this.onMouseMove(o)}if(!this.mouse.IsButtonDown()||!this.enableCameraMovement)return;if(this.onMouseMove){let o=this.mouse.GetPosition();this.onMouseMove(o)}let t=this.mouse.GetMoveDiff(),r=this.mouse.GetButton(),i=_i.None;if(r===1?e.ctrlKey?i=_i.Zoom:e.shiftKey?i=_i.Pan:i=_i.Orbit:(r===2||r===3)&&(i=_i.Pan),i===_i.Orbit){let o=.5;this.Orbit(t.x*o,t.y*o)}else if(i===_i.Pan){let s=.001*Ur(this.camera.eye,this.camera.center);this.Pan(t.x*s,t.y*s)}else i===_i.Zoom&&this.Zoom(-t.y*.005);this.Update()}OnMouseUp(e){if(this.mouse.Up(this.canvas,e),this.clickDetector.End(),this.clickDetector.IsClick()){let t=this.mouse.GetPosition();this.Click(e.which,t)}if(this.enableCameraMovement||(this.isMouseDown=!1),this.onMouseUp){let t=this.mouse.GetPosition();this.onMouseUp(t)}}OnMouseLeave(e){this.mouse.Leave(this.canvas,e),this.clickDetector.Cancel()}OnTouchStart(e){e.preventDefault(),this.touch.Start(this.canvas,e),this.clickDetector.Start(this.touch.GetPosition())}OnTouchMove(e){if(e.preventDefault(),this.touch.Move(this.canvas,e),this.clickDetector.Move(this.touch.GetPosition()),this.touch.IsFingerDown()){if(!this.enableCameraMovement)return}else return;let t=this.touch.GetMoveDiff(),r=this.touch.GetDistanceDiff(),i=this.touch.GetFingerCount(),o=_i.None;if(i===1?o=_i.Orbit:i===2&&(o=_i.Pan),o===_i.Orbit){let s=.5;this.Orbit(t.x*s,t.y*s)}else if(o===_i.Pan){this.Zoom(r*.005);let a=.001*Ur(this.camera.eye,this.camera.center);this.Pan(t.x*a,t.y*a)}this.Update()}OnTouchEnd(e){if(e.preventDefault(),this.touch.End(this.canvas,e),this.clickDetector.End(),this.clickDetector.IsClick()){let t=this.touch.GetPosition();this.touch.GetFingerCount()===1&&this.Click(1,t)}}OnMouseWheel(e){let t=e||window.event;t.preventDefault();let r=-t.deltaY/40,i=.1;r<0&&(i=i*-1),this.Zoom(i),this.Update()}OnContextMenu(e){e.preventDefault(),this.clickDetector.IsClick()&&(this.Context(e.clientX,e.clientY),this.clickDetector.Cancel())}Orbit(e,t){let r=e*ws,i=t*ws,o=gr(this.camera.center,this.camera.eye).Normalize(),s=Bo(o,this.camera.up).Normalize();if(this.navigationMode===zo.FixedUpVector){let c=ig(o,this.camera.up)+i;Qm(c,0)&&su(c,Math.PI)&&this.camera.eye.Rotate(s,-i,this.camera.center),this.camera.eye.Rotate(this.camera.up,-r,this.camera.center)}else if(this.navigationMode===zo.FreeOrbit){let a=Bo(s,o).Normalize();this.camera.eye.Rotate(s,-i,this.camera.center),this.camera.eye.Rotate(a,-r,this.camera.center),this.camera.up=a}}Pan(e,t){let r=gr(this.camera.center,this.camera.eye).Normalize(),i=Bo(r,this.camera.up).Normalize(),o=Bo(i,r).Normalize();this.camera.eye.Offset(i,-e),this.camera.center.Offset(i,-e),this.camera.eye.Offset(o,t),this.camera.center.Offset(o,t)}Zoom(e){let t=gr(this.camera.center,this.camera.eye),i=t.Length()*e;this.camera.eye.Offset(t,i)}Update(){this.callbacks.onUpdate()}Click(e,t){this.onMouseClick&&this.onMouseClick(e,t)}Context(e,t){if(this.onContext){let r={x:e,y:t},i=ra(this.canvas,e,t);this.onContext(r,i)}}};var as=class n{constructor(e,t){this.textureNames=e,this.backgroundIsEnvMap=t}Clone(){let e=null;if(this.textureNames!==null){e=[];for(let t of this.textureNames)e.push(t)}return new n(e,this.backgroundIsEnvMap)}},Vh=class{constructor(e){this.scene=e,this.type=Sr.Phong,this.projectionMode=nr.Perspective,this.ambientLight=new Ds(8947848,1*Math.PI),this.directionalLight=new Ps(8947848,1*Math.PI),this.environmentSettings=new as(null,!1),this.environment=null,this.scene.add(this.ambientLight),this.scene.add(this.directionalLight)}SetShadingType(e){this.type=e,this.UpdateShading()}SetProjectionMode(e){this.projectionMode=e,this.UpdateShading()}UpdateShading(){this.type===Sr.Phong?(this.ambientLight.color.set(8947848),this.directionalLight.color.set(8947848),this.scene.environment=null):this.type===Sr.Physical&&(this.ambientLight.color.set(0),this.directionalLight.color.set(5592405),this.scene.environment=this.environment),this.environmentSettings.backgroundIsEnvMap&&this.projectionMode===nr.Perspective?this.scene.background=this.environment:this.scene.background=null}SetEnvironmentMapSettings(e,t){let r=new hv;this.environment=r.load(e.textureNames,i=>{i.colorSpace=Oi,t()}),this.environmentSettings=e}UpdateByCamera(e){let t=gr(e.eye,e.center);this.directionalLight.position.set(t.x,t.y,t.z)}};function Hh(n){let e=45;return n===Mt.X?new po(new $e(2,-3,1.5),new $e(0,0,0),new $e(1,0,0),e):n===Mt.Y?new po(new $e(-1.5,2,3),new $e(0,0,0),new $e(0,1,0),e):n===Mt.Z?new po(new $e(-1.5,-3,2),new $e(0,0,0),new $e(0,0,1),e):null}function r0(n,e){if(!e(n))return!1;for(let t of n.children)if(!r0(t,e))return!1;return!0}function dw(n){let e=null;return r0(n,t=>{if(t.isMesh)for(let r of t.material)return r.type==="MeshPhongMaterial"?e=Sr.Phong:r.type==="MeshStandardMaterial"&&(e=Sr.Physical),!1;return!0}),e}var cp=class{constructor(){this.eyeCenterDistance=0,this.forceUpdate=!0}ForceUpdate(){this.forceUpdate=!0}ValidatePerspective(){return this.forceUpdate?(this.forceUpdate=!1,!1):!0}ValidateOrthographic(e){return this.forceUpdate||!pn(this.eyeCenterDistance,e)?(this.eyeCenterDistance=e,this.forceUpdate=!1,!1):!0}},up=class{constructor(){this.direction=Mt.Y,this.isFixed=!0,this.isFlipped=!1}SetDirection(e,t){this.direction=e,this.isFlipped=!1;let r=Hh(this.direction),i=gr(r.eye,r.center),o=Ur(t.center,t.eye),s=t.center.Clone().Offset(i,o),a=t.Clone();return this.direction===Mt.X?(a.up=new $e(1,0,0),a.eye=s):this.direction===Mt.Y?(a.up=new $e(0,1,0),a.eye=s):this.direction===Mt.Z&&(a.up=new $e(0,0,1),a.eye=s),a}SetFixed(e,t){return this.isFixed=e,this.isFixed?this.SetDirection(this.direction,t):null}Flip(e){this.isFlipped=!this.isFlipped;let t=e.Clone();return t.up.MultiplyScalar(-1),t}},Us=class{constructor(){Tn.enabled=!1,this.canvas=null,this.renderer=null,this.scene=null,this.mainModel=null,this.extraModel=null,this.camera=null,this.projectionMode=null,this.cameraValidator=null,this.shadingModel=null,this.navigation=null,this.upVector=null,this.settings={animationSteps:40},this.isNavigating=!1}Init(e){this.canvas=e,this.canvas.id="viewer";let t={canvas:this.canvas,antialias:!0};this.renderer=new il(t),this.renderer.outputColorSpace=Oi,window.devicePixelRatio&&this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor("#ffffff",1),this.renderer.setSize(this.canvas.width,this.canvas.height),this.scene=new Is,this.mainModel=new ah(this.scene),this.extraModel=new ba(this.scene),this.InitNavigation(),this.InitShading(),this.Render()}SetMouseClickHandler(e){this.navigation.SetMouseClickHandler(e)}SetMouseDownHandler(e){this.navigation&&(this.navigation.onMouseDown=e)}SetMouseUpHandler(e){this.navigation&&(this.navigation.onMouseUp=e)}SetMouseMoveHandler(e){this.navigation.SetMouseMoveHandler(e)}SetContextMenuHandler(e){this.navigation.SetContextMenuHandler(e)}SetEdgeSettings(e){let t=e.Clone();this.mainModel.SetEdgeSettings(t),this.Render()}SetEnvironmentMapSettings(e){let t=e.Clone();this.shadingModel.SetEnvironmentMapSettings(t,()=>{this.Render()}),this.shadingModel.UpdateShading(),this.Render()}SetBackgroundColor(e){let t=new Ke(oa(e.r),oa(e.g),oa(e.b)),r=oa(e.a);this.renderer.setClearColor(t,r),this.Render()}GetCanvas(){return this.canvas}GetCamera(){return this.navigation.GetCamera()}GetProjectionMode(){return this.projectionMode}SetCamera(e){this.navigation.SetCamera(e),this.cameraValidator.ForceUpdate(),this.Render()}SetProjectionMode(e){this.projectionMode!==e&&(this.scene.remove(this.camera),e===nr.Perspective?this.camera=new Gn(45,1,.1,1e3):e===nr.Orthographic&&(this.camera=new Cs(-1,1,1,-1,.1,1e3)),this.scene.add(this.camera),this.projectionMode=e,this.shadingModel.SetProjectionMode(e),this.cameraValidator.ForceUpdate(),this.AdjustClippingPlanes(),this.Render())}Resize(e,t){let r=tg(this.canvas,e,t);this.ResizeRenderer(r.width,r.height)}ResizeRenderer(e,t){window.devicePixelRatio&&this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t),this.cameraValidator.ForceUpdate(),this.Render()}FitSphereToWindow(e,t){if(e===null)return;let r=new $e(e.center.x,e.center.y,e.center.z),i=e.radius,o=this.navigation.GetFitToSphereCamera(r,i);this.navigation.MoveCamera(o,t?this.settings.animationSteps:0)}AdjustClippingPlanes(){let e=this.GetBoundingSphere(t=>!0);this.AdjustClippingPlanesToSphere(e)}AdjustClippingPlanesToSphere(e){e!==null&&(e.radius<10?(this.camera.near=.01,this.camera.far=100):e.radius<100?(this.camera.near=.1,this.camera.far=1e3):e.radius<1e3?(this.camera.near=10,this.camera.far=1e4):(this.camera.near=100,this.camera.far=1e6),this.cameraValidator.ForceUpdate(),this.Render())}GetNavigationMode(){return this.navigation.GetNavigationMode()}SetNavigationMode(e){let t=this.navigation.GetCamera(),r=this.upVector.SetFixed(e===zo.FixedUpVector,t);this.navigation.SetNavigationMode(e),r!==null&&this.navigation.MoveCamera(r,this.settings.animationSteps),this.Render()}SetUpVector(e,t){let r=this.navigation.GetCamera(),i=this.upVector.SetDirection(e,r),o=t?this.settings.animationSteps:0;this.navigation.MoveCamera(i,o),this.Render()}FlipUpVector(){let e=this.navigation.GetCamera(),t=this.upVector.Flip(e);this.navigation.MoveCamera(t,0),this.Render()}Render(){let e=this.navigation.GetCamera();if(this.camera.position.set(e.eye.x,e.eye.y,e.eye.z),this.camera.up.set(e.up.x,e.up.y,e.up.z),this.camera.lookAt(new he(e.center.x,e.center.y,e.center.z)),this.projectionMode===nr.Perspective)this.cameraValidator.ValidatePerspective()||(this.camera.aspect=this.canvas.width/this.canvas.height,this.camera.fov=e.fov,this.camera.updateProjectionMatrix());else if(this.projectionMode===nr.Orthographic){let t=Ur(e.eye,e.center);if(!this.cameraValidator.ValidateOrthographic(t)){let r=this.canvas.width/this.canvas.height,o=Ur(e.eye,e.center)*Math.tan(.5*e.fov*ws);this.camera.left=-o*r,this.camera.right=o*r,this.camera.top=o,this.camera.bottom=-o,this.camera.updateProjectionMatrix()}}this.shadingModel.UpdateByCamera(e),this.renderer.render(this.scene,this.camera)}SetMainObject(e){let t=dw(e);this.mainModel.SetMainObject(e),this.shadingModel.SetShadingType(t),this.Render()}AddExtraObject(e){this.extraModel.AddObject(e),this.Render()}RemoveExtraObject(e){this.extraModel&&typeof this.extraModel.GetObjects=="function"?this.extraModel.GetObjects().indexOf(e)!==-1?(this.extraModel.RemoveObject(e),this.Render()):console.log("Object not found in the list"):console.error("this.extraModel or GetObjects is not available")}Clear(){this.mainModel.Clear(),this.extraModel.Clear(),this.Render()}ClearExtra(){this.extraModel.Clear(),this.Render()}SetMeshesVisibility(e){this.mainModel.EnumerateMeshesAndLines(t=>{let r=e(t.userData);t.visible!==r&&(t.visible=r)}),this.mainModel.EnumerateEdges(t=>{let r=e(t.userData);t.visible!==r&&(t.visible=r)}),this.Render()}SetMeshesHighlight(e,t){let r=this.mainModel.HasLinesOrEdges();this.mainModel.EnumerateMeshesAndLines(i=>{t(i.userData)?i.userData.threeMaterials===null&&(i.userData.threeMaterials=i.material,i.material=_v(i.userData.threeMaterials,e,r)):i.userData.threeMaterials!==null&&(i.material=i.userData.threeMaterials,i.userData.threeMaterials=null)}),this.Render()}GetMeshUserDataUnderMouse(e,t){let r=this.GetMeshIntersectionUnderMouse(e,t);return r===null?null:r.object.userData}GetMeshIntersectionUnderMouse(e,t){let r=this.GetCanvasSize(),i=this.mainModel.GetMeshIntersectionUnderMouse(e,t,this.camera,r.width,r.height);return i===null?null:i}GetBoundingBox(e){return this.mainModel.GetBoundingBox(e)}GetBoundingSphere(e){return this.mainModel.GetBoundingSphere(e)}EnumerateMeshesAndLinesUserData(e){this.mainModel.EnumerateMeshesAndLines(t=>{e(t.userData)})}InitNavigation(){let e=Hh(Mt.Y);this.camera=new Gn(45,1,.1,1e3),this.projectionMode=nr.Perspective,this.cameraValidator=new cp,this.scene.add(this.camera);let t=this.renderer.domElement;this.navigation=new Gh(t,e,{onUpdate:()=>{this.Render()},onMouseDown:r=>{this.mouseDownHandler&&this.mouseDownHandler(r)},onMouseMove:r=>{this.mouseMoveHandler&&this.mouseMoveHandler(r)},onMouseUp:r=>{this.mouseUpHandler&&this.mouseUpHandler(r)}}),this.upVector=new up}InitShading(){this.shadingModel=new Vh(this.scene)}GetShadingType(){return this.shadingModel.type}GetImageSize(){let e=new Ne;return this.renderer.getSize(e),{width:parseInt(e.x,10),height:parseInt(e.y,10)}}GetCanvasSize(){let e=this.canvas.width,t=this.canvas.height;return window.devicePixelRatio&&(e/=window.devicePixelRatio,t/=window.devicePixelRatio),{width:e,height:t}}GetImageAsDataUrl(e,t,r){let i=this.GetImageSize(),o=e,s=t;window.devicePixelRatio&&(o/=window.devicePixelRatio,s/=window.devicePixelRatio);let a=this.renderer.getClearAlpha();r&&this.renderer.setClearAlpha(0),this.ResizeRenderer(o,s),this.Render();let c=this.renderer.domElement.toDataURL();return this.ResizeRenderer(i.width,i.height),this.renderer.setClearAlpha(a),c}Destroy(){this.Clear(),this.renderer.dispose()}};var Wh=class{constructor(){this.skipNextEvent=!1,this.eventListener=null}SetEventListener(e){this.eventListener=e,window.onhashchange=this.OnChange.bind(this)}SkipNextEventHandler(){this.skipNextEvent=!0}HasHash(){return this.GetHash().length>0}ClearHash(){this.SetHash("")}GetModelFilesFromHash(){return Zo(this.GetHash()).GetModelUrls()}SetModelFilesToHash(e){let t=lh(e);this.SetHash(t)}GetCameraFromHash(){return Zo(this.GetHash()).GetCamera()}GetProjectionModeFromHash(){return Zo(this.GetHash()).GetProjectionMode()}GetBackgroundFromHash(){return Zo(this.GetHash()).GetBackgroundColor()}GetEnvironmentSettingsFromHash(){return Zo(this.GetHash()).GetEnvironmentSettings()}GetDefaultColorFromHash(){return Zo(this.GetHash()).GetDefaultColor()}GetDefaultLineColorFromHash(){return Zo(this.GetHash()).GetDefaultLineColor()}GetEdgeSettingsFromHash(){return Zo(this.GetHash()).GetEdgeSettings()}GetHash(){return window.location.hash.substring(1)}SetHash(e){window.location.hash=e}OnChange(){if(this.skipNextEvent){this.skipNextEvent=!1;return}this.eventListener()}};var bl={Line:1,Face:2},jh=class{constructor(){this.forceMediumpForMaterials=!1}},qh=class{constructor(){this.defaultMaterials=[],this.objectUrls=[]}},hp=class{constructor(e){this.callbacks=e,this.texturesNeeded=0,this.texturesLoaded=0,this.threeObject=null}OnTextureNeeded(){this.texturesNeeded+=1}OnTextureLoaded(){this.texturesLoaded+=1,this.callbacks.onTextureLoaded(),this.Finish()}OnModelLoaded(e){this.threeObject=e,this.Finish()}Finish(){this.threeObject!==null&&this.texturesNeeded===this.texturesLoaded&&this.callbacks.onModelLoaded(this.threeObject)}},fp=class{constructor(e,t){this.model=e,this.threeNodeItems=[],this.AddNode(e.GetRootNode(),t)}AddNode(e,t){let r=e.GetTransformation().GetMatrix(),i=new tt().fromArray(r.Get());t.applyMatrix4(i);for(let o of e.GetChildNodes()){let s=new an;t.add(s),this.AddNode(o,s)}for(let o of e.GetMeshIndices()){let s=new ki(e.GetId(),o),a=this.model.GetMesh(o);this.threeNodeItems.push({meshInstance:new Sa(s,e,a),threeNode:t})}}GetNodeItems(){return this.threeNodeItems}},dp=class{constructor(e,t,r,i){this.model=e,this.stateHandler=t,this.conversionParams=r,this.conversionOutput=i,this.shadingType=Sv(e),this.modelToThreeLineMaterial=new Map,this.modelToThreeMaterial=new Map}GetThreeMaterial(e,t){if(t===bl.Face){if(!this.modelToThreeMaterial.has(e)){let r=this.CreateThreeFaceMaterial(e);this.modelToThreeMaterial.set(e,r)}return this.modelToThreeMaterial.get(e)}else if(t===bl.Line){if(!this.modelToThreeLineMaterial.has(e)){let r=this.CreateThreeLineMaterial(e);this.modelToThreeLineMaterial.set(e,r)}return this.modelToThreeLineMaterial.get(e)}else return null}CreateThreeFaceMaterial(e){let t=this.model.GetMaterial(e),r=Pr(t.color);t.vertexColors&&r.setRGB(1,1,1);let i={color:r,vertexColors:t.vertexColors,opacity:t.opacity,transparent:t.transparent,alphaTest:t.alphaTest,side:br};this.conversionParams.forceMediumpForMaterials&&(i.precision="mediump");let o=null;if(this.shadingType===Sr.Phong){if(o=new Rn(i),t.type===jn.Phong){let a=Pr(t.specular);pn(t.shininess,0)&&a.setRGB(0,0,0),o.specular=a,o.shininess=t.shininess*100,this.LoadFaceTexture(o,t.specularMap,c=>{o.specularMap=c})}}else this.shadingType===Sr.Physical&&(o=new sl(i),t.type===jn.Physical&&(o.metalness=t.metalness,o.roughness=t.roughness,this.LoadFaceTexture(o,t.metalnessMap,a=>{o.metalness=1,o.roughness=1,o.metalnessMap=a,o.roughnessMap=a})));let s=Pr(t.emissive);return o.emissive=s,this.LoadFaceTexture(o,t.diffuseMap,a=>{t.multiplyDiffuseMap||o.color.setRGB(1,1,1),o.map=a}),this.LoadFaceTexture(o,t.bumpMap,a=>{o.bumpMap=a}),this.LoadFaceTexture(o,t.normalMap,a=>{o.normalMap=a}),this.LoadFaceTexture(o,t.emissiveMap,a=>{o.emissiveMap=a}),t.source!==Bn.Model&&(o.userData.source=t.source,this.conversionOutput.defaultMaterials.push(o)),o}CreateThreeLineMaterial(e){let t=this.model.GetMaterial(e),i={color:Pr(t.color),opacity:t.opacity};this.conversionParams.forceMediumpForMaterials&&(i.precision="mediump");let o=new Gr(i);return t.source!==Bn.Model&&(o.userData.source=t.source,this.conversionOutput.defaultMaterials.push(o)),o}LoadFaceTexture(e,t,r){function i(a,c){c.wrapS=qn,c.wrapT=qn,c.rotation=a.rotation,c.offset.x=a.offset.x,c.offset.y=a.offset.y,c.repeat.x=a.scale.x,c.repeat.y=a.scale.y}if(t===null||!t.IsValid())return;let o=new wo;this.stateHandler.OnTextureNeeded();let s=null;t.mimeType!==null?s=kv(t.buffer,t.mimeType):s=gl(t.buffer),this.conversionOutput.objectUrls.push(s),o.load(s,a=>{i(t,a),e.needsUpdate=!0,r(a),this.stateHandler.OnTextureLoaded()},null,a=>{this.stateHandler.OnTextureLoaded()})}},Xh=class{constructor(e,t,r){this.threeGeometry=e,this.geometryType=t,this.materialHandler=r,this.itemVertexCount=null,t===bl.Face?this.itemVertexCount=3:t===bl.Line&&(this.itemVertexCount=2),this.meshThreeMaterials=[],this.meshOriginalMaterials=[],this.groupStart=null,this.previousMaterialIndex=null}ProcessItem(e,t){if(this.previousMaterialIndex!==t){this.groupStart!==null&&this.AddGroup(this.groupStart,e-1),this.groupStart=e;let r=this.materialHandler.GetThreeMaterial(t,this.geometryType);this.meshThreeMaterials.push(r),this.meshOriginalMaterials.push(t),this.previousMaterialIndex=t}}Finalize(e){this.AddGroup(this.groupStart,e-1)}AddGroup(e,t){let r=this.meshThreeMaterials.length-1;this.threeGeometry.addGroup(e*this.itemVertexCount,(t-e+1)*this.itemVertexCount,r)}};function i0(n,e,t,r){function i(h,f){let d=h.mesh,m=d.TriangleCount();if(m===0)return null;let v=[];for(let T=0;T<m;T++)v.push(T);v.sort((T,D)=>{let N=d.GetTriangle(T),P=d.GetTriangle(D);return N.mat-P.mat});let p=new Yt,g=new Xh(p,bl.Face,f),x=[],y=[],b=[],S=[],_=d.VertexColorCount()>0,M=d.TextureUVCount()>0,A=0;for(let T of v){let D=d.GetTriangle(T),N=d.GetVertex(D.v0),P=d.GetVertex(D.v1),E=d.GetVertex(D.v2);if(x.push(N.x,N.y,N.z,P.x,P.y,P.z,E.x,E.y,E.z),D.HasVertexColors()){let O=Pr(d.GetVertexColor(D.c0)),q=Pr(d.GetVertexColor(D.c1)),ne=Pr(d.GetVertexColor(D.c2));y.push(O.r,O.g,O.b,q.r,q.g,q.b,ne.r,ne.g,ne.b)}else _&&y.push(0,0,0,0,0,0,0,0,0);let U=d.GetNormal(D.n0),k=d.GetNormal(D.n1),B=d.GetNormal(D.n2);if(b.push(U.x,U.y,U.z,k.x,k.y,k.z,B.x,B.y,B.z),D.HasTextureUVs()){let O=d.GetTextureUV(D.u0),q=d.GetTextureUV(D.u1),ne=d.GetTextureUV(D.u2);S.push(O.x,O.y,q.x,q.y,ne.x,ne.y)}else M&&S.push(0,0,0,0,0,0);g.ProcessItem(A,D.mat),A+=1}g.Finalize(A),p.setAttribute("position",new Ye(x,3)),y.length!==0&&p.setAttribute("color",new Ye(y,3)),p.setAttribute("normal",new Ye(b,3)),S.length!==0&&p.setAttribute("uv",new Ye(S,2));let w=new hn(p,g.meshThreeMaterials);return w.name=d.GetName(),w.userData={originalMeshInstance:h,originalMaterials:g.meshOriginalMaterials,threeMaterials:null},w}function o(h,f){let d=h.mesh,m=d.LineCount();if(m===0)return null;let v=[];for(let S=0;S<m;S++)v.push(S);v.sort((S,_)=>{let M=d.GetLine(S),A=d.GetLine(_);return M.mat-A.mat});let p=new Yt,g=new Xh(p,bl.Line,f),x=[],y=0;for(let S=0;S<v.length;S++){let _=d.GetLine(v[S]),M=_.GetVertices();for(let A=0;A<M.length;A++){let w=M[A],T=d.GetVertex(w);x.push(T.x,T.y,T.z),A>0&&A<M.length-1&&x.push(T.x,T.y,T.z)}g.ProcessItem(y,_.mat),y+=_.SegmentCount()}g.Finalize(y),p.setAttribute("position",new Ye(x,3));let b=new Rs(p,g.meshThreeMaterials);return b.userData={originalMeshInstance:h,originalMaterials:g.meshOriginalMaterials,threeMaterials:null},b}function s(h,f,d){if(dl(f.mesh))return;let m=i(f,d);m!==null&&h.add(m);let v=o(f,d);v!==null&&h.add(v)}function a(h,f,d,m){let p=new fp(f,h).GetNodeItems();Iv(p.length,100,{runTask:(g,x,y)=>{for(let b=g;b<=x;b++){let S=p[b];s(S.threeNode,S.meshInstance,d)}y()},onReady:()=>{m.OnModelLoaded(h)}})}let c=new hp(r),l=new dp(n,c,e,t),u=new an;a(u,n,l,c)}var wl=class{constructor(){this.importer=new Bh,this.inProgress=!1,this.defaultMaterials=null,this.objectUrls=null,this.hasHighpDriverIssue=wv()}InProgress(){return this.inProgress}LoadModel(e,t,r){this.inProgress||(this.inProgress=!0,this.RevokeObjectUrls(),this.importer.ImportFiles(e,t,{onLoadStart:()=>{r.onLoadStart()},onFileListProgress:(i,o)=>{r.onFileListProgress(i,o)},onFileLoadProgress:(i,o)=>{r.onFileLoadProgress(i,o)},onImportStart:()=>{r.onImportStart()},onSelectMainFile:(i,o)=>{r.onSelectMainFile?r.onSelectMainFile(i,o):o(0)},onImportSuccess:i=>{r.onVisualizationStart();let o=new jh;o.forceMediumpForMaterials=this.hasHighpDriverIssue;let s=new qh;i0(i.model,o,s,{onTextureLoaded:()=>{r.onTextureLoaded()},onModelLoaded:a=>{if(this.defaultMaterials=s.defaultMaterials,this.objectUrls=s.objectUrls,i.upVector===Mt.X){let c=new Xn().setFromAxisAngle(new he(0,0,1),Math.PI/2);a.quaternion.multiply(c)}else if(i.upVector===Mt.Z){let c=new Xn().setFromAxisAngle(new he(1,0,0),-Math.PI/2);a.quaternion.multiply(c)}r.onModelFinished(i,a),this.inProgress=!1}})},onImportError:i=>{r.onLoadError(i),this.inProgress=!1}}))}GetImporter(){return this.importer}GetDefaultMaterials(){return this.defaultMaterials}ReplaceDefaultMaterialsColor(e,t){if(this.defaultMaterials!==null)for(let r of this.defaultMaterials)r.vertexColors||(r.userData.source===Bn.DefaultFace?r.color=Pr(e):r.userData.source===Bn.DefaultLine&&(r.color=Pr(t)))}RevokeObjectUrls(){if(this.objectUrls!==null){for(let e of this.objectUrls)Uv(e);this.objectUrls=null}}Destroy(){this.RevokeObjectUrls(),this.importer=null}};function Kh(n,e){let t=new Date;t.setTime(t.getTime()+365*24*60*60*1e3),document.cookie=n+"="+e+"; expires="+t.toUTCString()+";"}function Yh(n,e){let r=decodeURIComponent(document.cookie).split(";");for(let i=0;i<r.length;i++){let o=r[i].trim();if(o.startsWith(n+"="))return o.substring(n.length+1)}return e}function Sl(n,e){let t=Yh(n,null);return t===null?e:t==="true"}function Bs(n,e){Kh(n,e?"true":"false")}function pp(n,e){let t=Yh(n,null);return t===null?e:parseInt(t,10)}function mp(n,e){Kh(n,e.toString())}function o0(n,e){let t=Yh(n,null);return t===null?e:bn.StringToRGBColor(t)}function RM(n,e){let t=Yh(n,null);return t===null?e:bn.StringToRGBAColor(t)}function s0(n,e){Kh(n,bn.RGBColorToString(e))}function PM(n,e){Kh(n,bn.RGBAColorToString(e))}function DM(n){Bs("ov_tour_completed",n)}function FM(){return Sl("ov_tour_completed",!1)}var Ti={Light:1,Dark:2},Mc=class{constructor(e){this.themeId=e,this.environmentMapName="fishermans_bastion",this.backgroundIsEnvMap=!1,this.themeId===Ti.Light?(this.backgroundColor=new di(255,255,255,255),this.defaultLineColor=new ft(100,100,100),this.defaultColor=new ft(200,200,200)):this.themeId===Ti.Dark&&(this.backgroundColor=new di(42,43,46,255),this.defaultLineColor=new ft(100,100,100),this.defaultColor=new ft(200,200,200)),this.edgeSettings=new wa(!1,new ft(0,0,0),1)}LoadFromCookies(){this.themeId=pp("ov_theme_id",NM()),this.environmentMapName=Yh("ov_environment_map","fishermans_bastion"),this.backgroundIsEnvMap=Sl("ov_background_is_envmap",!1),this.backgroundColor=RM("ov_background_color",new di(255,255,255,255)),this.defaultLineColor=o0("ov_default_line_color",new ft(100,100,100)),this.defaultColor=o0("ov_default_color",new ft(200,200,200)),this.edgeSettings.showEdges=Sl("ov_show_edges",!1),this.edgeSettings.edgeColor=o0("ov_edge_color",new ft(0,0,0)),this.edgeSettings.edgeThreshold=pp("ov_edge_threshold",1)}SaveToCookies(){mp("ov_theme_id",this.themeId),Kh("ov_environment_map",this.environmentMapName),Bs("ov_background_is_envmap",this.backgroundIsEnvMap),PM("ov_background_color",this.backgroundColor),s0("ov_default_line_color",this.defaultLineColor),s0("ov_default_color",this.defaultColor),Bs("ov_show_edges",this.edgeSettings.showEdges),s0("ov_edge_color",this.edgeSettings.edgeColor),mp("ov_edge_threshold",this.edgeSettings.edgeThreshold)}},a0=class{constructor(){this.navigationMode=zo.FixedUpVector,this.projectionMode=nr.Perspective}LoadFromCookies(){this.navigationMode=pp("ov_navigation_mode",zo.FixedUpVector),this.projectionMode=pp("ov_projection_mode",nr.Perspective)}SaveToCookies(){mp("ov_navigation_mode",this.navigationMode),mp("ov_projection_mode",this.projectionMode)}};function pw(n,e){return n.length>0?n:e}function LM(n){return pw(n,be("No Name"))}function OM(n,e){let t=n.length>0?n:e;return pw(t,be("No Name"))}function kM(n){return pw(n,be("No Name"))}function NM(){return window.matchMedia("(prefers-color-scheme: dark)").matches?Ti.Dark:Ti.Light}function mw(){return window.matchMedia("(hover: hover)").matches}function UM(){return window.matchMedia("(max-width: 800px)").matches}function l0(n,e){function t(i,o){let s=window.innerWidth,a=i.getBoundingClientRect(),c=i.offsetWidth,l=i.offsetHeight,u=o.offsetWidth,h=10,f=a.left+c/2-u/2;return f+u>s-h&&(f=s-u-h),f<h&&(f=h),f=Math.max(f,0),{left:f,top:a.top+l+h}}if(!mw())return;let r=null;n.addEventListener("mouseover",()=>{r=Fe(document.body,"ov_tooltip",e);let i=t(n,r);r.style.left=i.left+"px",r.style.top=i.top+"px"}),n.addEventListener("mouseout",()=>{r.remove()})}function gp(n,e){let t=mr("ov_svg_icon");return e&&t.classList.add(e),In(t,"i","icon icon-"+n),t}function ri(n,e,t){let r=gp(e,t);return n.appendChild(r),r}function Aa(n,e){let t=n.firstChild;t.className="icon icon-"+e}function c0(n){let e="#"+pi(n),t=new ft(Math.max(0,n.r-50),Math.max(0,n.g-50),Math.max(0,n.b-50)),r="#"+pi(t),i=mr("ov_color_circle");return i.style.background=e,i.style.border="1px solid "+r,i}function BM(n){return n.r*.299+n.g*.587+n.b*.114>186}function zM(n,e){async function t(o,s){let a=o.createReader();return new Promise((c,l)=>{a.readEntries(async u=>{for(let h of u)h.isFile?s.push(h):h.isDirectory&&await t(h,s);c()},u=>{l(u)})})}async function r(o,s){let a=[];for(let l of o)l.isFile?a.push(l):l.isDirectory&&await t(l,a);let c=await Promise.all(a.map(l=>new Promise((u,h)=>{l.file(f=>{u(f)},f=>{h(f)})})));s(c)}let i=null;if(DataTransferItem&&(DataTransferItem.prototype.getAsEntry?i=DataTransferItem.prototype.getAsEntry:DataTransferItem.prototype.webkitGetAsEntry&&(i=DataTransferItem.prototype.webkitGetAsEntry)),i!==null){let o=[];for(let s of n.items){let a=i.call(s);a!==null&&o.push(a)}r(o,s=>{e(s)})}else e(n.files)}function vp(n,e,t,r,i){let o=In(n,"label");o.setAttribute("for",e);let s=In(o,"input","ov_checkbox");return s.setAttribute("type","checkbox"),s.setAttribute("id",e),s.checked=r,In(o,"span",null,t),i&&s.addEventListener("change",i),s}function GM(n,e,t){let r=In(n,"input","ov_slider");return r.setAttribute("type","range"),r.setAttribute("min",e.toString()),r.setAttribute("max",t.toString()),r}function VM(n,e){function t(a,c){c?a.classList.add("on"):a.classList.remove("on")}let r=!1,i=null,o="ov_toggle";e&&(o+=" "+e);let s=Fe(n,o);return Fe(s,"ov_toggle_slider"),s.addEventListener("click",()=>{r=!r,t(s,r),i&&i()}),{element:s,GetStatus:()=>r,SetStatus:a=>{r=a,t(s,r)},OnChange:a=>{i=a}}}var yp=null;function gw(){yp!==null&&(yp.Close(),yp=null)}function u3(){yp=null}function h3(n){gw(),yp=n}var xp=class{constructor(){this.modalDiv=mr("ov_modal"),this.modalDiv.addEventListener("mousemove",e=>{e.stopPropagation()}),this.overlayDiv=null,this.resizeHandler=null,this.positionCalculator=null,this.closeHandler=null,this.isOpen=!1,this.closeable=!0}GetContentDiv(){return this.modalDiv}SetCloseable(e){this.closeable=e}SetPositionCalculator(e){this.positionCalculator=e}SetCloseHandler(e){this.closeHandler=e}Open(){this.isOpen||(h3(this),this.overlayDiv=Fe(document.body,"ov_modal_overlay"),document.body.appendChild(this.modalDiv),this.resizeHandler=this.Resize.bind(this),window.addEventListener("resize",this.resizeHandler),this.closeable&&(this.overlayDiv.addEventListener("click",e=>{e.preventDefault(),this.Close()}),this.overlayDiv.addEventListener("mousemove",e=>{e.stopPropagation()}),this.overlayDiv.addEventListener("contextmenu",e=>{e.preventDefault(),this.Close()})),this.isOpen=!0,this.Resize())}Close(){this.isOpen&&(u3(),window.removeEventListener("resize",this.resizeHandler),this.closeHandler!==null&&this.closeHandler(),this.modalDiv.remove(),this.overlayDiv.remove(),this.overlayDiv=null,this.resizeHandler=null,this.isOpen=!1)}Resize(){let e=window.innerWidth,t=window.innerHeight,r=(e-this.modalDiv.offsetWidth)/2,i=(t-this.modalDiv.offsetHeight)/3;if(this.positionCalculator!==null){let o=this.positionCalculator();r=o.x,i=o.y}this.modalDiv.style.left=r+"px",this.modalDiv.style.top=i+"px"}},Zh=class extends xp{constructor(){super(),this.SetCloseable(!1),this.textDiv=null}Init(e){let t=this.GetContentDiv();t.classList.add("ov_progress"),Fe(t,"ov_progress_img",'<svg><use href="assets/images/3dviewer_net_logo.svg#logo"></use></svg>'),this.textDiv=Fe(t,"ov_progress_text"),this.SetText(e)}SetText(e){this.textDiv.innerHTML=e}},zs=class extends xp{constructor(){super()}Init(e,t){function r(l,u){let h=Fe(u,"ov_button ov_dialog_button",l.name);l.subClass&&h.classList.add(l.subClass),h.addEventListener("click",()=>{l.onClick()})}let i=this.GetContentDiv();i.classList.add("ov_dialog");let o=Fe(i,"ov_dialog_title",e);o.style.color="#CCCCCC";let s=Fe(i,"ov_dialog_content"),a=Fe(i,"ov_dialog_buttons"),c=Fe(a,"ov_dialog_buttons_inner");for(let l=0;l<t.length;l++)r(t[l],c);return s}},bp=class extends xp{constructor(){super()}Init(e){let t=this.GetContentDiv();return t.classList.add("ov_popup"),this.SetPositionCalculator(e),t}},u0=class extends bp{constructor(){super(),this.listDiv=null}Init(e){let t=super.Init(e);return this.listDiv=Fe(t,"ov_popup_list ov_thin_scrollbar"),t}AddListItem(e,t){let r=Fe(this.listDiv,"ov_popup_list_item");if(e.icon&&ri(r,e.icon,"left_inline"),e.color){let i=Fe(r,"ov_popup_list_item_icon"),o=c0(e.color);i.appendChild(o)}Fe(r,"ov_popup_list_item_name",e.name),r.addEventListener("click",t.onClick),mw()&&t.onHoverStart&&t.onHoverStop&&(r.addEventListener("mouseover",()=>{t.onHoverStart()}),r.addEventListener("mouseout",()=>{t.onHoverStop()}))}};function Ca(n,e,t){let r=new zs,i=r.Init(n,[{name:be("OK"),onClick(){r.Close()}}]);return Fe(i,"ov_dialog_message",e),t!==null&&Fe(i,"ov_dialog_submessage",t),r.Open(),r}function h0(n,e){if(n.length===0)return null;let t=new u0;t.Init(()=>e.calculatePosition(t.GetContentDiv()));for(let r=0;r<n.length;r++){let i=n[r];t.AddListItem(i,{onHoverStart:function(){e.onHoverStart&&e.onHoverStart(r)},onHoverStop:function(){e.onHoverStop&&e.onHoverStop(r)},onClick:function(){t.Close(),e.onClick(r)}})}return t.Open(),t}function HM(n,e){let t=n.getBoundingClientRect();return{x:t.left-e.offsetWidth,y:t.top}}function WM(n,e){let t=n.getBoundingClientRect();return{x:t.left+n.offsetWidth,y:t.top+n.offsetHeight-e.offsetHeight}}function jM(n,e){let t=window.innerWidth,r=window.innerHeight,i=n.x,o=n.y,s=i+e.offsetWidth,a=o+e.offsetHeight;return s>t&&(i=i-(s-t)),a>r&&(o=o-(a-r)),{x:i,y:o}}var Jh=class{constructor(){this.modelLoader=new wl,this.modalDialog=null}LoadModel(e,t,r){if(this.modelLoader.InProgress())return;let i=null;this.modelLoader.LoadModel(e,t,{onLoadStart:()=>{this.CloseDialogIfOpen(),r.onStart(),i=new Zh,i.Init(be("Loading Model")),i.Open()},onFileListProgress:(o,s)=>{},onFileLoadProgress:(o,s)=>{},onSelectMainFile:(o,s)=>{i.Close(),this.modalDialog=this.ShowFileSelectorDialog(o,a=>{i.Open(),s(a)})},onImportStart:()=>{i.SetText(be("Importing Model"))},onVisualizationStart:()=>{i.SetText(be("Visualizing Model"))},onModelFinished:(o,s)=>{i.Close(),r.onFinish(o,s)},onTextureLoaded:()=>{r.onRender()},onLoadError:o=>{i.Close(),r.onError(o),this.modalDialog=this.ShowErrorDialog(o)}})}GetModelLoader(){return this.modelLoader}GetImporter(){return this.modelLoader.GetImporter()}ShowErrorDialog(e){return e.code===Hr.NoImportableFile?Ca(be("Something went wrong"),be("No importable file found."),null):e.code===Hr.FailedToLoadFile?Ca(be("Something went wrong"),be("Failed to load file for import."),be("The remote server refused to fulfill the request. Check if the url is correct, and make sure that CORS requests are allowed on the remote server.")):e.code===Hr.ImportFailed?Ca(be("Something went wrong"),be("Failed to import model."),e.message):Ca(be("Something went wrong"),be("Unknown error."),null)}ShowFileSelectorDialog(e,t){let r=new zs,i=r.Init(be("Select Model"),[{name:be("Cancel"),subClass:"outline",onClick(){r.Close()}}]);r.SetCloseHandler(()=>{t(null)});let o=be("Multiple importable models found. Select the model you would like to import from the list below.");Fe(i,"ov_dialog_message",o);let s=Fe(i,"ov_dialog_section"),a=Fe(s,"ov_dialog_import_file_list ov_thin_scrollbar");for(let c=0;c<e.length;c++){let l=e[c],u=Fe(a,"ov_dialog_file_link");ri(u,"meshes","ov_file_link_img"),Fe(u,"ov_dialog_file_link_text",l),u.addEventListener("click",()=>{r.SetCloseHandler(null),r.Close(),t(c)})}return r.Open(),r}CloseDialogIfOpen(){this.modalDialog!==null&&(this.modalDialog.Close(),this.modalDialog=null)}};var f0=class{constructor(e){this.parameters=e,this.viewer=new Us,this.hashHandler=new Wh,this.modelLoaderUI=new Jh}Load(){let e=In(this.parameters.viewerDiv,"canvas");if(this.viewer.Init(e),this.Resize(),this.hashHandler.HasHash()){let t=this.hashHandler.GetModelFilesFromHash();if(t===null)return;hl(t);let r="fishermans_bastion",i=!1,o=this.hashHandler.GetEnvironmentSettingsFromHash();o!==null&&(r=o.environmentMapName,i=o.backgroundIsEnvMap);let s="assets/envmaps/"+r+"/",a=[s+"posx.jpg",s+"negx.jpg",s+"posy.jpg",s+"negy.jpg",s+"posz.jpg",s+"negz.jpg"],c=new as(a,i);this.viewer.SetEnvironmentMapSettings(c);let l=this.hashHandler.GetProjectionModeFromHash();l!==null&&this.viewer.SetProjectionMode(l);let u=this.hashHandler.GetBackgroundFromHash();u!==null&&this.viewer.SetBackgroundColor(u);let h=this.hashHandler.GetEdgeSettingsFromHash();h!==null&&this.viewer.SetEdgeSettings(h);let f=new Vi,d=this.hashHandler.GetDefaultColorFromHash();d!==null&&(f.defaultColor=d);let m=this.hashHandler.GetDefaultLineColorFromHash();m!==null&&(f.defaultLineColor=m);let v=fl(t);this.modelLoaderUI.LoadModel(v,f,{onStart:()=>{},onFinish:(x,y)=>{this.OnModelFinished(y)},onRender:()=>{this.viewer.Render()},onError:x=>{}});let p=lh(t),g=this.parameters.websiteLinkDiv.getAttribute("href")+"#"+p;this.parameters.websiteLinkDiv.setAttribute("href",g)}window.addEventListener("resize",()=>{this.Resize()})}Resize(){let e=window.innerWidth,t=window.innerHeight;this.viewer.Resize(e,t)}OnModelFinished(e){this.viewer.SetMainObject(e);let t=this.viewer.GetBoundingSphere(i=>!0);this.viewer.AdjustClippingPlanesToSphere(t);let r=this.hashHandler.GetCameraFromHash();r!==null?this.viewer.SetCamera(r):(this.viewer.SetUpVector(Mt.Y,!1),this.viewer.FitSphereToWindow(t,!1))}};var d0=null;function qM(n){d0=n}function ii(n,e,t){d0?.(n,e,t)}var Qh=class{constructor(e){this.parentDiv=e,this.panelDiv=Fe(e),$t(this.panelDiv,!1),this.visible=!1}GetName(){return null}GetIcon(){return null}IsVisible(){return this.visible}Show(e){this.visible!==e&&(this.visible=e,$t(this.panelDiv,this.visible))}Resize(){}Clear(){}},$h=class{constructor(e){this.parentDiv=e,this.menuDiv=Fe(e,"ov_panel_set_menu"),this.contentDiv=Fe(e,"ov_panel_set_content ov_thin_scrollbar"),this.panels=[],this.panelButtons=[],this.panelsVisible=!0,this.panelsPrevWidth=null,this.callbacks=null}Init(e){this.callbacks=e}GetContentDiv(){return this.contentDiv}AddPanel(e){this.panels.push(e);let t=ri(this.menuDiv,e.GetIcon(),"ov_panel_set_menu_button");t.setAttribute("alt",e.GetName()),t.setAttribute("title",e.GetName()),this.panelButtons.push(t),t.addEventListener("click",()=>{e===this.GetVisiblePanel()?this.ShowPanels(!1):(this.ShowPanels(!0),this.ShowPanel(e))})}IsPanelsVisible(){return this.panelsVisible}ShowPanels(e){if(this.IsParentVisible()&&this.panelsVisible!==e){if(this.panelsVisible=e,this.panelsVisible)$t(this.contentDiv,!0),uu(this.parentDiv,this.menuDiv.offsetWidth+this.panelsPrevWidth);else{for(let t of this.panelButtons)t.classList.remove("selected");for(let t of this.panels)t.Show(!1);this.panelsPrevWidth=this.contentDiv.offsetWidth,uu(this.parentDiv,this.menuDiv.offsetWidth),$t(this.contentDiv,!1)}this.callbacks.onShowHidePanels(this.panelsVisible),this.callbacks.onResizeRequested()}}ShowPanel(e){if(e===this.GetVisiblePanel())return;let t=this.GetPanelButton(e);for(let r of this.panelButtons)r!==t&&r.classList.remove("selected");t.classList.add("selected");for(let r of this.panels)r!==e&&r.Show(!1);e.Show(!0),e.Resize()}GetVisiblePanel(){if(!this.panelsVisible)return null;for(let e of this.panels)if(e.IsVisible())return e;return null}SetPanelIcon(e,t){let r=this.GetPanelButton(e);Aa(r,t)}GetPanelButton(e){let t=this.panels.indexOf(e);return this.panelButtons[t]}Resize(){let e=this.parentDiv.offsetHeight;if(Ss(this.menuDiv,e),Ss(this.contentDiv,e),this.panelsVisible)for(let t of this.panels)t.IsVisible()&&t.Resize()}IsParentVisible(){return cu(this.parentDiv)}Clear(){for(let e of this.panels)e.Clear()}};function XM(n){n.scrollIntoView({behavior:"smooth",block:"nearest"})}var Ia=class{constructor(e){this.imagePath=e,this.mainElement=gp(this.imagePath,"ov_tree_item_button"),this.mainElement.setAttribute("src",this.imagePath)}SetImage(e){this.imagePath=e,Aa(this.mainElement,this.imagePath)}OnClick(e){this.mainElement.addEventListener("click",t=>{t.stopPropagation(),e(t)})}GetDomElement(){return this.mainElement}},p0=class{constructor(e,t){if(this.name=e,this.parent=null,this.mainElement=mr("ov_tree_item"),this.mainElement.setAttribute("title",this.name),this.nameElement=Fe(this.mainElement,"ov_tree_item_name",this.name),bs(t)){let r=gp(t,"ov_tree_item_icon");ia(r,this.nameElement)}}OnClick(e){this.mainElement.classList.add("clickable"),this.mainElement.style.cursor="pointer",this.mainElement.addEventListener("click",e)}SetParent(e){this.parent=e}AddDomElements(e){e.appendChild(this.mainElement)}},Ec=class extends p0{constructor(e,t){super(e,t),this.selected=!1}SetSelected(e){if(this.selected=e,this.selected){this.mainElement.classList.add("selected");let t=this.parent;if(t===null)XM(this.mainElement);else for(;t!==null;)t.ShowChildren(!0),XM(this.mainElement),t=t.parent}else this.mainElement.classList.remove("selected")}},ef=class extends Ec{constructor(e,t){super(e,t),this.buttonsDiv=mr("ov_tree_item_button_container"),ia(this.buttonsDiv,this.nameElement)}AppendButton(e){this.buttonsDiv.appendChild(e.GetDomElement())}},tf=class n extends p0{constructor(e,t){super(e,t),this.children=[],this.isVisible=!0,this.isChildrenVisible=!1,this.childrenDiv=null,this.openButtonIcon="arrow_down",this.closeButtonIcon="arrow_right",this.openCloseButton=gp(this.openButtonIcon,"ov_tree_item_icon"),ia(this.openCloseButton,this.nameElement)}AddChild(e){this.CreateChildrenDiv(),this.children.push(e),e.SetParent(this),e.AddDomElements(this.childrenDiv)}ExpandAll(e){for(let t of this.children)t instanceof n&&(t.ShowChildren(e),t.ExpandAll(e))}Show(e){this.isVisible=e,this.childrenDiv!==null&&(this.isVisible?($t(this.mainElement,!0),this.childrenDiv.classList.add("ov_tree_view_children")):($t(this.mainElement,!1),this.childrenDiv.classList.remove("ov_tree_view_children")))}ShowChildren(e){this.isChildrenVisible=e,this.childrenDiv!==null&&(e?(Aa(this.openCloseButton,this.openButtonIcon),$t(this.childrenDiv,!0)):(Aa(this.openCloseButton,this.closeButtonIcon),$t(this.childrenDiv,!1)))}CreateChildrenDiv(){return this.childrenDiv===null&&(this.childrenDiv=mr("ov_tree_view_children"),ng(this.childrenDiv,this.mainElement),this.Show(this.isVisible),this.ShowChildren(this.isChildrenVisible),this.OnClick(e=>{this.isChildrenVisible=!this.isChildrenVisible,this.ShowChildren(this.isChildrenVisible)})),this.childrenDiv}},m0=class extends tf{constructor(e,t){super(e,t),this.buttonsDiv=mr("ov_tree_item_button_container"),ia(this.buttonsDiv,this.nameElement)}AppendButton(e){this.buttonsDiv.appendChild(e.GetDomElement())}},g0=class{constructor(e){this.mainDiv=Fe(e,"ov_tree_view"),this.children=[]}AddClass(e){this.mainDiv.classList.add(e)}AddChild(e){e.AddDomElements(this.mainDiv),this.children.push(e)}Clear(){kr(this.mainDiv),this.children=[]}};var v0=class{constructor(e){this.parentDiv=e,this.callbacks=null,this.popup=null,this.button=Fe(this.parentDiv,"ov_panel_button"),this.buttonText=Fe(this.button,"ov_panel_button_text"),ri(this.button,"arrow_right","ov_panel_button_icon"),this.button.addEventListener("click",()=>{this.OnButtonClick()})}Init(e){this.callbacks=e}OnButtonClick(){}Clear(){this.popup!==null&&(this.popup.Close(),this.popup=null)}},nf=class extends Qh{constructor(e){super(e),this.callbacks=null,this.titleDiv=Fe(this.panelDiv,"ov_navigator_tree_title"),this.treeDiv=Fe(this.panelDiv,"ov_navigator_tree_panel ov_thin_scrollbar"),this.treeView=new g0(this.treeDiv);let t=this.GetName();this.titleDiv.innerHTML=t,this.titleDiv.setAttribute("title",t)}Clear(){this.treeView.Clear()}GetName(){return null}Init(e){this.callbacks=e}Fill(e){}};var y0=class extends nf{constructor(e){super(e)}GetName(){return be("Files")}GetIcon(){return"files"}Resize(){let e=_s(this.titleDiv),t=this.parentDiv.offsetHeight;Ss(this.treeDiv,t-e)}Clear(){super.Clear()}Fill(e){super.Fill(e);let t=e.usedFiles,r=e.missingFiles;if(r.length>0){let i=new tf(be("Missing Files"),null);i.ShowChildren(!0),this.treeView.AddChild(i);for(let s=0;s<r.length;s++){let a=r[s],c=new ef(a),l=new Ia("open");l.OnClick(()=>{this.callbacks.onFileBrowseButtonClicked()}),c.AppendButton(l),i.AddChild(c)}let o=new tf(be("Available Files"),null);o.ShowChildren(!0),this.treeView.AddChild(o);for(let s=0;s<t.length;s++){let a=t[s],c=new Ec(a);o.AddChild(c)}}else for(let i=0;i<t.length;i++){let o=t[i],s=new Ec(o);this.treeView.AddChild(s)}}};var Hi={No:0,Parents:1,Children:2,All:3};var Ac=class extends ef{constructor(e,t,r,i){super(e,t),this.meshInstanceId=r,this.visible=!0,this.fitToWindowButton=new Ia("fit"),this.fitToWindowButton.OnClick(()=>{i.onFitToWindow(this.meshInstanceId)}),this.AppendButton(this.fitToWindowButton),this.showHideButton=new Ia("visible"),this.showHideButton.OnClick(()=>{i.onShowHide(this.meshInstanceId)}),this.AppendButton(this.showHideButton),this.OnClick(()=>{i.onSelected(this.meshInstanceId)})}GetMeshInstanceId(){return this.meshInstanceId}IsVisible(){return this.visible}SetVisible(e,t){if(this.visible!==e&&(this.visible=e,this.visible?this.showHideButton.SetImage("visible"):this.showHideButton.SetImage("hidden"),t===Hi.Parents&&this.parent instanceof rf)){let r=this.parent.CalculateIsVisible();this.parent.SetVisible(r,Hi.Parents)}}},rf=class n extends m0{constructor(e,t,r){super(e,null),this.nodeId=t,this.callbacks=r,this.visible=!0,this.fitToWindowButton=new Ia("fit"),this.fitToWindowButton.OnClick(()=>{this.callbacks.onFitToWindow(t)}),this.AppendButton(this.fitToWindowButton),this.showHideButton=new Ia("visible"),this.showHideButton.OnClick(()=>{this.callbacks.onShowHide(t)}),this.AppendButton(this.showHideButton)}GetNodeId(){return this.nodeId}IsVisible(){return this.visible}CalculateIsVisible(){let e=!1;for(let t of this.children)if((t instanceof n||t instanceof Ac)&&t.IsVisible()){e=!0;break}return e}SetVisible(e,t){if(this.visible!==e){if(this.visible=e,this.visible?this.showHideButton.SetImage("visible"):this.showHideButton.SetImage("hidden"),bs(this.callbacks.onVisibilityChanged)&&this.callbacks.onVisibilityChanged(this.visible),t===Hi.Children||t===Hi.All)for(let r of this.children)(r instanceof n||r instanceof Ac)&&r.SetVisible(this.visible,Hi.Children);if((t===Hi.Parents||t===Hi.All)&&this.parent instanceof n){let r=this.parent.CalculateIsVisible();this.parent.SetVisible(r,Hi.Parents)}}}EnumerateMeshItems(e){for(let t of this.children)t instanceof n?t.EnumerateMeshItems(e):t instanceof Ac&&e(t)}};var Wi={Simple:0,FlatList:1,TreeView:2},vw=class extends v0{constructor(e){super(e),this.materialInfoArray=null}Update(e){if(this.materialInfoArray=e,this.materialInfoArray===null)return;let t=Ga("Materials ({0})",this.materialInfoArray.length);this.buttonText.innerHTML=t}OnButtonClick(){if(this.materialInfoArray===null)return;let e=[];for(let t=0;t<this.materialInfoArray.length;t++){let r=this.materialInfoArray[t];e.push({name:kM(r.name),color:r.color})}e.length!==0&&(this.popup=h0(e,{calculatePosition:t=>WM(this.button,t),onClick:t=>{let r=this.materialInfoArray[t];this.callbacks.onMaterialSelected(r.index)}}))}},x0=class extends nf{constructor(e){super(e),this.callbacks=null,this.nodeIdToItem=new Map,this.meshInstanceIdToItem=new Map,this.rootItem=null,this.mode=Wi.Simple,this.buttons=null,this.treeView.AddClass("tight"),this.titleButtonsDiv=Fe(this.titleDiv,"ov_navigator_tree_title_buttons"),this.buttonsDiv=mr("ov_navigator_buttons"),ia(this.buttonsDiv,this.treeDiv),this.popupDiv=Fe(this.panelDiv,"ov_navigator_info_panel"),this.materialsButton=new vw(this.popupDiv)}GetName(){return be("Meshes")}GetIcon(){return"meshes"}Resize(){let e=_s(this.titleDiv),t=0;cu(this.buttonsDiv)&&(t=_s(this.buttonsDiv));let r=_s(this.popupDiv),i=this.parentDiv.offsetHeight;Ss(this.treeDiv,i-e-t-r)}Clear(){this.ClearMeshTree(),kr(this.titleButtonsDiv),kr(this.buttonsDiv),this.buttons=null}ClearMeshTree(){super.Clear(),this.materialsButton.Clear(),this.nodeIdToItem=new Map,this.meshInstanceIdToItem=new Map,this.rootItem=null}Init(e){super.Init(e),this.materialsButton.Init({onMeshHover:t=>{this.callbacks.onMeshTemporarySelected(t)},onMeshSelected:t=>{this.callbacks.onMeshSelected(t)},onMaterialSelected:t=>{this.callbacks.onMaterialSelected(t)}})}Fill(e){super.Fill(e);let t=e.model.GetRootNode(),r=!1;for(let i of t.GetChildNodes())if(i.ChildNodeCount()>0||i.MeshIndexCount()>1){r=!0;break}this.mode===Wi.Simple&&r?this.mode=Wi.TreeView:this.mode!==Wi.Simple&&!r&&(this.mode=Wi.Simple),this.FillButtons(e),this.mode===Wi.Simple?($t(this.buttonsDiv,!1),this.titleDiv.classList.add("withbuttons"),this.titleDiv.classList.remove("nomargin")):($t(this.buttonsDiv,!0),this.titleDiv.classList.remove("withbuttons"),this.titleDiv.classList.add("nomargin")),this.FillMeshTree(e.model),this.Resize()}FillButtons(e){function t(o,s,a,c){s.div=Fe(o,"ov_navigator_button"),s.div.setAttribute("alt",s.name),s.div.setAttribute("title",s.name),a&&s.div.classList.add(a),s.iconDiv=ri(s.div,s.icon),s.div.addEventListener("click",()=>{c()})}function r(o,s){let a=s===Wi.TreeView;a?(o.flatList.iconDiv.classList.remove("selected"),o.treeView.iconDiv.classList.add("selected")):(o.flatList.iconDiv.classList.add("selected"),o.treeView.iconDiv.classList.remove("selected")),$t(o.separator,a),$t(o.expandAll.div,a),$t(o.collapseAll.div,a)}function i(o,s){let a=[];o.EnumerateMeshItems(c=>(c.IsVisible()||a.push(c.GetMeshInstanceId()),!0)),o.ClearMeshTree(),o.FillMeshTree(s.model);for(let c of a)o.GetMeshItem(c).SetVisible(!1,Hi.Parents);r(o.buttons,o.mode),o.callbacks.onViewTypeChanged()}this.buttons={flatList:{name:be("Flat list"),icon:"flat_list",div:null,iconDiv:null},treeView:{name:be("Tree view"),icon:"tree_view",div:null,iconDiv:null},separator:null,expandAll:{name:be("Expand all"),icon:"expand",div:null,iconDiv:null},collapseAll:{name:be("Collapse all"),icon:"collapse",div:null,iconDiv:null},showHideMeshes:{name:be("Show/hide meshes"),icon:"visible",div:null,iconDiv:null},fitToWindow:{name:be("Fit meshes to window"),icon:"fit",div:null,iconDiv:null}},this.mode===Wi.Simple?(t(this.titleButtonsDiv,this.buttons.showHideMeshes,"right",()=>{let o=this.rootItem.GetNodeId();this.callbacks.onNodeShowHide(o)}),t(this.titleButtonsDiv,this.buttons.fitToWindow,"right",()=>{let o=this.rootItem.GetNodeId();this.callbacks.onNodeFitToWindow(o)})):(t(this.buttonsDiv,this.buttons.flatList,null,()=>{this.mode!==Wi.FlatList&&(this.mode=Wi.FlatList,i(this,e))}),t(this.buttonsDiv,this.buttons.treeView,null,()=>{this.mode!==Wi.TreeView&&(this.mode=Wi.TreeView,i(this,e))}),this.buttons.separator=Fe(this.buttonsDiv,"ov_navigator_buttons_separator"),t(this.buttonsDiv,this.buttons.expandAll,null,()=>{this.rootItem.ExpandAll(!0)}),t(this.buttonsDiv,this.buttons.collapseAll,null,()=>{this.rootItem.ExpandAll(!1)}),t(this.buttonsDiv,this.buttons.showHideMeshes,"right",()=>{let o=this.rootItem.GetNodeId();this.callbacks.onNodeShowHide(o)}),t(this.buttonsDiv,this.buttons.fitToWindow,"right",()=>{let o=this.rootItem.GetNodeId();this.callbacks.onNodeFitToWindow(o)}),r(this.buttons,this.mode))}FillMeshTree(e){function t(a,c,l,u,h,f){let d=OM(c.GetName(),l.GetName()),m=new ki(c.GetId(),u),v=f===Wi.TreeView?"tree_mesh":null,p=new Ac(d,v,m,{onShowHide:g=>{a.callbacks.onMeshShowHide(g)},onFitToWindow:g=>{a.callbacks.onMeshFitToWindow(g)},onSelected:g=>{a.callbacks.onMeshSelected(g)}});a.meshInstanceIdToItem.set(m.GetKey(),p),h.AddChild(p)}function r(a,c){let l=LM(c.GetName()),u=c.GetId(),h=new rf(l,u,{onShowHide:f=>{a.callbacks.onNodeShowHide(f)},onFitToWindow:f=>{a.callbacks.onNodeFitToWindow(f)}});return a.nodeIdToItem.set(u,h),h}function i(a,c){let l=c.GetId(),u=new rf(null,l,{onVisibilityChanged:h=>{h?Aa(a.buttons.showHideMeshes.iconDiv,"visible"):Aa(a.buttons.showHideMeshes.iconDiv,"hidden")}});return u.Show(!1),u.ShowChildren(!0),a.treeView.AddChild(u),a.nodeIdToItem.set(l,u),u}function o(a,c,l,u,h){let f=[];for(let d of l.GetChildNodes())if(h===Wi.TreeView)if(d.IsMeshNode())f.push(d);else{let m=r(a,d);u.AddChild(m),o(a,c,d,m,h)}else o(a,c,d,u,h);for(let d of f)o(a,c,d,u,h);for(let d of l.GetMeshIndices()){let m=c.GetMesh(d);t(a,l,m,d,u,h)}}let s=e.GetRootNode();this.rootItem=i(this,s),o(this,e,s,this.rootItem,this.mode)}UpdateMaterialList(e){this.materialsButton.Update(e)}GetNodeItem(e){return this.nodeIdToItem.get(e)}MeshItemCount(){return this.meshInstanceIdToItem.size}GetMeshItem(e){return this.meshInstanceIdToItem.get(e.GetKey())}EnumerateNodeItems(e){for(let t of this.nodeIdToItem.values())if(!e(t))break}EnumerateMeshItems(e){for(let t of this.meshInstanceIdToItem.values())if(!e(t))break}IsMeshVisible(e){return this.GetMeshItem(e).IsVisible()}HasHiddenMesh(){let e=!1;return this.EnumerateMeshItems(t=>t.IsVisible()?!0:(e=!0,!1)),e}ShowAllMeshes(e){this.EnumerateNodeItems(t=>(t.SetVisible(e,Hi.No),!0)),this.EnumerateMeshItems(t=>(t.SetVisible(e,Hi.No),!0))}ToggleNodeVisibility(e){let t=this.GetNodeItem(e);t.SetVisible(!t.IsVisible(),Hi.All)}ToggleMeshVisibility(e){let t=this.GetMeshItem(e);t.SetVisible(!t.IsVisible(),Hi.Parents)}IsMeshIsolated(e){let t=!0;return this.EnumerateMeshItems(r=>!r.GetMeshInstanceId().IsEqual(e)&&r.IsVisible()?(t=!1,!1):!0),t}IsolateMesh(e){this.ShowAllMeshes(!1),this.ToggleMeshVisibility(e)}};var Mi={Material:1,Mesh:2},of=class{constructor(e,t){this.type=e,this.materialIndex=null,this.meshInstanceId=null,this.type===Mi.Material?this.materialIndex=t:this.type===Mi.Mesh&&(this.meshInstanceId=t)}IsEqual(e){if(this.type!==e.type)return!1;if(this.type===Mi.Material)return this.materialIndex===e.materialIndex;if(this.type===Mi.Mesh)return this.meshInstanceId.IsEqual(e.meshInstanceId)}},b0=class{constructor(e){this.mainDiv=e,this.panelSet=new $h(e),this.callbacks=null,this.selection=null,this.tempSelectedMeshId=null,this.filesPanel=new y0(this.panelSet.GetContentDiv()),this.meshesPanel=new x0(this.panelSet.GetContentDiv()),this.panelSet.AddPanel(this.filesPanel),this.panelSet.AddPanel(this.meshesPanel),this.panelSet.ShowPanel(this.meshesPanel)}IsPanelsVisible(){return this.panelSet.IsPanelsVisible()}ShowPanels(e){this.panelSet.ShowPanels(e)}Init(e){this.callbacks=e,this.panelSet.Init({onResizeRequested:()=>{this.callbacks.onResizeRequested()},onShowHidePanels:t=>{this.callbacks.onShowHidePanels(t)}}),this.filesPanel.Init({onFileBrowseButtonClicked:()=>{this.callbacks.openFileBrowserDialog()}}),this.meshesPanel.Init({onMeshSelected:t=>{this.SetSelection(new of(Mi.Mesh,t))},onMeshShowHide:t=>{this.ToggleMeshVisibility(t)},onMeshFitToWindow:t=>{this.FitMeshToWindow(t)},onNodeShowHide:t=>{this.ToggleNodeVisibility(t)},onNodeFitToWindow:t=>{this.FitNodeToWindow(t)},onMaterialSelected:t=>{this.SetSelection(new of(Mi.Material,t))},onViewTypeChanged:()=>{this.SetSelection(null)}})}GetWidth(){return Fi(this.mainDiv)}SetWidth(e){hu(this.mainDiv,e)}Resize(e){ho(this.mainDiv,e),this.panelSet.Resize()}FillTree(e){this.filesPanel.Fill(e),e.missingFiles.length===0?this.panelSet.SetPanelIcon(this.filesPanel,"files"):this.panelSet.SetPanelIcon(this.filesPanel,"missing_files"),this.meshesPanel.Fill(e),this.OnSelectionChanged()}MeshItemCount(){return this.meshesPanel.MeshItemCount()}IsMeshVisible(e){return this.meshesPanel.IsMeshVisible(e)}HasHiddenMesh(){return this.meshesPanel.HasHiddenMesh()}ShowAllMeshes(e){this.meshesPanel.ShowAllMeshes(e),this.callbacks.onMeshVisibilityChanged()}ToggleNodeVisibility(e){this.meshesPanel.ToggleNodeVisibility(e),this.callbacks.onMeshVisibilityChanged()}ToggleMeshVisibility(e){this.meshesPanel.ToggleMeshVisibility(e),this.callbacks.onMeshVisibilityChanged()}IsMeshIsolated(e){return this.meshesPanel.IsMeshIsolated(e)}IsolateMesh(e){this.meshesPanel.IsolateMesh(e),this.callbacks.onMeshVisibilityChanged()}GetSelectedMeshId(){return this.tempSelectedMeshId!==null?this.tempSelectedMeshId:this.selection===null||this.selection.type!==Mi.Mesh?null:this.selection.meshInstanceId}SetSelection(e){function t(o,s,a){s.type===Mi.Material?(a&&o.panelSet.IsPanelsVisible()&&o.panelSet.ShowPanel(o.materialsPanel),o.materialsPanel.SelectMaterialItem(s.materialIndex,a)):s.type===Mi.Mesh&&(a&&o.panelSet.IsPanelsVisible()&&o.panelSet.ShowPanel(o.meshesPanel),o.meshesPanel.GetMeshItem(s.meshInstanceId).SetSelected(a))}function r(o,s){o.selection=s,o.OnSelectionChanged()}let i=this.selection;i!==null&&t(this,i,!1),r(this,e),this.tempSelectedMeshId=null,this.selection!==null&&(i!==null&&i.IsEqual(this.selection)?(t(this,this.selection,!1),r(this,null)):t(this,this.selection,!0)),this.callbacks.onMeshSelectionChanged()}OnSelectionChanged(){this.selection===null?this.callbacks.onSelectionCleared():this.selection.type===Mi.Material?this.callbacks.onMaterialSelected(this.selection.materialIndex):this.selection.type===Mi.Mesh&&this.callbacks.onMeshSelected(this.selection.meshInstanceId),this.UpdatePanels()}UpdatePanels(){let e=null,t=null;this.selection!==null&&(this.selection.type===Mi.Material?e=this.selection.materialIndex:this.selection.type===Mi.Mesh&&(t=this.selection.meshInstanceId));let r=this.callbacks.getMaterialsForMesh(t);this.meshesPanel.UpdateMaterialList(r)}FitNodeToWindow(e){let t=new Set;this.meshesPanel.GetNodeItem(e).EnumerateMeshItems(i=>{t.add(i.GetMeshInstanceId())}),this.callbacks.fitMeshesToWindow(t)}FitMeshToWindow(e){this.callbacks.fitMeshToWindow(e)}Clear(){this.panelSet.Clear(),this.selection=null}};function yw(n,e,t){let r=Ur(n,e),i=Ur(e,t),o=Ur(n,t),s=(r+i+o)/2,a=s*(s-r)*(s-i)*(s-o);return a<0?0:Math.sqrt(a)}function xw(n,e,t){return dd(n,Bo(e,t))/6}function wp(n){if(n instanceof Ls){let e=0;return n.EnumerateMeshInstances(t=>{e+=wp(t)}),e}else{let e=0;return n.EnumerateTriangleVertices((t,r,i)=>{e+=xw(t,r,i)}),e}}function w0(n){let e=0;return n.EnumerateTriangleVertices((t,r,i)=>{e+=yw(t,r,i)}),e}var sf=class extends Qh{constructor(e){super(e),this.callbacks=null,this.titleDiv=null,this.HasTitle()&&(this.titleDiv=Fe(this.panelDiv,"ov_sidebar_title"),Fe(this.titleDiv,"ov_sidebar_title_text",this.GetName()),this.titleDiv.setAttribute("title",this.GetName())),this.contentDiv=Fe(this.panelDiv,"ov_sidebar_content ov_thin_scrollbar")}GetName(){return null}HasTitle(){return!0}Clear(){kr(this.contentDiv)}Init(e){this.callbacks=e}};function f3(n){switch(n){case bi.Millimeter:return be("Millimeter");case bi.Centimeter:return be("Centimeter");case bi.Meter:return be("Meter");case bi.Inch:return be("Inch");case bi.Foot:return be("Foot")}return be("Unknown")}var S0=class extends sf{constructor(e){super(e)}GetName(){return be("Details")}GetIcon(){return"details"}AddObject3DProperties(e,t){this.Clear();let r=Fe(this.contentDiv,"ov_property_table"),i=Yd(t),o=gr(i.max,i.min),s=e.GetUnit();this.AddProperty(r,new Wt(Dt.Integer,be("Vertices"),t.VertexCount()));let a=t.LineSegmentCount();a>0&&this.AddProperty(r,new Wt(Dt.Integer,be("Lines"),a));let c=t.TriangleCount();if(c>0&&this.AddProperty(r,new Wt(Dt.Integer,be("Triangles"),c)),s!==bi.Unknown&&this.AddProperty(r,new Wt(Dt.Text,be("Unit"),f3(s))),this.AddProperty(r,new Wt(Dt.Number,be("Size X"),o.x)),this.AddProperty(r,new Wt(Dt.Number,be("Size Y"),o.y)),this.AddProperty(r,new Wt(Dt.Number,be("Size Z"),o.z)),this.AddCalculatedProperty(r,be("Volume"),()=>{if(!Zd(t))return null;let l=wp(t);return new Wt(Dt.Number,null,l)}),this.AddCalculatedProperty(r,be("Surface"),()=>{let l=w0(t);return new Wt(Dt.Number,null,l)}),t.PropertyGroupCount()>0){let l=Fe(this.contentDiv,"ov_property_table ov_property_table_custom");for(let u=0;u<t.PropertyGroupCount();u++){let h=t.GetPropertyGroup(u);this.AddPropertyGroup(l,h);for(let f=0;f<h.PropertyCount();f++){let d=h.GetProperty(f);this.AddPropertyInGroup(l,d)}}}this.Resize()}AddMaterialProperties(e){function t(s,a,c,l){if(l===null||l.name===null)return;let u=ur(l.name);s.AddProperty(a,new Wt(Dt.Text,c,u))}this.Clear();let r=Fe(this.contentDiv,"ov_property_table"),i=null;e.type===jn.Phong?i=be("Phong"):e.type===jn.Physical&&(i=be("Physical"));let o=e.source!==Bn.Model?be("Default"):be("Model");this.AddProperty(r,new Wt(Dt.Text,be("Source"),o)),this.AddProperty(r,new Wt(Dt.Text,be("Type"),i)),e.vertexColors?this.AddProperty(r,new Wt(Dt.Text,be("Color"),be("Vertex colors"))):(this.AddProperty(r,new Wt(Dt.Color,be("Color"),e.color)),e.type===jn.Phong&&(this.AddProperty(r,new Wt(Dt.Color,be("Ambient"),e.ambient)),this.AddProperty(r,new Wt(Dt.Color,be("Specular"),e.specular)))),e.type===jn.Physical&&(this.AddProperty(r,new Wt(Dt.Percent,be("Metalness"),e.metalness)),this.AddProperty(r,new Wt(Dt.Percent,be("Roughness"),e.roughness))),this.AddProperty(r,new Wt(Dt.Percent,be("Opacity"),e.opacity)),t(this,r,be("Diffuse Map"),e.diffuseMap),t(this,r,be("Bump Map"),e.bumpMap),t(this,r,be("Normal Map"),e.normalMap),t(this,r,be("Emissive Map"),e.emissiveMap),e.type===jn.Phong?t(this,r,be("Specular Map"),e.specularMap):e.type===jn.Physical&&t(this,r,be("Metallic Map"),e.metalnessMap),this.Resize()}AddPropertyGroup(e,t){Fe(e,"ov_property_table_row group",t.name).setAttribute("title",t.name)}AddProperty(e,t){let r=Fe(e,"ov_property_table_row"),i=Fe(r,"ov_property_table_cell ov_property_table_name",t.name+":"),o=Fe(r,"ov_property_table_cell ov_property_table_value");return i.setAttribute("title",t.name),this.DisplayPropertyValue(t,o),r}AddPropertyInGroup(e,t){this.AddProperty(e,t).classList.add("ingroup")}AddCalculatedProperty(e,t,r){let i=Fe(e,"ov_property_table_row"),o=Fe(i,"ov_property_table_cell ov_property_table_name",t+":"),s=Fe(i,"ov_property_table_cell ov_property_table_value");o.setAttribute("title",t),Fe(s,"ov_property_table_button",be("Calculate...")).addEventListener("click",()=>{kr(s),s.innerHTML=be("Please wait..."),pc(()=>{let c=r();c===null?s.innerHTML="-":this.DisplayPropertyValue(c,s)})})}DisplayPropertyValue(e,t){kr(t);let r=null,i=null;if(e.type===Dt.Text)Av(e.value)?(r='<a target="_blank" href="'+e.value+'">'+e.value+"</a>",i=e.value):r=xc(e);else if(e.type===Dt.Color){let o="#"+pi(e.value),s=c0(e.value);t.appendChild(s),In(t,"span",null,o)}else r=xc(e);r!==null&&(t.innerHTML=r,t.setAttribute("title",i!==null?i:r))}};var rE=od(KM(),1);var _w={};d_(_w,{AddCoord2D:()=>w_,AddCoord3D:()=>rg,AddDiv:()=>Fe,AddDomElement:()=>In,ArrayBufferToAsciiString:()=>KT,ArrayBufferToUtf8String:()=>_r,ArrayToCoord3D:()=>fo,ArrayToQuaternion:()=>fh,ArrayToRGBColor:()=>T_,AsciiStringToArrayBuffer:()=>YT,Base64DataURIToArrayBuffer:()=>bc,BezierTweenFunction:()=>CM,BigEps:()=>ud,BinaryReader:()=>wi,BinaryWriter:()=>ls,BoundingBoxCalculator3D:()=>dh,Box3D:()=>yc,CalculateSurfaceArea:()=>w0,CalculateTriangleNormal:()=>vc,CalculateVolume:()=>wp,Camera:()=>po,CameraIsEqual3D:()=>og,CameraValidator:()=>cp,CheckModel:()=>qT,ClearDomElement:()=>kr,ClickDetector:()=>lp,ColorComponentFromFloat:()=>vr,ColorComponentToFloat:()=>oa,ColorToMaterialConverter:()=>Ui,ConvertColorToThreeColor:()=>Pr,ConvertMeshToMeshBuffer:()=>af,ConvertModelToThreeObject:()=>i0,ConvertThreeColorToColor:()=>Gd,ConvertThreeGeometryToMesh:()=>Yo,Coord2D:()=>on,Coord3D:()=>$e,Coord4D:()=>Qo,CoordDistance2D:()=>Yl,CoordDistance3D:()=>Ur,CoordIsEqual2D:()=>Uo,CoordIsEqual3D:()=>Zi,CopyObjectAttributes:()=>ou,CreateDiv:()=>mr,CreateDomElement:()=>Ha,CreateHighlightMaterial:()=>wb,CreateHighlightMaterials:()=>_v,CreateModelUrlParameters:()=>lh,CreateObjectUrl:()=>gl,CreateObjectUrlWithMimeType:()=>kv,CreateOcctWorker:()=>vh,CreateUrlBuilder:()=>_b,CreateUrlParser:()=>Zo,CrossVector3D:()=>Bo,DegRad:()=>ws,Direction:()=>Mt,DisposeThreeObjects:()=>sh,DotVector2D:()=>fd,DotVector3D:()=>dd,EdgeSettings:()=>wa,EmbeddedViewer:()=>vf,EnvironmentSettings:()=>as,Eps:()=>b_,EscapeHtmlChars:()=>Ym,EventNotifier:()=>T0,ExportedFile:()=>Vn,Exporter:()=>M0,Exporter3dm:()=>lf,ExporterBase:()=>Wr,ExporterBim:()=>cf,ExporterGltf:()=>uf,ExporterModel:()=>hf,ExporterObj:()=>ff,ExporterOff:()=>df,ExporterPly:()=>pf,ExporterSettings:()=>Mp,ExporterStl:()=>mf,FLoc:()=>Ga,FaceMaterial:()=>pu,FileFormat:()=>er,FileSource:()=>Jo,FinalizeModel:()=>Lv,FlipMeshTrianglesOrientation:()=>Fv,FormatString:()=>Km,GenerateCone:()=>ww,GenerateCuboid:()=>JM,GenerateCylinder:()=>QM,GeneratePlatonicSolid:()=>eE,GenerateSphere:()=>$M,Generator:()=>_l,GeneratorHelper:()=>gf,GeneratorParams:()=>Ap,GetBoundingBox:()=>Yd,GetDefaultCamera:()=>Hh,GetDefaultMaterials:()=>Nv,GetDomElementClientCoordinates:()=>ra,GetDomElementExternalHeight:()=>eg,GetDomElementExternalWidth:()=>$m,GetDomElementInnerDimensions:()=>tg,GetDomElementOuterHeight:()=>_s,GetDomElementOuterWidth:()=>Fi,GetExternalLibPath:()=>Vy,GetFileExtension:()=>to,GetFileExtensionFromMimeType:()=>ml,GetFileName:()=>ur,GetIntegerFromStyle:()=>Or,GetLineSegmentsProjectedDistance:()=>Tv,GetShadingType:()=>Sv,GetShadingTypeOfObject:()=>dw,GetTetrahedronSignedVolume:()=>xw,GetTopology:()=>Mb,GetTriangleArea:()=>yw,HasHighpDriverIssue:()=>wv,HexStringToRGBAColor:()=>__,HexStringToRGBColor:()=>S_,ImportError:()=>xl,ImportErrorCode:()=>Hr,ImportResult:()=>sp,ImportSettings:()=>Vi,Importer:()=>Bh,Importer3dm:()=>yh,Importer3ds:()=>xh,ImporterBase:()=>Pn,ImporterBim:()=>Ch,ImporterFcstd:()=>Uh,ImporterFile:()=>mc,ImporterFileAccessor:()=>ap,ImporterFileList:()=>gc,ImporterGltf:()=>wh,ImporterIfc:()=>Sh,ImporterObj:()=>_h,ImporterOcct:()=>Eh,ImporterOff:()=>Th,ImporterPly:()=>Mh,ImporterStl:()=>Ah,ImporterThree3mf:()=>Lh,ImporterThreeAmf:()=>Oh,ImporterThreeBase:()=>is,ImporterThreeDae:()=>Fh,ImporterThreeFbx:()=>Dh,ImporterThreeSvg:()=>E0,ImporterThreeWrl:()=>Nh,Init3DViewerElements:()=>nE,Init3DViewerFromFileList:()=>tE,Init3DViewerFromUrlList:()=>Sw,InputFile:()=>uh,InputFilesFromFileObjects:()=>hh,InputFilesFromUrls:()=>fl,InsertDomElementAfter:()=>ng,InsertDomElementBefore:()=>ia,IntegerToHexString:()=>Ar,IntersectionMode:()=>or,IsDefined:()=>bs,IsDomElementVisible:()=>cu,IsEmptyMesh:()=>dl,IsEqual:()=>pn,IsEqualEps:()=>hd,IsGreater:()=>Qm,IsGreaterOrEqual:()=>lu,IsLower:()=>su,IsLowerOrEqual:()=>au,IsModelEmpty:()=>gh,IsNegative:()=>na,IsObjectEmpty:()=>Xm,IsPositive:()=>uo,IsPowerOfTwo:()=>Ab,IsTwoManifold:()=>Zd,IsUrl:()=>Av,IsZero:()=>ta,Line:()=>Ta,LinearToSRGB:()=>Zl,LinearTweenFunction:()=>IM,LoadExternalLibrary:()=>pl,LoadExternalLibraryFromLibs:()=>qm,LoadExternalLibraryFromUrl:()=>ld,Loc:()=>be,MaterialBase:()=>md,MaterialGeometryType:()=>bl,MaterialSource:()=>Bn,MaterialType:()=>jn,Matrix:()=>sr,MatrixIsEqual:()=>Dv,Mesh:()=>Un,MeshBuffer:()=>_p,MeshInstance:()=>Sa,MeshInstanceId:()=>ki,MeshPrimitiveBuffer:()=>Sp,Model:()=>Ls,ModelObject3D:()=>Ms,ModelToThreeConversionOutput:()=>qh,ModelToThreeConversionParams:()=>jh,MouseInteraction:()=>_c,NameFromLine:()=>_a,Navigation:()=>Gh,NavigationMode:()=>zo,NavigationType:()=>_i,NextPowerOfTwo:()=>XT,Node:()=>Vr,Object3D:()=>gd,Octree:()=>ph,OctreeNode:()=>Wd,ParabolicTweenFunction:()=>n0,ParameterConverter:()=>bn,ParameterListBuilder:()=>Vd,ParameterListParser:()=>Hd,ParametersFromLine:()=>$o,PhongMaterial:()=>yr,PhysicalMaterial:()=>ja,ProjectPointToSegment2D:()=>Hy,ProjectionMode:()=>nr,Property:()=>Wt,PropertyGroup:()=>ni,PropertyToString:()=>xc,PropertyType:()=>Dt,Quaternion:()=>xi,QuaternionFromAxisAngle:()=>Pv,QuaternionFromXYZ:()=>WT,QuaternionIsEqual:()=>HT,RGBAColor:()=>di,RGBAColorToHexString:()=>pd,RGBColor:()=>ft,RGBColorFromFloatComponents:()=>Ji,RGBColorIsEqual:()=>sa,RGBColorToHexString:()=>pi,RadDeg:()=>Jm,ReadFile:()=>Ev,ReadLines:()=>_o,ReplaceDefaultMaterialsColor:()=>Jd,RequestUrl:()=>Mv,RevokeObjectUrl:()=>Uv,RunTaskAsync:()=>pc,RunTasks:()=>Cv,RunTasksBatch:()=>Iv,SRGBToLinear:()=>Ts,Segment2D:()=>du,SegmentPointDistance2D:()=>sg,SetDomElementHeight:()=>Ss,SetDomElementOuterHeight:()=>ho,SetDomElementOuterWidth:()=>hu,SetDomElementWidth:()=>uu,SetExternalLibLocation:()=>ad,SetLanguageCode:()=>x_,SetLocalizedStrings:()=>y_,SetThreeMeshPolygonOffset:()=>Sb,ShadingModel:()=>Vh,ShadingType:()=>Sr,ShowDomElement:()=>$t,SubCoord2D:()=>Va,SubCoord3D:()=>gr,TaskRunner:()=>ch,TextWriter:()=>ji,TextureIsEqual:()=>M_,TextureMap:()=>Ni,TextureMapIsEqual:()=>Wa,ThreeColorConverter:()=>ih,ThreeConversionStateHandler:()=>hp,ThreeLinearToSRGBColorConverter:()=>dc,ThreeMaterialHandler:()=>dp,ThreeMeshMaterialHandler:()=>Xh,ThreeModelLoader:()=>wl,ThreeNodeTree:()=>fp,ThreeSRGBToLinearColorConverter:()=>oh,Topology:()=>mh,TopologyEdge:()=>qd,TopologyTriangle:()=>Kd,TopologyTriangleEdge:()=>Xd,TopologyVertex:()=>jd,TouchInteraction:()=>Tc,TransformFileHostUrls:()=>hl,TransformMesh:()=>Ns,Transformation:()=>tr,TransformationIsEqual:()=>jT,TraverseThreeObject:()=>r0,Triangle:()=>Nn,TweenCoord3D:()=>zh,Unit:()=>bi,UpVector:()=>up,UpdateMaterialTransparency:()=>Bi,Utf8StringToArrayBuffer:()=>bh,ValueOrDefault:()=>v_,VectorAngle3D:()=>ig,VectorLength3D:()=>fu,Viewer:()=>Us,ViewerMainModel:()=>ah,ViewerModel:()=>ba,WaitWhile:()=>Rv});var T0=class{constructor(){this.eventListeners=new Map}AddEventListener(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}HasEventListener(e){return this.eventListeners.has(e)}GetEventNotifier(e){return()=>{this.NotifyEventListeners(e)}}NotifyEventListeners(e,...t){if(!this.eventListeners.has(e))return;let r=this.eventListeners.get(e);for(let i of r)i(...t)}};var Sp=class{constructor(){this.indices=[],this.vertices=[],this.colors=[],this.normals=[],this.uvs=[],this.material=null}GetBounds(){let e=[1/0,1/0,1/0],t=[-1/0,-1/0,-1/0];for(let r=0;r<this.vertices.length/3;r++)for(let i=0;i<3;i++)e[i]=Math.min(e[i],this.vertices[r*3+i]),t[i]=Math.max(t[i],this.vertices[r*3+i]);return{min:e,max:t}}GetByteLength(e,t){let r=this.indices.length,i=this.vertices.length+this.colors.length+this.normals.length+this.uvs.length;return r*e+i*t}},_p=class{constructor(){this.primitives=[]}PrimitiveCount(){return this.primitives.length}GetPrimitive(e){return this.primitives[e]}GetByteLength(e,t){let r=0;for(let i=0;i<this.primitives.length;i++){let o=this.primitives[i];r+=o.GetByteLength(e,t)}return r}};function af(n){function e(a,c,l,u){function h(v,p,g){return p!==null?v.GetVertexColor(p):g?new ft(0,0,0):null}function f(v,p,g){return p!==null?v.GetTextureUV(p):g?new on(0,0):null}function d(v,p,g){let x=v.VertexColorCount()>0,y=v.TextureUVCount()>0,b=v.GetVertex(p.vertex),S=v.GetNormal(p.normal),_=g.vertices.length/3;g.indices.push(_),g.vertices.push(b.x,b.y,b.z);let M=h(v,p.color,x);M!==null&&g.colors.push(M.r/255,M.g/255,M.b/255),g.normals.push(S.x,S.y,S.z);let A=f(v,p.uv,y);return A!==null&&g.uvs.push(A.x,A.y),{index:_,color:M,normal:S,uv:A}}function m(v,p,g){function x(S,_,M){if(M===null&&_===null)return!0;let A=h(S,_,!0);return sa(M,A)}function y(S,_,M){let A=S.GetNormal(_);return Zi(M,A)}function b(S,_,M){if(M===null&&_===null)return!0;let A=f(S,_,!0);return Uo(M,A)}for(let S=0;S<p.length;S++){let _=p[S],M=x(v,g.color,_.color),A=y(v,g.normal,_.normal),w=b(v,g.uv,_.uv);if(M&&A&&w)return _}return null}if(u.has(c.vertex)){let v=u.get(c.vertex),p=m(a,v,c);if(p!==null)l.indices.push(p.index);else{let g=d(a,c,l);v.push(g)}}else{let v=d(a,c,l);u.set(c.vertex,[v])}}let t=new _p,r=n.TriangleCount();if(r===0)return null;let i=[];for(let a=0;a<r;a++)i.push(a);i.sort((a,c)=>{let l=n.GetTriangle(a),u=n.GetTriangle(c);return l.mat-u.mat});let o=null,s=null;for(let a=0;a<i.length;a++){let c=i[a],l=n.GetTriangle(c);(o===null||o.material!==l.mat)&&(o=new Sp,o.material=l.mat,s=new Map,t.primitives.push(o));let u={vertex:l.v0,color:l.c0,normal:l.n0,uv:l.u0},h={vertex:l.v1,color:l.c1,normal:l.n1,uv:l.u1},f={vertex:l.v2,color:l.c2,normal:l.n2,uv:l.u2};e(n,u,o,s),e(n,h,o,s),e(n,f,o,s)}return t}var Vn=class{constructor(e){this.name=e,this.content=null}GetName(){return this.name}SetName(e){this.name=e}GetTextContent(){return _r(this.content)}GetBufferContent(){return this.content}SetTextContent(e){let t=bh(e);this.content=t}SetBufferContent(e){this.content=e}},Wr=class{constructor(){}CanExport(e,t){return!1}Export(e,t,r){let i=[];this.ExportContent(e,t,i,()=>{r(i)})}ExportContent(e,t,r,i){}GetExportedMaterialName(e){return this.GetExportedName(e,be("Material"))}GetExportedMeshName(e){return this.GetExportedName(e,be("Mesh"))}GetExportedName(e,t){return e.length===0?t:e}};var lf=class extends Wr{constructor(){super(),this.rhino=null}CanExport(e,t){return e===er.Binary&&t==="3dm"}ExportContent(e,t,r,i){this.rhino===null?pl("rhino3dm").then(()=>{rhino3dm().then(o=>{this.rhino=o,this.ExportRhinoContent(e,r,i)})}).catch(()=>{i()}):this.ExportRhinoContent(e,r,i)}ExportRhinoContent(e,t,r){function i(l){return{r:l.r,g:l.g,b:l.b,a:255}}let o=new Vn("model.3dm");t.push(o);let s=new this.rhino.File3dm;e.EnumerateTransformedMeshInstances(l=>{let u=af(l);for(let h=0;h<u.PrimitiveCount();h++){let f=u.GetPrimitive(h),d={data:{attributes:{position:{itemSize:3,type:"Float32Array",array:f.vertices},normal:{itemSize:3,type:"Float32Array",array:f.normals}},index:{type:"Uint16Array",array:f.indices}}},m=e.GetMaterial(f.material),v=new this.rhino.Material;v.name=this.GetExportedMaterialName(m.name),m.type===jn.Phong&&(v.ambientColor=i(m.ambient),v.specularColor=i(m.specular)),v.diffuseColor=i(m.color),v.transparency=1-m.opacity;let p=s.materials().count;s.materials().add(v);let g=new this.rhino.Mesh.createFromThreejsJSON(d),x=new this.rhino.ObjectAttributes;x.name=this.GetExportedMeshName(l.GetName()),x.materialSource=this.rhino.ObjectMaterialSource.MaterialFromObject,x.materialIndex=p,s.objects().add(g,x)}});let a=new this.rhino.File3dmWriteOptions;a.version=6;let c=s.toByteArrayOptions(a);o.SetBufferContent(c),r()}};function d3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var cf=class extends Wr{constructor(){super()}CanExport(e,t){return e===er.Text&&t==="bim"}ExportContent(e,t,r,i){let o={schema_version:"1.1.0",meshes:[],elements:[],info:{}};this.ExportProperties(e.GetModel(),o.info);let s=0;e.EnumerateTransformedMeshInstances(c=>{let l={mesh_id:s,coordinates:[],indices:[]};c.EnumerateVertices(m=>{l.coordinates.push(m.x,m.y,m.z)}),c.EnumerateTriangleVertexIndices((m,v,p)=>{l.indices.push(m,v,p)});let u={mesh_id:s,type:"Other",color:{r:200,g:200,b:200,a:255},vector:{x:0,y:0,z:0},rotation:{qx:0,qy:0,qz:0,qw:1},guid:d3(),info:{}},h=null,f=!0,d=[];for(let m=0;m<c.TriangleCount();m++){let v=c.GetTriangle(m),p=e.GetMaterial(v.mat),g={r:Math.round(p.color.r),g:Math.round(p.color.g),b:Math.round(p.color.b),a:vr(p.opacity)};d.push(g.r,g.g,g.b,g.a),f&&(h===null?h=g:(h.r!==g.r||h.g!==g.g||h.b!==g.b||h.a!==g.a)&&(f=!1,h=null))}f?u.color=h:u.face_colors=d,u.info.Name=c.GetName(),this.ExportProperties(c,u.info),o.meshes.push(l),o.elements.push(u),s+=1});let a=new Vn("model.bim");a.SetTextContent(JSON.stringify(o,null,4)),r.push(a),i()}ExportProperties(e,t){for(let r=0;r<e.PropertyGroupCount();r++){let i=e.GetPropertyGroup(r);for(let o=0;o<i.PropertyCount();o++){let s=i.GetProperty(o);t[s.name]=xc(s)}}}};var ls=class{constructor(e,t){this.arrayBuffer=new ArrayBuffer(e),this.dataView=new DataView(this.arrayBuffer),this.isLittleEndian=t,this.position=0}GetPosition(){return this.position}SetPosition(e){this.position=e}End(){return this.position>=this.arrayBuffer.byteLength}GetBuffer(){return this.arrayBuffer}WriteArrayBuffer(e){let t=new Uint8Array(e);new Uint8Array(this.arrayBuffer).set(t,this.position),this.position+=e.byteLength}WriteBoolean8(e){this.dataView.setInt8(this.position,e?1:0),this.position=this.position+1}WriteCharacter8(e){this.dataView.setInt8(this.position,e),this.position=this.position+1}WriteUnsignedCharacter8(e){this.dataView.setUint8(this.position,e),this.position=this.position+1}WriteInteger16(e){this.dataView.setInt16(this.position,e,this.isLittleEndian),this.position=this.position+2}WriteUnsignedInteger16(e){this.dataView.setUint16(this.position,e,this.isLittleEndian),this.position=this.position+2}WriteInteger32(e){this.dataView.setInt32(this.position,e,this.isLittleEndian),this.position=this.position+4}WriteUnsignedInteger32(e){this.dataView.setUint32(this.position,e,this.isLittleEndian),this.position=this.position+4}WriteFloat32(e){this.dataView.setFloat32(this.position,e,this.isLittleEndian),this.position=this.position+4}WriteDouble64(e){this.dataView.setFloat64(this.position,e,this.isLittleEndian),this.position=this.position+8}};var YM={UNSIGNED_INT:5125,FLOAT:5126},Tp={ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963},uf=class extends Wr{constructor(){super(),this.components={index:{type:YM.UNSIGNED_INT,size:4},number:{type:YM.FLOAT,size:4}}}CanExport(e,t){return e===er.Text&&t==="gltf"||e===er.Binary&&t==="glb"}ExportContent(e,t,r,i){t===er.Text?this.ExportAsciiContent(e,r):t===er.Binary&&this.ExportBinaryContent(e,r),i()}ExportAsciiContent(e,t){let r=new Vn("model.gltf"),i=new Vn("model.bin");t.push(r),t.push(i);let o=this.GetMeshData(e),s=this.GetMainBuffer(o),a=this.GetMainJson(e,o);a.buffers.push({uri:i.GetName(),byteLength:s.byteLength});let c=new Map;this.ExportMaterials(e,a,l=>{let u=ur(l.name);if(c.has(u))return c.get(u);{let h=new Vn(u);h.SetBufferContent(l.buffer),t.push(h);let f=a.textures.length;return c.set(u,f),a.images.push({uri:u}),a.textures.push({source:f}),f}}),r.SetTextContent(JSON.stringify(a,null,4)),i.SetBufferContent(s)}ExportBinaryContent(e,t){function r(b){let S=b%4;return S===0?b:b+(4-S)}function i(b,S,_){for(let M=0;M<_;M++)b.WriteUnsignedCharacter8(S)}let o=new Vn("model.glb");t.push(o);let s=this.GetMeshData(e),a=this.GetMainBuffer(s),c=this.GetMainJson(e,s),l=[],u=a.byteLength,h=new Map;this.ExportMaterials(e,c,b=>{let S=ur(b.name),_=to(b.name);if(h.has(S))return h.get(S);{let M=c.bufferViews.length,A=c.textures.length;h.set(S,A);let w=b.buffer;return l.push(w),c.bufferViews.push({buffer:0,byteOffset:u,byteLength:w.byteLength}),u+=w.byteLength,c.images.push({bufferView:M,mimeType:"image/"+_}),c.textures.push({source:A}),A}});let f=a.byteLength;for(let b=0;b<l.length;b++){let S=l[b];f+=S.byteLength}let d=r(f);c.buffers.push({byteLength:d});let m=JSON.stringify(c),v=bh(m),p=v.byteLength,g=r(p),x=20+g+8+d,y=new ls(x,!0);y.WriteUnsignedInteger32(1179937895),y.WriteUnsignedInteger32(2),y.WriteUnsignedInteger32(x),y.WriteUnsignedInteger32(g),y.WriteUnsignedInteger32(1313821514),y.WriteArrayBuffer(v),i(y,32,g-p),y.WriteUnsignedInteger32(d),y.WriteUnsignedInteger32(5130562),y.WriteArrayBuffer(a);for(let b=0;b<l.length;b++){let S=l[b];y.WriteArrayBuffer(S)}i(y,0,d-f),o.SetBufferContent(y.GetBuffer())}GetMeshData(e){let t=[];return e.EnumerateMeshes(r=>{let i=af(r);t.push({name:r.GetName(),buffer:i,offsets:[],sizes:[]})}),t}GetMainBuffer(e){let t=0;for(let i of e)t+=i.buffer.GetByteLength(this.components.index.size,this.components.number.size);let r=new ls(t,!0);for(let i of e)for(let o=0;o<i.buffer.PrimitiveCount();o++){let s=i.buffer.GetPrimitive(o),a=r.GetPosition();for(let c=0;c<s.indices.length;c++)r.WriteUnsignedInteger32(s.indices[c]);for(let c=0;c<s.vertices.length;c++)r.WriteFloat32(s.vertices[c]);for(let c=0;c<s.colors.length;c++)r.WriteFloat32(Ts(s.colors[c]));for(let c=0;c<s.normals.length;c++)r.WriteFloat32(s.normals[c]);for(let c=0;c<s.uvs.length;c++){let l=s.uvs[c];c%2===1&&(l*=-1),r.WriteFloat32(l)}i.offsets.push(a),i.sizes.push(r.GetPosition()-a)}return r.GetBuffer()}GetMainJson(e,t){class r{constructor(h,f){this.mainJson=h,this.byteOffset=f}AddBufferView(h,f){let d={buffer:0,byteOffset:this.byteOffset,byteLength:h,target:f};return this.mainJson.bufferViews.push(d),this.byteOffset+=h,this.mainJson.bufferViews.length-1}}function i(u,h){for(let f of h.GetMeshIndices()){let d=new ki(h.GetId(),f);if(u.IsMeshInstanceVisible(d))return!0}for(let f of h.GetChildNodes())if(i(u,f))return!0;return!1}function o(u,h,f,d){if(d.IsMeshNode())for(let m of d.GetMeshIndices())s(u,h,f,d,m,!0);else if(i(u,d)){let m={},v=d.GetName();v.length>0&&(m.name=v),d.GetTransformation().IsIdentity()||(m.matrix=d.GetTransformation().GetMatrix().Get()),f.push(m),h.push(f.length-1),m.children=[],a(u,m.children,f,d)}}function s(u,h,f,d,m,v){let p=new ki(d.GetId(),m);if(!u.IsMeshInstanceVisible(p))return;let g={mesh:u.MapMeshIndex(m)};v&&(d.GetTransformation().IsIdentity()||(g.matrix=d.GetTransformation().GetMatrix().Get())),f.push(g),h.push(f.length-1)}function a(u,h,f,d){for(let m of d.GetChildNodes())o(u,h,f,m);for(let m of d.GetMeshIndices())s(u,h,f,d,m,!1)}let c={asset:{generator:"https://3dviewer.net",version:"2.0"},scene:0,scenes:[{nodes:[]}],nodes:[],materials:[],meshes:[],buffers:[],bufferViews:[],accessors:[]},l=e.GetModel().GetRootNode();a(e,c.scenes[0].nodes,c.nodes,l);for(let u of t){let h={name:this.GetExportedMeshName(u.name),primitives:[]},f=u.buffer.primitives;for(let d=0;d<f.length;d++){let m=f[d],v=new r(c,u.offsets[d]),p=v.AddBufferView(m.indices.length*this.components.index.size,Tp.ELEMENT_ARRAY_BUFFER),g=v.AddBufferView(m.vertices.length*this.components.number.size,Tp.ARRAY_BUFFER),x=null;m.colors.length>0&&(x=v.AddBufferView(m.colors.length*this.components.number.size,Tp.ARRAY_BUFFER));let y=v.AddBufferView(m.normals.length*this.components.number.size,Tp.ARRAY_BUFFER),b=null;m.uvs.length>0&&(b=v.AddBufferView(m.uvs.length*this.components.number.size,Tp.ARRAY_BUFFER));let S={attributes:{},mode:4,material:m.material},_=m.GetBounds();c.accessors.push({bufferView:p,byteOffset:0,componentType:this.components.index.type,count:m.indices.length,type:"SCALAR"}),S.indices=c.accessors.length-1,c.accessors.push({bufferView:g,byteOffset:0,componentType:this.components.number.type,count:m.vertices.length/3,min:_.min,max:_.max,type:"VEC3"}),S.attributes.POSITION=c.accessors.length-1,x!==null&&(c.accessors.push({bufferView:x,byteOffset:0,componentType:this.components.number.type,count:m.colors.length/3,type:"VEC3"}),S.attributes.COLOR_0=c.accessors.length-1),c.accessors.push({bufferView:y,byteOffset:0,componentType:this.components.number.type,count:m.normals.length/3,type:"VEC3"}),S.attributes.NORMAL=c.accessors.length-1,b!==null&&(c.accessors.push({bufferView:b,byteOffset:0,componentType:this.components.number.type,count:m.uvs.length/2,type:"VEC2"}),S.attributes.TEXCOORD_0=c.accessors.length-1),h.primitives.push(S)}c.meshes.push(h)}return c}ExportMaterials(e,t,r){function i(o,s,a,c){function l(p,g){return[Ts(p.r/255),Ts(p.g/255),Ts(p.b/255),g]}function u(p){return[Ts(p.r/255),Ts(p.g/255),Ts(p.b/255)]}function h(p,g,x){if(g===null||!g.IsValid())return null;p.images===void 0&&(p.images=[]),p.textures===void 0&&(p.textures=[]);let b={index:x(g)};if(g.HasTransformation()){let S="KHR_texture_transform";p.extensionsUsed===void 0&&(p.extensionsUsed=[]),p.extensionsUsed.indexOf(S)===-1&&p.extensionsUsed.push(S),b.extensions={KHR_texture_transform:{offset:[g.offset.x,-g.offset.y],scale:[g.scale.x,g.scale.y],rotation:-g.rotation}}}return b}let f={name:o.GetExportedMaterialName(a.name),pbrMetallicRoughness:{baseColorFactor:l(a.color,a.opacity)},emissiveFactor:u(a.emissive),doubleSided:!0,alphaMode:"OPAQUE"};a.transparent&&(f.alphaMode="BLEND");let d=h(s,a.diffuseMap,c);if(d!==null&&(a.multiplyDiffuseMap||(f.pbrMetallicRoughness.baseColorFactor=l(new ft(255,255,255),a.opacity)),f.pbrMetallicRoughness.baseColorTexture=d),a.type===jn.Physical){let p=h(s,a.metalnessMap,c);p!==null?f.pbrMetallicRoughness.metallicRoughnessTexture=p:(f.pbrMetallicRoughness.metallicFactor=a.metalness,f.pbrMetallicRoughness.roughnessFactor=a.roughness)}let m=h(s,a.normalMap,c);m!==null&&(f.normalTexture=m);let v=h(s,a.emissiveMap,c);v!==null&&(f.emissiveTexture=v),s.materials.push(f)}for(let o=0;o<e.MaterialCount();o++){let s=e.GetMaterial(o);i(this,t,s,r)}}};var Mp=class{constructor(e){this.transformation=new tr,this.isMeshVisible=t=>!0,ou(e,this)}},hf=class{constructor(e,t){this.model=e,this.settings=t||new Mp,this.visibleMeshes=null,this.meshToVisibleMeshIndex=null}GetModel(){return this.model}MaterialCount(){return this.model.MaterialCount()}GetMaterial(e){return this.model.GetMaterial(e)}VertexCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.VertexCount()}),e}TriangleCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=t.TriangleCount()}),e}MeshCount(){let e=0;return this.EnumerateMeshes(t=>{e+=1}),e}EnumerateMeshes(e){this.FillVisibleMeshCache();for(let t=0;t<this.model.MeshCount();t++)if(this.visibleMeshes.has(t)){let r=this.model.GetMesh(t);e(r)}}MapMeshIndex(e){return this.FillVisibleMeshCache(),this.meshToVisibleMeshIndex.get(e)}IsMeshInstanceVisible(e){return this.settings.isMeshVisible(e)}MeshInstanceCount(){let e=0;return this.EnumerateMeshInstances(t=>{e+=1}),e}EnumerateMeshInstances(e){this.model.EnumerateMeshInstances(t=>{this.settings.isMeshVisible(t.GetId())&&e(t)})}EnumerateTransformedMeshInstances(e){this.EnumerateMeshInstances(t=>{let r=t.GetTransformation();this.settings.transformation.IsIdentity()||r.Append(this.settings.transformation);let o=t.GetMesh().Clone();r.IsIdentity()||Ns(o,r),e(o)})}EnumerateVerticesAndTriangles(e){let t=[];this.EnumerateTransformedMeshInstances(i=>{t.push(i)});for(let i of t)i.EnumerateVertices(o=>{e.onVertex(o.x,o.y,o.z)});let r=0;for(let i of t)i.EnumerateTriangleVertexIndices((o,s,a)=>{e.onTriangle(o+r,s+r,a+r)}),r+=i.VertexCount()}EnumerateTrianglesWithNormals(e){this.EnumerateTransformedMeshInstances(t=>{t.EnumerateTriangleVertices((r,i,o)=>{let s=vc(r,i,o);e(r,i,o,s)})})}FillVisibleMeshCache(){if(this.visibleMeshes!==null&&this.meshToVisibleMeshIndex!==null)return;this.visibleMeshes=new Set,this.model.EnumerateMeshInstances(t=>{let r=t.GetId();this.settings.isMeshVisible(r)&&this.visibleMeshes.add(r.meshIndex)}),this.meshToVisibleMeshIndex=new Map;let e=0;for(let t=0;t<this.model.MeshCount();t++)this.visibleMeshes.has(t)&&(this.meshToVisibleMeshIndex.set(t,e),e+=1)}};var ji=class{constructor(){this.text="",this.indentation=0}GetText(){return this.text}Indent(e){this.indentation+=e}WriteArrayLine(e){this.WriteLine(e.join(" "))}WriteLine(e){this.WriteIndentation(),this.Write(e+`
`)}WriteIndentation(){for(let e=0;e<this.indentation;e++)this.Write("  ")}Write(e){this.text+=e}};var ff=class extends Wr{constructor(){super()}CanExport(e,t){return e===er.Text&&t==="obj"}ExportContent(e,t,r,i){function o(m,v,p,g){if(p===null||!p.IsValid())return;let x=ur(p.name);if(m.WriteArrayLine([v,x]),g.findIndex(b=>b.GetName()===x)===-1){let b=new Vn(x);b.SetBufferContent(p.buffer),g.push(b)}}let s=new Vn("model.mtl"),a=new Vn("model.obj");r.push(s),r.push(a);let c=new ji;c.WriteLine(this.GetHeaderText());for(let m=0;m<e.MaterialCount();m++){let v=e.GetMaterial(m);c.WriteArrayLine(["newmtl",this.GetExportedMaterialName(v.name)]),c.WriteArrayLine(["Kd",v.color.r/255,v.color.g/255,v.color.b/255]),c.WriteArrayLine(["d",v.opacity]),v.type===jn.Phong&&(c.WriteArrayLine(["Ka",v.ambient.r/255,v.ambient.g/255,v.ambient.b/255]),c.WriteArrayLine(["Ks",v.specular.r/255,v.specular.g/255,v.specular.b/255]),c.WriteArrayLine(["Ns",v.shininess*1e3])),o(c,"map_Kd",v.diffuseMap,r),v.type===jn.Phong&&o(c,"map_Ks",v.specularMap,r),o(c,"bump",v.bumpMap,r)}s.SetTextContent(c.GetText());let l=new ji;l.WriteLine(this.GetHeaderText()),l.WriteArrayLine(["mtllib",s.GetName()]);let u=0,h=0,f=0,d=null;e.EnumerateTransformedMeshInstances(m=>{l.WriteArrayLine(["g",this.GetExportedMeshName(m.GetName())]);for(let v=0;v<m.VertexCount();v++){let p=m.GetVertex(v);l.WriteArrayLine(["v",p.x,p.y,p.z])}for(let v=0;v<m.NormalCount();v++){let p=m.GetNormal(v);l.WriteArrayLine(["vn",p.x,p.y,p.z])}for(let v=0;v<m.TextureUVCount();v++){let p=m.GetTextureUV(v);l.WriteArrayLine(["vt",p.x,p.y])}for(let v=0;v<m.TriangleCount();v++){let p=m.GetTriangle(v),g=p.v0+u+1,x=p.v1+u+1,y=p.v2+u+1,b=p.n0+h+1,S=p.n1+h+1,_=p.n2+h+1,M="",A="",w="";if(p.HasTextureUVs()&&(M=p.u0+f+1,A=p.u1+f+1,w=p.u2+f+1),p.mat!==null){let T=e.GetMaterial(p.mat),D=this.GetExportedMaterialName(T.name);D!==d&&(l.WriteArrayLine(["usemtl",D]),d=D)}l.WriteArrayLine(["f",[g,M,b].join("/"),[x,A,S].join("/"),[y,w,_].join("/")])}for(let v=0;v<m.LineCount();v++){let p=m.GetLine(v),g=[];for(let x=0;x<p.vertices.length;x++)g.push(p.vertices[x]+u+1);if(p.mat!==null){let x=e.GetMaterial(p.mat),y=this.GetExportedMaterialName(x.name);y!==d&&(l.WriteArrayLine(["usemtl",y]),d=y)}l.WriteArrayLine(["l",g.join(" ")])}u+=m.VertexCount(),h+=m.NormalCount(),f+=m.TextureUVCount()}),a.SetTextContent(l.GetText()),i()}GetHeaderText(){return"# exported by https://3dviewer.net"}};var df=class extends Wr{constructor(){super()}CanExport(e,t){return e===er.Text&&t==="off"}ExportContent(e,t,r,i){let o=new Vn("model.off");r.push(o);let s=new ji;s.WriteLine("OFF"),s.WriteArrayLine([e.VertexCount(),e.TriangleCount(),0]),e.EnumerateVerticesAndTriangles({onVertex:function(a,c,l){s.WriteArrayLine([a,c,l])},onTriangle:function(a,c,l){s.WriteArrayLine([3,a,c,l])}}),o.SetTextContent(s.GetText()),i()}};var pf=class extends Wr{constructor(){super()}CanExport(e,t){return(e===er.Text||e===er.Binary)&&t==="ply"}ExportContent(e,t,r,i){t===er.Text?this.ExportText(e,r):this.ExportBinary(e,r),i()}ExportText(e,t){let r=new Vn("model.ply");t.push(r);let i=new ji,o=e.VertexCount(),s=e.TriangleCount(),a=this.GetHeaderText("ascii",o,s);i.Write(a),e.EnumerateVerticesAndTriangles({onVertex:function(c,l,u){i.WriteArrayLine([c,l,u])},onTriangle:function(c,l,u){i.WriteArrayLine([3,c,l,u])}}),r.SetTextContent(i.GetText())}ExportBinary(e,t){let r=new Vn("model.ply");t.push(r);let i=e.VertexCount(),o=e.TriangleCount(),s=this.GetHeaderText("binary_little_endian",i,o),a=s.length+i*3*4+o*(1+3*4),c=new ls(a,!0);for(let l=0;l<s.length;l++)c.WriteUnsignedCharacter8(s.charCodeAt(l));e.EnumerateVerticesAndTriangles({onVertex:function(l,u,h){c.WriteFloat32(l),c.WriteFloat32(u),c.WriteFloat32(h)},onTriangle:function(l,u,h){c.WriteUnsignedCharacter8(3),c.WriteInteger32(l),c.WriteInteger32(u),c.WriteInteger32(h)}}),r.SetBufferContent(c.GetBuffer())}GetHeaderText(e,t,r){let i=new ji;return i.WriteLine("ply"),i.WriteLine("format "+e+" 1.0"),i.WriteLine("element vertex "+t),i.WriteLine("property float x"),i.WriteLine("property float y"),i.WriteLine("property float z"),i.WriteLine("element face "+r),i.WriteLine("property list uchar int vertex_index"),i.WriteLine("end_header"),i.GetText()}};var mf=class extends Wr{constructor(){super()}CanExport(e,t){return(e===er.Text||e===er.Binary)&&t==="stl"}ExportContent(e,t,r,i){t===er.Text?this.ExportText(e,r):this.ExportBinary(e,r),i()}ExportText(e,t){let r=new Vn("model.stl");t.push(r);let i=new ji;i.WriteLine("solid Model"),e.EnumerateTrianglesWithNormals((o,s,a,c)=>{i.WriteArrayLine(["facet","normal",c.x,c.y,c.z]),i.Indent(1),i.WriteLine("outer loop"),i.Indent(1),i.WriteArrayLine(["vertex",o.x,o.y,o.z]),i.WriteArrayLine(["vertex",s.x,s.y,s.z]),i.WriteArrayLine(["vertex",a.x,a.y,a.z]),i.Indent(-1),i.WriteLine("endloop"),i.Indent(-1),i.WriteLine("endfacet")}),i.WriteLine("endsolid Model"),r.SetTextContent(i.GetText())}ExportBinary(e,t){let r=new Vn("model.stl");t.push(r);let i=e.TriangleCount(),o=80,s=o+4+i*50,a=new ls(s,!0);for(let c=0;c<o;c++)a.WriteUnsignedCharacter8(0);a.WriteUnsignedInteger32(i),e.EnumerateTrianglesWithNormals((c,l,u,h)=>{a.WriteFloat32(h.x),a.WriteFloat32(h.y),a.WriteFloat32(h.z),a.WriteFloat32(c.x),a.WriteFloat32(c.y),a.WriteFloat32(c.z),a.WriteFloat32(l.x),a.WriteFloat32(l.y),a.WriteFloat32(l.z),a.WriteFloat32(u.x),a.WriteFloat32(u.y),a.WriteFloat32(u.z),a.WriteUnsignedInteger16(0)}),r.SetBufferContent(a.GetBuffer())}};var M0=class{constructor(){this.exporters=[new ff,new mf,new pf,new df,new uf,new lf,new cf]}AddExporter(e){this.exporters.push(e)}Export(e,t,r,i,o){let s=null;for(let c=0;c<this.exporters.length;c++){let l=this.exporters[c];if(l.CanExport(r,i)){s=l;break}}if(s===null){o.onError();return}let a=new hf(e,t);s.Export(a,r,c=>{c.length===0?o.onError():o.onSuccess(c)})}};var p3=Ln,Ep=class n extends xn{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,r,i){let o=this,s=new yi(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(c){i?i(c):console.error(c),o.manager.itemError(e)}},r,i)}parse(e){let t=this;function r(L,C){if(L.nodeType!==1)return;let R=b(L),I=!1,j=null;switch(L.nodeName){case"svg":C=m(L,C);break;case"style":o(L);break;case"g":C=m(L,C);break;case"path":C=m(L,C),L.hasAttribute("d")&&(j=i(L));break;case"rect":C=m(L,C),j=c(L);break;case"polygon":C=m(L,C),j=l(L);break;case"polyline":C=m(L,C),j=u(L);break;case"circle":C=m(L,C),j=h(L);break;case"ellipse":C=m(L,C),j=f(L);break;case"line":C=m(L,C),j=d(L);break;case"defs":I=!0;break;case"use":C=m(L,C);let W=(L.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),K=L.viewportElement.getElementById(W);K?r(K,C):console.warn("SVGLoader: 'use node' references non-existent node id: "+W);break;default:}j&&(C.fill!==void 0&&C.fill!=="none"&&j.color.setStyle(C.fill,p3),_(j,ae),N.push(j),j.userData={node:L,style:C});let Z=L.childNodes;for(let J=0;J<Z.length;J++){let W=Z[J];I&&W.nodeName!=="style"&&W.nodeName!=="defs"||r(W,C)}R&&(E.pop(),E.length>0?ae.copy(E[E.length-1]):ae.identity())}function i(L){let C=new Fs,R=new Ne,I=new Ne,j=new Ne,Z=!0,J=!1,W=L.getAttribute("d");if(W===""||W==="none")return null;let K=W.match(/[a-df-z][^a-df-z]*/ig);for(let le=0,ue=K.length;le<ue;le++){let de=K[le],Te=de.charAt(0),X=de.slice(1).trim();Z===!0&&(J=!0,Z=!1);let F;switch(Te){case"M":F=p(X);for(let G=0,ge=F.length;G<ge;G+=2)R.x=F[G+0],R.y=F[G+1],I.x=R.x,I.y=R.y,G===0?C.moveTo(R.x,R.y):C.lineTo(R.x,R.y),G===0&&j.copy(R);break;case"H":F=p(X);for(let G=0,ge=F.length;G<ge;G++)R.x=F[G],I.x=R.x,I.y=R.y,C.lineTo(R.x,R.y),G===0&&J===!0&&j.copy(R);break;case"V":F=p(X);for(let G=0,ge=F.length;G<ge;G++)R.y=F[G],I.x=R.x,I.y=R.y,C.lineTo(R.x,R.y),G===0&&J===!0&&j.copy(R);break;case"L":F=p(X);for(let G=0,ge=F.length;G<ge;G+=2)R.x=F[G+0],R.y=F[G+1],I.x=R.x,I.y=R.y,C.lineTo(R.x,R.y),G===0&&J===!0&&j.copy(R);break;case"C":F=p(X);for(let G=0,ge=F.length;G<ge;G+=6)C.bezierCurveTo(F[G+0],F[G+1],F[G+2],F[G+3],F[G+4],F[G+5]),I.x=F[G+2],I.y=F[G+3],R.x=F[G+4],R.y=F[G+5],G===0&&J===!0&&j.copy(R);break;case"S":F=p(X);for(let G=0,ge=F.length;G<ge;G+=4)C.bezierCurveTo(v(R.x,I.x),v(R.y,I.y),F[G+0],F[G+1],F[G+2],F[G+3]),I.x=F[G+0],I.y=F[G+1],R.x=F[G+2],R.y=F[G+3],G===0&&J===!0&&j.copy(R);break;case"Q":F=p(X);for(let G=0,ge=F.length;G<ge;G+=4)C.quadraticCurveTo(F[G+0],F[G+1],F[G+2],F[G+3]),I.x=F[G+0],I.y=F[G+1],R.x=F[G+2],R.y=F[G+3],G===0&&J===!0&&j.copy(R);break;case"T":F=p(X);for(let G=0,ge=F.length;G<ge;G+=2){let we=v(R.x,I.x),Ee=v(R.y,I.y);C.quadraticCurveTo(we,Ee,F[G+0],F[G+1]),I.x=we,I.y=Ee,R.x=F[G+0],R.y=F[G+1],G===0&&J===!0&&j.copy(R)}break;case"A":F=p(X,[3,4],7);for(let G=0,ge=F.length;G<ge;G+=7){if(F[G+5]==R.x&&F[G+6]==R.y)continue;let we=R.clone();R.x=F[G+5],R.y=F[G+6],I.x=R.x,I.y=R.y,s(C,F[G],F[G+1],F[G+2],F[G+3],F[G+4],we,R),G===0&&J===!0&&j.copy(R)}break;case"m":F=p(X);for(let G=0,ge=F.length;G<ge;G+=2)R.x+=F[G+0],R.y+=F[G+1],I.x=R.x,I.y=R.y,G===0?C.moveTo(R.x,R.y):C.lineTo(R.x,R.y),G===0&&j.copy(R);break;case"h":F=p(X);for(let G=0,ge=F.length;G<ge;G++)R.x+=F[G],I.x=R.x,I.y=R.y,C.lineTo(R.x,R.y),G===0&&J===!0&&j.copy(R);break;case"v":F=p(X);for(let G=0,ge=F.length;G<ge;G++)R.y+=F[G],I.x=R.x,I.y=R.y,C.lineTo(R.x,R.y),G===0&&J===!0&&j.copy(R);break;case"l":F=p(X);for(let G=0,ge=F.length;G<ge;G+=2)R.x+=F[G+0],R.y+=F[G+1],I.x=R.x,I.y=R.y,C.lineTo(R.x,R.y),G===0&&J===!0&&j.copy(R);break;case"c":F=p(X);for(let G=0,ge=F.length;G<ge;G+=6)C.bezierCurveTo(R.x+F[G+0],R.y+F[G+1],R.x+F[G+2],R.y+F[G+3],R.x+F[G+4],R.y+F[G+5]),I.x=R.x+F[G+2],I.y=R.y+F[G+3],R.x+=F[G+4],R.y+=F[G+5],G===0&&J===!0&&j.copy(R);break;case"s":F=p(X);for(let G=0,ge=F.length;G<ge;G+=4)C.bezierCurveTo(v(R.x,I.x),v(R.y,I.y),R.x+F[G+0],R.y+F[G+1],R.x+F[G+2],R.y+F[G+3]),I.x=R.x+F[G+0],I.y=R.y+F[G+1],R.x+=F[G+2],R.y+=F[G+3],G===0&&J===!0&&j.copy(R);break;case"q":F=p(X);for(let G=0,ge=F.length;G<ge;G+=4)C.quadraticCurveTo(R.x+F[G+0],R.y+F[G+1],R.x+F[G+2],R.y+F[G+3]),I.x=R.x+F[G+0],I.y=R.y+F[G+1],R.x+=F[G+2],R.y+=F[G+3],G===0&&J===!0&&j.copy(R);break;case"t":F=p(X);for(let G=0,ge=F.length;G<ge;G+=2){let we=v(R.x,I.x),Ee=v(R.y,I.y);C.quadraticCurveTo(we,Ee,R.x+F[G+0],R.y+F[G+1]),I.x=we,I.y=Ee,R.x=R.x+F[G+0],R.y=R.y+F[G+1],G===0&&J===!0&&j.copy(R)}break;case"a":F=p(X,[3,4],7);for(let G=0,ge=F.length;G<ge;G+=7){if(F[G+5]==0&&F[G+6]==0)continue;let we=R.clone();R.x+=F[G+5],R.y+=F[G+6],I.x=R.x,I.y=R.y,s(C,F[G],F[G+1],F[G+2],F[G+3],F[G+4],we,R),G===0&&J===!0&&j.copy(R)}break;case"Z":case"z":C.currentPath.autoClose=!0,C.currentPath.curves.length>0&&(R.copy(j),C.currentPath.currentPoint.copy(R),Z=!0);break;default:console.warn(de)}J=!1}return C}function o(L){if(!(!L.sheet||!L.sheet.cssRules||!L.sheet.cssRules.length))for(let C=0;C<L.sheet.cssRules.length;C++){let R=L.sheet.cssRules[C];if(R.type!==1)continue;let I=R.selectorText.split(/,/gm).filter(Boolean).map(j=>j.trim());for(let j=0;j<I.length;j++){let Z=Object.fromEntries(Object.entries(R.style).filter(([,J])=>J!==""));P[I[j]]=Object.assign(P[I[j]]||{},Z)}}}function s(L,C,R,I,j,Z,J,W){if(C==0||R==0){L.lineTo(W.x,W.y);return}I=I*Math.PI/180,C=Math.abs(C),R=Math.abs(R);let K=(J.x-W.x)/2,le=(J.y-W.y)/2,ue=Math.cos(I)*K+Math.sin(I)*le,de=-Math.sin(I)*K+Math.cos(I)*le,Te=C*C,X=R*R,F=ue*ue,G=de*de,ge=F/Te+G/X;if(ge>1){let ve=Math.sqrt(ge);C=ve*C,R=ve*R,Te=C*C,X=R*R}let we=Te*G+X*F,Ee=(Te*X-we)/we,se=Math.sqrt(Math.max(0,Ee));j===Z&&(se=-se);let H=se*C*de/R,re=-se*R*ue/C,pe=Math.cos(I)*H-Math.sin(I)*re+(J.x+W.x)/2,ee=Math.sin(I)*H+Math.cos(I)*re+(J.y+W.y)/2,me=a(1,0,(ue-H)/C,(de-re)/R),xe=a((ue-H)/C,(de-re)/R,(-ue-H)/C,(-de-re)/R)%(Math.PI*2);L.currentPath.absellipse(pe,ee,C,R,me,me+xe,Z===0,I)}function a(L,C,R,I){let j=L*R+C*I,Z=Math.sqrt(L*L+C*C)*Math.sqrt(R*R+I*I),J=Math.acos(Math.max(-1,Math.min(1,j/Z)));return L*I-C*R<0&&(J=-J),J}function c(L){let C=y(L.getAttribute("x")||0),R=y(L.getAttribute("y")||0),I=y(L.getAttribute("rx")||L.getAttribute("ry")||0),j=y(L.getAttribute("ry")||L.getAttribute("rx")||0),Z=y(L.getAttribute("width")),J=y(L.getAttribute("height")),W=1-.551915024494,K=new Fs;return K.moveTo(C+I,R),K.lineTo(C+Z-I,R),(I!==0||j!==0)&&K.bezierCurveTo(C+Z-I*W,R,C+Z,R+j*W,C+Z,R+j),K.lineTo(C+Z,R+J-j),(I!==0||j!==0)&&K.bezierCurveTo(C+Z,R+J-j*W,C+Z-I*W,R+J,C+Z-I,R+J),K.lineTo(C+I,R+J),(I!==0||j!==0)&&K.bezierCurveTo(C+I*W,R+J,C,R+J-j*W,C,R+J-j),K.lineTo(C,R+j),(I!==0||j!==0)&&K.bezierCurveTo(C,R+j*W,C+I*W,R,C+I,R),K}function l(L){function C(Z,J,W){let K=y(J),le=y(W);j===0?I.moveTo(K,le):I.lineTo(K,le),j++}let R=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,I=new Fs,j=0;return L.getAttribute("points").replace(R,C),I.currentPath.autoClose=!0,I}function u(L){function C(Z,J,W){let K=y(J),le=y(W);j===0?I.moveTo(K,le):I.lineTo(K,le),j++}let R=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,I=new Fs,j=0;return L.getAttribute("points").replace(R,C),I.currentPath.autoClose=!1,I}function h(L){let C=y(L.getAttribute("cx")||0),R=y(L.getAttribute("cy")||0),I=y(L.getAttribute("r")||0),j=new ya;j.absarc(C,R,I,0,Math.PI*2);let Z=new Fs;return Z.subPaths.push(j),Z}function f(L){let C=y(L.getAttribute("cx")||0),R=y(L.getAttribute("cy")||0),I=y(L.getAttribute("rx")||0),j=y(L.getAttribute("ry")||0),Z=new ya;Z.absellipse(C,R,I,j,0,Math.PI*2);let J=new Fs;return J.subPaths.push(Z),J}function d(L){let C=y(L.getAttribute("x1")||0),R=y(L.getAttribute("y1")||0),I=y(L.getAttribute("x2")||0),j=y(L.getAttribute("y2")||0),Z=new Fs;return Z.moveTo(C,R),Z.lineTo(I,j),Z.currentPath.autoClose=!1,Z}function m(L,C){C=Object.assign({},C);let R={};if(L.hasAttribute("class")){let J=L.getAttribute("class").split(/\s/).filter(Boolean).map(W=>W.trim());for(let W=0;W<J.length;W++)R=Object.assign(R,P["."+J[W]])}L.hasAttribute("id")&&(R=Object.assign(R,P["#"+L.getAttribute("id")]));function I(J,W,K){K===void 0&&(K=function(ue){return ue.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),ue}),L.hasAttribute(J)&&(C[W]=K(L.getAttribute(J))),R[J]&&(C[W]=K(R[J])),L.style&&L.style[J]!==""&&(C[W]=K(L.style[J]))}function j(J){return Math.max(0,Math.min(1,y(J)))}function Z(J){return Math.max(0,y(J))}return I("fill","fill"),I("fill-opacity","fillOpacity",j),I("fill-rule","fillRule"),I("opacity","opacity",j),I("stroke","stroke"),I("stroke-opacity","strokeOpacity",j),I("stroke-width","strokeWidth",Z),I("stroke-linejoin","strokeLineJoin"),I("stroke-linecap","strokeLineCap"),I("stroke-miterlimit","strokeMiterLimit",Z),I("visibility","visibility"),C}function v(L,C){return L-(C-L)}function p(L,C,R){if(typeof L!="string")throw new TypeError("Invalid input: "+typeof L);let I={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},j=0,Z=1,J=2,W=3,K=j,le=!0,ue="",de="",Te=[];function X(we,Ee,se){let H=new SyntaxError('Unexpected character "'+we+'" at index '+Ee+".");throw H.partial=se,H}function F(){ue!==""&&(de===""?Te.push(Number(ue)):Te.push(Number(ue)*Math.pow(10,Number(de)))),ue="",de=""}let G,ge=L.length;for(let we=0;we<ge;we++){if(G=L[we],Array.isArray(C)&&C.includes(Te.length%R)&&I.FLAGS.test(G)){K=Z,ue=G,F();continue}if(K===j){if(I.WHITESPACE.test(G))continue;if(I.DIGIT.test(G)||I.SIGN.test(G)){K=Z,ue=G;continue}if(I.POINT.test(G)){K=J,ue=G;continue}I.COMMA.test(G)&&(le&&X(G,we,Te),le=!0)}if(K===Z){if(I.DIGIT.test(G)){ue+=G;continue}if(I.POINT.test(G)){ue+=G,K=J;continue}if(I.EXP.test(G)){K=W;continue}I.SIGN.test(G)&&ue.length===1&&I.SIGN.test(ue[0])&&X(G,we,Te)}if(K===J){if(I.DIGIT.test(G)){ue+=G;continue}if(I.EXP.test(G)){K=W;continue}I.POINT.test(G)&&ue[ue.length-1]==="."&&X(G,we,Te)}if(K===W){if(I.DIGIT.test(G)){de+=G;continue}if(I.SIGN.test(G)){if(de===""){de+=G;continue}de.length===1&&I.SIGN.test(de)&&X(G,we,Te)}}I.WHITESPACE.test(G)?(F(),K=j,le=!1):I.COMMA.test(G)?(F(),K=j,le=!0):I.SIGN.test(G)?(F(),K=Z,ue=G):I.POINT.test(G)?(F(),K=J,ue=G):X(G,we,Te)}return F(),Te}let g=["mm","cm","in","pt","pc","px"],x={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function y(L){let C="px";if(typeof L=="string"||L instanceof String)for(let I=0,j=g.length;I<j;I++){let Z=g[I];if(L.endsWith(Z)){C=Z,L=L.substring(0,L.length-Z.length);break}}let R;return C==="px"&&t.defaultUnit!=="px"?R=x.in[t.defaultUnit]/t.defaultDPI:(R=x[C][t.defaultUnit],R<0&&(R=x[C].in*t.defaultDPI)),R*parseFloat(L)}function b(L){if(!(L.hasAttribute("transform")||L.nodeName==="use"&&(L.hasAttribute("x")||L.hasAttribute("y"))))return null;let C=S(L);return E.length>0&&C.premultiply(E[E.length-1]),ae.copy(C),E.push(C),C}function S(L){let C=new kt,R=U;if(L.nodeName==="use"&&(L.hasAttribute("x")||L.hasAttribute("y"))){let I=y(L.getAttribute("x")),j=y(L.getAttribute("y"));C.translate(I,j)}if(L.hasAttribute("transform")){let I=L.getAttribute("transform").split(")");for(let j=I.length-1;j>=0;j--){let Z=I[j].trim();if(Z==="")continue;let J=Z.indexOf("("),W=Z.length;if(J>0&&J<W){let K=Z.slice(0,J),le=p(Z.slice(J+1));switch(R.identity(),K){case"translate":if(le.length>=1){let ue=le[0],de=0;le.length>=2&&(de=le[1]),R.translate(ue,de)}break;case"rotate":if(le.length>=1){let ue=0,de=0,Te=0;ue=le[0]*Math.PI/180,le.length>=3&&(de=le[1],Te=le[2]),k.makeTranslation(-de,-Te),B.makeRotation(ue),O.multiplyMatrices(B,k),k.makeTranslation(de,Te),R.multiplyMatrices(k,O)}break;case"scale":if(le.length>=1){let ue=le[0],de=ue;le.length>=2&&(de=le[1]),R.scale(ue,de)}break;case"skewX":le.length===1&&R.set(1,Math.tan(le[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":le.length===1&&R.set(1,0,0,Math.tan(le[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":le.length===6&&R.set(le[0],le[2],le[4],le[1],le[3],le[5],0,0,1);break}}C.premultiply(R)}}return C}function _(L,C){function R(J){ne.set(J.x,J.y,1).applyMatrix3(C),J.set(ne.x,ne.y)}function I(J){let W=J.xRadius,K=J.yRadius,le=Math.cos(J.aRotation),ue=Math.sin(J.aRotation),de=new he(W*le,W*ue,0),Te=new he(-K*ue,K*le,0),X=de.applyMatrix3(C),F=Te.applyMatrix3(C),G=U.set(X.x,F.x,0,X.y,F.y,0,0,0,1),ge=k.copy(G).invert(),se=B.copy(ge).transpose().multiply(ge).elements,H=D(se[0],se[1],se[4]),re=Math.sqrt(H.rt1),pe=Math.sqrt(H.rt2);if(J.xRadius=1/re,J.yRadius=1/pe,J.aRotation=Math.atan2(H.sn,H.cs),!((J.aEndAngle-J.aStartAngle)%(2*Math.PI)<Number.EPSILON)){let me=k.set(re,0,0,0,pe,0,0,0,1),xe=B.set(H.cs,H.sn,0,-H.sn,H.cs,0,0,0,1),ve=me.multiply(xe).multiply(G),Se=Ie=>{let{x:Le,y:He}=new he(Math.cos(Ie),Math.sin(Ie),0).applyMatrix3(ve);return Math.atan2(He,Le)};J.aStartAngle=Se(J.aStartAngle),J.aEndAngle=Se(J.aEndAngle),M(C)&&(J.aClockwise=!J.aClockwise)}}function j(J){let W=w(C),K=T(C);J.xRadius*=W,J.yRadius*=K;let le=W>Number.EPSILON?Math.atan2(C.elements[1],C.elements[0]):Math.atan2(-C.elements[3],C.elements[4]);J.aRotation+=le,M(C)&&(J.aStartAngle*=-1,J.aEndAngle*=-1,J.aClockwise=!J.aClockwise)}let Z=L.subPaths;for(let J=0,W=Z.length;J<W;J++){let le=Z[J].curves;for(let ue=0;ue<le.length;ue++){let de=le[ue];de.isLineCurve?(R(de.v1),R(de.v2)):de.isCubicBezierCurve?(R(de.v0),R(de.v1),R(de.v2),R(de.v3)):de.isQuadraticBezierCurve?(R(de.v0),R(de.v1),R(de.v2)):de.isEllipseCurve&&(q.set(de.aX,de.aY),R(q),de.aX=q.x,de.aY=q.y,A(C)?I(de):j(de))}}}function M(L){let C=L.elements;return C[0]*C[4]-C[1]*C[3]<0}function A(L){let C=L.elements,R=C[0]*C[3]+C[1]*C[4];if(R===0)return!1;let I=w(L),j=T(L);return Math.abs(R/(I*j))>Number.EPSILON}function w(L){let C=L.elements;return Math.sqrt(C[0]*C[0]+C[1]*C[1])}function T(L){let C=L.elements;return Math.sqrt(C[3]*C[3]+C[4]*C[4])}function D(L,C,R){let I,j,Z,J,W,K=L+R,le=L-R,ue=Math.sqrt(le*le+4*C*C);return K>0?(I=.5*(K+ue),W=1/I,j=L*W*R-C*W*C):K<0?j=.5*(K-ue):(I=.5*ue,j=-.5*ue),le>0?Z=le+ue:Z=le-ue,Math.abs(Z)>2*Math.abs(C)?(W=-2*C/Z,J=1/Math.sqrt(1+W*W),Z=W*J):Math.abs(C)===0?(Z=1,J=0):(W=-.5*Z/C,Z=1/Math.sqrt(1+W*W),J=W*Z),le>0&&(W=Z,Z=-J,J=W),{rt1:I,rt2:j,cs:Z,sn:J}}let N=[],P={},E=[],U=new kt,k=new kt,B=new kt,O=new kt,q=new Ne,ne=new he,ae=new kt,ye=new DOMParser().parseFromString(e,"image/svg+xml");return r(ye.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:N,xml:ye.documentElement}}static createShapes(e){let r={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},i={loc:r.ORIGIN,t:0};function o(v,p,g,x){let y=v.x,b=p.x,S=g.x,_=x.x,M=v.y,A=p.y,w=g.y,T=x.y,D=(_-S)*(M-w)-(T-w)*(y-S),N=(b-y)*(M-w)-(A-M)*(y-S),P=(T-w)*(b-y)-(_-S)*(A-M),E=D/P,U=N/P;if(P===0&&D!==0||E<=0||E>=1||U<0||U>1)return null;if(D===0&&P===0){for(let k=0;k<2;k++)if(s(k===0?g:x,v,p),i.loc==r.ORIGIN){let B=k===0?g:x;return{x:B.x,y:B.y,t:i.t}}else if(i.loc==r.BETWEEN){let B=+(y+i.t*(b-y)).toPrecision(10),O=+(M+i.t*(A-M)).toPrecision(10);return{x:B,y:O,t:i.t}}return null}else{for(let O=0;O<2;O++)if(s(O===0?g:x,v,p),i.loc==r.ORIGIN){let q=O===0?g:x;return{x:q.x,y:q.y,t:i.t}}let k=+(y+E*(b-y)).toPrecision(10),B=+(M+E*(A-M)).toPrecision(10);return{x:k,y:B,t:E}}}function s(v,p,g){let x=g.x-p.x,y=g.y-p.y,b=v.x-p.x,S=v.y-p.y,_=x*S-b*y;if(v.x===p.x&&v.y===p.y){i.loc=r.ORIGIN,i.t=0;return}if(v.x===g.x&&v.y===g.y){i.loc=r.DESTINATION,i.t=1;return}if(_<-Number.EPSILON){i.loc=r.LEFT;return}if(_>Number.EPSILON){i.loc=r.RIGHT;return}if(x*b<0||y*S<0){i.loc=r.BEHIND;return}if(Math.sqrt(x*x+y*y)<Math.sqrt(b*b+S*S)){i.loc=r.BEYOND;return}let M;x!==0?M=b/x:M=S/y,i.loc=r.BETWEEN,i.t=M}function a(v,p){let g=[],x=[];for(let y=1;y<v.length;y++){let b=v[y-1],S=v[y];for(let _=1;_<p.length;_++){let M=p[_-1],A=p[_],w=o(b,S,M,A);w!==null&&g.find(T=>T.t<=w.t+Number.EPSILON&&T.t>=w.t-Number.EPSILON)===void 0&&(g.push(w),x.push(new Ne(w.x,w.y)))}}return x}function c(v,p,g){let x=new Ne;p.getCenter(x);let y=[];return g.forEach(b=>{b.boundingBox.containsPoint(x)&&a(v,b.points).forEach(_=>{y.push({identifier:b.identifier,isCW:b.isCW,point:_})})}),y.sort((b,S)=>b.point.x-S.point.x),y}function l(v,p,g,x,y){(y==null||y==="")&&(y="nonzero");let b=new Ne;v.boundingBox.getCenter(b);let S=[new Ne(g,b.y),new Ne(x,b.y)],_=c(S,v.boundingBox,p);_.sort((N,P)=>N.point.x-P.point.x);let M=[],A=[];_.forEach(N=>{N.identifier===v.identifier?M.push(N):A.push(N)});let w=M[0].point.x,T=[],D=0;for(;D<A.length&&A[D].point.x<w;)T.length>0&&T[T.length-1]===A[D].identifier?T.pop():T.push(A[D].identifier),D++;if(T.push(v.identifier),y==="evenodd"){let N=T.length%2===0,P=T[T.length-2];return{identifier:v.identifier,isHole:N,for:P}}else if(y==="nonzero"){let N=!0,P=null,E=null;for(let U=0;U<T.length;U++){let k=T[U];N?(E=p[k].isCW,N=!1,P=k):E!==p[k].isCW&&(E=p[k].isCW,N=!0)}return{identifier:v.identifier,isHole:N,for:P}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let u=999999999,h=-999999999,f=e.subPaths.map(v=>{let p=v.getPoints(),g=-999999999,x=999999999,y=-999999999,b=999999999;for(let S=0;S<p.length;S++){let _=p[S];_.y>g&&(g=_.y),_.y<x&&(x=_.y),_.x>y&&(y=_.x),_.x<b&&(b=_.x)}return h<=y&&(h=y+1),u>=b&&(u=b-1),{curves:v.curves,points:p,isCW:go.isClockWise(p),identifier:-1,boundingBox:new pv(new Ne(b,x),new Ne(y,g))}});f=f.filter(v=>v.points.length>1);for(let v=0;v<f.length;v++)f[v].identifier=v;let d=f.map(v=>l(v,f,u,h,e.userData?e.userData.style.fillRule:void 0)),m=[];return f.forEach(v=>{if(!d[v.identifier].isHole){let g=new nl;g.curves=v.curves,d.filter(y=>y.isHole&&y.for===v.identifier).forEach(y=>{let b=f[y.identifier],S=new ya;S.curves=b.curves,g.holes.push(S)}),m.push(g)}}),m}static getStrokeStyle(e,t,r,i,o){return e=e!==void 0?e:1,t=t!==void 0?t:"#000",r=r!==void 0?r:"miter",i=i!==void 0?i:"butt",o=o!==void 0?o:4,{strokeColor:t,strokeWidth:e,strokeLineJoin:r,strokeLineCap:i,strokeMiterLimit:o}}static pointsToStroke(e,t,r,i){let o=[],s=[],a=[];if(n.pointsToStrokeWithBuffers(e,t,r,i,o,s,a)===0)return null;let c=new Yt;return c.setAttribute("position",new Ye(o,3)),c.setAttribute("normal",new Ye(s,3)),c.setAttribute("uv",new Ye(a,2)),c}static pointsToStrokeWithBuffers(e,t,r,i,o,s,a,c){let l=new Ne,u=new Ne,h=new Ne,f=new Ne,d=new Ne,m=new Ne,v=new Ne,p=new Ne,g=new Ne,x=new Ne,y=new Ne,b=new Ne,S=new Ne,_=new Ne,M=new Ne,A=new Ne,w=new Ne;r=r!==void 0?r:12,i=i!==void 0?i:.001,c=c!==void 0?c:0,e=le(e);let T=e.length;if(T<2)return 0;let D=e[0].equals(e[T-1]),N,P=e[0],E,U=t.strokeWidth/2,k=1/(T-1),B=0,O,q,ne,ae,ye=!1,fe=0,L=c*3,C=c*2;R(e[0],e[1],l).multiplyScalar(U),p.copy(e[0]).sub(l),g.copy(e[0]).add(l),x.copy(p),y.copy(g);for(let ue=1;ue<T;ue++){N=e[ue],ue===T-1?D?E=e[1]:E=void 0:E=e[ue+1];let de=l;if(R(P,N,de),h.copy(de).multiplyScalar(U),b.copy(N).sub(h),S.copy(N).add(h),O=B+k,q=!1,E!==void 0){R(N,E,u),h.copy(u).multiplyScalar(U),_.copy(N).sub(h),M.copy(N).add(h),ne=!0,h.subVectors(E,P),de.dot(h)<0&&(ne=!1),ue===1&&(ye=ne),h.subVectors(E,N),h.normalize();let Te=Math.abs(de.dot(h));if(Te>Number.EPSILON){let X=U/Te;h.multiplyScalar(-X),f.subVectors(N,P),d.copy(f).setLength(X).add(h),A.copy(d).negate();let F=d.length(),G=f.length();f.divideScalar(G),m.subVectors(E,N);let ge=m.length();switch(m.divideScalar(ge),f.dot(A)<G&&m.dot(A)<ge&&(q=!0),w.copy(d).add(N),A.add(N),ae=!1,q?ne?(M.copy(A),S.copy(A)):(_.copy(A),b.copy(A)):Z(),t.strokeLineJoin){case"bevel":J(ne,q,O);break;case"round":W(ne,q),ne?j(N,b,_,O,0):j(N,M,S,O,1);break;case"miter":case"miter-clip":default:let we=U*t.strokeMiterLimit/F;if(we<1)if(t.strokeLineJoin!=="miter-clip"){J(ne,q,O);break}else W(ne,q),ne?(m.subVectors(w,b).multiplyScalar(we).add(b),v.subVectors(w,_).multiplyScalar(we).add(_),I(b,O,0),I(m,O,0),I(N,O,.5),I(N,O,.5),I(m,O,0),I(v,O,0),I(N,O,.5),I(v,O,0),I(_,O,0)):(m.subVectors(w,S).multiplyScalar(we).add(S),v.subVectors(w,M).multiplyScalar(we).add(M),I(S,O,1),I(m,O,1),I(N,O,.5),I(N,O,.5),I(m,O,1),I(v,O,1),I(N,O,.5),I(v,O,1),I(M,O,1));else q?(ne?(I(g,B,1),I(p,B,0),I(w,O,0),I(g,B,1),I(w,O,0),I(A,O,1)):(I(g,B,1),I(p,B,0),I(w,O,1),I(p,B,0),I(A,O,0),I(w,O,1)),ne?_.copy(w):M.copy(w)):ne?(I(b,O,0),I(w,O,0),I(N,O,.5),I(N,O,.5),I(w,O,0),I(_,O,0)):(I(S,O,1),I(w,O,1),I(N,O,.5),I(N,O,.5),I(w,O,1),I(M,O,1)),ae=!0;break}}else Z()}else Z();!D&&ue===T-1&&K(e[0],x,y,ne,!0,B),B=O,P=N,p.copy(_),g.copy(M)}if(!D)K(N,b,S,ne,!1,O);else if(q&&o){let ue=w,de=A;ye!==ne&&(ue=A,de=w),ne?(ae||ye)&&(de.toArray(o,0*3),de.toArray(o,3*3),ae&&ue.toArray(o,1*3)):(ae||!ye)&&(de.toArray(o,1*3),de.toArray(o,3*3),ae&&ue.toArray(o,0*3))}return fe;function R(ue,de,Te){return Te.subVectors(de,ue),Te.set(-Te.y,Te.x).normalize()}function I(ue,de,Te){o&&(o[L]=ue.x,o[L+1]=ue.y,o[L+2]=0,s&&(s[L]=0,s[L+1]=0,s[L+2]=1),L+=3,a&&(a[C]=de,a[C+1]=Te,C+=2)),fe+=3}function j(ue,de,Te,X,F){l.copy(de).sub(ue).normalize(),u.copy(Te).sub(ue).normalize();let G=Math.PI,ge=l.dot(u);Math.abs(ge)<1&&(G=Math.abs(Math.acos(ge))),G/=r,h.copy(de);for(let we=0,Ee=r-1;we<Ee;we++)f.copy(h).rotateAround(ue,G),I(h,X,F),I(f,X,F),I(ue,X,.5),h.copy(f);I(f,X,F),I(Te,X,F),I(ue,X,.5)}function Z(){I(g,B,1),I(p,B,0),I(b,O,0),I(g,B,1),I(b,O,0),I(S,O,1)}function J(ue,de,Te){de?ue?(I(g,B,1),I(p,B,0),I(b,O,0),I(g,B,1),I(b,O,0),I(A,O,1),I(b,Te,0),I(_,Te,0),I(A,Te,.5)):(I(g,B,1),I(p,B,0),I(S,O,1),I(p,B,0),I(A,O,0),I(S,O,1),I(S,Te,1),I(A,Te,0),I(M,Te,1)):ue?(I(b,Te,0),I(_,Te,0),I(N,Te,.5)):(I(S,Te,1),I(M,Te,0),I(N,Te,.5))}function W(ue,de){de&&(ue?(I(g,B,1),I(p,B,0),I(b,O,0),I(g,B,1),I(b,O,0),I(A,O,1),I(b,B,0),I(N,O,.5),I(A,O,1),I(N,O,.5),I(_,B,0),I(A,O,1)):(I(g,B,1),I(p,B,0),I(S,O,1),I(p,B,0),I(A,O,0),I(S,O,1),I(S,B,1),I(A,O,0),I(N,O,.5),I(N,O,.5),I(A,O,0),I(M,B,1)))}function K(ue,de,Te,X,F,G){switch(t.strokeLineCap){case"round":F?j(ue,Te,de,G,.5):j(ue,de,Te,G,.5);break;case"square":if(F)l.subVectors(de,ue),u.set(l.y,-l.x),h.addVectors(l,u).add(ue),f.subVectors(u,l).add(ue),X?(h.toArray(o,1*3),f.toArray(o,0*3),f.toArray(o,3*3)):(h.toArray(o,1*3),a[3*2+1]===1?f.toArray(o,3*3):h.toArray(o,3*3),f.toArray(o,0*3));else{l.subVectors(Te,ue),u.set(l.y,-l.x),h.addVectors(l,u).add(ue),f.subVectors(u,l).add(ue);let ge=o.length;X?(h.toArray(o,ge-1*3),f.toArray(o,ge-2*3),f.toArray(o,ge-4*3)):(f.toArray(o,ge-2*3),h.toArray(o,ge-1*3),f.toArray(o,ge-4*3))}break;case"butt":default:break}}function le(ue){let de=!1;for(let X=1,F=ue.length-1;X<F;X++)if(ue[X].distanceTo(ue[X+1])<i){de=!0;break}if(!de)return ue;let Te=[];Te.push(ue[0]);for(let X=1,F=ue.length-1;X<F;X++)ue[X].distanceTo(ue[X+1])>=i&&Te.push(ue[X]);return Te.push(ue[ue.length-1]),Te}}};var E0=class extends is{constructor(){super()}CanImportExtension(e){return e==="svg"}GetUpDirection(){return Mt.Z}CreateLoader(e){return new Ep(e)}GetMainObject(e){function t(s){let a=s.userData.style;return!(a.fill===void 0||a.fill==="none")}function r(s,a,c){let l=null;for(let u of s)if(u.style===a&&u.opacity===c){l=u.material;break}return l===null&&(l=new Rn({color:new Ke().setStyle(a),opacity:c,transparent:c<1}),s.push({style:a,opacity:c,material:l})),l}let i=[],o=new an;o.rotation.x=Math.PI;for(let s of e.paths){let a=Ep.createShapes(s);if(t(s)){let c=s.userData.style,l=r(i,c.fill,c.opacity);for(let u of a){let h=new av(u,{depth:10,bevelEnabled:!1}),f=new hn(h,l);f.name=s.userData.node.id,o.add(f)}}}return o}};var Ap=class{constructor(){this.name=null,this.material=null}SetName(e){return this.name=e,this}SetMaterial(e){return this.material=e,this}},_l=class{constructor(e){this.params=e||new Ap,this.mesh=new Un,this.params.name!==null&&this.mesh.SetName(this.params.name),this.curve=null}GetMesh(){return this.mesh}AddVertex(e,t,r){let i=new $e(e,t,r);return this.mesh.AddVertex(i)}AddVertices(e){let t=[];for(let r=0;r<e.length;r++){let i=e[r];t.push(this.AddVertex(i.x,i.y,i.z))}return t}SetCurve(e){this.curve=e}ResetCurve(){this.curve=null}AddTriangle(e,t,r){let i=new Nn(e,t,r);return this.params.material!==null&&(i.mat=this.params.material),this.curve!==null&&i.SetCurve(this.curve),this.mesh.AddTriangle(i)}AddTriangleInverted(e,t,r){this.AddTriangle(e,r,t)}AddConvexPolygon(e){for(let t=0;t<e.length-2;t++)this.AddTriangle(e[0],e[t+1],e[t+2])}AddConvexPolygonInverted(e){for(let t=0;t<e.length-2;t++)this.AddTriangleInverted(e[0],e[t+1],e[t+2])}},gf=class{constructor(e){this.generator=e}GenerateSurfaceBetweenPolygons(e,t){if(e.length!==t.length)return;let r=e.length;for(let i=0;i<r;i++){let o=i,s=i<r-1?o+1:0;this.generator.AddConvexPolygon([e[o],e[s],t[s],t[o]])}}GenerateTriangleFan(e,t){let r=e.length;for(let i=0;i<r;i++){let o=i,s=i<r-1?o+1:0;this.generator.AddTriangle(t,e[o],e[s])}}};function ZM(n,e){return new on(n*Math.cos(e),n*Math.sin(e))}function JM(n,e,t,r){if(!uo(e)||!uo(t)||!uo(r))return null;let i=new _l(n);return i.AddVertex(0,0,0),i.AddVertex(e,0,0),i.AddVertex(e,t,0),i.AddVertex(0,t,0),i.AddVertex(0,0,r),i.AddVertex(e,0,r),i.AddVertex(e,t,r),i.AddVertex(0,t,r),i.AddConvexPolygon([0,3,2,1]),i.AddConvexPolygon([0,1,5,4]),i.AddConvexPolygon([1,2,6,5]),i.AddConvexPolygon([2,3,7,6]),i.AddConvexPolygon([3,0,4,7]),i.AddConvexPolygon([4,5,6,7]),i.GetMesh()}function ww(n,e,t,r,i,o){if(na(e)||na(t)||!uo(r)||i<3)return null;let s=ta(e),a=ta(t);if(s&&a)return null;let c=new _l(n),l=new gf(c),u=2*Math.PI/i,h=o?1:null,f=[];if(s)f.push(c.AddVertex(0,0,r));else for(let m=0;m<i;m++){let v=ZM(e,m*u);f.push(c.AddVertex(v.x,v.y,r))}let d=[];if(a)d.push(c.AddVertex(0,0,0));else for(let m=0;m<i;m++){let v=ZM(t,m*u);d.push(c.AddVertex(v.x,v.y,0))}return s?(c.SetCurve(h),l.GenerateTriangleFan(d,f[0]),c.ResetCurve(),c.AddConvexPolygonInverted(d)):a?(c.SetCurve(h),l.GenerateTriangleFan(f.slice().reverse(),d[0]),c.ResetCurve(),c.AddConvexPolygon(f)):(c.SetCurve(h),l.GenerateSurfaceBetweenPolygons(d,f),c.ResetCurve(),c.AddConvexPolygonInverted(d),c.AddConvexPolygon(f)),c.GetMesh()}function QM(n,e,t,r,i){return ww(n,e,e,t,r,i)}function $M(n,e,t,r){function i(d,m,v){return new $e(d*Math.sin(m)*Math.cos(v),d*Math.sin(m)*Math.sin(v),d*Math.cos(m))}if(!uo(e)||t<3)return null;let o=new _l(n),s=new gf(o);o.SetCurve(r?1:null);let a=[],c=t+1,l=Math.PI/t,u=2*Math.PI/t;for(let d=1;d<c-1;d++){let m=[],v=d*l;for(let p=0;p<t;p++){let g=p*u,x=i(e,v,-g);m.push(o.AddVertex(x.x,x.y,x.z))}d>1&&s.GenerateSurfaceBetweenPolygons(a[a.length-1],m),a.push(m)}let h=o.AddVertex(0,0,e),f=o.AddVertex(0,0,-e);return s.GenerateTriangleFan(a[0].slice().reverse(),h),s.GenerateTriangleFan(a[a.length-1],f),o.ResetCurve(),o.GetMesh()}function eE(n,e,t){function r(o,s,a,c,l){let u=new $e(a,c,l);u.MultiplyScalar(s/u.Length()),o.AddVertex(u.x,u.y,u.z)}if(!uo(t))return null;let i=new _l(n);if(e==="tetrahedron"){let o=1;r(i,t,+o,+o,+o),r(i,t,-o,-o,+o),r(i,t,-o,+o,-o),r(i,t,+o,-o,-o),i.AddTriangle(0,1,3),i.AddTriangle(0,2,1),i.AddTriangle(0,3,2),i.AddTriangle(1,2,3)}else if(e==="hexahedron"){let o=1;r(i,t,+o,+o,+o),r(i,t,+o,+o,-o),r(i,t,+o,-o,+o),r(i,t,+o,-o,-o),r(i,t,-o,+o,+o),r(i,t,-o,+o,-o),r(i,t,-o,-o,+o),r(i,t,-o,-o,-o),i.AddConvexPolygon([0,1,5,4]),i.AddConvexPolygon([0,2,3,1]),i.AddConvexPolygon([0,4,6,2]),i.AddConvexPolygon([1,3,7,5]),i.AddConvexPolygon([2,6,7,3]),i.AddConvexPolygon([4,5,7,6])}else if(e==="octahedron"){let o=1,s=0;r(i,t,+o,+s,+s),r(i,t,-o,+s,+s),r(i,t,+s,+o,+s),r(i,t,+s,-o,+s),r(i,t,+s,+s,+o),r(i,t,+s,+s,-o),i.AddTriangle(0,2,4),i.AddTriangle(0,3,5),i.AddTriangle(0,4,3),i.AddTriangle(0,5,2),i.AddTriangle(1,2,5),i.AddTriangle(1,3,4),i.AddTriangle(1,4,2),i.AddTriangle(1,5,3)}else if(e==="dodecahedron"){let o=1,s=0,a=(1+Math.sqrt(5))/2,c=1/a;r(i,t,+o,+o,+o),r(i,t,+o,+o,-o),r(i,t,+o,-o,+o),r(i,t,-o,+o,+o),r(i,t,+o,-o,-o),r(i,t,-o,+o,-o),r(i,t,-o,-o,+o),r(i,t,-o,-o,-o),r(i,t,+s,+c,+a),r(i,t,+s,+c,-a),r(i,t,+s,-c,+a),r(i,t,+s,-c,-a),r(i,t,+c,+a,+s),r(i,t,+c,-a,+s),r(i,t,-c,+a,+s),r(i,t,-c,-a,+s),r(i,t,+a,+s,+c),r(i,t,-a,+s,+c),r(i,t,+a,+s,-c),r(i,t,-a,+s,-c),i.AddConvexPolygon([0,8,10,2,16]),i.AddConvexPolygon([0,16,18,1,12]),i.AddConvexPolygon([0,12,14,3,8]),i.AddConvexPolygon([1,9,5,14,12]),i.AddConvexPolygon([1,18,4,11,9]),i.AddConvexPolygon([2,10,6,15,13]),i.AddConvexPolygon([2,13,4,18,16]),i.AddConvexPolygon([3,14,5,19,17]),i.AddConvexPolygon([3,17,6,10,8]),i.AddConvexPolygon([4,13,15,7,11]),i.AddConvexPolygon([5,9,11,7,19]),i.AddConvexPolygon([6,17,19,7,15])}else if(e==="icosahedron"){let o=1,s=0,a=(1+Math.sqrt(5))/2;r(i,t,+s,+o,+a),r(i,t,+s,+o,-a),r(i,t,+s,-o,+a),r(i,t,+s,-o,-a),r(i,t,+o,+a,+s),r(i,t,+o,-a,+s),r(i,t,-o,+a,+s),r(i,t,-o,-a,+s),r(i,t,+a,+s,+o),r(i,t,+a,+s,-o),r(i,t,-a,+s,+o),r(i,t,-a,+s,-o),i.AddTriangle(0,2,8),i.AddTriangle(0,4,6),i.AddTriangle(0,6,10),i.AddTriangle(0,8,4),i.AddTriangle(0,10,2),i.AddTriangle(1,3,11),i.AddTriangle(1,4,9),i.AddTriangle(1,6,4),i.AddTriangle(1,9,3),i.AddTriangle(1,11,6),i.AddTriangle(2,5,8),i.AddTriangle(2,7,5),i.AddTriangle(2,10,7),i.AddTriangle(3,5,7),i.AddTriangle(3,7,11),i.AddTriangle(3,9,5),i.AddTriangle(4,8,9),i.AddTriangle(5,9,8),i.AddTriangle(6,11,10),i.AddTriangle(7,10,11)}return i.GetMesh()}var vf=class{constructor(e,t){this.parentElement=e,this.parameters={},bs(t)&&(this.parameters=t),this.canvas=document.createElement("canvas"),this.parentElement.appendChild(this.canvas),this.viewer=new Us,this.viewer.Init(this.canvas);let r=this.parentElement.clientWidth,i=this.parentElement.clientHeight;this.viewer.Resize(r,i),this.parameters.projectionMode&&this.viewer.SetProjectionMode(this.parameters.projectionMode),this.parameters.backgroundColor&&this.viewer.SetBackgroundColor(this.parameters.backgroundColor),this.parameters.edgeSettings&&this.viewer.SetEdgeSettings(this.parameters.edgeSettings),this.parameters.environmentSettings&&this.viewer.SetEnvironmentMapSettings(this.parameters.environmentSettings),this.model=null,this.modelLoader=new wl,window.addEventListener("resize",()=>{this.Resize()})}LoadModelFromUrlList(e){hl(e);let t=fl(e);this.LoadModelFromInputFiles(t)}LoadModelFromFileList(e){let t=hh(e);this.LoadModelFromInputFiles(t)}LoadModelFromInputFiles(e){if(e===null||e.length===0)return;this.viewer.Clear();let t=new Vi;this.parameters.defaultColor&&(t.defaultColor=this.parameters.defaultColor),this.parameters.defaultLineColor&&(t.defaultLineColor=this.parameters.defaultLineColor),this.model=null;let r=null;this.modelLoader.LoadModel(e,t,{onLoadStart:()=>{this.canvas.style.display="none",r=document.createElement("div"),r.innerHTML=be("Loading model..."),this.parentElement.appendChild(r)},onFileListProgress:(i,o)=>{},onFileLoadProgress:(i,o)=>{},onImportStart:()=>{r.innerHTML=be("Importing model...")},onVisualizationStart:()=>{r.innerHTML=be("Visualizing model...")},onModelFinished:(i,o)=>{this.parentElement.removeChild(r),this.canvas.style.display="inherit",this.viewer.SetMainObject(o);let s=this.viewer.GetBoundingSphere(a=>!0);this.viewer.AdjustClippingPlanesToSphere(s),this.parameters.camera?this.viewer.SetCamera(this.parameters.camera):(this.viewer.SetUpVector(Mt.Y,!1),this.viewer.FitSphereToWindow(s,!1)),this.model=i.model,this.parameters.onModelLoaded&&this.parameters.onModelLoaded()},onTextureLoaded:()=>{this.viewer.Render()},onLoadError:i=>{let o=be("Unknown error.");i.code===Hr.NoImportableFile?o=be("No importable file found."):i.code===Hr.FailedToLoadFile?o=be("Failed to load file for import."):i.code===Hr.ImportFailed&&(o=be("Failed to import model.")),i.message!==null&&(o+=" ("+i.message+")"),r.innerHTML=o}})}GetViewer(){return this.viewer}GetModel(){return this.model}Resize(){let e=this.parentElement.clientWidth,t=this.parentElement.clientHeight;this.viewer.Resize(e,t)}Destroy(){this.modelLoader.Destroy(),this.viewer.Destroy(),this.model=null}};function Sw(n,e,t){let r=new vf(n,t);return r.LoadModelFromUrlList(e),r}function tE(n,e,t){let r=new vf(n,t);return r.LoadModelFromFileList(e),r}function nE(n){function e(i){let o=null,s=i.getAttribute("camera");s&&(o=bn.StringToCamera(s));let a=null,c=i.getAttribute("projectionmode");c&&(a=bn.StringToProjectionMode(c));let l=null,u=i.getAttribute("backgroundcolor");u&&(l=bn.StringToRGBAColor(u));let h=null,f=i.getAttribute("defaultcolor");f&&(h=bn.StringToRGBColor(f));let d=null,m=i.getAttribute("defaultlinecolor");m&&(d=bn.StringToRGBColor(m));let v=null,p=i.getAttribute("edgesettings");p&&(v=bn.StringToEdgeSettings(p));let g=null,x=i.getAttribute("environmentmap");if(x){let S=x.split(",");if(S.length===6){let _=!1,M=i.getAttribute("environmentmapbg");M&&M==="true"&&(_=!0),g=new as(S,_)}}let y=null,b=i.getAttribute("model");return b&&(y=bn.StringToModelUrls(b)),Sw(i,y,{camera:o,projectionMode:a,backgroundColor:l,defaultLineColor:d,defaultColor:h,edgeSettings:v,environmentSettings:g})}let t=[],r=document.getElementsByClassName("online_3d_viewer");for(let i=0;i<r.length;i++){let o=r[i],s=e(o);t.push(s)}return t}function Tw(n,e,t,r,i){let o=rE.create({el:n,theme:"monolith",position:"left-start",swatches:r,comparison:!1,default:t,components:{preview:!1,opacity:e,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!1}}});return o.on("change",(s,a,c)=>{let l=s.toRGBA();i(parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10),vr(l[3]))}),o}var A0=class extends bp{constructor(){super()}ShowPopup(e,t,r,i){let o=super.Init(()=>HM(e,o)),s=[{element:null,name:"fishermans_bastion"},{element:null,name:"citadella"},{element:null,name:"maskonaive"},{element:null,name:"teide"},{element:null,name:"ice_river"},{element:null,name:"park"}];if(t===Sr.Phong){s.unshift({element:null,name:"noimage"});for(let a of s){a.element=In(o,"img","ov_environment_map_preview"),a.element.setAttribute("src","assets/envmaps/"+a.name+".jpg");let c=!1;r.backgroundIsEnvMap?c=a.name===r.environmentMapName:c=a.name==="noimage",c&&a.element.classList.add("selected"),a.element.addEventListener("click",()=>{for(let l of s)l.element.classList.remove("selected");a.element.classList.add("selected"),a.name==="noimage"?(r.backgroundIsEnvMap=!1,r.environmentMapName="fishermans_bastion"):(r.backgroundIsEnvMap=!0,r.environmentMapName=a.name),i.onEnvironmentMapChanged()})}}else if(t===Sr.Physical){if(i.getProjectionMode()===nr.Perspective){let c=Fe(o,"ov_environment_map_checkbox"),l=vp(c,"use_as_background","Use as background image",r.backgroundIsEnvMap,()=>{r.backgroundIsEnvMap=l.checked,i.onEnvironmentMapChanged()})}for(let c of s)c.element=In(o,"img","ov_environment_map_preview"),c.element.setAttribute("src","assets/envmaps/"+c.name+".jpg"),c.name===r.environmentMapName&&c.element.classList.add("selected"),c.element.addEventListener("click",()=>{for(let l of s)l.element.classList.remove("selected");c.element.classList.add("selected"),r.environmentMapName=c.name,i.onEnvironmentMapChanged()})}o.classList.add("sidebar"),this.Open()}Update(){}},C0=class{constructor(e,t,r){this.parentDiv=e,this.contentDiv=Fe(this.parentDiv,"ov_sidebar_settings_section"),Fe(this.contentDiv,"ov_sidebar_title",t),this.settings=r,this.callbacks=null}Init(e){this.callbacks=e}Update(){}UpdateVisibility(){}Clear(){}},Mw=class extends C0{constructor(e,t){super(e,be("Model Display"),t),this.backgroundColorPicker=null,this.environmentMapPhongDiv=null,this.environmentMapPhongInput=null,this.environmentMapPbrDiv=null,this.environmentMapPbrInput=null,this.environmentMapPopup=null,this.edgeDisplayToggle=null,this.edgeColorPicker=null,this.thresholdSlider=null,this.thresholdSliderValue=null,this.edgeSettingsDiv=null}Init(e){super.Init(e);let t=Fe(this.contentDiv,"ov_sidebar_parameter"),r=Fe(t,"ov_color_picker");Fe(t,null,be("Background Color"));let i=["#ffffffff","#e3e3e3ff","#c9c9c9ff","#898989ff","#5f5f5fff","#494949ff","#383838ff","#0f0f0fff"],o="#"+pd(this.settings.backgroundColor);this.backgroundColorPicker=Tw(r,!0,o,i,(f,d,m,v)=>{this.settings.backgroundColor=new di(f,d,m,v),this.callbacks.onBackgroundColorChanged()}),this.environmentMapPhongDiv=Fe(this.contentDiv,"ov_sidebar_parameter"),this.environmentMapPhongInput=Fe(this.environmentMapPhongDiv,"ov_sidebar_image_picker"),Fe(this.environmentMapPhongDiv,null,be("Background Image")),this.environmentMapPhongInput.addEventListener("click",()=>{this.environmentMapPopup=new A0,this.environmentMapPopup.ShowPopup(this.environmentMapPhongInput,Sr.Phong,this.settings,{getProjectionMode:()=>this.callbacks.getProjectionMode(),onEnvironmentMapChanged:()=>{this.UpdateEnvironmentMap(),this.callbacks.onEnvironmentMapChanged()}})}),this.environmentMapPbrDiv=Fe(this.contentDiv,"ov_sidebar_parameter"),this.environmentMapPbrInput=Fe(this.environmentMapPbrDiv,"ov_sidebar_image_picker"),Fe(this.environmentMapPbrDiv,null,be("Environment")),this.environmentMapPbrInput.addEventListener("click",()=>{this.environmentMapPopup=new A0,this.environmentMapPopup.ShowPopup(this.environmentMapPbrInput,Sr.Physical,this.settings,{getProjectionMode:()=>this.callbacks.getProjectionMode(),onEnvironmentMapChanged:()=>{this.UpdateEnvironmentMap(),this.callbacks.onEnvironmentMapChanged()}})}),this.UpdateEnvironmentMap();let s=Fe(this.contentDiv,"ov_sidebar_parameter");this.edgeDisplayToggle=VM(s,"ov_sidebar_parameter_toggle"),Fe(s,"ov_sidebar_parameter_text",be("Show Edges")),this.edgeSettingsDiv=Fe(this.contentDiv,"ov_sidebar_settings_padded"),this.edgeDisplayToggle.OnChange(()=>{$t(this.edgeSettingsDiv,this.edgeDisplayToggle.GetStatus()),this.settings.edgeSettings.showEdges=this.edgeDisplayToggle.GetStatus(),this.callbacks.onShowEdgesChange()});let a=Fe(this.edgeSettingsDiv,"ov_sidebar_settings_row"),c=["#ffffff","#e3e3e3","#c9c9c9","#898989","#5f5f5f","#494949","#383838","#0f0f0f"],l=Fe(a,"ov_color_picker"),u="#"+pi(this.settings.edgeSettings.edgeColor);this.edgeColorPicker=Tw(l,!1,u,c,(f,d,m,v)=>{this.settings.edgeSettings.edgeColor=new ft(f,d,m),this.callbacks.onEdgeColorChange()}),Fe(a,null,be("Edge Color"));let h=Fe(this.edgeSettingsDiv,"ov_sidebar_settings_row large");this.thresholdSlider=GM(h,0,90),this.thresholdSlider.setAttribute("title",be("Edge Angle Threshold")),this.thresholdSliderValue=In(h,"span","ov_slider_label"),this.thresholdSlider.addEventListener("input",()=>{this.thresholdSliderValue.innerHTML=this.thresholdSlider.value}),this.thresholdSlider.addEventListener("change",()=>{this.settings.edgeSettings.edgeThreshold=this.thresholdSlider.value,this.callbacks.onEdgeThresholdChange()}),this.thresholdSlider.value=this.settings.edgeSettings.edgeThreshold,this.thresholdSliderValue.innerHTML=this.settings.edgeSettings.edgeThreshold,this.edgeDisplayToggle.SetStatus(this.settings.edgeSettings.showEdges),$t(this.edgeSettingsDiv,this.settings.edgeSettings.showEdges)}UpdateEnvironmentMap(){function e(t,r){t.style.backgroundImage="url('assets/envmaps/"+r+".jpg')"}this.environmentMapPhongDiv!==null&&(this.settings.backgroundIsEnvMap?(e(this.environmentMapPhongInput,this.settings.environmentMapName),this.environmentMapPhongInput.classList.remove("ov_environment_map_preview_no_color")):(this.environmentMapPhongInput.style.backgroundImage=null,this.environmentMapPhongInput.classList.add("ov_environment_map_preview_no_color"))),this.environmentMapPbrDiv!==null&&e(this.environmentMapPbrInput,this.settings.environmentMapName)}Update(){this.backgroundColorPicker!==null&&this.backgroundColorPicker.setColor("#"+pd(this.settings.backgroundColor)),(this.environmentMapPbrInput!==null||this.environmentMapPhongDiv!==null)&&this.UpdateEnvironmentMap(),this.edgeDisplayToggle!==null&&(this.edgeDisplayToggle.SetStatus(this.settings.edgeSettings.showEdges),$t(this.edgeSettingsDiv,this.settings.edgeSettings.showEdges),this.edgeColorPicker.setColor("#"+pi(this.settings.edgeSettings.edgeColor)),this.thresholdSlider.value=this.settings.edgeSettings.edgeThreshold,this.thresholdSliderValue.innerHTML=this.settings.edgeSettings.edgeThreshold)}UpdateVisibility(){let e=this.callbacks.getShadingType()===Sr.Physical;if(this.environmentMapPhongDiv!==null){let t=this.callbacks.getProjectionMode()===nr.Perspective;$t(this.environmentMapPhongDiv,!e&&t)}this.environmentMapPbrDiv!==null&&$t(this.environmentMapPbrDiv,e)}Clear(){this.environmentMapPopup!==null&&(this.environmentMapPopup.Close(),this.environmentMapPopup=null),this.backgroundColorPicker!==null&&this.backgroundColorPicker.hide(),this.edgeColorPicker!==null&&this.edgeColorPicker.hide()}},Ew=class extends C0{constructor(e,t){super(e,be("Import Settings"),t),this.defaultColorPickerDiv=null,this.defaultLineColorPickerDiv=null,this.defaultColorPicker=null,this.defaultLineColorPicker=null}Init(e){function t(r,i,o,s){let a=Fe(r,"ov_sidebar_parameter"),c=Fe(a,"ov_color_picker");Fe(a,null,i);let l=["#ffffff","#e3e3e3","#cc3333","#fac832","#4caf50","#3393bd","#9b27b0","#fda4b8"],u="#"+pi(o);return Tw(c,!1,u,l,s)}super.Init(e),this.defaultColorPickerDiv=Fe(this.contentDiv),this.defaultColorPicker=t(this.defaultColorPickerDiv,be("Default Color"),this.settings.defaultColor,(r,i,o,s)=>{this.settings.defaultColor=new ft(r,i,o),this.callbacks.onDefaultColorChanged()}),this.defaultLineColorPickerDiv=Fe(this.contentDiv),this.defaultLineColorPicker=t(this.defaultLineColorPickerDiv,be("Default Line Color"),this.settings.defaultLineColor,(r,i,o,s)=>{this.settings.defaultLineColor=new ft(r,i,o),this.callbacks.onDefaultColorChanged()})}Update(){this.defaultColorPicker!==null&&this.defaultColorPicker.setColor("#"+pi(this.settings.defaultColor)),this.defaultLineColorPicker!==null&&this.defaultLineColorPicker.setColor("#"+pi(this.settings.defaultLineColor))}UpdateVisibility(){if(this.contentDiv!==null){let e=this.callbacks.getDefaultMaterials();if(e.length===0)$t(this.contentDiv,!1);else{let t=new Set;for(let r of e)t.add(r.source);$t(this.contentDiv,!0),$t(this.defaultColorPickerDiv,t.has(Bn.DefaultFace)),$t(this.defaultLineColorPickerDiv,t.has(Bn.DefaultLine))}}}Clear(){this.defaultColorPicker!==null&&this.defaultColorPicker.hide(),this.defaultLineColorPicker!==null&&this.defaultLineColorPicker.hide()}},I0=class extends sf{constructor(e,t){super(e),this.settings=t,this.sectionsDiv=Fe(this.contentDiv,"ov_sidebar_settings_sections ov_thin_scrollbar"),this.modelDisplaySection=new Mw(this.sectionsDiv,this.settings),this.importParametersSection=new Ew(this.sectionsDiv,this.settings),this.resetToDefaultsButton=Fe(this.contentDiv,"ov_button ov_panel_button outline","Reset to Default"),this.resetToDefaultsButton.addEventListener("click",()=>{this.ResetToDefaults()})}GetName(){return be("Settings")}HasTitle(){return!1}GetIcon(){return"settings"}Clear(){this.modelDisplaySection.Clear(),this.importParametersSection.Clear()}Init(e){super.Init(e),this.modelDisplaySection.Init({getShadingType:()=>this.callbacks.getShadingType(),getProjectionMode:()=>this.callbacks.getProjectionMode(),onEnvironmentMapChanged:()=>{this.callbacks.onEnvironmentMapChanged()},onBackgroundColorChanged:()=>{this.callbacks.onBackgroundColorChanged()},onShowEdgesChange:()=>{this.callbacks.onEdgeDisplayChanged()},onEdgeColorChange:()=>{this.callbacks.onEdgeDisplayChanged()},onEdgeThresholdChange:()=>{this.callbacks.onEdgeDisplayChanged()}}),this.importParametersSection.Init({getDefaultMaterials:()=>this.callbacks.getDefaultMaterials(),onDefaultColorChanged:()=>{this.callbacks.onDefaultColorChanged()}})}UpdateControlsStatus(){this.modelDisplaySection.Update(),this.importParametersSection.Update()}UpdateControlsVisibility(){this.modelDisplaySection.UpdateVisibility(),this.importParametersSection.UpdateVisibility(),this.Resize()}ResetToDefaults(){let e=new Mc(this.settings.themeId);this.settings.environmentMapName=e.environmentMapName,this.settings.backgroundIsEnvMap=e.backgroundIsEnvMap,this.settings.backgroundColor=e.backgroundColor,this.settings.defaultLineColor=e.defaultLineColor,this.settings.defaultColor=e.defaultColor,this.settings.edgeSettings=e.edgeSettings,this.settings.themeId=e.themeId,this.UpdateControlsStatus(),this.callbacks.onEnvironmentMapChanged()}Resize(){let e=this.resetToDefaultsButton.offsetHeight,t=this.parentDiv.offsetHeight;ho(this.sectionsDiv,t-e)}};var R0=class{constructor(e,t){this.mainDiv=e,this.panelSet=new $h(e),this.detailsPanel=new S0(this.panelSet.GetContentDiv()),this.settingsPanel=new I0(this.panelSet.GetContentDiv(),t),this.panelSet.AddPanel(this.detailsPanel),this.panelSet.AddPanel(this.settingsPanel),this.panelSet.ShowPanel(this.detailsPanel)}IsPanelsVisible(){return this.panelSet.IsPanelsVisible()}ShowPanels(e){this.panelSet.ShowPanels(e)}Init(e){this.callbacks=e,this.panelSet.Init({onResizeRequested:()=>{this.callbacks.onResizeRequested()},onShowHidePanels:t=>{this.callbacks.onShowHidePanels(t)}}),this.settingsPanel.Init({getShadingType:()=>this.callbacks.getShadingType(),getProjectionMode:()=>this.callbacks.getProjectionMode(),getDefaultMaterials:()=>this.callbacks.getDefaultMaterials(),onEnvironmentMapChanged:()=>{this.callbacks.onEnvironmentMapChanged()},onBackgroundColorChanged:()=>{this.callbacks.onBackgroundColorChanged()},onDefaultColorChanged:()=>{this.callbacks.onDefaultColorChanged()},onEdgeDisplayChanged:()=>{this.callbacks.onEdgeDisplayChanged()}})}UpdateControlsStatus(){this.settingsPanel.UpdateControlsStatus()}UpdateControlsVisibility(){this.settingsPanel.UpdateControlsVisibility()}Resize(e){ho(this.mainDiv,e),this.panelSet.Resize()}GetWidth(){return Fi(this.mainDiv)}SetWidth(e){hu(this.mainDiv,e)}Clear(){this.panelSet.Clear()}AddObject3DProperties(e,t){this.detailsPanel.AddObject3DProperties(e,t)}AddMaterialProperties(e){this.detailsPanel.AddMaterialProperties(e)}};var P0=class{constructor(){this.css={"--ov_foreground_color":{},"--ov_background_color":{},"--ov_disabled_foreground_color":{},"--ov_button_color":{},"--ov_button_hover_color":{},"--ov_button_text_color":{},"--ov_outline_button_color":{},"--ov_outline_button_hover_color":{},"--ov_outline_button_text_color":{},"--ov_icon_color":{},"--ov_light_icon_color":{},"--ov_selected_icon_color":{},"--ov_disabled_icon_color":{},"--ov_hover_color":{},"--ov_hover_text_color":{},"--ov_logo_text_color":{},"--ov_logo_border_color":{},"--ov_toolbar_background_color":{},"--ov_toolbar_selected_color":{},"--ov_toolbar_separator_color":{},"--ov_treeview_selected_color":{},"--ov_dialog_foreground_color":{},"--ov_dialog_background_color":{},"--ov_dialog_control_border_color":{},"--ov_border_color":{},"--ov_shadow":{}};let e=document.querySelector(":root"),t=window.getComputedStyle(e);for(let r in this.css)Object.prototype.hasOwnProperty.call(this.css,r)&&(this.css[r].light=t.getPropertyValue(r),this.css[r].dark=t.getPropertyValue(r+"_dark"))}SwitchTheme(e){let t=null;if(e===Ti.Light)t="light";else if(e===Ti.Dark)t="dark";else return;let r=document.querySelector(":root");for(let i in this.css)if(Object.prototype.hasOwnProperty.call(this.css,i)){let o=this.css[i][t];o!==void 0&&r.style.setProperty(i,o)}}};var yf=class{constructor(e,t,r){this.image=e,this.imageTitle=t,this.selected=!1,this.buttonDiv=mr("ov_toolbar_button"),this.buttonImg=ri(this.buttonDiv,this.image),r!==null&&this.buttonDiv.addEventListener("click",r),this.buttonDiv.setAttribute("alt",this.imageTitle),l0(this.buttonDiv,this.imageTitle)}AddDomElements(e){e.appendChild(this.buttonDiv)}AddClass(e){this.buttonDiv.classList.add(e)}RemoveClass(e){this.buttonDiv.classList.remove(e)}AddImageClass(e){this.buttonImg.classList.add(e)}RemoveImageClass(e){this.buttonImg.classList.remove(e)}IsSelected(){return this.selected}SetSelected(e){this.selected=e,this.selected?this.buttonDiv.classList.add("selected"):this.buttonDiv.classList.remove("selected")}},D0=class{constructor(e){this.mainDiv=Fe(e,"ov_toolbar")}AddImageButton(e,t,r){let i=new yf(e,t,r);return i.AddDomElements(this.mainDiv),i}AddImagePushButton(e,t,r,i){let o=new yf(e,t,()=>{o.SetSelected(!o.IsSelected()),i(o.IsSelected())});return o.AddDomElements(this.mainDiv),o.SetSelected(r),o}AddImageRadioButton(e,t,r){let i=[];for(let o=0;o<e.length;o++){let s=e[o],a=this.AddImageButton(s.image,s.title,()=>{for(let c=0;c<i.length;c++){let l=i[c];c===o?l.SetSelected(!0):l.SetSelected(!1)}r(o)});t===o&&a.SetSelected(!0),i.push(a)}return i}AddSeparator(){return Fe(this.mainDiv,"ov_toolbar_separator")}};var Aw=function(n,e){return Aw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Aw(n,e)};function Pe(n,e){Aw(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ft=function(){return Ft=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ft.apply(this,arguments)};function iE(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function pt(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(h){s(h)}}function c(u){try{l(r.throw(u))}catch(h){s(h)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function mt(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Jt(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ip=new Uint8Array(256);for(Cp=0;Cp<xf.length;Cp++)Ip[xf.charCodeAt(Cp)]=Cp;var Cp,sE=function(n){for(var e="",t=n.length,r=0;r<t;r+=3)e+=xf[n[r]>>2],e+=xf[(n[r]&3)<<4|n[r+1]>>4],e+=xf[(n[r+1]&15)<<2|n[r+2]>>6],e+=xf[n[r+2]&63];return t%3===2?e=e.substring(0,e.length-1)+"=":t%3===1&&(e=e.substring(0,e.length-2)+"=="),e},oE=function(n){var e=n.length*.75,t=n.length,r,i=0,o,s,a,c;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var l=new Uint8Array(e);for(r=0;r<t;r+=4)o=Ip[n.charCodeAt(r)],s=Ip[n.charCodeAt(r+1)],a=Ip[n.charCodeAt(r+2)],c=Ip[n.charCodeAt(r+3)],l[i++]=o<<2|s>>4,l[i++]=(s&15)<<4|a>>2,l[i++]=(a&3)<<6|c&63;return l},m3=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,aE=function(n){var e=n.trim(),t=e.substring(0,100),r=t.match(m3);if(!r)return oE(e);var i=r[0],o=e.substring(i.length);return oE(o)};var Lt=function(n){return n.charCodeAt(0)},lE=function(n){return n.codePointAt(0)},Ra=function(n,e){return so(n.toString(16),e,"0").toUpperCase()},Tl=function(n){return Ra(n,2)},oo=function(n){return String.fromCharCode(n)},cE=function(n){return oo(parseInt(n,16))},so=function(n,e,t){for(var r="",i=0,o=e-n.length;i<o;i++)r+=t;return r+n},Dn=function(n,e,t){for(var r=n.length,i=0;i<r;i++)e[t++]=n.charCodeAt(i);return r};var g3=function(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Cc=function(n){return n.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},v3=["\\n","\\f","\\r","\\u000B"];var uE=function(n){return/^[\n\f\r\u000B]$/.test(n)},F0=function(n){return n.split(/[\n\f\r\u000B]/)},Cw=function(n){return n.replace(/[\n\f\r\u000B]/g," ")},Iw=function(n,e){var t=n.charCodeAt(e),r,i=e+1,o=1;return t>=55296&&t<=56319&&n.length>i&&(r=n.charCodeAt(i),r>=56320&&r<=57343&&(o=2)),[n.slice(e,e+o),o]},hE=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=Iw(n,t),o=i[0],s=i[1];e.push(o),t+=s}return e},y3=function(n){for(var e=v3.join("|"),t=["$"],r=0,i=n.length;r<i;r++){var o=n[r];if(uE(o))throw new TypeError("`wordBreak` must not include "+e);t.push(o===""?".":g3(o))}var s=t.join("|");return new RegExp("("+e+")|((.*?)("+s+"))","gm")},fE=function(n,e,t,r){for(var i=y3(e),o=Cc(n).match(i),s="",a=0,c=[],l=function(){s!==""&&c.push(s),s="",a=0},u=0,h=o.length;u<h;u++){var f=o[u];if(uE(f))l();else{var d=r(f);a+d>t&&l(),s+=f,a+=d}}return l(),c},x3=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,N0=function(n){var e=n.match(x3);if(e){var t=e[1],r=e[2],i=r===void 0?"01":r,o=e[3],s=o===void 0?"01":o,a=e[4],c=a===void 0?"00":a,l=e[5],u=l===void 0?"00":l,h=e[6],f=h===void 0?"00":h,d=e[7],m=d===void 0?"Z":d,v=e[8],p=v===void 0?"00":v,g=e[9],x=g===void 0?"00":g,y=m==="Z"?"Z":""+m+p+":"+x,b=new Date(t+"-"+i+"-"+s+"T"+c+":"+u+":"+f+y);return b}},Rp=function(n,e){for(var t,r=0,i;r<n.length;){var o=n.substring(r).match(e);if(!o)return{match:i,pos:r};i=o,r+=((t=o.index)!==null&&t!==void 0?t:0)+o[0].length}return{match:i,pos:r}};var bf=function(n){return n[n.length-1]},L0=function(n){if(n instanceof Uint8Array)return n;for(var e=n.length,t=new Uint8Array(e),r=0;r<e;r++)t[r]=n.charCodeAt(r);return t},dE=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=n.length,r=[],i=0;i<t;i++){var o=n[i];r[i]=o instanceof Uint8Array?o:L0(o)}for(var s=0,i=0;i<t;i++)s+=n[i].length;for(var a=new Uint8Array(s),c=0,l=0;l<t;l++)for(var u=r[l],h=0,f=u.length;h<f;h++)a[c++]=u[h];return a},pE=function(n){for(var e=0,t=0,r=n.length;t<r;t++)e+=n[t].length;for(var i=new Uint8Array(e),o=0,t=0,r=n.length;t<r;t++){var s=n[t];i.set(s,o),o+=s.length}return i},O0=function(n){for(var e="",t=0,r=n.length;t<r;t++)e+=oo(n[t]);return e},mE=function(n,e){return n.id-e.id},gE=function(n,e){for(var t=[],r=0,i=n.length;r<i;r++){var o=n[r],s=n[r-1];(r===0||e(o)!==e(s))&&t.push(o)}return t},Ic=function(n){for(var e=n.length,t=0,r=Math.floor(e/2);t<r;t++){var i=t,o=e-t-1,s=n[t];n[i]=n[o],n[o]=s}return n},vE=function(n){for(var e=0,t=0,r=n.length;t<r;t++)e+=n[t];return e},yE=function(n,e){for(var t=new Array(e-n),r=0,i=t.length;r<i;r++)t[r]=n+r;return t},xE=function(n,e){for(var t=new Array(e.length),r=0,i=e.length;r<i;r++)t[r]=n[e[r]];return t},bE=function(n){return n instanceof Uint8Array||n instanceof ArrayBuffer||typeof n=="string"},wf=function(n){if(typeof n=="string")return aE(n);if(n instanceof ArrayBuffer)return new Uint8Array(n);if(n instanceof Uint8Array)return n;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")};var Gs=function(){return new Promise(function(n){setTimeout(function(){return n()},0)})};var _E=function(n,e){e===void 0&&(e=!0);var t=[];e&&t.push(65279);for(var r=0,i=n.length;r<i;){var o=n.codePointAt(r);if(o<65536)t.push(o),r+=1;else if(o<1114112)t.push(Rw(o),Pw(o)),r+=2;else throw new Error("Invalid code point: 0x"+Tl(o))}return new Uint16Array(t)},TE=function(n){return n>=0&&n<=65535},ME=function(n){return n>=65536&&n<=1114111},Rw=function(n){return Math.floor((n-65536)/1024)+55296},Pw=function(n){return(n-65536)%1024+56320},Ml;(function(n){n.BigEndian="BigEndian",n.LittleEndian="LittleEndian"})(Ml||(Ml={}));var Pp="\uFFFD".codePointAt(0),k0=function(n,e){if(e===void 0&&(e=!0),n.length<=1)return String.fromCodePoint(Pp);for(var t=e?w3(n):Ml.BigEndian,r=e?2:0,i=[];n.length-r>=2;){var o=SE(n[r++],n[r++],t);if(b3(o))if(n.length-r<2)i.push(Pp);else{var s=SE(n[r++],n[r++],t);wE(s)?i.push(o,s):i.push(Pp)}else wE(o)?(r+=2,i.push(Pp)):i.push(o)}return r<n.length&&i.push(Pp),String.fromCodePoint.apply(String,i)},b3=function(n){return n>=55296&&n<=56319},wE=function(n){return n>=56320&&n<=57343},SE=function(n,e,t){if(t===Ml.LittleEndian)return e<<8|n;if(t===Ml.BigEndian)return n<<8|e;throw new Error("Invalid byteOrder: "+t)},w3=function(n){return EE(n)?Ml.BigEndian:AE(n)?Ml.LittleEndian:Ml.BigEndian},EE=function(n){return n[0]===254&&n[1]===255},AE=function(n){return n[0]===255&&n[1]===254},U0=function(n){return EE(n)||AE(n)};var CE=function(n){var e=String(n);if(Math.abs(n)<1){var t=parseInt(n.toString().split("e-")[1]);if(t){var r=n<0;r&&(n*=-1),n*=Math.pow(10,t-1),e="0."+new Array(t).join("0")+n.toString().substring(2),r&&(e="-"+e)}}else{var t=parseInt(n.toString().split("+")[1]);t>20&&(t-=20,n/=Math.pow(10,t),e=n.toString()+new Array(t+1).join("0"))}return e},Dp=function(n){return Math.ceil(n.toString(2).length/8)},Rc=function(n){for(var e=new Uint8Array(Dp(n)),t=1;t<=e.length;t++)e[t-1]=n>>(e.length-t)*8;return e};var Pc=function(n){throw new Error(n)};var gC=od(Yp()),mC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jp=new Uint8Array(256);for(Zp=0;Zp<mC.length;Zp++)Jp[mC.charCodeAt(Zp)]=Zp;var Zp,pB=function(n){var e=n.length*.75,t=n.length,r,i=0,o,s,a,c;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var l=new Uint8Array(e);for(r=0;r<t;r+=4)o=Jp[n.charCodeAt(r)],s=Jp[n.charCodeAt(r+1)],a=Jp[n.charCodeAt(r+2)],c=Jp[n.charCodeAt(r+3)],l[i++]=o<<2|s>>4,l[i++]=(s&15)<<4|a>>2,l[i++]=(a&3)<<6|c&63;return l},mB=function(n){for(var e="",t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},ty=function(n){return mB(gC.default.inflate(pB(n)))},vC=function(n,e,t){for(var r="",i=0,o=e-n.length;i<o;i++)r+=t;return r+n};var yC="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";var xC="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";var bC="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";var wC="eJyFWdtSGzkQ/RXXPO1WmZSBEAJvjnESb8AmGENCKg+ypj3Wohk5ugAmlX9fzUCyW6s+ysuUfVqXvh61Zr4XI1PX1PjiuLg6C05U1Ns/Ojx42TsYHB4eFf3irWn8VNQUB4xMsIpsCwatU1DUSm8T+JpUtW7XP6NShToiEy+0ksOm0nHkIP53b9UDlefKy3Vx7G2gfjFaCyukJzundu74wVNTUnlhatE8a/XmjXkojr/s7O33d/YOBv3D3YP+68HB136xiEOtVg2dG6e8Mk1xvLM7GPxHcLlW8rYh54rjOLO4Iuu6YcVgsP9iMBjELabGK/lkymZrWxt6f8g/e7tHr4/68Xk06J673XOve+53z8PesDRL6s23zlPtepNGGrsxVngqX/R6Q617F+1qrndBjuxdRONu4ziqVE01l2vqHNgtMveiKYUtf0rjwJHYvH/26MGrvX7x6ee/l3uv+sXQydZPtjh+tXfUL07o1/+d3YPDfjH35fvrOHO3+3n1/LN19hl5q2T0x5fvxfWnOL/11zQq4jYiuuFH/38wPUgt6hT/Fkw0dKlTSRPqZevnqkllpdFa2BTfkJVtdiYCUUeRi94BGnQBY9YTlhpNKyQC04RrV3S3zCwdXIrKWFQihdfbzZoY66MpyjCWOC3cOoUfyZoUNQ0TJX/PjPRrS8zYVSxZBlV3zFinHhiQ7jjriPdpoziFpdGGWcNRrYBIt1WcbvotCCYHK0uxDhkzvwVyHVOksWd0H6bQmxQapdBJCo1T6G0KvUuh9yk0SaG/UuhDCp2m0FkKTVNolkLnKfQxhS5SaJ5Clym0SKGrFLpOoU8p9DmFblJoGU+iW/I8bSyjDNTp8zzIKVIpqawMDIuGlrRdPDiYEun4jVeG4ZwlU2MM/zIVxHABU1AMy6WQSqG/U4ihV6aEGW8xVcvQ3oZxZQox3MDQC+P7kEJ3KXSfQgyTbhnS5/MLJMKSO0y78bls9EqX8KgvzT3jZ/50bo9L3fYraQq1XR3Ls1vu7FhpYxV7HoBVZLDxGJeMA7uycarrOmHXwnuzCipKagMooBV3C/9GDFy/YqpjxSR+bORYmilFVXFH2hPOtmJPDUcbO7LE1H7shURlxYYjtdj6E2PFv+5dCpfxcF4KXPQrAEBOWquNU0yhRkv92gTUKT4d+nxqRwdwrY+QwXONS8fkK01MOYO6qoW0XA4vLXEbl8YLyddbGa9axNpv2SqU8SoWG26Gu0NTCRtqLQKzjalik8mwtBSsHVTzCTtkWh5jy1Xs8fim8BQcsDOE8xvUkeSCZncQvL/b3pKpTg32NQhnVo+lGa+yMeWZoE1wPAmknwBJE/IRJRC6z1iDUt0pLps/A82GucoQYNIiN2kLJrnu2oVqhHJLLvg6WWA3CFQMC6BdQBPGeJOTSBDc/SNrqPz5voLZClGOBHkgeL9MswpolKOAUS+zq43QaoBVxxmedMBMBwlRgd21eaSmYgQXYIt3WSNDtkhywiEKqQWKSGjrTcZzl2tjmcVmaPcL4Lc5wEug7QJtEPjM7N5tuNA1OExPNAMpOEQ4oNU6aK82mmkzAzDwEhgYWy2vhC7VirldbTE1TME+Kpcs42yaZU4dLJJAjwbRIAroFDhoAhZq37zFhoF7/ba05pYa9g5kqVIOdL3vQLAnOUYJsar5q8gY5JQFBhnkmRsw4QZ47PklF3gFNvZMhzKCpKCzvOVR6wdPRyQYovYhk5XAwY+oNNDeMxQRdPSgSDm0MzZilm1LgIUnpD0TK8+TtL83GUbEqtXMKw0FNDL5PnOMXF+CDqfj8ZjANiYyo9o8k698Rn7I5vEpCJy3oqRaWEZzyrDCBHhpghLnFGgdnbYWmjkZ2psJKHCTy6gGdE2L38QP+IeQQRXg0mjQc1S5oPJOmGdDN8trXkaW4L52GBCiEVAiQDYvleTCcAIWsllrpiA+BuAX+bTOSodgzSHkaL7nmoF1HjMVMkanPdr7NmsKaAQm2VIAKvj85cZUbbwbw70fwVwasCguhb5W5S+03EH+CIxqsktFl+MTQqEaH4f2O+TXfvGBbHMulG2/Hn/98Q/b2xEO";var SC="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";var _C="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";var TC="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";var MC="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";var EC="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";var AC="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";var CC="eJyNnV1320aWtf+KF6/mXcvpsWTJsnPnTtLdsdNx7ESGMb36gpZgmSNKcEhRCjNr/vsLgqhz9tlnFz03XsaziwDqVNWuDxSg/5l919/cdLd3s29n7/+5Wc+vukcnZ2fHZ49On5+dHs8ez/7W3979PL/phgS/LW669Tc/3s2Xi4udslkuUXnkyvxmsdyiNsCmW1x93l3nn93lYnMzkH36l7dXyyHdN0enfzkd2Ppviz+6y18WdxefZ9/erTbd49l3n+er+cVdt/q12/3+hz/uutvL7vJdfzO/ne7wr3/t/5h9+69vjp69ePzN8dHZ46MnR08eP3/+9N+PZ+dD4tVycdv90q8Xd4v+dnexJ09A+O3z4uL6tluvZ9+eDvx9t1qPyWZPnhz/5cmTJ8NFfu7vFhe77HzXf9mudjl59B8X/+/R0Yvnp493/56N/77Y/fviyfjv0/Hfs0cvL/uP3aNft+u77maI0e1Fv/rSr+Z33eVfHj16uVw+erc72/rRu27dre4Hug/mYv1o/uhuNb/sbuar60f9p0c/LW77u+2X7pt/dMOvXv790fz28j/71aPF8OP15uN6cbmYrxbd+i/D7f4wXOZycXv168XnbiyF8S5+vRt+Ml9dFnVI+N38yz+mgnl2+vTx7EM5Ojk5ejx7ub7YhXo1iM8H8fvOjscgz369u/xHM/v26fH43/fDf8+e7cvrn93danExBPRf/zNrPsy+Pd4F9ufhRtZf5kMc//fxHj99+nSPuz8ulvMb4yfHU/LfN/0QqY9LU06fTMrt5ubjrqCubrN22S+X85Xx5+UqX7rVxa6yF+Hs7PlemN8M0nqITr6z8Q7GEs/al/mqu112n2pS/Jnd3ny9O+P62pRnZ6fTr5abtVGL2cXQRuf5Ep+3Xz53tzn5kJVF7zk5LplcL+frz/lu/uxWfab9bZfh3YNIefd51Ym0n/rNStDFvUi7XvwhYHffibLtdExvF7eiWl30y/4243V3s4iSlcByZwOJdr9v5suMr1bd0JBFNn/fdOvRaoryolToud/7s6OjPXuZ0V8dPTvbo++82h4f79H3+Yc/ZPS3/MO/Z/SPHKYfvT2enOzRq3xfrz37p8/26Kfc9P6Zf/hzvok3+e5/yane5lTvchn8mu/rt3yu83yu9/num5zqQz59m9F/eVSH3mFEH4fO7Lq7C7ZhbfTjoMV2yr+LnnJS8jFfXywWF4vVxeYmh2KzM+310POIJjL6W7gZ96mMPuYqcSH8N6fqcl4/5R9eZfQ5/3CR0X/nK17nVMtc/iJawnSE7X0RrT4X2iqjdb4vEftNztB9bkIPOdUfGW3zTfzpqaxoh/rVUa08LbVyVUlPPdzJEdTGu8XyssuX3nf1l/2DiHPonb0nuBvHaV45jkr+P+0Ghuiz9put6js+LfvVQvB1VznLxWY1dOMXHsDjoxNoNuvFOHhNrb6MWnSzutosBuWmv9Mjh508nvgrcmVw8Wmh8i360WEoqIYDl/OrK9Wl7TkOxWjAsSu7btV52z899rHQ/Go1/wKmVn76cZhEdCKXHt6P8/WBCB9WKyGyAoj6c6uhy+Xiy3rhDXWYLnhW7z73mzBUTL1+qNtecKv5vfDf+cXmTo1cRiv/tOz+yBo1rIJv5hcrNdr5uOrUhS/7u/lFaHAuLYaCxACYssJm6Dc7TOmGEbcYom5ur+arzc1yvhGX6a+GUea1ON0c8+HFchNqrPGXPuY5PptqQL+6/DQM8sKo0IcnsYf10UfkL4p/vvELPD16Yhe4GVxus8QrmC/PRXd3uWvw67XovJaVkXkfuZ29F0PooW0O0+GhzotC+zGVp3fLsfp51x8rjXdLskT9dLHofGSU7sDG0JeL+8WlKKQ23pkPlkXL8NuOP/JRnviRd4/UBK2jHudd1EYgq/mUfr3QThynMPidU2Pw31RKaEM/8BlAuojPFwaDgAlInGBSRs+emTiteIhLkeX4mJDqgeUyxMVnAuoGvHnU6mh0VB/lq7P5NKp2tuiqEM7sk15DQjaBkyH60DVe/eRsusqy/7O7vRKXfxcv4TM4lUmvHAcbiRC9eXEvYiPZeCNQ1JRXn/vkyNllfvvcr0Su3tDVPQyVUvuVeLmry0rYzukCHrHYs4XFjfVmHOGsxP3GKuhRrPFoq2aCN5vl3eLLcivuizLolTwWR+n4hrHW3WK+vFx8+pTLaptt2JpgvI5X2EOV5YeD1exAr1OXLioFfVuzQa4x7ilzORr6kfoVXHobBgy4/mbTn1V/3d3iJMjMcdVdLdZx2OtNtDLw+lG0C5uJbIZWHeYiHmwaQFrDrESm56pu7bJSpf6LTPvkRRm4jqtccQ3McvnDnRihfFc1wKXyLW9uFZPpqr1jrRd8WRs+HKiVlQD/WWsatZt6UyuRWtdT89x17cr1Lv7NwWEJ21IZF3TLO7HYcxdM2gvpoT/giPUhzs1G5IT6cAuVHGd6W6DQ+yw1jnDOTtHHhwq8GiqyuLVf0wymKMtYI33VU/a/NsOIBffiebmN8kBHeWJ9PvZjZe74Y627/Im6vxKGIWif50tYeCttfDcziQ3ci+KQyd/GUZPXtK+UHw2DLAi17vkqeilmaCpVVah6EPqrHO5aBdYzHKtgg0uoxx09NS13Qn0Tm5j+5LRMsIdu80L57PeVsebq4Gj351g+fruV0e67w9VaXsustXLOl1WP1rOkN5WFwz8PjCd/qPX2dG1fHZZZsfFYGAj42Q42hXgLvrh78ErL/mpX3re9GMX3dS/dZKk05eFUlZZ8dXDO0N2Jhw5/Vqrv7cFufAh56iHc8mtt/IfN7kHkvx/PXner21/mi9Xu8fG/Zi93j6lnj795+uTfj6ejvXsEtL/PiCZPR/j33dGpHe1dJSDMGApvhqMTO8+bcguAoHIEbkUV6L79BxScJyhTyALbLw4FtG84iN6Go992OTqzI4sZoJh7E86Ho1M7z3nJPaCQe+CQe6Al94Ao96BY7oFN7Tqw0U6QvB+Ojp5YETbD4Qs7andJ/ciy5Ahv3SjsB8AAbYajY7vwppwNUAgQcLgK0BIgQBQgUCxAwCxAwKYAObkPWXsIR9t4lOOzzfGZEmF7NUSN1ji1XOfcfIsCbdgQNWTjsjUXFZq0IWrXxlXjNjG3cJOomRvXbd1kbvAmUKs3Tk2/8LcZgQkYIidwruygqOAJhsgYjCt3MDFbhEnkE8a1WZjMjmEC24YJ0TsKRgMpDFykoDa3APYT4/VGo5ylaGAvhshjjCujMTG7jUlkOca175jM5mMCO5AJ0YYKvs8RechoK1Al1MKfJptAfzJE/mSc/Mk5+1NRwJ8MkT8Zl/5UVPAnQ+RPxpU/mZj9ySTyJ+Pan0xmfzKB/Mk4+VPhbzMCfzJE/uRc+VNRwZ8MkT8ZV/5kYvYnk8ifjGt/Mpn9yQT2JxOiPxWM/lQY+FNBbW4B7E/G641G+VPRwJ8MkT8ZV/5kYvYnk8ifjGt/Mpn9yQT2JxOiPxV8nyPykNFWoEqohT9haNCkIieniiLZFYnsWUEG44qc3CuK0sJCEvCxyMnMoqgcLabIthZ18rYoaoOLadjlokpWF0XyuyC+rXBwvsjJ/khUHhiSgBFGTm4YRWWJMUX2xaiTOUZRO2RMwzYZVfbKqEbDDBq6ZhDAOgNvKy2UTTSKX2neyk5DAvDUyMlYo6jcNabIFht18tkoarONadhxo8q2G9XovUG7rwTyocK3NX6o1IQpO0FLRkqGjBLZcZDYjEEEK0ZKRoyStGFIACaMlCwYJWXAqGf7RZXMFyVtvZiCjRc1sl2UyHRBeispGC5SstsgKbOFBGC1SMloUVI2i3o2WVTJYlHSBosp2F5RY3NFLVorKGisgMFWgbayhbGlonSwaSo7BRnMFClZKUrKSFHPNooqmShK2kIxBRsoamyfqEXzBOVehuxB0q2m9XIRljnlHv3SEJmlcXJK52yTRQGPNEQGaVy6Y1HBGg2RLxpXpmhidkSTyA6Nay80mY3QBHJB42SBhb/NCMzPEDmfc2V7RQXPM0SGZ1y5nYnZ6kwinzOuTc5kdjgT2N5MiN5WMBpbYeBqBbW5BbCfGa83GuVkRQMbM0QeZlwZmInZvUwi6zKufctkNi0T2LFMiHZV8H2OyENGW4EqoRb+VO4VDcoZOZQLZFEgsEeZBCbljFzKBWlTJoNPOSOjckE5lavZqlwjr3JBm5Xr7FaukF25QH5lwlvBwLGckWWBoDzLZDAtZ+RaLijbcjX7lmtkXC5o53KdrcsV9i5XonkZR/cyCPZlrBUthA3MhQPNSlmYieBhzsjEXFAu5mq2MdfIx1zQRuY6O5krbGWuRC8zfi+C8yDYVrFa5IWhlRtDQ3NGhuYCGRoIbGgmgaE5I0NzQRqayWBozsjQXFCG5mo2NNfI0FzQhuY6G5orZGgukKGZ8FYwMDRnZGggKEMzGQzNGRmaC8rQXM2G5hoZmgva0FxnQ3OFDc2VaGjG0dAMgqEZa0ULYUNz4UCzUoZmIhiaMzI0F5ShuZoNzTUyNBe0obnOhuYKG5or0dCM34vgPAi2VawWeWFoq+n7JO5AhZCZFUxWZpiNbBLAxgohEytYWtgkgoEVQvZVsDKvomXrKgoZV8HatorKplU4WVbBZFgTfpsImFUhZFWGlVFNIthUIWRSBSuLKlo2qKKQPRWszamobE2FszEVHm1pomhKEwJLmkibajjbUcHVJqGsaJLAiAohGypYmVDRsgUVhQyoYG0/RWXzKZytp/BoPBO9T2F4SGSbiY6tsJupEaDfGCLDMU6O45wtpyjgOYbIdIxL1ykq2I4h8h3jynhMzM5jElmPce09JrP5mEDuY5zsp/C3GYEBGSIHcq4sqKjgQYbIhIwrFzIx25BJ5EPGtRGZzE5kAluRCdGLCkYzKgzcqKA2twD2I+P1RqMcqWhgSYbIk4wrUzIxu5JJZEvGtS+ZzMZkAjuTCdGaCr7PEXnIaCtQJdTZn/460Je7K/uRBdFR8RJAMaTOMZpOLZCOPEjOPD7OSmiclIbt6HyslHZUcgAo3C5wuF2g5XYBUZGDYhkBZhkBNmVkT76f4r733+8x7oCih3+f4g4cMgK0ZASQ3S4wu11g0+0CKXF39N689PvJBvyojUexF/me2v1EJ9PFyBii8BinGBlXgTIxR8skCplxjpsJHDwTYgQNUxgLf5/D0GTUCkShNS7iO77DGONbEMe3cI5v4TK+RRTxLRLHt/AU3yKk+BaB4lswx3fi73MYmoxagTi+haf4/m0K7dHRqR2aFwErIUUWDQoEdCjAZlHA3IkAuhUBLF4EqIQN2G6keeZHJSuASk4AhYwAh3wALdkAZLkAZpkANuUBSMmCo/0HLodMPTUUE3Q5U10Z+iHSmepkpuCF24BzXjuR107kdbGrYn5kFdJRHIw7xzrq1Ibgjnx47czuxFnvw7/x0LtaZ9TXuhA6W8fe2zpL3a1L0N86LJMAZFajnU1fMA0VYmWDofEoDp1GVCoEojAN2Auvpua/N4NX2PoBlSYDSMykXlHTBxrnT69CwwfmhedsajJA4iTp1dTon1p+5rFbeIWNHpDoDF5Rowcau4BXodEDI+N/BY0eSLT7V9Doj4108SiOcF9hm0eUR7ivqM0jhTYPOA58X4U2D4wGvq+mlgZH+Z77yg328gb7fCfcyEAR92hNDFAcib/CBuZoEwpnkyvUplJ7NrL2bHLt4fkYKKJebUS92oR69Xq2XwnZT33HoziLH5GYwI88zd1HGqftI5Iz9lGhyfrISvgBlfA76kIeuhjr11jREeXwv6aKjhQqOuBYKq9DRQdGsX89VfQTy0EfLfN1qujAkz++xooOSC4tvQ4VHVhcUHqNFd3RJh7lu95U7noj73qT75prNSjirjfk96+hVjvZxqN819t8d6Grw3ZBAjURUlVroSS54VACakOk6uZEibhlkUyNjFRqb1GFyk8CtUJSqUGyKtomJcnNlBPkFkspqPGSyu2YZG7SUe5rFYkbOqmq9VCSr1VVdgJSdfOiRNzSSCarIJVcI6qbqnAwMNJWKMnXAsNmQ+r/JTDJgkhmNyI5GlMUt1XhYGCyc/002y/tH/uRDfMAhZG8C7v1gv24fnfUhKM2pGzjsvOI0qLyjorl7J+mDD+1RJZLQNjE9xTfuT8mRJmsvHNPKmQX30cn1OYfcu7V++gkqTjga9iUR46Ieg17kmKVgOCQQCFiVQUqpoFwRaGpCW3tVBxAUnMYYwIVzNygZHw4sPUGNSWY7A4Da4hC6lwFs6gQxoKajNr8Qw6a8RyuIqlAFW2b88jBMZ7C8vNseoZyZkd2d47sGYqjOIFzjnlwahM4Rz5Nc+ZTSWflGYoTm7ntUWlSLwWivBinDBlXuTIxZ80kyp9xzqQJnFMTYnYNU57xYQMjynN62MBc5Vk9bGCJ8pwfNrDAeeaHDYw5z6GFv6wKnP+ochSiKmMRk4iIxAQcl6im6EQ5xSjKFKkoUrzKg9OXAlGMjFN0jKu4mJgjYhLFwjhHwQTOvwkx54Zjnt9M2d178BvMKaCSSUBxhuc8PXN+g7kC5HMzZ747wVnZmODEJmaGfrNR4BvsnBCFfsmFsUuyoyYcfQgp26D59gZHaUb7Bo12uttktMwp1tpoWcxRT0bLnOOfjZaFWBLJaIlDmaSxauKqdMJYNaImow/5h21OxcWmhq+TFF7nhgKMnEoxilSUUVTlGVPkQo06lWwUuXijymUc1VjQUaPSTh+eOBHR43I/9OEJleR9pVSaCv9QOU9bSc+1ov79hb0OL61CxUBK1QIlqhQoqSqBeq4QqFJ1QIkrA2pcFVCLFQEVqgb0MvxJihNXgfrL8DnBexn5RtIP8gytTMvFXntHfK+W1wChxA1RcRunsjauCtrEXMomUREb5/I1gQvXhFiyhqlY8R3fkxgGLtDKO76kvs/xbDL6kH/Y5lRcfPKV2L0U17iwCFmhkmSZCpRlVa6cJhcvp6BSZpkLm3Uuc9Zj0bNKNYBkqAisUH1IsqoWlOh9tcSaqvKhera2+huuOSznCmTvzEHVcUaVxgWqLi6oiuJqriKuUeVwgauFK1whXIlVwTlVgvDm7AlFhAu+9uYsy+9FdBvBPojftiIdF6p+wXSvldUdKE1DVJjGqSyNq6I0MZekSVSQxrkcTeBiNCGWomEqRFzNO4lh4CKsrOaR+j7Hs8noQ/5hm1Nx4akFvknCSfqUtTRJZ05lpyfpLOayS5N05lx2eZLOQiy7NEknDmWXXl1IXJUd7uuneDYZfcg/bHMqLju503+UfpmK7YUfld8CKoUFKJQTcLgC0FI6gKxggFmZAJuKA0gpCUe7zUbP/ajkAFDJAaCQA+CQA6AlB4AsB8AsB8CmHAApOXBE+yR3KCbocqbsyTUinalOZio8mAac89qJvHYir308yvfcV26wlzfY5zvhp8agiHu058OAcvB5U+LbGb7RMB7FNxpGJN5oGHl6o2Gk8Y2GEck3GkaF3mgYGb3RMLLwRsO7Gb4+Nh7F57UjEk+vR54e3o40PqcekXw4PSr0RHpk8fn8iOJD+XdTrOEo3/V55a7P5V2f57vmWIMi7vqcHp6/g1g7GV/Eel6OmnDUxiOrPY6wluxpWfiCMjREITGu4mJiDo5JFCHjOkwmc6xMoGI2TmVd+LlAlSzKojexnkWuBMYPZzFVBxO4TpgQKwYukVLBNhm1AlFlUeuhk1QeMkGNMUThNK7CaWIOp0kUTuM6nCZzOE2gGmOcakzh5wJVsihrjIn1LHKNMX44i6nGmMA1xoRYY/D9IyrYJqNWIKox6v2jIqWthOUm9FZCrcoAV7cS6gQc7INbCXWiFHi9lVCrXM+Cel4VDgZG17yY5GuBSbUwqv+XwOQaGeVUL6NMtTPtupFVqakJbVXgWlvddbNPMEy09hPMJ3YUZzkjsmmlI7HxdeRpLjTSuMV1RLRldWT00vbIwvvaI4n7VX+bmpzn502MwW+pcQGXAbFmBIiHla74sNKZvbfjyF7bMbSbmbw4tiObITqyGaKjOEN0jjNEpzZDdOQzRGc+Q3RWZohObIZo6KJfwirAnuxnXGcnhcRfdDmXNuFCFGqXc6xdQGHCBSexSufIK50zkfnP2y+fu9uQjUXIpr2rBoiWPnasD2ftc977SnH2sjj7XJw8cQNFFLRN3ADlUrWJm+d+FbK1yrmnl8n2SLxMthPW3c2i1JxnRjchzSZfYiMWsUae1q9GGpeuRsRb6V2h9ayRifLchFWsHXkIYdrGo5IHQLjLbk9xv9bkaGm/FnPyY71fi8XszGm/FnP26Lxfi4Xo1mm/FnHw7TTEZq4cXA2xWSIvrw2xWWZXT0Ns5uTvhYPJGyIfME52b1yZhInZKUwiuzDOzmACW6EJsTMwTN5ROHULjkPfULA4AfcSxqmrcC76CxNzp+FS7jlMo+7DOPchJtSix71J4YscIu5XjLMZFaHPl+NuxvihaiQ6HJMq1ajS9Zhcq2XcCRmv1Cbujgpf5Whwx2SceifnqosqquinirTJqbnHMq66LRNz32USdWDGdS9mMndlJtSqEHVqBT/kiG8Foj7OuOjo0ibd0hvoTbpa5a7vwCZdnUR0g3qTrlZTl1jZpKtl6h71Jl2pYlepVxW0KrvN6qqCTsBd6MFVBZ0odad6VUGr3LUGFTvYKLAPRpU726hKr4xJhGPGBOybUU32GOXUmUSZOuQospEGlTtnEmMXnV4FladM3bV+FbSiqq67+ipoJYHoxvWroPr3qUuvvAoqz52696AuaqFOXX1Uk1vHdzBrN5M6/6h+vVqrgUBMcLBa1wYFMdHhup8GCFE9WLvTYCGoq1o808Ahqjx8IFUOIkIaNZSIr47WfpmGFVGVg4uYRAwxYgIeaES1MtyIidKgI8qHKzMPQIL4UCvLbVXgIUn99b8xwfk0GtkvzZ7jEARQ/L7NeRpsAE+L0ec4rABEK8rnYQABLKwdn+NQwVFx7v0HSs5n6ZslZZEd85re0WBOudbvaLCY85/e0WDOkcjvaLAQY5Le0SBO0SmYQ5RehZhOo1+FkCJF7MCrEDJFjp1+FUKKHMXKqxBSjfHUr0IokSIbNA4vvU4wnU69TiAkCmz1dQKh56Cq1wmExAGVrxMILQZTvU6QJQokKBxG3KA/nSdt0GdO0dMb9FnMcUsb9JlzxPIGfRZirNIGfeIUpYI5RGIf/HSi2j74ikxxO7gPvpImR7G2D74ic0yr++AreoxwbR+8linepHLYw+7x6YR593gSKMiV3eNJzYHNu8eTwMEUu8eTEgOYd4+zQEEzzuGyv+cA4XJG4XKBwuWCCperOVyuUbhc4HC5wuFyJYbLOYXLBAqXcQ7X9DV6CFYhFKqCKVAFqzAVLQepKBSigjlAhXN4Co/BKZRCM2EKzEQpLO+nkDx7YkclHIBKKACFMACHEAAt2QdkWQdm2QY2ZRlIya6j3fLWUz8qOQAUPxnlPH23YqT26SdH/DU9V/xLUM7KHBSQfZLR0Li3+OjIDm0pDph/FdcZfRXXBVyKA+xfxXUGX8V1CF/FdWhfxXXkX8U1Fqen76H6HR2/KIh+04kM23JPYJUMhy/NAoX1HExtn5p15J+adaaiYKs0p5a/3dLMfo44HsVp44hinXOe5pAjtTrnyGuWM/8QrrE+3msvwtrXQtjrOtOLOpM+PwuSqk7++Vlgour4Tm+vKbji4RndxKMc8rigARwrilOrEI4oj6B4VXEmCqMsR+xJE+y1yfbaZHttKvbaSHttsr02wl4bYa9Nstcm22sz2eu+u2jQXgGJr642ZK9A41dXG2GvoNBXVxu0V0Dxq6vNDJf2m1laz29maRG/Sd4KPK1rNrO0Rt/M8sJ8M8ur8c2Ml+CbWVp3b5KpNmCqnib+osu5pAX0Jhkq8LRU3rCfQuK4KN7M8kp4M8vL3w266f6DU80MF7qbWVrdbmZ5SbuZ4Tp2M0uL102yPeCyOPtcnHpBupnlVehmlpaem1lab27Q7xzlBd5mhqu6zSwt5TbJ7oCnRdtmllZqG2F3oNCabDPLC7HNjFdfd2RcWTXr8OVUR2jGI21n+ES3RZcEFJ/dtsklgaentC26JCB6HtsGlwQWnry26JKOxmesp3ZkvbCj2Ak7xz7YqXXBjrgHdsU7YGfW/zqy7teQu0mbXbLNLtlWXLKVLtlml2yFS7bCJdvkkm12yTa5ZJtcsg0u2WaXbLNLthWXbKVLttol2+ySrXDJVrhkO0tPBtsZjjnbWRpzjkiMOUeexpwjjWPOEdGYs53lMWcbrLfN1ttWrLeV1ttm622r1tsK622z9bbZettsva203nayXk+zydnbVLK3kdnb5Oyx9YIisrcR9WMTGwc+oJlMKT2gYU6Wqh/QsJjNNT2gYc42mx/QsBANNz2gIQ7Wm17PY65MWL2exxLZce31PJbZmNPreczJoguf55JmszZOjm1c1VkTc8U1iWqvca6oJnBtNUFXWTZ1f+4W2iU/jqPU4gRs9MbJ7Z0fiJDwfZey+ZtGPYBx7gZMqEWPO4TCFwJR12Bc9Q8m5k7CJOopjHN3YQL3GUXoc7649zB+qDREP2JSpb5WehSTa9WZ+xbjlWrLvUzhoqsp0ian5k7H+KGoiO7HpEpUKh2RybWopC7JhNjI+StwTxKl3kl+BS5Lqo+qfQUuq9RT6a/AZY37K/UVuKxQrwUSdFxIqe9CSXVfqOceDFXqxFDS/Rim4K4MNerNUKIODaS5rCXcraFEPRtKqlmgnlsGqtQ4UOIGgBq3AdSqzYC7u/AYP9iDeMCff6PPxF0fStT7BelwFEUfGNTcDaJMPSFK3BmidiDI3CWCtNCUOkaUVN+Ieu4eUaUeEiXuJFHjfhK0XmaZe0uUvlJ6os9Etd4GKj0npjjQSrj/RKneFLgXBUl0pKBu5G+4O0XpK2ETnSqq9bBVulZMcSBsqYNFLZjL4Asz/+bMeGTPDR3FjaaTUDrtK4HoHMbliabEeCJDdCLj8kRhD9hVjdMpoyjPC9G70pTOiZI8Y9k+dCUQncu4PJFt8bhSjE7lgjyX7X+4UozO5YI817Rl4CoTOk/B8izlQ2dXAtF5jKsTfURTODHkf/L8IzZzQPHhlHN8OOXUHk45kn/Z/GNovsDo75l/hOa6Jxe7jssGRLuj66Bdx9xPgs0C/ZcFXedU+hz2TqGfo6DrnKpyjmEMsFzO6SwGr1VKfab9iGb/J0guPy7LXyE5OskyabgKcGTEd8aEugUo3oYL/gj6tKD7cPQQjrwe7Y78z6SMR3HzyYjSJpMyOONMoBufEKLsVNyYVM5Y4fcZPWQE+Sxom/PAOTaes83v8h5FDNk2RNk2LrOdXvqcMlT4fUYPGUG28d1FygNnW767OElqy/OR0DAAsruTog6F3EpdcorifYU/VDiGB/m2kuEUqCDmaIlJz1FSIFKqCxeSjJIab055Bule0gdJITpAtzJ7HBmURFx8cpUCAxJGBjGHBjUdG0iRggPavcYPGmN8AG91PlOEUMsh4n3eRxFDaNJAjbkMSdowPmWw8PuMHjKCEBS0zXngrBvP2U5bh4+IQ8bzuDIJMut5G/KUKxPuBXsQDLJvbCsywwFwIUcg7QY+Ig4RyKPhJMgI5J3FU85MuBfsQTCIgLGtyAxHwIUUgU8p7zsyNJdlt17vlkKeGfw0K+9C744Wdi/jEQ1eP+XsfqIx2X4KepWuvyNdPLJlTUe23RNQ/obryHFlEyhu9nQcP+06IvqA68joA65xtiNmOtVZzlUOVPkpx6XgTiCKkHEKk3MRKxNzwFzKUTONQmec42cCBzEvBVxVlgKuDi4FmMqB1W+dTz/Kb51rgUJdeeu8ooqw1986ryTIRVB561yrXBy1t86lfFUVqIBIlcVUeYd6X1jXoRCuc+Svc7ivKzG+loG91tG8ziG8FnG7FsHasT4e5XvuKzfYyxvs852k/dSuiHv03dSO7MmKoW08yne9zXdXazAs0MkONpikilh9rcGkBLmIDzYYVjmohxsMyX1VOBgWWUnqn0zQCQ5mq1KLap9M0DLVrconE6S6rQoHA5PrYRlC7kdbt7hSMSGcxRcUTgpCWUl01Afb67PX9TWD68vQbn+Ul8z7tEjDXJ42LMbsUWXxuz+0+N1/ffG7zxP+PZeL4r2aUQtJXomnzXual8r7ylJ5f3CpvA8zrT2it0qv6gpdiWV5QUoE1xWr9n1t1b4/vGrfx0nUnpU/7nIlEJ3duDx5UeHceU2+r6zJ9wfX5HtsZ3tU+v/aum7USRzZsvt0V/T9/8vrQviTmb/EGPEQyfmd1uIlxTlX+nf2gRellZ5PanHdO6dYmz9FXC6otHJBqZU1d62KeW1M8WV+0VVis/vJ0/yTu3hSkcLrxhDe/VuPp3YUt7qMyCqgI7HrZeRpt8tI4y6XEdHelZF5j++svO3oJG5f2aGLWXlzZTyySbqjUkKIrGAAlpnLPtqrqVJ7AqvLjuKVunzxLl88Dr+A4zICUBhoAbYNDo58Y4Mzi6qzq3hUyhcQ1SETbH/HsdWf3UjsxMrChl+A4hvaziG3QO3NbEf8QXdX/H1tZ/ZNe0f2QrYhnxV5Wf8esuojoRUaAKA4xF7F5o5QGHVxMGx+aR8xc2qIeh8xi7lJpn3EzLlx5n3ELMRmmvYRE4cGa4gajnFqPc65/aZHeFPBFn6Zk3Jzxp3LjCr3x61b71xmMbdzuXOZNWrxeecyC9z2cajMiFygMlQmlf0AdxWfxEJnZ9C7ilnMHpF2FTPXbpF3FbNAvpF2FRNPDlKE33OYwEsMkaEYJ1dxztbiivIX/GL11PzSF6uZk7/oL1azmP0lfbGaOftL/mI1C9Ff0heriYO/GKL2a5zar3P2l/SsfCr2wi9zUvYX/EY2o8r9sb/ob2SzmP1FfiObNfKX/I1sFthfcOMAI/KXysYBUtlf8EPZJ7HQ2V/0h7JZzP6SPpTNXPtL/lA2C+Qv6UPZxJO/FOH3HCbwF0PkL8bJX5yzv7gi/SWs9KDLRIG9JqrsOFGVvhOTCPeJCdiDopqcKMrJj6JMrhRF9qb4jATKMArsA1FlNyA1eZZ+MFMqVFAvaz9LLpbWp7VwMCfJ1w6sT+skwuPq69M6BftdZX1ay8n70gMdLbAPHnqgI9MkT0wL4yeqyiV/PLAwrpMIr9QL41qt+GZlYVzL7KF6YVyq2U+D/Hst3OitUWCHjSr7LKnJbUkXnjstBo2vbe03DBixW4nY7DVi8RV509BQoxK/G2+YvgVv3L0z8mKakcaPwhf8WyYWVsIxXkHc/UG2/R+tLWT3l9hOQkx3f4LtLKSxv71GGAK0V+7BWvcvjdxjddujh5ToISfaQqL9Bzy2mGhCPNElzMnF9r2s4I/+/b//H63X5Vs=";var IC="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";var RC="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";var PC="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var RB={Courier:wC,"Courier-Bold":yC,"Courier-Oblique":bC,"Courier-BoldOblique":xC,Helvetica:MC,"Helvetica-Bold":SC,"Helvetica-Oblique":TC,"Helvetica-BoldOblique":_C,"Times-Roman":IC,"Times-Bold":EC,"Times-Italic":CC,"Times-BoldItalic":AC,Symbol:RC,ZapfDingbats:PC},zc;(function(n){n.Courier="Courier",n.CourierBold="Courier-Bold",n.CourierOblique="Courier-Oblique",n.CourierBoldOblique="Courier-BoldOblique",n.Helvetica="Helvetica",n.HelveticaBold="Helvetica-Bold",n.HelveticaOblique="Helvetica-Oblique",n.HelveticaBoldOblique="Helvetica-BoldOblique",n.TimesRoman="Times-Roman",n.TimesRomanBold="Times-Bold",n.TimesRomanItalic="Times-Italic",n.TimesRomanBoldItalic="Times-BoldItalic",n.Symbol="Symbol",n.ZapfDingbats="ZapfDingbats"})(zc||(zc={}));var DC={},FC=function(){function n(){var e=this;this.getWidthOfGlyph=function(t){return e.CharWidths[t]},this.getXAxisKerningForPair=function(t,r){return(e.KernPairXAmounts[t]||{})[r]}}return n.load=function(e){var t=DC[e];if(t)return t;var r=ty(RB[e]),i=Object.assign(new n,JSON.parse(r));return i.CharWidths=i.CharMetrics.reduce(function(o,s){return o[s.N]=s.WX,o},{}),i.KernPairXAmounts=i.KernPairs.reduce(function(o,s){var a=s[0],c=s[1],l=s[2];return o[a]||(o[a]={}),o[a][c]=l,o},{}),DC[e]=i,i},n}();var NC="eJztWsuy48iN/Ret74KZfHtX47meqfGjPHaXx4/wgpJ4JbooUU1JVXXb0f9u4JwESF13R7TD29koIpFi8gCJBHDA/Pvm+nraTuPmZ3/f5HHzs7/k8WlzvXS7fvPXp02eqyR/2vRfd2N3gqhUUfm0Od9P236+DoczxLWK66fNpZ93/fkGWaOy5mnTnUR67c57lRaZSItM/tnN/XnsX/DfIqg0JOk8HI4UK4BCAFzG+xWCQgXF02Y3nU4dJJVKKrx5mPgKBVMImOvYXY+QKJRCoHzXzxMErQrap810hqaloioF1e0L5kvFUwqe23Hu+Q+1TinWeZnuMwSKrRRsL8Nn/kOxlYLtOnzFWE1Viqmu/eceVioVaylYe1OwVKilQD0PCYgiLRtVcJz4kEItW13mNLi0UsCVAB77KyxTKeJKEPff3rsREkVcCeLD3He3HqArBV0J6G/v/fU2cK1WH23l0e3c7T71N9uUVv/c5i73bWlVs1Y0u5/3srO7aQb2EPUB+eUTva0TYgG5mGbbzZSUkJTpn75ygF4PThhq1SMGMds4HYZdN54n/rdWc8rv02bfH9I2hbqGsKbPnIYzHSc0qmTIxI6nuwpiAIQmU8F4Gy7jK8RwntAI1v3wedj39FmFECp508s4zUOyGmwpKrwbL8eOIlVU//Yf/S1J9C212Pa/uuSwbVDYlWzxf/aj/UtfWgm258t1GG1X1BVawfdnX0xdoRbjPCdBVGs1svo3R/tPVD1r2YL3k0kUfC04f9ldLkmk0NVwv+pO232SKXa126/vHAO5wPxNGivsRsZ/HDhWzLVg/iBuOSfMUTGrTX+b/qSIG0H8u+NEl1J4jcD7/XBI9kDcUYN/0/FNCDuNAP64skYOeLrykUsjElWC9+cmAEAB9NtrEijCplaE/YHvKuC5Iup8zxBAWtFrayakC2QC8uCbhggSskx9zXYNQSRkeuZWQBFKQowabNIfS/qeqOgSOFTINcC4DKcnE70H2zqElJAJ3k++dwgrIRPA47J5iCwr724RWELINFBTAAWiCL7SOogrIQj6abWBOH8hCPoL/4a4EoJgn9MWIq40lcY52cJAGbCHMgkpA3g9t7e0sRWgB1HnvjJYRez6yrSTlYJvRZmdCQhe80Pa24roNYL75uLo10WyKYHVeFLjYnImilM0qPDOJOKWNGlFCJsIrw/qsNv7OPY3SnNYSQ9DP46DLHylvGCcEFU08Nz6JIVx9Chd+93ENNhEWroSuC8SAi0WNznNpqH9+c5k1RQ0nIbi9/LnTzdmoKZAaAwaib/0g0Ti29wxG8gUgLey/O8eHmmqt4eiKTNYo416LPrLkcIWa2u06eZ5+mLBXCaoTp4m7pckBm41P8Qe0mUG6DUCYWY/fTmnCQbwkCa2043vrhA2gqakncwM3aGfe9GAj1Vw9qiuzPW2o4Or4PcxhmUu4atwAGKMy8wCscJhiDFfJh1lhY2K6mo250DrTJXOC82EUgVIkTMmOd0moqC5Dd24H15e0hRKJS0Cvg7Xm9RKgz9ErdWrTpfb6zV5Wx2ytwlDZLplUQ/8Ye72Qyq5RI5kqY4t6fe0iHOItdCYbo8zKOi0vLjvjrdjZ2IYRAPUZZ72910SI7vEiL9LaHSvrZFkipKOf02y8gc9vEbmKHQjRP95uH6ShZI9c9pao41otTPLICMETXSC5jLNupbP8bxo2Dy/DOfh9prk8BKNk935MPIo1jiKUSNQqiVSVSozBWYan5nmNMGz1+r6AleO8KJJwXdk2H8XwgVVP31AticBhdvqIZPwNPcvqWhqah74iIB6GsYuvbdGeYFS93yY775hPNh6giUlzNNXr/eaJmNYKrnLKznOt4ZsEQ6f5ZCfWVvJFK2Xs5BcP8ND23r5uJqDyaPmM90Oscl9a87aIC3HLCxz+uOzNFgOhA+P4XRq8hPTjP3Xhzn4oiYIm1svybSpOX03zDuJX4kqyAx3rrKZdZ3XNMggGh9lsUt/Fm+7m+1bGCxqOttPN/fOFiExKh+xnb1d0gz8qiiXmS0r5YxLaaULN/TaOsu4WEgTS3Fd1TCvlsvj9F1/PvQpPzHAZqiN9yZEntcyaDfet0mGOKLl5LGX6EMhU5ZGkf3QnVIWqvJA5FoG7KbLK1BcBcyLTfNYZGr7g8ar+WEWm63VgmSefX/q5k+r6Rplrdo/Heb+q00gKzcWUiVy3pY5RkGL7kept7/zSRS8Uc+Kw+nOV5ukqeu1KqtZ2Ds2a6yrWZghX/NS7q3OwQZ5WM0tgGCBPK7muPM6B2fP8wditayKMKG5YzW7rIvzkJcPs8vKOBGaRJxo+boMocrFfe407G0SJlJS7pO+KOrwqKkAcw4lp28Xi28vU7AM2Lfz9gUITKM8fJlcnoRtlJIvkwsSRtD2kXkuC8M2ytbX08vSME4ZHqd9cTQgojL5hXr60uhDxDJfTy7WQ3kXy2I9q+t+L7V+d3nZD+fDtrtdf7iZ8gPUNhVNSLOdFKmrqgg5UGR5ktUWkERW4ETnYSnQpK5PsqU2k3I5yZbCTGhJki0lmbJ2ypxOd8rYKXM23Slnp6yxclZkVZK1li1EVlMWmY0yyJokC5bIRdYm6sDCW/9X54knZEYnurpKJCEzNtHVdYqTmdGJrm6SiJRMsdWJmTS1MYWuSZwAHg3D5dSJO6tnpqPiNXIHapSQHkL9WNCyDwEZymTtQzyGcfx/rQVukWUP4RgGS29oG5RieEMSVKm67GISoHZUs0g6TKImlZMdbde2cDMFUCZBSBWevKlNIlRrBNQkEVpt0CXUSYTWGvzG1q5TldeFIklgFfiMvQ6tNXgMtk5IM+qSAjbJSpOh4wdUtYnQYgOqxkRosgFVayK02SJsYCJ02tRw9HkVodUG00UTodcG4+UmQrdN0dPhVYR2m8KPBhX1t/bkumgaofzWplwXDT2Oo9K2Lhp6dogUvT+HBpGC98fQxlDs/lSVCr/OVGZ7CGY3lXEIKyD3fylyrQS63P4VjTl0uRkGJxB+l5th2CBS5LkZhg0iRZ6bYdgPUqC5aYMEh8CSmzrsCinU3PRBKkNYyQ0qTgSiSmFQcSAQVAqDimSFmFIYVPaKFGphUNktUqiFQUVaUvLVFbaHSEZK47vC0LNfpOgLQ8+OkaIvDD2SjZbOXWHokWBQgJeGHkmlwaEz9EglKHFKQ48og8qmNPQgJEp0u9LQg4mAjJeGnm0rRV8aeratFH1p6EE8tBnQlYYebSutwLrS0KNrhRZYZegRbpV3dpWhR8tKSU9XGXr2rJTsdJXBTz0ruLjhT00rVaAyBVLTSjWoTIPUs1IVKlOBbSulAV1lOrBzpZS2q0wJNq8yhH7TovIOb1cb5tSXUny14Ut9KUYQUyS1phRgbaDZmEIiFrKThCnpIMMYGrZh0JBo7M01e+H65sZeUpPp6ZsbX4+dcH1xa1YgxYsIAWYF9rXBI1p/L9tiiL6ZmYGtrYpZybaz8caUCA1iA4iIPcEN0ZAQIuq70g2ZPCOQ7R+yE5riIjTojfMRESbsge1zHMhgsSlk5PR4u0WnQDraMOdEE7JTj7dbhAqpw4K3W4wKGZv3eHtempBkA+nHQldgrwXHM1jwCgj0pB7BwlcIbI7BnhbAAmsvHNJgISyw+MIxDRbEAqsvHNRgYSyw/GqZSE0j1l84rMFCWWABhuMaLJgFVmA4sMHCWUi8CRpZQAvkSzizwUJaIE/CoQ0W1ALpEU5tsLDGDzqg6yI0jaKzfxGaRuRBOLjBglsgAcpYHZhG5D04usECXCDdQd0WLMQFshwc6GBBLqQOETSyMBdIa3DMgwW6QD6Dcx4s1AXyDpSRYmoTsrpmzWKQyDJw0GWjTci2GCBZIAtkFDj+wSJZIJPA+Q8WygIJRCQkw8meFCJAsGAWCu8BiNAsjzTAXkKwEBfYg2IQqM3y7EFFauT/ZAcUGlk0DAU7nyzETPeSHBIa1aZmSe4IjWpTsyRphEa1qVmSTFMjU7Mki4ZGreEsSZ+hUWO6s7+bc4/8cdJlaNSYQdjTRbEbM3+c5BgaWTgOSA7stkSLiqFiCwbgLUiHinQX4C1Kh4pEl+BN94oEl+DNdBWJLcH74yS0AG8RPeCjRmRZ3JiR0ZWKrItbW7MmZWVlbG+vSVWxHY2tyW+lJTUy0yEVgdTKmmYlNplKagSDCMFlTIaH8GmVMWkpIj6sMsQv+Ae3UmUIX3AP6q0yRC94x/IOBC84B4+VyhC7yHTIELQRhGgM32hchmAM14hMRCpEMIZrNC6DJvAMWkxl0ASOQYOpDJqACrX+EmgCX9EQ8f3T5stwlggXf/otCfss8O19uvX7LfqmP3Z1AiRPP2JPY2pA/vTbFIhHqhFedB2s0/2v3bIAG1z14yH8CVcvwJFFoePr5cgbDv9/G+Pfvo2BUIP6ix0r8EO9ZYARuKFeMMAIvFA/gWMESqifiTACG9QrBTpCBFGK9wuMQKz0UgJGoH+C7L8xAvPTL40Y4au7gPkfjEAB9SYBRmB/eokAIxA/vT6AETifXh7ACHRPrwroqAFX0i/5GIEmCZb/xQj8Tu8LYARqp5cFMAKr03sCGIHQ6SUBjMDlBMsfMLIP//+HERicXlzACORNsPxJR2iW4I4FRj92EQa8TTuGInY3/vHrMSBwuoPX3TDot4c7osKPXJtBm0XLvsPc0XfRZkHNhxE4nLZsMQJ902/jDOQIkriXkAL7JhEyNh1ZemtZ98IxCZvebeCYZE3AHjkmUdMPGRyTpAm6v3FMgqY3EjgmOdPPZhyTmOlFBIwZxHEPgWNeJ9BbBxyz+af9c45J2PRMcEyyph8EOSZP03PMMTmaXjLgmN0+vWLAMfBpFfeZY7838AVjNilxLYJj4NOy7ZVjUju9zcHxv3/FiVcKULCpf9yGcb9qEOPL/6pp7GyO2cU+S7N2AaOzDMHKBXxO4/goyYBiZ3S7+yxxf0fNKud0r31a0gnddp4+9WfTpHJOt/r4yfIlfVDq5z7dgWABg8amf4SBnLxZQ9A0718keFqMZSGDNurhPoxjf5r84LGeQY/77d0vb3QvyYc1DTrd9nWo56movd196uyqy792faz2prfkJHyAHPiBONTe+kZ2ephrlhb4Ll0HSRfRNOLxqk5onB1LWu4kCPAGRmicIDOZ6j67Ro0T5V2/F6t1lDpTlkz6iMTpspj/JI53H83+jZNmt/+ybY2TZ1lRctmcUldonEDLxLEbGV5aZ9AwRnqAJmydSFu6c2dunU6/8yDIL5Og0+8W67VOp98xsL6kr1H8FglO/W45Uq1z6ncPXto6rX432zlpnVW/e6bAGfXPV0aOmXPqZwcbM+fUzw42Zs6pnx/BxsyJ9fMaV8ycW79fre3c+v1qbefW79+u7QT7/ePazrGf+UE7Zk6wf+Mmi8EJ9ocFQnCC/WGBEJxgf3gDgddNNIp/WC3Mb12i24cHXIEfkcs3FzGDM/UPnnJjcKb+cQXOmfrHFThn6h/fgItO1z8+4IjO2P+0LBOdsX9znHgBKUYn7Id+Pkklvh3TCgtpX9DFhbSvll1I+1t0C3NfTBcX5v4IeSHv5sYxX7g7H86dt+/Wbpw7c+8XsLkz934Bmztz79+AzZ2+9w+4cmfww2ptZ/DDam1n8MPbtZ3GDw9rs9ui3KZPblw4tz8vJiuc208LhMK5/bRAKJzbT28gFE7wp9XCTvCnR1zO8ZeLw7Fwjj8tTlw4x78v0Ern+PcFWukc//4GWulE//6AonSu/7paxrn+zZ2YnRclRK/rBXJsCAjxh2cKEAWVJ02ku/wOoFv2+12XkmnODwHgW4uQGVbZ0uM7mAJ1b/68/JlpUMnWdy5MF6/Vd5eL19YYSPd6FqPwBkNQo/h2NQxdQQ3bn/dpCxrGrqCW7U8rKZl/mfi0Xytk3Am66ZhYbg4y+KAVslDwbXdNL2d5qU5hnYBlTZaa6hs2t1qWdaeeTptcLco+hl5R7w4H5uOGcQbtEkpT18GusOI2xT9dYcVJf7zCSjmbD+Iud2s1NPRb9E+0UICmizb8ZK/+5JOLOulSqwaw5VJr2vB8dSFn89fvv/8H0oq1dA==";var DB=ty(NC),fS=JSON.parse(DB),dS=function(){function n(e,t){var r=this;this.canEncodeUnicodeCodePoint=function(i){return i in r.unicodeMappings},this.encodeUnicodeCodePoint=function(i){var o=r.unicodeMappings[i];if(!o){var s=String.fromCharCode(i),a="0x"+vC(i.toString(16),4,"0"),c=r.name+' cannot encode "'+s+'" ('+a+")";throw new Error(c)}return{code:o[0],name:o[1]}},this.name=e,this.supportedCodePoints=Object.keys(t).map(Number).sort(function(i,o){return i-o}),this.unicodeMappings=t}return n}(),Qp={Symbol:new dS("Symbol",fS.symbol),ZapfDingbats:new dS("ZapfDingbats",fS.zapfdingbats),WinAnsi:new dS("WinAnsi",fS.win1252)};var $p=function(n){return Object.keys(n).map(function(e){return n[e]})},FB=$p(zc),pS=function(n){return FB.includes(n)},em=function(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height};var Fr=function(n){return"`"+n+"`"},NB=function(n){return"'"+n+"'"},LC=function(n){var e=typeof n;return e==="string"?NB(n):e==="undefined"?Fr(n):n},LB=function(n,e,t){for(var r=new Array(t.length),i=0,o=t.length;i<o;i++){var s=t[i];r[i]=LC(s)}var a=r.join(" or ");return Fr(e)+" must be one of "+a+", but was actually "+LC(n)},hs=function(n,e,t){Array.isArray(t)||(t=$p(t));for(var r=0,i=t.length;r<i;r++)if(n===t[r])return;throw new TypeError(LB(n,e,t))},Xi=function(n,e,t){Array.isArray(t)||(t=$p(t)),hs(n,e,t.concat(void 0))},OC=function(n,e,t){Array.isArray(t)||(t=$p(t));for(var r=0,i=n.length;r<i;r++)hs(n[r],e,t)},OB=function(n){return n===null?"null":n===void 0?"undefined":typeof n=="string"?"string":isNaN(n)?"NaN":typeof n=="number"?"number":typeof n=="boolean"?"boolean":typeof n=="symbol"?"symbol":typeof n=="bigint"?"bigint":n.constructor&&n.constructor.name?n.constructor.name:n.name?n.name:n.constructor?String(n.constructor):String(n)},kB=function(n,e){return e==="null"?n===null:e==="undefined"?n===void 0:e==="string"?typeof n=="string":e==="number"?typeof n=="number"&&!isNaN(n):e==="boolean"?typeof n=="boolean":e==="symbol"?typeof n=="symbol":e==="bigint"?typeof n=="bigint":e===Date?n instanceof Date:e===Array?n instanceof Array:e===Uint8Array?n instanceof Uint8Array:e===ArrayBuffer?n instanceof ArrayBuffer:e===Function?n instanceof Function:n instanceof e[0]},UB=function(n,e,t){for(var r=new Array(t.length),i=0,o=t.length;i<o;i++){var s=t[i];s==="null"&&(r[i]=Fr("null")),s==="undefined"&&(r[i]=Fr("undefined")),s==="string"?r[i]=Fr("string"):s==="number"?r[i]=Fr("number"):s==="boolean"?r[i]=Fr("boolean"):s==="symbol"?r[i]=Fr("symbol"):s==="bigint"?r[i]=Fr("bigint"):s===Array?r[i]=Fr("Array"):s===Uint8Array?r[i]=Fr("Uint8Array"):s===ArrayBuffer?r[i]=Fr("ArrayBuffer"):r[i]=Fr(s[1])}var a=r.join(" or ");return Fr(e)+" must be of type "+a+", but was actually of type "+Fr(OB(n))},_e=function(n,e,t){for(var r=0,i=t.length;r<i;r++)if(kB(n,t[r]))return;throw new TypeError(UB(n,e,t))},Be=function(n,e,t){_e(n,e,t.concat("undefined"))},ny=function(n,e,t){for(var r=0,i=n.length;r<i;r++)_e(n[r],e,t)},oi=function(n,e,t,r){if(_e(n,e,["number"]),_e(t,"min",["number"]),_e(r,"max",["number"]),r=Math.max(t,r),n<t||n>r)throw new Error(Fr(e)+" must be at least "+t+" and at most "+r+", but was actually "+n)},lo=function(n,e,t,r){_e(n,e,["number","undefined"]),typeof n=="number"&&oi(n,e,t,r)},ry=function(n,e,t){if(_e(n,e,["number"]),n%t!==0)throw new Error(Fr(e)+" must be a multiple of "+t+", but was actually "+n)},kC=function(n,e){if(!Number.isInteger(n))throw new Error(Fr(e)+" must be an integer, but was actually "+n)},Dl=function(n,e){if(![1,0].includes(Math.sign(n)))throw new Error(Fr(e)+" must be a positive number or 0, but was actually "+n)};var Bt=new Uint16Array(256);for(tm=0;tm<256;tm++)Bt[tm]=tm;var tm;Bt[22]=Lt("");Bt[24]=Lt("\u02D8");Bt[25]=Lt("\u02C7");Bt[26]=Lt("\u02C6");Bt[27]=Lt("\u02D9");Bt[28]=Lt("\u02DD");Bt[29]=Lt("\u02DB");Bt[30]=Lt("\u02DA");Bt[31]=Lt("\u02DC");Bt[127]=Lt("\uFFFD");Bt[128]=Lt("\u2022");Bt[129]=Lt("\u2020");Bt[130]=Lt("\u2021");Bt[131]=Lt("\u2026");Bt[132]=Lt("\u2014");Bt[133]=Lt("\u2013");Bt[134]=Lt("\u0192");Bt[135]=Lt("\u2044");Bt[136]=Lt("\u2039");Bt[137]=Lt("\u203A");Bt[138]=Lt("\u2212");Bt[139]=Lt("\u2030");Bt[140]=Lt("\u201E");Bt[141]=Lt("\u201C");Bt[142]=Lt("\u201D");Bt[143]=Lt("\u2018");Bt[144]=Lt("\u2019");Bt[145]=Lt("\u201A");Bt[146]=Lt("\u2122");Bt[147]=Lt("\uFB01");Bt[148]=Lt("\uFB02");Bt[149]=Lt("\u0141");Bt[150]=Lt("\u0152");Bt[151]=Lt("\u0160");Bt[152]=Lt("\u0178");Bt[153]=Lt("\u017D");Bt[154]=Lt("\u0131");Bt[155]=Lt("\u0142");Bt[156]=Lt("\u0153");Bt[157]=Lt("\u0161");Bt[158]=Lt("\u017E");Bt[159]=Lt("\uFFFD");Bt[160]=Lt("\u20AC");Bt[173]=Lt("\uFFFD");var iy=function(n){for(var e=new Array(n.length),t=0,r=n.length;t<r;t++)e[t]=Bt[n[t]];return String.fromCodePoint.apply(String,e)};var BB=function(){function n(e){this.populate=e,this.value=void 0}return n.prototype.getValue=function(){return this.value},n.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},n.prototype.invalidate=function(){this.value=void 0},n.populatedBy=function(e){return new n(e)},n}(),si=BB;var $r=function(n){Pe(e,n);function e(t,r){var i=this,o="Method "+t+"."+r+"() not implemented";return i=n.call(this,o)||this,i}return e}(Error);var Df=function(n){Pe(e,n);function e(t){var r=this,i="Cannot construct "+t+" - it has a private constructor";return r=n.call(this,i)||this,r}return e}(Error);var Gc=function(n){Pe(e,n);function e(t,r){var i=this,o=function(c){var l,u;return(l=c?.name)!==null&&l!==void 0?l:(u=c?.constructor)===null||u===void 0?void 0:u.name},s=Array.isArray(t)?t.map(o):[o(t)],a="Expected instance of "+s.join(" or ")+", "+("but got instance of "+(r&&o(r)));return i=n.call(this,a)||this,i}return e}(Error);var UC=function(n){Pe(e,n);function e(t){var r=this,i=t+" stream encoding not supported";return r=n.call(this,i)||this,r}return e}(Error);var Ff=function(n){Pe(e,n);function e(t,r){var i=this,o="Cannot call "+t+"."+r+"() more than once";return i=n.call(this,o)||this,i}return e}(Error);var KY=function(n){Pe(e,n);function e(t){var r=this,i="Missing catalog (ref="+t+")";return r=n.call(this,i)||this,r}return e}(Error);var BC=function(n){Pe(e,n);function e(){var t=this,r="Can't embed page with missing Contents";return t=n.call(this,r)||this,t}return e}(Error);var zC=function(n){Pe(e,n);function e(t){var r,i,o,s=this,a=(o=(i=(r=t?.contructor)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:t?.name)!==null&&o!==void 0?o:t,c="Unrecognized stream type: "+a;return s=n.call(this,c)||this,s}return e}(Error);var GC=function(n){Pe(e,n);function e(){var t=this,r="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return t=n.call(this,r)||this,t}return e}(Error);var VC=function(n){Pe(e,n);function e(t){var r=this,i="Attempted to convert PDFArray with "+t+" elements to rectangle, but must have exactly 4 elements.";return r=n.call(this,i)||this,r}return e}(Error);var oy=function(n){Pe(e,n);function e(t){var r=this,i='Attempted to convert "'+t+'" to a date, but it does not match the PDF date string format.';return r=n.call(this,i)||this,r}return e}(Error);var mS=function(n){Pe(e,n);function e(t,r){var i=this,o="Invalid targetIndex specified: targetIndex="+t+" must be less than Count="+r;return i=n.call(this,o)||this,i}return e}(Error);var gS=function(n){Pe(e,n);function e(t,r){var i=this,o="Failed to "+r+" at targetIndex="+t+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return i=n.call(this,o)||this,i}return e}(Error);var Nf=function(n){Pe(e,n);function e(t,r,i){var o=this,s="index should be at least "+r+" and at most "+i+", but was actually "+t;return o=n.call(this,s)||this,o}return e}(Error);var Lf=function(n){Pe(e,n);function e(){var t=this,r="Attempted to set invalid field value";return t=n.call(this,r)||this,t}return e}(Error);var HC=function(n){Pe(e,n);function e(){var t=this,r="Attempted to select multiple values for single-select field";return t=n.call(this,r)||this,t}return e}(Error);var WC=function(n){Pe(e,n);function e(t){var r=this,i="No /DA (default appearance) entry found for field: "+t;return r=n.call(this,i)||this,r}return e}(Error);var jC=function(n){Pe(e,n);function e(t){var r=this,i="No Tf operator found for DA of field: "+t;return r=n.call(this,i)||this,r}return e}(Error);var vS=function(n){Pe(e,n);function e(t,r){var i=this,o="Failed to parse number "+("(line:"+t.line+" col:"+t.column+" offset="+t.offset+'): "'+r+'"');return i=n.call(this,o)||this,i}return e}(Error);var Fl=function(n){Pe(e,n);function e(t,r){var i=this,o="Failed to parse PDF document "+("(line:"+t.line+" col:"+t.column+" offset="+t.offset+"): "+r);return i=n.call(this,o)||this,i}return e}(Error);var qC=function(n){Pe(e,n);function e(t,r,i){var o=this,s="Expected next byte to be "+r+" but it was actually "+i;return o=n.call(this,t,s)||this,o}return e}(Fl);var XC=function(n){Pe(e,n);function e(t,r){var i=this,o="Failed to parse PDF object starting with the following byte: "+r;return i=n.call(this,t,o)||this,i}return e}(Fl);var KC=function(n){Pe(e,n);function e(t){var r=this,i="Failed to parse invalid PDF object";return r=n.call(this,t,i)||this,r}return e}(Fl);var YC=function(n){Pe(e,n);function e(t){var r=this,i="Failed to parse PDF stream";return r=n.call(this,t,i)||this,r}return e}(Fl);var ZC=function(n){Pe(e,n);function e(t){var r=this,i="Failed to parse PDF literal string due to unbalanced parenthesis";return r=n.call(this,t,i)||this,r}return e}(Fl);var JC=function(n){Pe(e,n);function e(t){var r=this,i="Parser stalled";return r=n.call(this,t,i)||this,r}return e}(Fl);var QC=function(n){Pe(e,n);function e(t){var r=this,i="No PDF header found";return r=n.call(this,t,i)||this,r}return e}(Fl);var $C=function(n){Pe(e,n);function e(t,r){var i=this,o="Did not find expected keyword '"+O0(r)+"'";return i=n.call(this,t,o)||this,i}return e}(Fl);var yS;(function(n){n[n.Null=0]="Null",n[n.Backspace=8]="Backspace",n[n.Tab=9]="Tab",n[n.Newline=10]="Newline",n[n.FormFeed=12]="FormFeed",n[n.CarriageReturn=13]="CarriageReturn",n[n.Space=32]="Space",n[n.ExclamationPoint=33]="ExclamationPoint",n[n.Hash=35]="Hash",n[n.Percent=37]="Percent",n[n.LeftParen=40]="LeftParen",n[n.RightParen=41]="RightParen",n[n.Plus=43]="Plus",n[n.Minus=45]="Minus",n[n.Dash=45]="Dash",n[n.Period=46]="Period",n[n.ForwardSlash=47]="ForwardSlash",n[n.Zero=48]="Zero",n[n.One=49]="One",n[n.Two=50]="Two",n[n.Three=51]="Three",n[n.Four=52]="Four",n[n.Five=53]="Five",n[n.Six=54]="Six",n[n.Seven=55]="Seven",n[n.Eight=56]="Eight",n[n.Nine=57]="Nine",n[n.LessThan=60]="LessThan",n[n.GreaterThan=62]="GreaterThan",n[n.A=65]="A",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.O=79]="O",n[n.P=80]="P",n[n.R=82]="R",n[n.LeftSquareBracket=91]="LeftSquareBracket",n[n.BackSlash=92]="BackSlash",n[n.RightSquareBracket=93]="RightSquareBracket",n[n.a=97]="a",n[n.b=98]="b",n[n.d=100]="d",n[n.e=101]="e",n[n.f=102]="f",n[n.i=105]="i",n[n.j=106]="j",n[n.l=108]="l",n[n.m=109]="m",n[n.n=110]="n",n[n.o=111]="o",n[n.r=114]="r",n[n.s=115]="s",n[n.t=116]="t",n[n.u=117]="u",n[n.x=120]="x",n[n.LeftCurly=123]="LeftCurly",n[n.RightCurly=125]="RightCurly",n[n.Tilde=126]="Tilde"})(yS||(yS={}));var ie=yS;var aI=od(Yp());var zB=function(){function n(e,t){this.major=String(e),this.minor=String(t)}return n.prototype.toString=function(){var e=oo(129);return"%PDF-"+this.major+"."+this.minor+`
%`+e+e+e+e},n.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},n.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=ie.Percent,e[t++]=ie.P,e[t++]=ie.D,e[t++]=ie.F,e[t++]=ie.Dash,t+=Dn(this.major,e,t),e[t++]=ie.Period,t+=Dn(this.minor,e,t),e[t++]=ie.Newline,e[t++]=ie.Percent,e[t++]=129,e[t++]=129,e[t++]=129,e[t++]=129,t-r},n.forVersion=function(e,t){return new n(e,t)},n}(),La=zB;var GB=function(){function n(){}return n.prototype.clone=function(e){throw new $r(this.constructor.name,"clone")},n.prototype.toString=function(){throw new $r(this.constructor.name,"toString")},n.prototype.sizeInBytes=function(){throw new $r(this.constructor.name,"sizeInBytes")},n.prototype.copyBytesInto=function(e,t){throw new $r(this.constructor.name,"copyBytesInto")},n}(),Cn=GB;var VB=function(n){Pe(e,n);function e(t){var r=n.call(this)||this;return r.numberValue=t,r.stringValue=CE(t),r}return e.prototype.asNumber=function(){return this.numberValue},e.prototype.value=function(){return this.numberValue},e.prototype.clone=function(){return e.of(this.numberValue)},e.prototype.toString=function(){return this.stringValue},e.prototype.sizeInBytes=function(){return this.stringValue.length},e.prototype.copyBytesInto=function(t,r){return r+=Dn(this.stringValue,t,r),this.stringValue.length},e.of=function(t){return new e(t)},e}(Cn),it=VB;var HB=function(n){Pe(e,n);function e(t){var r=n.call(this)||this;return r.array=[],r.context=t,r}return e.prototype.size=function(){return this.array.length},e.prototype.push=function(t){this.array.push(t)},e.prototype.insert=function(t,r){this.array.splice(t,0,r)},e.prototype.indexOf=function(t){var r=this.array.indexOf(t);return r===-1?void 0:r},e.prototype.remove=function(t){this.array.splice(t,1)},e.prototype.set=function(t,r){this.array[t]=r},e.prototype.get=function(t){return this.array[t]},e.prototype.lookupMaybe=function(t){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return(r=this.context).lookupMaybe.apply(r,Jt([this.get(t)],i))},e.prototype.lookup=function(t){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return(r=this.context).lookup.apply(r,Jt([this.get(t)],i))},e.prototype.asRectangle=function(){if(this.size()!==4)throw new VC(this.size());var t=this.lookup(0,it).asNumber(),r=this.lookup(1,it).asNumber(),i=this.lookup(2,it).asNumber(),o=this.lookup(3,it).asNumber(),s=t,a=r,c=i-t,l=o-r;return{x:s,y:a,width:c,height:l}},e.prototype.asArray=function(){return this.array.slice()},e.prototype.clone=function(t){for(var r=e.withContext(t||this.context),i=0,o=this.size();i<o;i++)r.push(this.array[i]);return r},e.prototype.toString=function(){for(var t="[ ",r=0,i=this.size();r<i;r++)t+=this.get(r).toString(),t+=" ";return t+="]",t},e.prototype.sizeInBytes=function(){for(var t=3,r=0,i=this.size();r<i;r++)t+=this.get(r).sizeInBytes()+1;return t},e.prototype.copyBytesInto=function(t,r){var i=r;t[r++]=ie.LeftSquareBracket,t[r++]=ie.Space;for(var o=0,s=this.size();o<s;o++)r+=this.get(o).copyBytesInto(t,r),t[r++]=ie.Space;return t[r++]=ie.RightSquareBracket,r-i},e.prototype.scalePDFNumbers=function(t,r){for(var i=0,o=this.size();i<o;i++){var s=this.lookup(i);if(s instanceof it){var a=i%2===0?t:r;this.set(i,it.of(s.asNumber()*a))}}},e.withContext=function(t){return new e(t)},e}(Cn),Rt=HB;var xS={},WB=function(n){Pe(e,n);function e(t,r){var i=this;if(t!==xS)throw new Df("PDFBool");return i=n.call(this)||this,i.value=r,i}return e.prototype.asBoolean=function(){return this.value},e.prototype.clone=function(){return this},e.prototype.toString=function(){return String(this.value)},e.prototype.sizeInBytes=function(){return this.value?4:5},e.prototype.copyBytesInto=function(t,r){return this.value?(t[r++]=ie.t,t[r++]=ie.r,t[r++]=ie.u,t[r++]=ie.e,4):(t[r++]=ie.f,t[r++]=ie.a,t[r++]=ie.l,t[r++]=ie.s,t[r++]=ie.e,5)},e.True=new e(xS,!0),e.False=new e(xS,!1),e}(Cn),Oa=WB;var Ki=new Uint8Array(256);Ki[ie.LeftParen]=1;Ki[ie.RightParen]=1;Ki[ie.LessThan]=1;Ki[ie.GreaterThan]=1;Ki[ie.LeftSquareBracket]=1;Ki[ie.RightSquareBracket]=1;Ki[ie.LeftCurly]=1;Ki[ie.RightCurly]=1;Ki[ie.ForwardSlash]=1;Ki[ie.Percent]=1;var Io=new Uint8Array(256);Io[ie.Null]=1;Io[ie.Tab]=1;Io[ie.Newline]=1;Io[ie.FormFeed]=1;Io[ie.CarriageReturn]=1;Io[ie.Space]=1;var sy=new Uint8Array(256);for(Of=0,eI=256;Of<eI;Of++)sy[Of]=Io[Of]||Ki[Of]?1:0;var Of,eI;sy[ie.Hash]=1;var jB=function(n){return n.replace(/#([\dABCDEF]{2})/g,function(e,t){return cE(t)})},qB=function(n){return n>=ie.ExclamationPoint&&n<=ie.Tilde&&!sy[n]},tI={},nI=new Map,XB=function(n){Pe(e,n);function e(t,r){var i=this;if(t!==tI)throw new Df("PDFName");i=n.call(this)||this;for(var o="/",s=0,a=r.length;s<a;s++){var c=r[s],l=Lt(c);o+=qB(l)?c:"#"+Tl(l)}return i.encodedName=o,i}return e.prototype.asBytes=function(){for(var t=[],r="",i=!1,o=function(h){h!==void 0&&t.push(h),i=!1},s=1,a=this.encodedName.length;s<a;s++){var c=this.encodedName[s],l=Lt(c),u=this.encodedName[s+1];i?l>=ie.Zero&&l<=ie.Nine||l>=ie.a&&l<=ie.f||l>=ie.A&&l<=ie.F?(r+=c,(r.length===2||!(u>="0"&&u<="9"||u>="a"&&u<="f"||u>="A"&&u<="F"))&&(o(parseInt(r,16)),r="")):o(l):l===ie.Hash?i=!0:o(l)}return new Uint8Array(t)},e.prototype.decodeText=function(){var t=this.asBytes();return String.fromCharCode.apply(String,Array.from(t))},e.prototype.asString=function(){return this.encodedName},e.prototype.value=function(){return this.encodedName},e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.encodedName},e.prototype.sizeInBytes=function(){return this.encodedName.length},e.prototype.copyBytesInto=function(t,r){return r+=Dn(this.encodedName,t,r),this.encodedName.length},e.of=function(t){var r=jB(t),i=nI.get(r);return i||(i=new e(tI,r),nI.set(r,i)),i},e.Length=e.of("Length"),e.FlateDecode=e.of("FlateDecode"),e.Resources=e.of("Resources"),e.Font=e.of("Font"),e.XObject=e.of("XObject"),e.ExtGState=e.of("ExtGState"),e.Contents=e.of("Contents"),e.Type=e.of("Type"),e.Parent=e.of("Parent"),e.MediaBox=e.of("MediaBox"),e.Page=e.of("Page"),e.Annots=e.of("Annots"),e.TrimBox=e.of("TrimBox"),e.ArtBox=e.of("ArtBox"),e.BleedBox=e.of("BleedBox"),e.CropBox=e.of("CropBox"),e.Rotate=e.of("Rotate"),e.Title=e.of("Title"),e.Author=e.of("Author"),e.Subject=e.of("Subject"),e.Creator=e.of("Creator"),e.Keywords=e.of("Keywords"),e.Producer=e.of("Producer"),e.CreationDate=e.of("CreationDate"),e.ModDate=e.of("ModDate"),e}(Cn),Q=XB;var KB=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.asNull=function(){return null},e.prototype.clone=function(){return this},e.prototype.toString=function(){return"null"},e.prototype.sizeInBytes=function(){return 4},e.prototype.copyBytesInto=function(t,r){return t[r++]=ie.n,t[r++]=ie.u,t[r++]=ie.l,t[r++]=ie.l,4},e}(Cn),jr=new KB;var YB=function(n){Pe(e,n);function e(t,r){var i=n.call(this)||this;return i.dict=t,i.context=r,i}return e.prototype.keys=function(){return Array.from(this.dict.keys())},e.prototype.values=function(){return Array.from(this.dict.values())},e.prototype.entries=function(){return Array.from(this.dict.entries())},e.prototype.set=function(t,r){this.dict.set(t,r)},e.prototype.get=function(t,r){r===void 0&&(r=!1);var i=this.dict.get(t);if(!(i===jr&&!r))return i},e.prototype.has=function(t){var r=this.dict.get(t);return r!==void 0&&r!==jr},e.prototype.lookupMaybe=function(t){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=i.includes(jr),a=(r=this.context).lookupMaybe.apply(r,Jt([this.get(t,s)],i));if(!(a===jr&&!s))return a},e.prototype.lookup=function(t){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=i.includes(jr),a=(r=this.context).lookup.apply(r,Jt([this.get(t,s)],i));if(!(a===jr&&!s))return a},e.prototype.delete=function(t){return this.dict.delete(t)},e.prototype.asMap=function(){return new Map(this.dict)},e.prototype.uniqueKey=function(t){t===void 0&&(t="");for(var r=this.keys(),i=Q.of(this.context.addRandomSuffix(t,10));r.includes(i);)i=Q.of(this.context.addRandomSuffix(t,10));return i},e.prototype.clone=function(t){for(var r=e.withContext(t||this.context),i=this.entries(),o=0,s=i.length;o<s;o++){var a=i[o],c=a[0],l=a[1];r.set(c,l)}return r},e.prototype.toString=function(){for(var t=`<<
`,r=this.entries(),i=0,o=r.length;i<o;i++){var s=r[i],a=s[0],c=s[1];t+=a.toString()+" "+c.toString()+`
`}return t+=">>",t},e.prototype.sizeInBytes=function(){for(var t=5,r=this.entries(),i=0,o=r.length;i<o;i++){var s=r[i],a=s[0],c=s[1];t+=a.sizeInBytes()+c.sizeInBytes()+2}return t},e.prototype.copyBytesInto=function(t,r){var i=r;t[r++]=ie.LessThan,t[r++]=ie.LessThan,t[r++]=ie.Newline;for(var o=this.entries(),s=0,a=o.length;s<a;s++){var c=o[s],l=c[0],u=c[1];r+=l.copyBytesInto(t,r),t[r++]=ie.Space,r+=u.copyBytesInto(t,r),t[r++]=ie.Newline}return t[r++]=ie.GreaterThan,t[r++]=ie.GreaterThan,r-i},e.withContext=function(t){return new e(new Map,t)},e.fromMapWithContext=function(t,r){return new e(t,r)},e}(Cn),at=YB;var ZB=function(n){Pe(e,n);function e(t){var r=n.call(this)||this;return r.dict=t,r}return e.prototype.clone=function(t){throw new $r(this.constructor.name,"clone")},e.prototype.getContentsString=function(){throw new $r(this.constructor.name,"getContentsString")},e.prototype.getContents=function(){throw new $r(this.constructor.name,"getContents")},e.prototype.getContentsSize=function(){throw new $r(this.constructor.name,"getContentsSize")},e.prototype.updateDict=function(){var t=this.getContentsSize();this.dict.set(Q.Length,it.of(t))},e.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},e.prototype.toString=function(){this.updateDict();var t=this.dict.toString();return t+=`
stream
`,t+=this.getContentsString(),t+=`
endstream`,t},e.prototype.copyBytesInto=function(t,r){this.updateDict();var i=r;r+=this.dict.copyBytesInto(t,r),t[r++]=ie.Newline,t[r++]=ie.s,t[r++]=ie.t,t[r++]=ie.r,t[r++]=ie.e,t[r++]=ie.a,t[r++]=ie.m,t[r++]=ie.Newline;for(var o=this.getContents(),s=0,a=o.length;s<a;s++)t[r++]=o[s];return t[r++]=ie.Newline,t[r++]=ie.e,t[r++]=ie.n,t[r++]=ie.d,t[r++]=ie.s,t[r++]=ie.t,t[r++]=ie.r,t[r++]=ie.e,t[r++]=ie.a,t[r++]=ie.m,r-i},e}(Cn),Hn=ZB;var JB=function(n){Pe(e,n);function e(t,r){var i=n.call(this,t)||this;return i.contents=r,i}return e.prototype.asUint8Array=function(){return this.contents.slice()},e.prototype.clone=function(t){return e.of(this.dict.clone(t),this.contents.slice())},e.prototype.getContentsString=function(){return O0(this.contents)},e.prototype.getContents=function(){return this.contents},e.prototype.getContentsSize=function(){return this.contents.length},e.of=function(t,r){return new e(t,r)},e}(Hn),Xs=JB;var rI={},iI=new Map,QB=function(n){Pe(e,n);function e(t,r,i){var o=this;if(t!==rI)throw new Df("PDFRef");return o=n.call(this)||this,o.objectNumber=r,o.generationNumber=i,o.tag=r+" "+i+" R",o}return e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.tag},e.prototype.sizeInBytes=function(){return this.tag.length},e.prototype.copyBytesInto=function(t,r){return r+=Dn(this.tag,t,r),this.tag.length},e.of=function(t,r){r===void 0&&(r=0);var i=t+" "+r+" R",o=iI.get(i);return o||(o=new e(rI,t,r),iI.set(i,o)),o},e}(Cn),Nt=QB;var $B=function(){function n(e,t){this.name=e,this.args=t||[]}return n.prototype.clone=function(e){for(var t=new Array(this.args.length),r=0,i=t.length;r<i;r++){var o=this.args[r];t[r]=o instanceof Cn?o.clone(e):o}return n.of(this.name,t)},n.prototype.toString=function(){for(var e="",t=0,r=this.args.length;t<r;t++)e+=String(this.args[t])+" ";return e+=this.name,e},n.prototype.sizeInBytes=function(){for(var e=0,t=0,r=this.args.length;t<r;t++){var i=this.args[t];e+=(i instanceof Cn?i.sizeInBytes():i.length)+1}return e+=this.name.length,e},n.prototype.copyBytesInto=function(e,t){for(var r=t,i=0,o=this.args.length;i<o;i++){var s=this.args[i];s instanceof Cn?t+=s.copyBytesInto(e,t):t+=Dn(s,e,t),e[t++]=ie.Space}return t+=Dn(this.name,e,t),t-r},n.of=function(e,t){return new n(e,t)},n}(),tn=$B;var bS;(function(n){n.NonStrokingColor="sc",n.NonStrokingColorN="scn",n.NonStrokingColorRgb="rg",n.NonStrokingColorGray="g",n.NonStrokingColorCmyk="k",n.NonStrokingColorspace="cs",n.StrokingColor="SC",n.StrokingColorN="SCN",n.StrokingColorRgb="RG",n.StrokingColorGray="G",n.StrokingColorCmyk="K",n.StrokingColorspace="CS",n.BeginMarkedContentSequence="BDC",n.BeginMarkedContent="BMC",n.EndMarkedContent="EMC",n.MarkedContentPointWithProps="DP",n.MarkedContentPoint="MP",n.DrawObject="Do",n.ConcatTransformationMatrix="cm",n.PopGraphicsState="Q",n.PushGraphicsState="q",n.SetFlatness="i",n.SetGraphicsStateParams="gs",n.SetLineCapStyle="J",n.SetLineDashPattern="d",n.SetLineJoinStyle="j",n.SetLineMiterLimit="M",n.SetLineWidth="w",n.SetTextMatrix="Tm",n.SetRenderingIntent="ri",n.AppendRectangle="re",n.BeginInlineImage="BI",n.BeginInlineImageData="ID",n.EndInlineImage="EI",n.ClipEvenOdd="W*",n.ClipNonZero="W",n.CloseAndStroke="s",n.CloseFillEvenOddAndStroke="b*",n.CloseFillNonZeroAndStroke="b",n.ClosePath="h",n.AppendBezierCurve="c",n.CurveToReplicateFinalPoint="y",n.CurveToReplicateInitialPoint="v",n.EndPath="n",n.FillEvenOddAndStroke="B*",n.FillEvenOdd="f*",n.FillNonZeroAndStroke="B",n.FillNonZero="f",n.LegacyFillNonZero="F",n.LineTo="l",n.MoveTo="m",n.ShadingFill="sh",n.StrokePath="S",n.BeginText="BT",n.EndText="ET",n.MoveText="Td",n.MoveTextSetLeading="TD",n.NextLine="T*",n.SetCharacterSpacing="Tc",n.SetFontAndSize="Tf",n.SetTextHorizontalScaling="Tz",n.SetTextLineHeight="TL",n.SetTextRenderingMode="Tr",n.SetTextRise="Ts",n.SetWordSpacing="Tw",n.ShowText="Tj",n.ShowTextAdjusted="TJ",n.ShowTextLine="'",n.ShowTextLineAndSpace='"',n.Type3D0="d0",n.Type3D1="d1",n.BeginCompatibilitySection="BX",n.EndCompatibilitySection="EX"})(bS||(bS={}));var rn=bS;var oI=od(Yp());var ez=function(n){Pe(e,n);function e(t,r){var i=n.call(this,t)||this;return i.computeContents=function(){var o=i.getUnencodedContents();return i.encode?oI.default.deflate(o):o},i.encode=r,r&&t.set(Q.of("Filter"),Q.of("FlateDecode")),i.contentsCache=si.populatedBy(i.computeContents),i}return e.prototype.getContents=function(){return this.contentsCache.access()},e.prototype.getContentsSize=function(){return this.contentsCache.access().length},e.prototype.getUnencodedContents=function(){throw new $r(this.constructor.name,"getUnencodedContents")},e}(Hn),Vc=ez;var tz=function(n){Pe(e,n);function e(t,r,i){i===void 0&&(i=!0);var o=n.call(this,t,i)||this;return o.operators=r,o}return e.prototype.push=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];(t=this.operators).push.apply(t,r)},e.prototype.clone=function(t){for(var r=new Array(this.operators.length),i=0,o=this.operators.length;i<o;i++)r[i]=this.operators[i].clone(t);var s=this,a=s.dict,c=s.encode;return e.of(a.clone(t),r,c)},e.prototype.getContentsString=function(){for(var t="",r=0,i=this.operators.length;r<i;r++)t+=this.operators[r]+`
`;return t},e.prototype.getUnencodedContents=function(){for(var t=new Uint8Array(this.getUnencodedContentsSize()),r=0,i=0,o=this.operators.length;i<o;i++)r+=this.operators[i].copyBytesInto(t,r),t[r++]=ie.Newline;return t},e.prototype.getUnencodedContentsSize=function(){for(var t=0,r=0,i=this.operators.length;r<i;r++)t+=this.operators[r].sizeInBytes()+1;return t},e.of=function(t,r,i){return i===void 0&&(i=!0),new e(t,r,i)},e}(Vc),ka=tz;var sI=function(){function n(e){this.seed=e}return n.prototype.nextInt=function(){var e=Math.sin(this.seed++)*1e4;return e-Math.floor(e)},n.withSeed=function(e){return new n(e)},n}();var nz=function(n,e){var t=n[0],r=e[0];return t.objectNumber-r.objectNumber},rz=function(){function n(){this.largestObjectNumber=0,this.header=La.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=sI.withSeed(1)}return n.prototype.assign=function(e,t){this.indirectObjects.set(e,t),e.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=e.objectNumber)},n.prototype.nextRef=function(){return this.largestObjectNumber+=1,Nt.of(this.largestObjectNumber)},n.prototype.register=function(e){var t=this.nextRef();return this.assign(t,e),t},n.prototype.delete=function(e){return this.indirectObjects.delete(e)},n.prototype.lookupMaybe=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=t.includes(jr),o=e instanceof Nt?this.indirectObjects.get(e):e;if(!(!o||o===jr&&!i)){for(var s=0,a=t.length;s<a;s++){var c=t[s];if(c===jr){if(o===jr)return o}else if(o instanceof c)return o}throw new Gc(t,o)}},n.prototype.lookup=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=e instanceof Nt?this.indirectObjects.get(e):e;if(t.length===0)return i;for(var o=0,s=t.length;o<s;o++){var a=t[o];if(a===jr){if(i===jr)return i}else if(i instanceof a)return i}throw new Gc(t,i)},n.prototype.getObjectRef=function(e){for(var t=Array.from(this.indirectObjects.entries()),r=0,i=t.length;r<i;r++){var o=t[r],s=o[0],a=o[1];if(a===e)return s}},n.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(nz)},n.prototype.obj=function(e){if(e instanceof Cn)return e;if(e==null)return jr;if(typeof e=="string")return Q.of(e);if(typeof e=="number")return it.of(e);if(typeof e=="boolean")return e?Oa.True:Oa.False;if(Array.isArray(e)){for(var t=Rt.withContext(this),r=0,i=e.length;r<i;r++)t.push(this.obj(e[r]));return t}else{for(var o=at.withContext(this),s=Object.keys(e),r=0,i=s.length;r<i;r++){var a=s[r],c=e[a];c!==void 0&&o.set(Q.of(a),this.obj(c))}return o}},n.prototype.stream=function(e,t){return t===void 0&&(t={}),Xs.of(this.obj(t),L0(e))},n.prototype.flateStream=function(e,t){return t===void 0&&(t={}),this.stream(aI.default.deflate(L0(e)),Ft(Ft({},t),{Filter:"FlateDecode"}))},n.prototype.contentStream=function(e,t){return t===void 0&&(t={}),ka.of(this.obj(t),e)},n.prototype.formXObject=function(e,t){return t===void 0&&(t={}),this.contentStream(e,Ft(Ft({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},t),{Type:"XObject",Subtype:"Form"}))},n.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var e=this.obj({}),t=tn.of(rn.PushGraphicsState),r=ka.of(e,[t]);return this.pushGraphicsStateContentStreamRef=this.register(r),this.pushGraphicsStateContentStreamRef},n.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var e=this.obj({}),t=tn.of(rn.PopGraphicsState),r=ka.of(e,[t]);return this.popGraphicsStateContentStreamRef=this.register(r),this.popGraphicsStateContentStreamRef},n.prototype.addRandomSuffix=function(e,t){return t===void 0&&(t=4),e+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,t))},n.create=function(){return new n},n}(),kf=rz;var iz=function(n){Pe(e,n);function e(t,r,i){i===void 0&&(i=!0);var o=n.call(this,t,r)||this;return o.normalized=!1,o.autoNormalizeCTM=i,o}return e.prototype.clone=function(t){for(var r=e.fromMapWithContext(new Map,t||this.context,this.autoNormalizeCTM),i=this.entries(),o=0,s=i.length;o<s;o++){var a=i[o],c=a[0],l=a[1];r.set(c,l)}return r},e.prototype.Parent=function(){return this.lookupMaybe(Q.Parent,at)},e.prototype.Contents=function(){return this.lookup(Q.of("Contents"))},e.prototype.Annots=function(){return this.lookupMaybe(Q.Annots,Rt)},e.prototype.BleedBox=function(){return this.lookupMaybe(Q.BleedBox,Rt)},e.prototype.TrimBox=function(){return this.lookupMaybe(Q.TrimBox,Rt)},e.prototype.ArtBox=function(){return this.lookupMaybe(Q.ArtBox,Rt)},e.prototype.Resources=function(){var t=this.getInheritableAttribute(Q.Resources);return this.context.lookupMaybe(t,at)},e.prototype.MediaBox=function(){var t=this.getInheritableAttribute(Q.MediaBox);return this.context.lookup(t,Rt)},e.prototype.CropBox=function(){var t=this.getInheritableAttribute(Q.CropBox);return this.context.lookupMaybe(t,Rt)},e.prototype.Rotate=function(){var t=this.getInheritableAttribute(Q.Rotate);return this.context.lookupMaybe(t,it)},e.prototype.getInheritableAttribute=function(t){var r;return this.ascend(function(i){r||(r=i.get(t))}),r},e.prototype.setParent=function(t){this.set(Q.Parent,t)},e.prototype.addContentStream=function(t){var r=this.normalizedEntries().Contents||this.context.obj([]);this.set(Q.Contents,r),r.push(t)},e.prototype.wrapContentStreams=function(t,r){var i=this.Contents();return i instanceof Rt?(i.insert(0,t),i.push(r),!0):!1},e.prototype.addAnnot=function(t){var r=this.normalizedEntries().Annots;r.push(t)},e.prototype.removeAnnot=function(t){var r=this.normalizedEntries().Annots,i=r.indexOf(t);i!==void 0&&r.remove(i)},e.prototype.setFontDictionary=function(t,r){var i=this.normalizedEntries().Font;i.set(t,r)},e.prototype.newFontDictionaryKey=function(t){var r=this.normalizedEntries().Font;return r.uniqueKey(t)},e.prototype.newFontDictionary=function(t,r){var i=this.newFontDictionaryKey(t);return this.setFontDictionary(i,r),i},e.prototype.setXObject=function(t,r){var i=this.normalizedEntries().XObject;i.set(t,r)},e.prototype.newXObjectKey=function(t){var r=this.normalizedEntries().XObject;return r.uniqueKey(t)},e.prototype.newXObject=function(t,r){var i=this.newXObjectKey(t);return this.setXObject(i,r),i},e.prototype.setExtGState=function(t,r){var i=this.normalizedEntries().ExtGState;i.set(t,r)},e.prototype.newExtGStateKey=function(t){var r=this.normalizedEntries().ExtGState;return r.uniqueKey(t)},e.prototype.newExtGState=function(t,r){var i=this.newExtGStateKey(t);return this.setExtGState(i,r),i},e.prototype.ascend=function(t){t(this);var r=this.Parent();r&&r.ascend(t)},e.prototype.normalize=function(){if(!this.normalized){var t=this.context,r=this.get(Q.Contents),i=this.context.lookup(r);i instanceof Hn&&this.set(Q.Contents,t.obj([r])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var o=this.getInheritableAttribute(Q.Resources),s=t.lookupMaybe(o,at)||t.obj({});this.set(Q.Resources,s);var a=s.lookupMaybe(Q.Font,at)||t.obj({});s.set(Q.Font,a);var c=s.lookupMaybe(Q.XObject,at)||t.obj({});s.set(Q.XObject,c);var l=s.lookupMaybe(Q.ExtGState,at)||t.obj({});s.set(Q.ExtGState,l);var u=this.Annots()||t.obj([]);this.set(Q.Annots,u),this.normalized=!0}},e.prototype.normalizedEntries=function(){this.normalize();var t=this.Annots(),r=this.Resources(),i=this.Contents();return{Annots:t,Resources:r,Contents:i,Font:r.lookup(Q.Font,at),XObject:r.lookup(Q.XObject,at),ExtGState:r.lookup(Q.ExtGState,at)}},e.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],e.withContextAndParent=function(t,r){var i=new Map;return i.set(Q.Type,Q.Page),i.set(Q.Parent,r),i.set(Q.Resources,t.obj({})),i.set(Q.MediaBox,t.obj([0,0,612,792])),new e(i,t,!1)},e.fromMapWithContext=function(t,r,i){return i===void 0&&(i=!0),new e(t,r,i)},e}(at),Ci=iz;var oz=function(){function n(e,t){var r=this;this.traversedObjects=new Map,this.copy=function(i){return i instanceof Ci?r.copyPDFPage(i):i instanceof at?r.copyPDFDict(i):i instanceof Rt?r.copyPDFArray(i):i instanceof Hn?r.copyPDFStream(i):i instanceof Nt?r.copyPDFIndirectObject(i):i.clone()},this.copyPDFPage=function(i){for(var o=i.clone(),s=Ci.InheritableEntries,a=0,c=s.length;a<c;a++){var l=Q.of(s[a]),u=o.getInheritableAttribute(l);!o.get(l)&&u&&o.set(l,u)}return o.delete(Q.of("Parent")),r.copyPDFDict(o)},this.copyPDFDict=function(i){if(r.traversedObjects.has(i))return r.traversedObjects.get(i);var o=i.clone(r.dest);r.traversedObjects.set(i,o);for(var s=i.entries(),a=0,c=s.length;a<c;a++){var l=s[a],u=l[0],h=l[1];o.set(u,r.copy(h))}return o},this.copyPDFArray=function(i){if(r.traversedObjects.has(i))return r.traversedObjects.get(i);var o=i.clone(r.dest);r.traversedObjects.set(i,o);for(var s=0,a=i.size();s<a;s++){var c=i.get(s);o.set(s,r.copy(c))}return o},this.copyPDFStream=function(i){if(r.traversedObjects.has(i))return r.traversedObjects.get(i);var o=i.clone(r.dest);r.traversedObjects.set(i,o);for(var s=i.dict.entries(),a=0,c=s.length;a<c;a++){var l=s[a],u=l[0],h=l[1];o.dict.set(u,r.copy(h))}return o},this.copyPDFIndirectObject=function(i){var o=r.traversedObjects.has(i);if(!o){var s=r.dest.nextRef();r.traversedObjects.set(i,s);var a=r.src.lookup(i);if(a){var c=r.copy(a);r.dest.assign(s,c)}}return r.traversedObjects.get(i)},this.src=e,this.dest=t}return n.for=function(e,t){return new n(e,t)},n}(),ay=oz;var sz=function(){function n(e){this.subsections=e?[[e]]:[],this.chunkIdx=0,this.chunkLength=e?1:0}return n.prototype.addEntry=function(e,t){this.append({ref:e,offset:t,deleted:!1})},n.prototype.addDeletedEntry=function(e,t){this.append({ref:e,offset:t,deleted:!0})},n.prototype.toString=function(){for(var e=`xref
`,t=0,r=this.subsections.length;t<r;t++){var i=this.subsections[t];e+=i[0].ref.objectNumber+" "+i.length+`
`;for(var o=0,s=i.length;o<s;o++){var a=i[o];e+=so(String(a.offset),10,"0"),e+=" ",e+=so(String(a.ref.generationNumber),5,"0"),e+=" ",e+=a.deleted?"f":"n",e+=` 
`}}return e},n.prototype.sizeInBytes=function(){for(var e=5,t=0,r=this.subsections.length;t<r;t++){var i=this.subsections[t],o=i.length,s=i[0];e+=2,e+=String(s.ref.objectNumber).length,e+=String(o).length,e+=20*o}return e},n.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=ie.x,e[t++]=ie.r,e[t++]=ie.e,e[t++]=ie.f,e[t++]=ie.Newline,t+=this.copySubsectionsIntoBuffer(this.subsections,e,t),t-r},n.prototype.copySubsectionsIntoBuffer=function(e,t,r){for(var i=r,o=e.length,s=0;s<o;s++){var a=this.subsections[s],c=String(a[0].ref.objectNumber);r+=Dn(c,t,r),t[r++]=ie.Space;var l=String(a.length);r+=Dn(l,t,r),t[r++]=ie.Newline,r+=this.copyEntriesIntoBuffer(a,t,r)}return r-i},n.prototype.copyEntriesIntoBuffer=function(e,t,r){for(var i=e.length,o=0;o<i;o++){var s=e[o],a=so(String(s.offset),10,"0");r+=Dn(a,t,r),t[r++]=ie.Space;var c=so(String(s.ref.generationNumber),5,"0");r+=Dn(c,t,r),t[r++]=ie.Space,t[r++]=s.deleted?ie.f:ie.n,t[r++]=ie.Space,t[r++]=ie.Newline}return 20*i},n.prototype.append=function(e){if(this.chunkLength===0){this.subsections.push([e]),this.chunkIdx=0,this.chunkLength=1;return}var t=this.subsections[this.chunkIdx],r=t[this.chunkLength-1];e.ref.objectNumber-r.ref.objectNumber>1?(this.subsections.push([e]),this.chunkIdx+=1,this.chunkLength=1):(t.push(e),this.chunkLength+=1)},n.create=function(){return new n({ref:Nt.of(0,65535),offset:0,deleted:!0})},n.createEmpty=function(){return new n},n}(),nm=sz;var az=function(){function n(e){this.lastXRefOffset=String(e)}return n.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},n.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},n.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=ie.s,e[t++]=ie.t,e[t++]=ie.a,e[t++]=ie.r,e[t++]=ie.t,e[t++]=ie.x,e[t++]=ie.r,e[t++]=ie.e,e[t++]=ie.f,e[t++]=ie.Newline,t+=Dn(this.lastXRefOffset,e,t),e[t++]=ie.Newline,e[t++]=ie.Percent,e[t++]=ie.Percent,e[t++]=ie.E,e[t++]=ie.O,e[t++]=ie.F,t-r},n.forLastCrossRefSectionOffset=function(e){return new n(e)},n}(),Hc=az;var lz=function(){function n(e){this.dict=e}return n.prototype.toString=function(){return`trailer
`+this.dict.toString()},n.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},n.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=ie.t,e[t++]=ie.r,e[t++]=ie.a,e[t++]=ie.i,e[t++]=ie.l,e[t++]=ie.e,e[t++]=ie.r,e[t++]=ie.Newline,t+=this.dict.copyBytesInto(e,t),t-r},n.of=function(e){return new n(e)},n}(),wS=lz;var cz=function(n){Pe(e,n);function e(t,r,i){i===void 0&&(i=!0);var o=n.call(this,t.obj({}),i)||this;return o.objects=r,o.offsets=o.computeObjectOffsets(),o.offsetsString=o.computeOffsetsString(),o.dict.set(Q.of("Type"),Q.of("ObjStm")),o.dict.set(Q.of("N"),it.of(o.objects.length)),o.dict.set(Q.of("First"),it.of(o.offsetsString.length)),o}return e.prototype.getObjectsCount=function(){return this.objects.length},e.prototype.clone=function(t){return e.withContextAndObjects(t||this.dict.context,this.objects.slice(),this.encode)},e.prototype.getContentsString=function(){for(var t=this.offsetsString,r=0,i=this.objects.length;r<i;r++){var o=this.objects[r],s=o[1];t+=s+`
`}return t},e.prototype.getUnencodedContents=function(){for(var t=new Uint8Array(this.getUnencodedContentsSize()),r=Dn(this.offsetsString,t,0),i=0,o=this.objects.length;i<o;i++){var s=this.objects[i],a=s[1];r+=a.copyBytesInto(t,r),t[r++]=ie.Newline}return t},e.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+bf(this.offsets)[1]+bf(this.objects)[1].sizeInBytes()+1},e.prototype.computeOffsetsString=function(){for(var t="",r=0,i=this.offsets.length;r<i;r++){var o=this.offsets[r],s=o[0],a=o[1];t+=s+" "+a+" "}return t},e.prototype.computeObjectOffsets=function(){for(var t=0,r=new Array(this.objects.length),i=0,o=this.objects.length;i<o;i++){var s=this.objects[i],a=s[0],c=s[1];r[i]=[a.objectNumber,t],t+=c.sizeInBytes()+1}return r},e.withContextAndObjects=function(t,r,i){return i===void 0&&(i=!0),new e(t,r,i)},e}(Vc),rm=cz;var uz=function(){function n(e,t){var r=this;this.parsedObjects=0,this.shouldWaitForTick=function(i){return r.parsedObjects+=i,r.parsedObjects%r.objectsPerTick===0},this.context=e,this.objectsPerTick=t}return n.prototype.serializeToBuffer=function(){return pt(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,l,u,h,f,d,m,v,p,g;return mt(this,function(x){switch(x.label){case 0:return[4,this.computeBufferSize()];case 1:e=x.sent(),t=e.size,r=e.header,i=e.indirectObjects,o=e.xref,s=e.trailerDict,a=e.trailer,c=0,l=new Uint8Array(t),c+=r.copyBytesInto(l,c),l[c++]=ie.Newline,l[c++]=ie.Newline,u=0,h=i.length,x.label=2;case 2:return u<h?(f=i[u],d=f[0],m=f[1],v=String(d.objectNumber),c+=Dn(v,l,c),l[c++]=ie.Space,p=String(d.generationNumber),c+=Dn(p,l,c),l[c++]=ie.Space,l[c++]=ie.o,l[c++]=ie.b,l[c++]=ie.j,l[c++]=ie.Newline,c+=m.copyBytesInto(l,c),l[c++]=ie.Newline,l[c++]=ie.e,l[c++]=ie.n,l[c++]=ie.d,l[c++]=ie.o,l[c++]=ie.b,l[c++]=ie.j,l[c++]=ie.Newline,l[c++]=ie.Newline,g=m instanceof rm?m.getObjectsCount():1,this.shouldWaitForTick(g)?[4,Gs()]:[3,4]):[3,5];case 3:x.sent(),x.label=4;case 4:return u++,[3,2];case 5:return o&&(c+=o.copyBytesInto(l,c),l[c++]=ie.Newline),s&&(c+=s.copyBytesInto(l,c),l[c++]=ie.Newline,l[c++]=ie.Newline),c+=a.copyBytesInto(l,c),[2,l]}})})},n.prototype.computeIndirectObjectSize=function(e){var t=e[0],r=e[1],i=t.sizeInBytes()+3,o=r.sizeInBytes()+9;return i+o},n.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},n.prototype.computeBufferSize=function(){return pt(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,l,u,h;return mt(this,function(f){switch(f.label){case 0:e=La.forVersion(1,7),t=e.sizeInBytes()+2,r=nm.create(),i=this.context.enumerateIndirectObjects(),o=0,s=i.length,f.label=1;case 1:return o<s?(a=i[o],c=a[0],r.addEntry(c,t),t+=this.computeIndirectObjectSize(a),this.shouldWaitForTick(1)?[4,Gs()]:[3,3]):[3,4];case 2:f.sent(),f.label=3;case 3:return o++,[3,1];case 4:return l=t,t+=r.sizeInBytes()+1,u=wS.of(this.createTrailerDict()),t+=u.sizeInBytes()+2,h=Hc.forLastCrossRefSectionOffset(l),t+=h.sizeInBytes(),[2,{size:t,header:e,indirectObjects:i,xref:r,trailerDict:u,trailer:h}]}})})},n.forContext=function(e,t){return new n(e,t)},n}(),im=uz;var hz=function(n){Pe(e,n);function e(t){var r=n.call(this)||this;return r.data=t,r}return e.prototype.clone=function(){return e.of(this.data.slice())},e.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},e.prototype.sizeInBytes=function(){return this.data.length},e.prototype.copyBytesInto=function(t,r){for(var i=this.data.length,o=0;o<i;o++)t[r++]=this.data[o];return i},e.of=function(t){return new e(t)},e}(Cn),om=hz;var Nl;(function(n){n[n.Deleted=0]="Deleted",n[n.Uncompressed=1]="Uncompressed",n[n.Compressed=2]="Compressed"})(Nl||(Nl={}));var fz=function(n){Pe(e,n);function e(t,r,i){i===void 0&&(i=!0);var o=n.call(this,t,i)||this;return o.computeIndex=function(){for(var s=[],a=0,c=0,l=o.entries.length;c<l;c++){var u=o.entries[c],h=o.entries[c-1];c===0?s.push(u.ref.objectNumber):u.ref.objectNumber-h.ref.objectNumber>1&&(s.push(a),s.push(u.ref.objectNumber),a=0),a+=1}return s.push(a),s},o.computeEntryTuples=function(){for(var s=new Array(o.entries.length),a=0,c=o.entries.length;a<c;a++){var l=o.entries[a];if(l.type===Nl.Deleted){var u=l.type,h=l.nextFreeObjectNumber,f=l.ref;s[a]=[u,h,f.generationNumber]}if(l.type===Nl.Uncompressed){var u=l.type,d=l.offset,f=l.ref;s[a]=[u,d,f.generationNumber]}if(l.type===Nl.Compressed){var u=l.type,m=l.objectStreamRef,v=l.index;s[a]=[u,m.objectNumber,v]}}return s},o.computeMaxEntryByteWidths=function(){for(var s=o.entryTuplesCache.access(),a=[0,0,0],c=0,l=s.length;c<l;c++){var u=s[c],h=u[0],f=u[1],d=u[2],m=Dp(h),v=Dp(f),p=Dp(d);m>a[0]&&(a[0]=m),v>a[1]&&(a[1]=v),p>a[2]&&(a[2]=p)}return a},o.entries=r||[],o.entryTuplesCache=si.populatedBy(o.computeEntryTuples),o.maxByteWidthsCache=si.populatedBy(o.computeMaxEntryByteWidths),o.indexCache=si.populatedBy(o.computeIndex),t.set(Q.of("Type"),Q.of("XRef")),o}return e.prototype.addDeletedEntry=function(t,r){var i=Nl.Deleted;this.entries.push({type:i,ref:t,nextFreeObjectNumber:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addUncompressedEntry=function(t,r){var i=Nl.Uncompressed;this.entries.push({type:i,ref:t,offset:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addCompressedEntry=function(t,r,i){var o=Nl.Compressed;this.entries.push({type:o,ref:t,objectStreamRef:r,index:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.clone=function(t){var r=this,i=r.dict,o=r.entries,s=r.encode;return e.of(i.clone(t),o.slice(),s)},e.prototype.getContentsString=function(){for(var t=this.entryTuplesCache.access(),r=this.maxByteWidthsCache.access(),i="",o=0,s=t.length;o<s;o++){for(var a=t[o],c=a[0],l=a[1],u=a[2],h=Ic(Rc(c)),f=Ic(Rc(l)),d=Ic(Rc(u)),m=r[0]-1;m>=0;m--)i+=(h[m]||0).toString(2);for(var m=r[1]-1;m>=0;m--)i+=(f[m]||0).toString(2);for(var m=r[2]-1;m>=0;m--)i+=(d[m]||0).toString(2)}return i},e.prototype.getUnencodedContents=function(){for(var t=this.entryTuplesCache.access(),r=this.maxByteWidthsCache.access(),i=new Uint8Array(this.getUnencodedContentsSize()),o=0,s=0,a=t.length;s<a;s++){for(var c=t[s],l=c[0],u=c[1],h=c[2],f=Ic(Rc(l)),d=Ic(Rc(u)),m=Ic(Rc(h)),v=r[0]-1;v>=0;v--)i[o++]=f[v]||0;for(var v=r[1]-1;v>=0;v--)i[o++]=d[v]||0;for(var v=r[2]-1;v>=0;v--)i[o++]=m[v]||0}return i},e.prototype.getUnencodedContentsSize=function(){var t=this.maxByteWidthsCache.access(),r=vE(t);return r*this.entries.length},e.prototype.updateDict=function(){n.prototype.updateDict.call(this);var t=this.maxByteWidthsCache.access(),r=this.indexCache.access(),i=this.dict.context;this.dict.set(Q.of("W"),i.obj(t)),this.dict.set(Q.of("Index"),i.obj(r))},e.create=function(t,r){r===void 0&&(r=!0);var i=new e(t,[],r);return i.addDeletedEntry(Nt.of(0,65535),0),i},e.of=function(t,r,i){return i===void 0&&(i=!0),new e(t,r,i)},e}(Vc),SS=fz;var dz=function(n){Pe(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.encodeStreams=i,s.objectsPerStream=o,s}return e.prototype.computeBufferSize=function(){return pt(this,void 0,void 0,function(){var t,r,i,o,s,a,c,l,m,v,u,g,h,f,p,d,m,v,p,g,x,y,b,S;return mt(this,function(_){switch(_.label){case 0:t=this.context.largestObjectNumber+1,r=La.forVersion(1,7),i=r.sizeInBytes()+2,o=SS.create(this.createTrailerDict(),this.encodeStreams),s=[],a=[],c=[],l=this.context.enumerateIndirectObjects(),m=0,v=l.length,_.label=1;case 1:return m<v?(u=l[m],g=u[0],h=u[1],f=g===this.context.trailerInfo.Encrypt||h instanceof Hn||h instanceof om||g.generationNumber!==0,f?(s.push(u),o.addUncompressedEntry(g,i),i+=this.computeIndirectObjectSize(u),this.shouldWaitForTick(1)?[4,Gs()]:[3,3]):[3,4]):[3,6];case 2:_.sent(),_.label=3;case 3:return[3,5];case 4:p=bf(a),d=bf(c),(!p||p.length%this.objectsPerStream===0)&&(p=[],a.push(p),d=Nt.of(t++),c.push(d)),o.addCompressedEntry(g,d,p.length),p.push(u),_.label=5;case 5:return m++,[3,1];case 6:m=0,v=a.length,_.label=7;case 7:return m<v?(p=a[m],g=c[m],x=rm.withContextAndObjects(this.context,p,this.encodeStreams),o.addUncompressedEntry(g,i),i+=this.computeIndirectObjectSize([g,x]),s.push([g,x]),this.shouldWaitForTick(p.length)?[4,Gs()]:[3,9]):[3,10];case 8:_.sent(),_.label=9;case 9:return m++,[3,7];case 10:return y=Nt.of(t++),o.dict.set(Q.of("Size"),it.of(t)),o.addUncompressedEntry(y,i),b=i,i+=this.computeIndirectObjectSize([y,o]),s.push([y,o]),S=Hc.forLastCrossRefSectionOffset(b),i+=S.sizeInBytes(),[2,{size:i,header:r,indirectObjects:s,trailer:S}]}})})},e.forContext=function(t,r,i,o){return i===void 0&&(i=!0),o===void 0&&(o=50),new e(t,r,i,o)},e}(im),_S=dz;var pz=function(n){Pe(e,n);function e(t){var r=n.call(this)||this;return r.value=t,r}return e.prototype.asBytes=function(){for(var t=this.value+(this.value.length%2===1?"0":""),r=t.length,i=new Uint8Array(t.length/2),o=0,s=0;o<r;){var a=parseInt(t.substring(o,o+2),16);i[s]=a,o+=2,s+=1}return i},e.prototype.decodeText=function(){var t=this.asBytes();return U0(t)?k0(t):iy(t)},e.prototype.decodeDate=function(){var t=this.decodeText(),r=N0(t);if(!r)throw new oy(t);return r},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"<"+this.value+">"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(t,r){return t[r++]=ie.LessThan,r+=Dn(this.value,t,r),t[r++]=ie.GreaterThan,this.value.length+2},e.of=function(t){return new e(t)},e.fromText=function(t){for(var r=_E(t),i="",o=0,s=r.length;o<s;o++)i+=Ra(r[o],4);return new e(i)},e}(Cn),rt=pz;var mz=function(){function n(e,t){this.encoding=e===zc.ZapfDingbats?Qp.ZapfDingbats:e===zc.Symbol?Qp.Symbol:Qp.WinAnsi,this.font=FC.load(e),this.fontName=this.font.FontName,this.customName=t}return n.prototype.encodeText=function(e){for(var t=this.encodeTextAsGlyphs(e),r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]=Tl(t[i].code);return rt.of(r.join(""))},n.prototype.widthOfTextAtSize=function(e,t){for(var r=this.encodeTextAsGlyphs(e),i=0,o=0,s=r.length;o<s;o++){var a=r[o].name,c=(r[o+1]||{}).name,l=this.font.getXAxisKerningForPair(a,c)||0;i+=this.widthOfGlyph(a)+l}var u=t/1e3;return i*u},n.prototype.heightOfFontAtSize=function(e,t){t===void 0&&(t={});var r=t.descender,i=r===void 0?!0:r,o=this.font,s=o.Ascender,a=o.Descender,c=o.FontBBox,l=s||c[3],u=a||c[1],h=l-u;return i||(h+=a||0),h/1e3*e},n.prototype.sizeOfFontAtHeight=function(e){var t=this.font,r=t.Ascender,i=t.Descender,o=t.FontBBox,s=r||o[3],a=i||o[1];return 1e3*e/(s-a)},n.prototype.embedIntoContext=function(e,t){var r=e.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===Qp.WinAnsi?"WinAnsiEncoding":void 0});return t?(e.assign(t,r),t):e.register(r)},n.prototype.widthOfGlyph=function(e){return this.font.getWidthOfGlyph(e)||250},n.prototype.encodeTextAsGlyphs=function(e){for(var t=Array.from(e),r=new Array(t.length),i=0,o=t.length;i<o;i++){var s=lE(t[i]);r[i]=this.encoding.encodeUnicodeCodePoint(s)}return r},n.for=function(e,t){return new n(e,t)},n}(),Wc=mz;var cI=function(n,e){for(var t=new Array(n.length),r=0,i=n.length;r<i;r++){var o=n[r],s=lI(ly(e(o))),a=lI.apply(void 0,o.codePoints.map(vz));t[r]=[s,a]}return gz(t)},gz=function(n){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+n.length+` beginbfchar
`+n.map(function(e){var t=e[0],r=e[1];return t+" "+r}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},lI=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return"<"+n.join("")+">"},ly=function(n){return Ra(n,4)},vz=function(n){if(TE(n))return ly(n);if(ME(n)){var e=Rw(n),t=Pw(n);return""+ly(e)+ly(t)}var r=Tl(n),i="0x"+r+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(i)};var yz=function(n){var e=0,t=function(r){e|=1<<r-1};return n.fixedPitch&&t(1),n.serif&&t(2),n.symbolic&&t(3),n.script&&t(4),n.nonsymbolic&&t(6),n.italic&&t(7),n.allCap&&t(17),n.smallCap&&t(18),n.forceBold&&t(19),e},uI=function(n){var e=n["OS/2"]?n["OS/2"].sFamilyClass:0,t=yz({fixedPitch:n.post.isFixedPitch,serif:1<=e&&e<=7,symbolic:!0,script:e===10,italic:n.head.macStyle.italic});return t};var xz=function(n){Pe(e,n);function e(t){var r=n.call(this)||this;return r.value=t,r}return e.prototype.asBytes=function(){for(var t=[],r="",i=!1,o=function(h){h!==void 0&&t.push(h),i=!1},s=0,a=this.value.length;s<a;s++){var c=this.value[s],l=Lt(c),u=this.value[s+1];i?l===ie.Newline||l===ie.CarriageReturn?o():l===ie.n?o(ie.Newline):l===ie.r?o(ie.CarriageReturn):l===ie.t?o(ie.Tab):l===ie.b?o(ie.Backspace):l===ie.f?o(ie.FormFeed):l===ie.LeftParen?o(ie.LeftParen):l===ie.RightParen?o(ie.RightParen):l===ie.Backspace?o(ie.BackSlash):l>=ie.Zero&&l<=ie.Seven?(r+=c,(r.length===3||!(u>="0"&&u<="7"))&&(o(parseInt(r,8)),r="")):o(l):l===ie.BackSlash?i=!0:o(l)}return new Uint8Array(t)},e.prototype.decodeText=function(){var t=this.asBytes();return U0(t)?k0(t):iy(t)},e.prototype.decodeDate=function(){var t=this.decodeText(),r=N0(t);if(!r)throw new oy(t);return r},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"("+this.value+")"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(t,r){return t[r++]=ie.LeftParen,r+=Dn(this.value,t,r),t[r++]=ie.RightParen,this.value.length+2},e.of=function(t){return new e(t)},e.fromDate=function(t){var r=so(String(t.getUTCFullYear()),4,"0"),i=so(String(t.getUTCMonth()+1),2,"0"),o=so(String(t.getUTCDate()),2,"0"),s=so(String(t.getUTCHours()),2,"0"),a=so(String(t.getUTCMinutes()),2,"0"),c=so(String(t.getUTCSeconds()),2,"0");return new e("D:"+r+i+o+s+a+c+"Z")},e}(Cn),Qt=xz;var bz=function(){function n(e,t,r,i){var o=this;this.allGlyphsInFontSortedById=function(){for(var s=new Array(o.font.characterSet.length),a=0,c=s.length;a<c;a++){var l=o.font.characterSet[a];s[a]=o.font.glyphForCodePoint(l)}return gE(s.sort(mE),function(u){return u.id})},this.font=e,this.scale=1e3/this.font.unitsPerEm,this.fontData=t,this.fontName=this.font.postscriptName||"Font",this.customName=r,this.fontFeatures=i,this.baseFontName="",this.glyphCache=si.populatedBy(this.allGlyphsInFontSortedById)}return n.for=function(e,t,r,i){return pt(this,void 0,void 0,function(){var o;return mt(this,function(s){switch(s.label){case 0:return[4,e.create(t)];case 1:return o=s.sent(),[2,new n(o,t,r,i)]}})})},n.prototype.encodeText=function(e){for(var t=this.font.layout(e,this.fontFeatures).glyphs,r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]=Ra(t[i].id,4);return rt.of(r.join(""))},n.prototype.widthOfTextAtSize=function(e,t){for(var r=this.font.layout(e,this.fontFeatures).glyphs,i=0,o=0,s=r.length;o<s;o++)i+=r[o].advanceWidth*this.scale;var a=t/1e3;return i*a},n.prototype.heightOfFontAtSize=function(e,t){t===void 0&&(t={});var r=t.descender,i=r===void 0?!0:r,o=this.font,s=o.ascent,a=o.descent,c=o.bbox,l=(s||c.maxY)*this.scale,u=(a||c.minY)*this.scale,h=l-u;return i||(h-=Math.abs(a)||0),h/1e3*e},n.prototype.sizeOfFontAtHeight=function(e){var t=this.font,r=t.ascent,i=t.descent,o=t.bbox,s=(r||o.maxY)*this.scale,a=(i||o.minY)*this.scale;return 1e3*e/(s-a)},n.prototype.embedIntoContext=function(e,t){return this.baseFontName=this.customName||e.addRandomSuffix(this.fontName),this.embedFontDict(e,t)},n.prototype.embedFontDict=function(e,t){return pt(this,void 0,void 0,function(){var r,i,o;return mt(this,function(s){switch(s.label){case 0:return[4,this.embedCIDFontDict(e)];case 1:return r=s.sent(),i=this.embedUnicodeCmap(e),o=e.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[r],ToUnicode:i}),t?(e.assign(t,o),[2,t]):[2,e.register(o)]}})})},n.prototype.isCFF=function(){return this.font.cff},n.prototype.embedCIDFontDict=function(e){return pt(this,void 0,void 0,function(){var t,r;return mt(this,function(i){switch(i.label){case 0:return[4,this.embedFontDescriptor(e)];case 1:return t=i.sent(),r=e.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:Qt.of("Adobe"),Ordering:Qt.of("Identity"),Supplement:0},FontDescriptor:t,W:this.computeWidths()}),[2,e.register(r)]}})})},n.prototype.embedFontDescriptor=function(e){return pt(this,void 0,void 0,function(){var t,r,i,o,s,a,c,l,u,h,f,d,m,v,p;return mt(this,function(g){switch(g.label){case 0:return[4,this.embedFontStream(e)];case 1:return t=g.sent(),r=this.scale,i=this.font,o=i.italicAngle,s=i.ascent,a=i.descent,c=i.capHeight,l=i.xHeight,u=this.font.bbox,h=u.minX,f=u.minY,d=u.maxX,m=u.maxY,v=e.obj((p={Type:"FontDescriptor",FontName:this.baseFontName,Flags:uI(this.font),FontBBox:[h*r,f*r,d*r,m*r],ItalicAngle:o,Ascent:s*r,Descent:a*r,CapHeight:(c||s)*r,XHeight:(l||0)*r,StemV:0},p[this.isCFF()?"FontFile3":"FontFile2"]=t,p)),[2,e.register(v)]}})})},n.prototype.serializeFont=function(){return pt(this,void 0,void 0,function(){return mt(this,function(e){return[2,this.fontData]})})},n.prototype.embedFontStream=function(e){return pt(this,void 0,void 0,function(){var t,r,i;return mt(this,function(o){switch(o.label){case 0:return i=(r=e).flateStream,[4,this.serializeFont()];case 1:return t=i.apply(r,[o.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,e.register(t)]}})})},n.prototype.embedUnicodeCmap=function(e){var t=cI(this.glyphCache.access(),this.glyphId.bind(this)),r=e.flateStream(t);return e.register(r)},n.prototype.glyphId=function(e){return e?e.id:-1},n.prototype.computeWidths=function(){for(var e=this.glyphCache.access(),t=[],r=[],i=0,o=e.length;i<o;i++){var s=e[i],a=e[i-1],c=this.glyphId(s),l=this.glyphId(a);i===0?t.push(c):c-l!==1&&(t.push(r),t.push(c),r=[]),r.push(s.advanceWidth*this.scale)}return t.push(r),t},n}(),jc=bz;var wz=function(n){Pe(e,n);function e(t,r,i,o){var s=n.call(this,t,r,i,o)||this;return s.subset=s.font.createSubset(),s.glyphs=[],s.glyphCache=si.populatedBy(function(){return s.glyphs}),s.glyphIdMap=new Map,s}return e.for=function(t,r,i,o){return pt(this,void 0,void 0,function(){var s;return mt(this,function(a){switch(a.label){case 0:return[4,t.create(r)];case 1:return s=a.sent(),[2,new e(s,r,i,o)]}})})},e.prototype.encodeText=function(t){for(var r=this.font.layout(t,this.fontFeatures).glyphs,i=new Array(r.length),o=0,s=r.length;o<s;o++){var a=r[o],c=this.subset.includeGlyph(a);this.glyphs[c-1]=a,this.glyphIdMap.set(a.id,c),i[o]=Ra(c,4)}return this.glyphCache.invalidate(),rt.of(i.join(""))},e.prototype.isCFF=function(){return this.subset.cff},e.prototype.glyphId=function(t){return t?this.glyphIdMap.get(t.id):-1},e.prototype.serializeFont=function(){var t=this;return new Promise(function(r,i){var o=[];t.subset.encodeStream().on("data",function(s){return o.push(s)}).on("end",function(){return r(pE(o))}).on("error",function(s){return i(s)})})},e}(jc),TS=wz;var sm;(function(n){n.Source="Source",n.Data="Data",n.Alternative="Alternative",n.Supplement="Supplement",n.EncryptedPayload="EncryptedPayload",n.FormData="EncryptedPayload",n.Schema="Schema",n.Unspecified="Unspecified"})(sm||(sm={}));var Sz=function(){function n(e,t,r){r===void 0&&(r={}),this.fileData=e,this.fileName=t,this.options=r}return n.for=function(e,t,r){return r===void 0&&(r={}),new n(e,t,r)},n.prototype.embedIntoContext=function(e,t){return pt(this,void 0,void 0,function(){var r,i,o,s,a,c,l,u,h;return mt(this,function(f){return r=this.options,i=r.mimeType,o=r.description,s=r.creationDate,a=r.modificationDate,c=r.afRelationship,l=e.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:i??void 0,Params:{Size:this.fileData.length,CreationDate:s?Qt.fromDate(s):void 0,ModDate:a?Qt.fromDate(a):void 0}}),u=e.register(l),h=e.obj({Type:"Filespec",F:Qt.of(this.fileName),UF:rt.fromText(this.fileName),EF:{F:u},Desc:o?rt.fromText(o):void 0,AFRelationship:c??void 0}),t?(e.assign(t,h),[2,t]):[2,e.register(h)]})})},n}(),MS=Sz;var hI=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],Uf;(function(n){n.DeviceGray="DeviceGray",n.DeviceRGB="DeviceRGB",n.DeviceCMYK="DeviceCMYK"})(Uf||(Uf={}));var _z={1:Uf.DeviceGray,3:Uf.DeviceRGB,4:Uf.DeviceCMYK},Tz=function(){function n(e,t,r,i,o){this.imageData=e,this.bitsPerComponent=t,this.width=r,this.height=i,this.colorSpace=o}return n.for=function(e){return pt(this,void 0,void 0,function(){var t,r,i,o,s,a,c,l,u,h;return mt(this,function(f){if(t=new DataView(e.buffer),r=t.getUint16(0),r!==65496)throw new Error("SOI not found in JPEG");for(i=2;i<t.byteLength&&(o=t.getUint16(i),i+=2,!hI.includes(o));)i+=t.getUint16(i);if(!hI.includes(o))throw new Error("Invalid JPEG");if(i+=2,s=t.getUint8(i++),a=t.getUint16(i),i+=2,c=t.getUint16(i),i+=2,l=t.getUint8(i++),u=_z[l],!u)throw new Error("Unknown JPEG channel.");return h=u,[2,new n(e,s,c,a,h)]})})},n.prototype.embedIntoContext=function(e,t){return pt(this,void 0,void 0,function(){var r;return mt(this,function(i){return r=e.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===Uf.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),t?(e.assign(t,r),[2,t]):[2,e.register(r)]})})},n}(),am=Tz;var fI=od(Yp()),ze={};ze.toRGBA8=function(n){var e=n.width,t=n.height;if(n.tabs.acTL==null)return[ze.toRGBA8.decodeImage(n.data,e,t,n).buffer];var r=[];n.frames[0].data==null&&(n.frames[0].data=n.data);for(var i=e*t*4,o=new Uint8Array(i),s=new Uint8Array(i),a=new Uint8Array(i),c=0;c<n.frames.length;c++){var l=n.frames[c],u=l.rect.x,h=l.rect.y,f=l.rect.width,d=l.rect.height,m=ze.toRGBA8.decodeImage(l.data,f,d,n);if(c!=0)for(var v=0;v<i;v++)a[v]=o[v];if(l.blend==0?ze._copyTile(m,f,d,o,e,t,u,h,0):l.blend==1&&ze._copyTile(m,f,d,o,e,t,u,h,1),r.push(o.buffer.slice(0)),l.dispose!=0){if(l.dispose==1)ze._copyTile(s,f,d,o,e,t,u,h,0);else if(l.dispose==2)for(var v=0;v<i;v++)o[v]=a[v]}}return r};ze.toRGBA8.decodeImage=function(n,e,t,r){var i=e*t,o=ze.decode._getBPP(r),s=Math.ceil(e*o/8),a=new Uint8Array(i*4),c=new Uint32Array(a.buffer),l=r.ctype,u=r.depth,h=ze._bin.readUshort,f=Date.now();if(l==6){var d=i<<2;if(u==8)for(var m=0;m<d;m+=4)a[m]=n[m],a[m+1]=n[m+1],a[m+2]=n[m+2],a[m+3]=n[m+3];if(u==16)for(var m=0;m<d;m++)a[m]=n[m<<1]}else if(l==2){var v=r.tabs.tRNS;if(v==null){if(u==8)for(var m=0;m<i;m++){var p=m*3;c[m]=255<<24|n[p+2]<<16|n[p+1]<<8|n[p]}if(u==16)for(var m=0;m<i;m++){var p=m*6;c[m]=255<<24|n[p+4]<<16|n[p+2]<<8|n[p]}}else{var g=v[0],x=v[1],y=v[2];if(u==8)for(var m=0;m<i;m++){var b=m<<2,p=m*3;c[m]=255<<24|n[p+2]<<16|n[p+1]<<8|n[p],n[p]==g&&n[p+1]==x&&n[p+2]==y&&(a[b+3]=0)}if(u==16)for(var m=0;m<i;m++){var b=m<<2,p=m*6;c[m]=255<<24|n[p+4]<<16|n[p+2]<<8|n[p],h(n,p)==g&&h(n,p+2)==x&&h(n,p+4)==y&&(a[b+3]=0)}}}else if(l==3){var S=r.tabs.PLTE,_=r.tabs.tRNS,M=_?_.length:0;if(u==1)for(var A=0;A<t;A++)for(var w=A*s,T=A*e,m=0;m<e;m++){var b=T+m<<2,D=n[w+(m>>3)]>>7-((m&7)<<0)&1,N=3*D;a[b]=S[N],a[b+1]=S[N+1],a[b+2]=S[N+2],a[b+3]=D<M?_[D]:255}if(u==2)for(var A=0;A<t;A++)for(var w=A*s,T=A*e,m=0;m<e;m++){var b=T+m<<2,D=n[w+(m>>2)]>>6-((m&3)<<1)&3,N=3*D;a[b]=S[N],a[b+1]=S[N+1],a[b+2]=S[N+2],a[b+3]=D<M?_[D]:255}if(u==4)for(var A=0;A<t;A++)for(var w=A*s,T=A*e,m=0;m<e;m++){var b=T+m<<2,D=n[w+(m>>1)]>>4-((m&1)<<2)&15,N=3*D;a[b]=S[N],a[b+1]=S[N+1],a[b+2]=S[N+2],a[b+3]=D<M?_[D]:255}if(u==8)for(var m=0;m<i;m++){var b=m<<2,D=n[m],N=3*D;a[b]=S[N],a[b+1]=S[N+1],a[b+2]=S[N+2],a[b+3]=D<M?_[D]:255}}else if(l==4){if(u==8)for(var m=0;m<i;m++){var b=m<<2,P=m<<1,E=n[P];a[b]=E,a[b+1]=E,a[b+2]=E,a[b+3]=n[P+1]}if(u==16)for(var m=0;m<i;m++){var b=m<<2,P=m<<2,E=n[P];a[b]=E,a[b+1]=E,a[b+2]=E,a[b+3]=n[P+2]}}else if(l==0)for(var g=r.tabs.tRNS?r.tabs.tRNS:-1,A=0;A<t;A++){var U=A*s,k=A*e;if(u==1)for(var B=0;B<e;B++){var E=255*(n[U+(B>>>3)]>>>7-(B&7)&1),O=E==g*255?0:255;c[k+B]=O<<24|E<<16|E<<8|E}else if(u==2)for(var B=0;B<e;B++){var E=85*(n[U+(B>>>2)]>>>6-((B&3)<<1)&3),O=E==g*85?0:255;c[k+B]=O<<24|E<<16|E<<8|E}else if(u==4)for(var B=0;B<e;B++){var E=17*(n[U+(B>>>1)]>>>4-((B&1)<<2)&15),O=E==g*17?0:255;c[k+B]=O<<24|E<<16|E<<8|E}else if(u==8)for(var B=0;B<e;B++){var E=n[U+B],O=E==g?0:255;c[k+B]=O<<24|E<<16|E<<8|E}else if(u==16)for(var B=0;B<e;B++){var E=n[U+(B<<1)],O=h(n,U+(B<<m))==g?0:255;c[k+B]=O<<24|E<<16|E<<8|E}}return a};ze.decode=function(n){for(var e=new Uint8Array(n),t=8,r=ze._bin,i=r.readUshort,o=r.readUint,s={tabs:{},frames:[]},a=new Uint8Array(e.length),c=0,l,u=0,h=[137,80,78,71,13,10,26,10],f=0;f<8;f++)if(e[f]!=h[f])throw"The input is not a PNG file!";for(;t<e.length;){var d=r.readUint(e,t);t+=4;var m=r.readASCII(e,t,4);if(t+=4,m=="IHDR")ze.decode._IHDR(e,t,s);else if(m=="IDAT"){for(var f=0;f<d;f++)a[c+f]=e[t+f];c+=d}else if(m=="acTL")s.tabs[m]={num_frames:o(e,t),num_plays:o(e,t+4)},l=new Uint8Array(e.length);else if(m=="fcTL"){if(u!=0){var v=s.frames[s.frames.length-1];v.data=ze.decode._decompress(s,l.slice(0,u),v.rect.width,v.rect.height),u=0}var p={x:o(e,t+12),y:o(e,t+16),width:o(e,t+4),height:o(e,t+8)},g=i(e,t+22);g=i(e,t+20)/(g==0?100:g);var x={rect:p,delay:Math.round(g*1e3),dispose:e[t+24],blend:e[t+25]};s.frames.push(x)}else if(m=="fdAT"){for(var f=0;f<d-4;f++)l[u+f]=e[t+f+4];u+=d-4}else if(m=="pHYs")s.tabs[m]=[r.readUint(e,t),r.readUint(e,t+4),e[t+8]];else if(m=="cHRM"){s.tabs[m]=[];for(var f=0;f<8;f++)s.tabs[m].push(r.readUint(e,t+f*4))}else if(m=="tEXt"){s.tabs[m]==null&&(s.tabs[m]={});var y=r.nextZero(e,t),b=r.readASCII(e,t,y-t),S=r.readASCII(e,y+1,t+d-y-1);s.tabs[m][b]=S}else if(m=="iTXt"){s.tabs[m]==null&&(s.tabs[m]={});var y=0,_=t;y=r.nextZero(e,_);var b=r.readASCII(e,_,y-_);_=y+1;var M=e[_],A=e[_+1];_+=2,y=r.nextZero(e,_);var w=r.readASCII(e,_,y-_);_=y+1,y=r.nextZero(e,_);var T=r.readUTF8(e,_,y-_);_=y+1;var S=r.readUTF8(e,_,d-(_-t));s.tabs[m][b]=S}else if(m=="PLTE")s.tabs[m]=r.readBytes(e,t,d);else if(m=="hIST"){var D=s.tabs.PLTE.length/3;s.tabs[m]=[];for(var f=0;f<D;f++)s.tabs[m].push(i(e,t+f*2))}else if(m=="tRNS")s.ctype==3?s.tabs[m]=r.readBytes(e,t,d):s.ctype==0?s.tabs[m]=i(e,t):s.ctype==2&&(s.tabs[m]=[i(e,t),i(e,t+2),i(e,t+4)]);else if(m=="gAMA")s.tabs[m]=r.readUint(e,t)/1e5;else if(m=="sRGB")s.tabs[m]=e[t];else if(m=="bKGD")s.ctype==0||s.ctype==4?s.tabs[m]=[i(e,t)]:s.ctype==2||s.ctype==6?s.tabs[m]=[i(e,t),i(e,t+2),i(e,t+4)]:s.ctype==3&&(s.tabs[m]=e[t]);else if(m=="IEND")break;t+=d;var N=r.readUint(e,t);t+=4}if(u!=0){var v=s.frames[s.frames.length-1];v.data=ze.decode._decompress(s,l.slice(0,u),v.rect.width,v.rect.height),u=0}return s.data=ze.decode._decompress(s,a,s.width,s.height),delete s.compress,delete s.interlace,delete s.filter,s};ze.decode._decompress=function(n,e,t,r){var a=Date.now(),i=ze.decode._getBPP(n),o=Math.ceil(t*i/8),s=new Uint8Array((o+1+n.interlace)*r);e=ze.decode._inflate(e,s);var a=Date.now();return n.interlace==0?e=ze.decode._filterZero(e,n,0,t,r):n.interlace==1&&(e=ze.decode._readInterlace(e,n)),e};ze.decode._inflate=function(n,e){var t=ze.inflateRaw(new Uint8Array(n.buffer,2,n.length-6),e);return t};ze.inflateRaw=function(){var n={};return n.H={},n.H.N=function(e,t){var r=Uint8Array,i=0,o=0,s=0,a=0,c=0,l=0,u=0,h=0,f=0,d,m;if(e[0]==3&&e[1]==0)return t||new r(0);var v=n.H,p=v.b,g=v.e,x=v.R,y=v.n,b=v.A,S=v.Z,_=v.m,M=t==null;for(M&&(t=new r(e.length>>>2<<3));i==0;){if(i=p(e,f,1),o=p(e,f+1,2),f+=3,o==0){f&7&&(f+=8-(f&7));var A=(f>>>3)+4,w=e[A-4]|e[A-3]<<8;M&&(t=n.H.W(t,h+w)),t.set(new r(e.buffer,e.byteOffset+A,w),h),f=A+w<<3,h+=w;continue}if(M&&(t=n.H.W(t,h+(1<<17))),o==1&&(d=_.J,m=_.h,l=511,u=31),o==2){s=g(e,f,5)+257,a=g(e,f+5,5)+1,c=g(e,f+10,4)+4,f+=14;for(var T=f,D=1,N=0;N<38;N+=2)_.Q[N]=0,_.Q[N+1]=0;for(var N=0;N<c;N++){var P=g(e,f+N*3,3);_.Q[(_.X[N]<<1)+1]=P,P>D&&(D=P)}f+=3*c,y(_.Q,D),b(_.Q,D,_.u),d=_.w,m=_.d,f=x(_.u,(1<<D)-1,s+a,e,f,_.v);var E=v.V(_.v,0,s,_.C);l=(1<<E)-1;var U=v.V(_.v,s,a,_.D);u=(1<<U)-1,y(_.C,E),b(_.C,E,d),y(_.D,U),b(_.D,U,m)}for(;;){var k=d[S(e,f)&l];f+=k&15;var B=k>>>4;if(!(B>>>8))t[h++]=B;else{if(B==256)break;var O=h+B-254;if(B>264){var q=_.q[B-257];O=h+(q>>>3)+g(e,f,q&7),f+=q&7}var ne=m[S(e,f)&u];f+=ne&15;var ae=ne>>>4,ye=_.c[ae],fe=(ye>>>4)+p(e,f,ye&15);for(f+=ye&15;h<O;)t[h]=t[h++-fe],t[h]=t[h++-fe],t[h]=t[h++-fe],t[h]=t[h++-fe];h=O}}}return t.length==h?t:t.slice(0,h)},n.H.W=function(e,t){var r=e.length;if(t<=r)return e;var i=new Uint8Array(r<<1);return i.set(e,0),i},n.H.R=function(e,t,r,i,o,s){for(var a=n.H.e,c=n.H.Z,l=0;l<r;){var u=e[c(i,o)&t];o+=u&15;var h=u>>>4;if(h<=15)s[l]=h,l++;else{var f=0,d=0;h==16?(d=3+a(i,o,2),o+=2,f=s[l-1]):h==17?(d=3+a(i,o,3),o+=3):h==18&&(d=11+a(i,o,7),o+=7);for(var m=l+d;l<m;)s[l]=f,l++}}return o},n.H.V=function(e,t,r,i){for(var o=0,s=0,a=i.length>>>1;s<r;){var c=e[s+t];i[s<<1]=0,i[(s<<1)+1]=c,c>o&&(o=c),s++}for(;s<a;)i[s<<1]=0,i[(s<<1)+1]=0,s++;return o},n.H.n=function(e,t){for(var r=n.H.m,i=e.length,o,s,a,c,l,u=r.j,c=0;c<=t;c++)u[c]=0;for(c=1;c<i;c+=2)u[e[c]]++;var h=r.K;for(o=0,u[0]=0,s=1;s<=t;s++)o=o+u[s-1]<<1,h[s]=o;for(a=0;a<i;a+=2)l=e[a+1],l!=0&&(e[a]=h[l],h[l]++)},n.H.A=function(e,t,r){for(var i=e.length,o=n.H.m,s=o.r,a=0;a<i;a+=2)if(e[a+1]!=0)for(var c=a>>1,l=e[a+1],u=c<<4|l,h=t-l,f=e[a]<<h,d=f+(1<<h);f!=d;){var m=s[f]>>>15-t;r[m]=u,f++}},n.H.l=function(e,t){for(var r=n.H.m.r,i=15-t,o=0;o<e.length;o+=2){var s=e[o]<<t-e[o+1];e[o]=r[s]>>>i}},n.H.M=function(e,t,r){r=r<<(t&7);var i=t>>>3;e[i]|=r,e[i+1]|=r>>>8},n.H.I=function(e,t,r){r=r<<(t&7);var i=t>>>3;e[i]|=r,e[i+1]|=r>>>8,e[i+2]|=r>>>16},n.H.e=function(e,t,r){return(e[t>>>3]|e[(t>>>3)+1]<<8)>>>(t&7)&(1<<r)-1},n.H.b=function(e,t,r){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)&(1<<r)-1},n.H.Z=function(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(t&7)},n.H.i=function(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16|e[(t>>>3)+3]<<24)>>>(t&7)},n.H.m=function(){var e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){for(var e=n.H.m,t=32768,r=0;r<t;r++){var i=r;i=(i&2863311530)>>>1|(i&1431655765)<<1,i=(i&3435973836)>>>2|(i&858993459)<<2,i=(i&4042322160)>>>4|(i&252645135)<<4,i=(i&4278255360)>>>8|(i&16711935)<<8,e.r[r]=(i>>>16|i<<16)>>>17}function o(s,a,c){for(;a--!=0;)s.push(0,c)}for(var r=0;r<32;r++)e.q[r]=e.S[r]<<3|e.T[r],e.c[r]=e.p[r]<<4|e.z[r];o(e._,144,8),o(e._,112,9),o(e._,24,7),o(e._,8,8),n.H.n(e._,9),n.H.A(e._,9,e.J),n.H.l(e._,9),o(e.$,32,5),n.H.n(e.$,5),n.H.A(e.$,5,e.h),n.H.l(e.$,5),o(e.Q,19,0),o(e.C,286,0),o(e.D,30,0),o(e.v,320,0)}(),n.H.N}();ze.decode._readInterlace=function(n,e){for(var t=e.width,r=e.height,i=ze.decode._getBPP(e),o=i>>3,s=Math.ceil(t*i/8),a=new Uint8Array(r*s),c=0,l=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],f=[8,8,4,4,2,2,1],d=0;d<7;){for(var m=h[d],v=f[d],p=0,g=0,x=l[d];x<r;)x+=m,g++;for(var y=u[d];y<t;)y+=v,p++;var b=Math.ceil(p*i/8);ze.decode._filterZero(n,e,c,p,g);for(var S=0,_=l[d];_<r;){for(var M=u[d],A=c+S*b<<3;M<t;){if(i==1){var w=n[A>>3];w=w>>7-(A&7)&1,a[_*s+(M>>3)]|=w<<7-((M&7)<<0)}if(i==2){var w=n[A>>3];w=w>>6-(A&7)&3,a[_*s+(M>>2)]|=w<<6-((M&3)<<1)}if(i==4){var w=n[A>>3];w=w>>4-(A&7)&15,a[_*s+(M>>1)]|=w<<4-((M&1)<<2)}if(i>=8)for(var T=_*s+M*o,D=0;D<o;D++)a[T+D]=n[(A>>3)+D];A+=i,M+=v}S++,_+=m}p*g!=0&&(c+=g*(1+b)),d=d+1}return a};ze.decode._getBPP=function(n){var e=[1,null,3,1,2,null,4][n.ctype];return e*n.depth};ze.decode._filterZero=function(n,e,t,r,i){var o=ze.decode._getBPP(e),s=Math.ceil(r*o/8),a=ze.decode._paeth;o=Math.ceil(o/8);var c=0,l=1,u=n[t],h=0;if(u>1&&(n[t]=[0,0,1][u-2]),u==3)for(h=o;h<s;h++)n[h+1]=n[h+1]+(n[h+1-o]>>>1)&255;for(var f=0;f<i;f++)if(c=t+f*s,l=c+f+1,u=n[l-1],h=0,u==0)for(;h<s;h++)n[c+h]=n[l+h];else if(u==1){for(;h<o;h++)n[c+h]=n[l+h];for(;h<s;h++)n[c+h]=n[l+h]+n[c+h-o]}else if(u==2)for(;h<s;h++)n[c+h]=n[l+h]+n[c+h-s];else if(u==3){for(;h<o;h++)n[c+h]=n[l+h]+(n[c+h-s]>>>1);for(;h<s;h++)n[c+h]=n[l+h]+(n[c+h-s]+n[c+h-o]>>>1)}else{for(;h<o;h++)n[c+h]=n[l+h]+a(0,n[c+h-s],0);for(;h<s;h++)n[c+h]=n[l+h]+a(n[c+h-o],n[c+h-s],n[c+h-o-s])}return n};ze.decode._paeth=function(n,e,t){var r=n+e-t,i=r-n,o=r-e,s=r-t;return i*i<=o*o&&i*i<=s*s?n:o*o<=s*s?e:t};ze.decode._IHDR=function(n,e,t){var r=ze._bin;t.width=r.readUint(n,e),e+=4,t.height=r.readUint(n,e),e+=4,t.depth=n[e],e++,t.ctype=n[e],e++,t.compress=n[e],e++,t.filter=n[e],e++,t.interlace=n[e],e++};ze._bin={nextZero:function(n,e){for(;n[e]!=0;)e++;return e},readUshort:function(n,e){return n[e]<<8|n[e+1]},writeUshort:function(n,e,t){n[e]=t>>8&255,n[e+1]=t&255},readUint:function(n,e){return n[e]*(256*256*256)+(n[e+1]<<16|n[e+2]<<8|n[e+3])},writeUint:function(n,e,t){n[e]=t>>24&255,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255},readASCII:function(n,e,t){for(var r="",i=0;i<t;i++)r+=String.fromCharCode(n[e+i]);return r},writeASCII:function(n,e,t){for(var r=0;r<t.length;r++)n[e+r]=t.charCodeAt(r)},readBytes:function(n,e,t){for(var r=[],i=0;i<t;i++)r.push(n[e+i]);return r},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,e,t){for(var r="",i,o=0;o<t;o++)r+="%"+ze._bin.pad(n[e+o].toString(16));try{i=decodeURIComponent(r)}catch{return ze._bin.readASCII(n,e,t)}return i}};ze._copyTile=function(n,e,t,r,i,o,s,a,c){for(var l=Math.min(e,i),u=Math.min(t,o),h=0,f=0,d=0;d<u;d++)for(var m=0;m<l;m++)if(s>=0&&a>=0?(h=d*e+m<<2,f=(a+d)*i+s+m<<2):(h=(-a+d)*e-s+m<<2,f=d*i+m<<2),c==0)r[f]=n[h],r[f+1]=n[h+1],r[f+2]=n[h+2],r[f+3]=n[h+3];else if(c==1){var v=n[h+3]*.00392156862745098,p=n[h]*v,g=n[h+1]*v,x=n[h+2]*v,y=r[f+3]*(1/255),b=r[f]*y,S=r[f+1]*y,_=r[f+2]*y,M=1-v,A=v+y*M,w=A==0?0:1/A;r[f+3]=255*A,r[f+0]=(p+b*M)*w,r[f+1]=(g+S*M)*w,r[f+2]=(x+_*M)*w}else if(c==2){var v=n[h+3],p=n[h],g=n[h+1],x=n[h+2],y=r[f+3],b=r[f],S=r[f+1],_=r[f+2];v==y&&p==b&&g==S&&x==_?(r[f]=0,r[f+1]=0,r[f+2]=0,r[f+3]=0):(r[f]=p,r[f+1]=g,r[f+2]=x,r[f+3]=v)}else if(c==3){var v=n[h+3],p=n[h],g=n[h+1],x=n[h+2],y=r[f+3],b=r[f],S=r[f+1],_=r[f+2];if(v==y&&p==b&&g==S&&x==_)continue;if(v<220&&y>20)return!1}return!0};ze.encode=function(n,e,t,r,i,o,s){r==null&&(r=0),s==null&&(s=!1);var a=ze.encode.compress(n,e,t,r,[!1,!1,!1,0,s]);return ze.encode.compressPNG(a,-1),ze.encode._main(a,e,t,i,o)};ze.encodeLL=function(n,e,t,r,i,o,s,a){for(var c={ctype:0+(r==1?0:2)+(i==0?0:4),depth:o,frames:[]},l=Date.now(),u=(r+i)*o,h=u*e,f=0;f<n.length;f++)c.frames.push({rect:{x:0,y:0,width:e,height:t},img:new Uint8Array(n[f]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(h/8)});ze.encode.compressPNG(c,0,!0);var d=ze.encode._main(c,e,t,s,a);return d};ze.encode._main=function(n,e,t,r,i){i==null&&(i={});var o=ze.crc.crc,s=ze._bin.writeUint,a=ze._bin.writeUshort,c=ze._bin.writeASCII,l=8,u=n.frames.length>1,h=!1,f=33+(u?20:0);if(i.sRGB!=null&&(f+=13),i.pHYs!=null&&(f+=21),n.ctype==3){for(var d=n.plte.length,m=0;m<d;m++)n.plte[m]>>>24!=255&&(h=!0);f+=8+d*3+4+(h?8+d*1+4:0)}for(var v=0;v<n.frames.length;v++){var p=n.frames[v];u&&(f+=38),f+=p.cimg.length+12,v!=0&&(f+=4)}f+=12;for(var g=new Uint8Array(f),x=[137,80,78,71,13,10,26,10],m=0;m<8;m++)g[m]=x[m];if(s(g,l,13),l+=4,c(g,l,"IHDR"),l+=4,s(g,l,e),l+=4,s(g,l,t),l+=4,g[l]=n.depth,l++,g[l]=n.ctype,l++,g[l]=0,l++,g[l]=0,l++,g[l]=0,l++,s(g,l,o(g,l-17,17)),l+=4,i.sRGB!=null&&(s(g,l,1),l+=4,c(g,l,"sRGB"),l+=4,g[l]=i.sRGB,l++,s(g,l,o(g,l-5,5)),l+=4),i.pHYs!=null&&(s(g,l,9),l+=4,c(g,l,"pHYs"),l+=4,s(g,l,i.pHYs[0]),l+=4,s(g,l,i.pHYs[1]),l+=4,g[l]=i.pHYs[2],l++,s(g,l,o(g,l-13,13)),l+=4),u&&(s(g,l,8),l+=4,c(g,l,"acTL"),l+=4,s(g,l,n.frames.length),l+=4,s(g,l,i.loop!=null?i.loop:0),l+=4,s(g,l,o(g,l-12,12)),l+=4),n.ctype==3){var d=n.plte.length;s(g,l,d*3),l+=4,c(g,l,"PLTE"),l+=4;for(var m=0;m<d;m++){var y=m*3,b=n.plte[m],S=b&255,_=b>>>8&255,M=b>>>16&255;g[l+y+0]=S,g[l+y+1]=_,g[l+y+2]=M}if(l+=d*3,s(g,l,o(g,l-d*3-4,d*3+4)),l+=4,h){s(g,l,d),l+=4,c(g,l,"tRNS"),l+=4;for(var m=0;m<d;m++)g[l+m]=n.plte[m]>>>24&255;l+=d,s(g,l,o(g,l-d-4,d+4)),l+=4}}for(var A=0,v=0;v<n.frames.length;v++){var p=n.frames[v];u&&(s(g,l,26),l+=4,c(g,l,"fcTL"),l+=4,s(g,l,A++),l+=4,s(g,l,p.rect.width),l+=4,s(g,l,p.rect.height),l+=4,s(g,l,p.rect.x),l+=4,s(g,l,p.rect.y),l+=4,a(g,l,r[v]),l+=2,a(g,l,1e3),l+=2,g[l]=p.dispose,l++,g[l]=p.blend,l++,s(g,l,o(g,l-30,30)),l+=4);var w=p.cimg,d=w.length;s(g,l,d+(v==0?0:4)),l+=4;var T=l;c(g,l,v==0?"IDAT":"fdAT"),l+=4,v!=0&&(s(g,l,A++),l+=4),g.set(w,l),l+=d,s(g,l,o(g,T,l-T)),l+=4}return s(g,l,0),l+=4,c(g,l,"IEND"),l+=4,s(g,l,o(g,l-4,4)),l+=4,g.buffer};ze.encode.compressPNG=function(n,e,t){for(var r=0;r<n.frames.length;r++){var i=n.frames[r],o=i.rect.width,s=i.rect.height,a=new Uint8Array(s*i.bpl+s);i.cimg=ze.encode._filterZero(i.img,s,i.bpp,i.bpl,a,e,t)}};ze.encode.compress=function(n,e,t,r,i){for(var o=i[0],s=i[1],a=i[2],c=i[3],l=i[4],u=6,h=8,f=255,d=0;d<n.length;d++)for(var m=new Uint8Array(n[d]),v=m.length,p=0;p<v;p+=4)f&=m[p+3];var g=f!=255,x=ze.encode.framize(n,e,t,o,s,a),y={},b=[],S=[];if(r!=0){for(var _=[],p=0;p<x.length;p++)_.push(x[p].img.buffer);for(var M=ze.encode.concatRGBA(_),A=ze.quantize(M,r),w=0,T=new Uint8Array(A.abuf),p=0;p<x.length;p++){var D=x[p].img,N=D.length;S.push(new Uint8Array(A.inds.buffer,w>>2,N>>2));for(var d=0;d<N;d+=4)D[d]=T[w+d],D[d+1]=T[w+d+1],D[d+2]=T[w+d+2],D[d+3]=T[w+d+3];w+=N}for(var p=0;p<A.plte.length;p++)b.push(A.plte[p].est.rgba)}else for(var d=0;d<x.length;d++){var P=x[d],E=new Uint32Array(P.img.buffer),U=P.rect.width,v=E.length,k=new Uint8Array(v);S.push(k);for(var p=0;p<v;p++){var B=E[p];if(p!=0&&B==E[p-1])k[p]=k[p-1];else if(p>U&&B==E[p-U])k[p]=k[p-U];else{var O=y[B];if(O==null&&(y[B]=O=b.length,b.push(B),b.length>=300))break;k[p]=O}}}var q=b.length;q<=256&&l==!1&&(q<=2?h=1:q<=4?h=2:q<=16?h=4:h=8,h=Math.max(h,c));for(var d=0;d<x.length;d++){var P=x[d],ne=P.rect.x,ae=P.rect.y,U=P.rect.width,ye=P.rect.height,fe=P.img,L=new Uint32Array(fe.buffer),C=4*U,R=4;if(q<=256&&l==!1){C=Math.ceil(h*U/8);for(var I=new Uint8Array(C*ye),j=S[d],Z=0;Z<ye;Z++){var p=Z*C,J=Z*U;if(h==8)for(var W=0;W<U;W++)I[p+W]=j[J+W];else if(h==4)for(var W=0;W<U;W++)I[p+(W>>1)]|=j[J+W]<<4-(W&1)*4;else if(h==2)for(var W=0;W<U;W++)I[p+(W>>2)]|=j[J+W]<<6-(W&3)*2;else if(h==1)for(var W=0;W<U;W++)I[p+(W>>3)]|=j[J+W]<<7-(W&7)*1}fe=I,u=3,R=1}else if(g==!1&&x.length==1){for(var I=new Uint8Array(U*ye*3),K=U*ye,p=0;p<K;p++){var D=p*3,le=p*4;I[D]=fe[le],I[D+1]=fe[le+1],I[D+2]=fe[le+2]}fe=I,u=2,R=3,C=3*U}P.img=fe,P.bpl=C,P.bpp=R}return{ctype:u,depth:h,plte:b,frames:x}};ze.encode.framize=function(n,e,t,r,i,o){for(var s=[],a=0;a<n.length;a++){var c=new Uint8Array(n[a]),l=new Uint32Array(c.buffer),u,h=0,f=0,d=e,m=t,v=r?1:0;if(a!=0){for(var p=o||r||a==1||s[a-2].dispose!=0?1:2,g=0,x=1e9,y=0;y<p;y++){for(var P=new Uint8Array(n[a-1-y]),b=new Uint32Array(n[a-1-y]),S=e,_=t,M=-1,A=-1,w=0;w<t;w++)for(var T=0;T<e;T++){var D=w*e+T;l[D]!=b[D]&&(T<S&&(S=T),T>M&&(M=T),w<_&&(_=w),w>A&&(A=w))}M==-1&&(S=_=M=A=0),i&&((S&1)==1&&S--,(_&1)==1&&_--);var N=(M-S+1)*(A-_+1);N<x&&(x=N,g=y,h=S,f=_,d=M-S+1,m=A-_+1)}var P=new Uint8Array(n[a-1-g]);g==1&&(s[a-1].dispose=2),u=new Uint8Array(d*m*4),ze._copyTile(P,e,t,u,d,m,-h,-f,0),v=ze._copyTile(c,e,t,u,d,m,-h,-f,3)?1:0,v==1?ze.encode._prepareDiff(c,e,t,u,{x:h,y:f,width:d,height:m}):ze._copyTile(c,e,t,u,d,m,-h,-f,0)}else u=c.slice(0);s.push({rect:{x:h,y:f,width:d,height:m},img:u,blend:v,dispose:0})}if(r)for(var a=0;a<s.length;a++){var E=s[a];if(E.blend!=1){var U=E.rect,k=s[a-1].rect,B=Math.min(U.x,k.x),O=Math.min(U.y,k.y),q=Math.max(U.x+U.width,k.x+k.width),ne=Math.max(U.y+U.height,k.y+k.height),ae={x:B,y:O,width:q-B,height:ne-O};s[a-1].dispose=1,a-1!=0&&ze.encode._updateFrame(n,e,t,s,a-1,ae,i),ze.encode._updateFrame(n,e,t,s,a,ae,i)}}var ye=0;if(n.length!=1)for(var D=0;D<s.length;D++){var E=s[D];ye+=E.rect.width*E.rect.height}return s};ze.encode._updateFrame=function(n,e,t,r,i,o,s){for(var a=Uint8Array,c=Uint32Array,l=new a(n[i-1]),u=new c(n[i-1]),h=i+1<n.length?new a(n[i+1]):null,f=new a(n[i]),d=new c(f.buffer),m=e,v=t,p=-1,g=-1,x=0;x<o.height;x++)for(var y=0;y<o.width;y++){var b=o.x+y,S=o.y+x,_=S*e+b,M=d[_];M==0||r[i-1].dispose==0&&u[_]==M&&(h==null||h[_*4+3]!=0)||(b<m&&(m=b),b>p&&(p=b),S<v&&(v=S),S>g&&(g=S))}p==-1&&(m=v=p=g=0),s&&((m&1)==1&&m--,(v&1)==1&&v--),o={x:m,y:v,width:p-m+1,height:g-v+1};var A=r[i];A.rect=o,A.blend=1,A.img=new Uint8Array(o.width*o.height*4),r[i-1].dispose==0?(ze._copyTile(l,e,t,A.img,o.width,o.height,-o.x,-o.y,0),ze.encode._prepareDiff(f,e,t,A.img,o)):ze._copyTile(f,e,t,A.img,o.width,o.height,-o.x,-o.y,0)};ze.encode._prepareDiff=function(n,e,t,r,i){ze._copyTile(n,e,t,r,i.width,i.height,-i.x,-i.y,2)};ze.encode._filterZero=function(n,e,t,r,i,o,s){var a=[],c=[0,1,2,3,4];o!=-1?c=[o]:(e*r>5e5||t==1)&&(c=[0]);var l;s&&(l={level:0});for(var u=s&&UZIP!=null?UZIP:fI.default,h=0;h<c.length;h++){for(var f=0;f<e;f++)ze.encode._filterLine(i,n,f,r,t,c[h]);a.push(u.deflate(i,l))}for(var d,m=1e9,h=0;h<a.length;h++)a[h].length<m&&(d=h,m=a[h].length);return a[d]};ze.encode._filterLine=function(n,e,t,r,i,o){var s=t*r,a=s+t,c=ze.decode._paeth;if(n[a]=o,a++,o==0)if(r<500)for(var l=0;l<r;l++)n[a+l]=e[s+l];else n.set(new Uint8Array(e.buffer,s,r),a);else if(o==1){for(var l=0;l<i;l++)n[a+l]=e[s+l];for(var l=i;l<r;l++)n[a+l]=e[s+l]-e[s+l-i]+256&255}else if(t==0){for(var l=0;l<i;l++)n[a+l]=e[s+l];if(o==2)for(var l=i;l<r;l++)n[a+l]=e[s+l];if(o==3)for(var l=i;l<r;l++)n[a+l]=e[s+l]-(e[s+l-i]>>1)+256&255;if(o==4)for(var l=i;l<r;l++)n[a+l]=e[s+l]-c(e[s+l-i],0,0)+256&255}else{if(o==2)for(var l=0;l<r;l++)n[a+l]=e[s+l]+256-e[s+l-r]&255;if(o==3){for(var l=0;l<i;l++)n[a+l]=e[s+l]+256-(e[s+l-r]>>1)&255;for(var l=i;l<r;l++)n[a+l]=e[s+l]+256-(e[s+l-r]+e[s+l-i]>>1)&255}if(o==4){for(var l=0;l<i;l++)n[a+l]=e[s+l]+256-c(0,e[s+l-r],0)&255;for(var l=i;l<r;l++)n[a+l]=e[s+l]+256-c(e[s+l-i],e[s+l-r],e[s+l-i-r])&255}}};ze.crc={table:function(){for(var n=new Uint32Array(256),e=0;e<256;e++){for(var t=e,r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;n[e]=t}return n}(),update:function(n,e,t,r){for(var i=0;i<r;i++)n=ze.crc.table[(n^e[t+i])&255]^n>>>8;return n},crc:function(n,e,t){return ze.crc.update(4294967295,n,e,t)^4294967295}};ze.quantize=function(n,e){for(var t=new Uint8Array(n),r=t.slice(0),i=new Uint32Array(r.buffer),o=ze.quantize.getKDtree(r,e),s=o[0],a=o[1],c=ze.quantize.planeDst,l=t,u=i,h=l.length,f=new Uint8Array(t.length>>2),d=0;d<h;d+=4){var m=l[d]*.00392156862745098,v=l[d+1]*(1/255),p=l[d+2]*(1/255),g=l[d+3]*(1/255),x=ze.quantize.getNearest(s,m,v,p,g);f[d>>2]=x.ind,u[d>>2]=x.est.rgba}return{abuf:r.buffer,inds:f,plte:a}};ze.quantize.getKDtree=function(n,e,t){t==null&&(t=1e-4);var r=new Uint32Array(n.buffer),i={i0:0,i1:n.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=ze.quantize.stats(n,i.i0,i.i1),i.est=ze.quantize.estats(i.bst);for(var o=[i];o.length<e;){for(var s=0,a=0,c=0;c<o.length;c++)o[c].est.L>s&&(s=o[c].est.L,a=c);if(s<t)break;var l=o[a],u=ze.quantize.splitPixels(n,r,l.i0,l.i1,l.est.e,l.est.eMq255),h=l.i0>=u||l.i1<=u;if(h){l.est.L=0;continue}var f={i0:l.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};f.bst=ze.quantize.stats(n,f.i0,f.i1),f.est=ze.quantize.estats(f.bst);var d={i0:u,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};d.bst={R:[],m:[],N:l.bst.N-f.bst.N};for(var c=0;c<16;c++)d.bst.R[c]=l.bst.R[c]-f.bst.R[c];for(var c=0;c<4;c++)d.bst.m[c]=l.bst.m[c]-f.bst.m[c];d.est=ze.quantize.estats(d.bst),l.left=f,l.right=d,o[a]=f,o.push(d)}o.sort(function(m,v){return v.bst.N-m.bst.N});for(var c=0;c<o.length;c++)o[c].ind=c;return[i,o]};ze.quantize.getNearest=function(n,e,t,r,i){if(n.left==null)return n.tdst=ze.quantize.dist(n.est.q,e,t,r,i),n;var o=ze.quantize.planeDst(n.est,e,t,r,i),s=n.left,a=n.right;o>0&&(s=n.right,a=n.left);var c=ze.quantize.getNearest(s,e,t,r,i);if(c.tdst<=o*o)return c;var l=ze.quantize.getNearest(a,e,t,r,i);return l.tdst<c.tdst?l:c};ze.quantize.planeDst=function(n,e,t,r,i){var o=n.e;return o[0]*e+o[1]*t+o[2]*r+o[3]*i-n.eMq};ze.quantize.dist=function(n,e,t,r,i){var o=e-n[0],s=t-n[1],a=r-n[2],c=i-n[3];return o*o+s*s+a*a+c*c};ze.quantize.splitPixels=function(n,e,t,r,i,o){var s=ze.quantize.vecDot;r-=4;for(var a=0;t<r;){for(;s(n,t,i)<=o;)t+=4;for(;s(n,r,i)>o;)r-=4;if(t>=r)break;var c=e[t>>2];e[t>>2]=e[r>>2],e[r>>2]=c,t+=4,r-=4}for(;s(n,t,i)>o;)t-=4;return t+4};ze.quantize.vecDot=function(n,e,t){return n[e]*t[0]+n[e+1]*t[1]+n[e+2]*t[2]+n[e+3]*t[3]};ze.quantize.stats=function(n,e,t){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],o=t-e>>2,s=e;s<t;s+=4){var a=n[s]*.00392156862745098,c=n[s+1]*(1/255),l=n[s+2]*(1/255),u=n[s+3]*(1/255);i[0]+=a,i[1]+=c,i[2]+=l,i[3]+=u,r[0]+=a*a,r[1]+=a*c,r[2]+=a*l,r[3]+=a*u,r[5]+=c*c,r[6]+=c*l,r[7]+=c*u,r[10]+=l*l,r[11]+=l*u,r[15]+=u*u}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:i,N:o}};ze.quantize.estats=function(n){var e=n.R,t=n.m,r=n.N,i=t[0],o=t[1],s=t[2],a=t[3],c=r==0?0:1/r,l=[e[0]-i*i*c,e[1]-i*o*c,e[2]-i*s*c,e[3]-i*a*c,e[4]-o*i*c,e[5]-o*o*c,e[6]-o*s*c,e[7]-o*a*c,e[8]-s*i*c,e[9]-s*o*c,e[10]-s*s*c,e[11]-s*a*c,e[12]-a*i*c,e[13]-a*o*c,e[14]-a*s*c,e[15]-a*a*c],u=l,h=ze.M4,f=[.5,.5,.5,.5],d=0,m=0;if(r!=0)for(var v=0;v<10&&(f=h.multVec(u,f),m=Math.sqrt(h.dot(f,f)),f=h.sml(1/m,f),!(Math.abs(m-d)<1e-9));v++)d=m;var p=[i*c,o*c,s*c,a*c],g=h.dot(h.sml(255,p),f);return{Cov:l,q:p,e:f,L:d,eMq255:g,eMq:h.dot(f,p),rgba:(Math.round(255*p[3])<<24|Math.round(255*p[2])<<16|Math.round(255*p[1])<<8|Math.round(255*p[0])<<0)>>>0}};ze.M4={multVec:function(n,e){return[n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3],n[4]*e[0]+n[5]*e[1]+n[6]*e[2]+n[7]*e[3],n[8]*e[0]+n[9]*e[1]+n[10]*e[2]+n[11]*e[3],n[12]*e[0]+n[13]*e[1]+n[14]*e[2]+n[15]*e[3]]},dot:function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]},sml:function(n,e){return[n*e[0],n*e[1],n*e[2],n*e[3]]}};ze.encode.concatRGBA=function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t].byteLength;for(var r=new Uint8Array(e),i=0,t=0;t<n.length;t++){for(var o=new Uint8Array(n[t]),s=o.length,a=0;a<s;a+=4){var c=o[a],l=o[a+1],u=o[a+2],h=o[a+3];h==0&&(c=l=u=0),r[i+a]=c,r[i+a+1]=l,r[i+a+2]=u,r[i+a+3]=h}i+=s}return r.buffer};var ES=ze;var Mz=function(n){if(n===0)return qc.Greyscale;if(n===2)return qc.Truecolour;if(n===3)return qc.IndexedColour;if(n===4)return qc.GreyscaleWithAlpha;if(n===6)return qc.TruecolourWithAlpha;throw new Error("Unknown color type: "+n)},Ez=function(n){for(var e=Math.floor(n.length/4),t=new Uint8Array(e*3),r=new Uint8Array(e*1),i=0,o=0,s=0;i<n.length;)t[o++]=n[i++],t[o++]=n[i++],t[o++]=n[i++],r[s++]=n[i++];return{rgbChannel:t,alphaChannel:r}},qc;(function(n){n.Greyscale="Greyscale",n.Truecolour="Truecolour",n.IndexedColour="IndexedColour",n.GreyscaleWithAlpha="GreyscaleWithAlpha",n.TruecolourWithAlpha="TruecolourWithAlpha"})(qc||(qc={}));var dI=function(){function n(e){var t=ES.decode(e),r=ES.toRGBA8(t);if(r.length>1)throw new Error("Animated PNGs are not supported");var i=new Uint8Array(r[0]),o=Ez(i),s=o.rgbChannel,a=o.alphaChannel;this.rgbChannel=s;var c=a.some(function(l){return l<255});c&&(this.alphaChannel=a),this.type=Mz(t.ctype),this.width=t.width,this.height=t.height,this.bitsPerComponent=8}return n.load=function(e){return new n(e)},n}();var Az=function(){function n(e){this.image=e,this.bitsPerComponent=e.bitsPerComponent,this.width=e.width,this.height=e.height,this.colorSpace="DeviceRGB"}return n.for=function(e){return pt(this,void 0,void 0,function(){var t;return mt(this,function(r){return t=dI.load(e),[2,new n(t)]})})},n.prototype.embedIntoContext=function(e,t){return pt(this,void 0,void 0,function(){var r,i;return mt(this,function(o){return r=this.embedAlphaChannel(e),i=e.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:r}),t?(e.assign(t,i),[2,t]):[2,e.register(i)]})})},n.prototype.embedAlphaChannel=function(e){if(this.image.alphaChannel){var t=e.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return e.register(t)}},n}(),lm=Az;var Cz=function(){function n(e,t,r){this.bytes=e,this.start=t||0,this.pos=this.start,this.end=t&&r?t+r:this.bytes.length}return Object.defineProperty(n.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),n.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},n.prototype.getUint16=function(){var e=this.getByte(),t=this.getByte();return e===-1||t===-1?-1:(e<<8)+t},n.prototype.getInt32=function(){var e=this.getByte(),t=this.getByte(),r=this.getByte(),i=this.getByte();return(e<<24)+(t<<16)+(r<<8)+i},n.prototype.getBytes=function(e,t){t===void 0&&(t=!1);var r=this.bytes,i=this.pos,o=this.end;if(e){var a=i+e;a>o&&(a=o),this.pos=a;var s=r.subarray(i,a);return t?new Uint8ClampedArray(s):s}else{var s=r.subarray(i,o);return t?new Uint8ClampedArray(s):s}},n.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},n.prototype.peekBytes=function(e,t){t===void 0&&(t=!1);var r=this.getBytes(e,t);return this.pos-=r.length,r},n.prototype.skip=function(e){e||(e=1),this.pos+=e},n.prototype.reset=function(){this.pos=this.start},n.prototype.moveStart=function(){this.start=this.pos},n.prototype.makeSubStream=function(e,t){return new n(this.bytes,e,t)},n.prototype.decode=function(){return this.bytes},n}(),cy=Cz;var Iz=new Uint8Array(0),Rz=function(){function n(e){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=Iz,this.minBufferLength=512,e)for(;this.minBufferLength<e;)this.minBufferLength*=2}return Object.defineProperty(n.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),n.prototype.getByte=function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},n.prototype.getUint16=function(){var e=this.getByte(),t=this.getByte();return e===-1||t===-1?-1:(e<<8)+t},n.prototype.getInt32=function(){var e=this.getByte(),t=this.getByte(),r=this.getByte(),i=this.getByte();return(e<<24)+(t<<16)+(r<<8)+i},n.prototype.getBytes=function(e,t){t===void 0&&(t=!1);var r,i=this.pos;if(e){for(this.ensureBuffer(i+e),r=i+e;!this.eof&&this.bufferLength<r;)this.readBlock();var o=this.bufferLength;r>o&&(r=o)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}this.pos=r;var s=this.buffer.subarray(i,r);return t&&!(s instanceof Uint8ClampedArray)?new Uint8ClampedArray(s):s},n.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},n.prototype.peekBytes=function(e,t){t===void 0&&(t=!1);var r=this.getBytes(e,t);return this.pos-=r.length,r},n.prototype.skip=function(e){e||(e=1),this.pos+=e},n.prototype.reset=function(){this.pos=0},n.prototype.makeSubStream=function(e,t){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new cy(this.buffer,e,t)},n.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},n.prototype.readBlock=function(){throw new $r(this.constructor.name,"readBlock")},n.prototype.ensureBuffer=function(e){var t=this.buffer;if(e<=t.byteLength)return t;for(var r=this.minBufferLength;r<e;)r*=2;var i=new Uint8Array(r);return i.set(t),this.buffer=i},n}(),Ks=Rz;var pI=function(n){return n===32||n===9||n===13||n===10},Pz=function(n){Pe(e,n);function e(t,r){var i=n.call(this,r)||this;return i.stream=t,i.input=new Uint8Array(5),r&&(r=.8*r),i}return e.prototype.readBlock=function(){for(var t=126,r=122,i=-1,o=this.stream,s=o.getByte();pI(s);)s=o.getByte();if(s===i||s===t){this.eof=!0;return}var a=this.bufferLength,c,l;if(s===r){for(c=this.ensureBuffer(a+4),l=0;l<4;++l)c[a+l]=0;this.bufferLength+=4}else{var u=this.input;for(u[0]=s,l=1;l<5;++l){for(s=o.getByte();pI(s);)s=o.getByte();if(u[l]=s,s===i||s===t)break}if(c=this.ensureBuffer(a+l-1),this.bufferLength+=l-1,l<5){for(;l<5;++l)u[l]=117;this.eof=!0}var h=0;for(l=0;l<5;++l)h=h*85+(u[l]-33);for(l=3;l>=0;--l)c[a+l]=h&255,h>>=8}},e}(Ks),mI=Pz;var Dz=function(n){Pe(e,n);function e(t,r){var i=n.call(this,r)||this;return i.stream=t,i.firstDigit=-1,r&&(r=.5*r),i}return e.prototype.readBlock=function(){var t=8e3,r=this.stream.getBytes(t);if(!r.length){this.eof=!0;return}for(var i=r.length+1>>1,o=this.ensureBuffer(this.bufferLength+i),s=this.bufferLength,a=this.firstDigit,c=0,l=r.length;c<l;c++){var u=r[c],h=void 0;if(u>=48&&u<=57)h=u&15;else if(u>=65&&u<=70||u>=97&&u<=102)h=(u&15)+9;else if(u===62){this.eof=!0;break}else continue;a<0?a=h:(o[s++]=a<<4|h,a=-1)}a>=0&&this.eof&&(o[s++]=a<<4,a=-1),this.firstDigit=a,this.bufferLength=s},e}(Ks),gI=Dz;var vI=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fz=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),Nz=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),Lz=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],Oz=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],kz=function(n){Pe(e,n);function e(t,r){var i=n.call(this,r)||this;i.stream=t;var o=t.getByte(),s=t.getByte();if(o===-1||s===-1)throw new Error("Invalid header in flate stream: "+o+", "+s);if((o&15)!==8)throw new Error("Unknown compression method in flate stream: "+o+", "+s);if(((o<<8)+s)%31!==0)throw new Error("Bad FCHECK in flate stream: "+o+", "+s);if(s&32)throw new Error("FDICT bit set in flate stream: "+o+", "+s);return i.codeSize=0,i.codeBuf=0,i}return e.prototype.readBlock=function(){var t,r,i=this.stream,o=this.getBits(3);if(o&1&&(this.eof=!0),o>>=1,o===0){var s=void 0;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");var a=s;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(a|=s<<8,(s=i.getByte())===-1)throw new Error("Bad block header in flate stream");var c=s;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(c|=s<<8,c!==(~a&65535)&&(a!==0||c!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var l=this.bufferLength;t=this.ensureBuffer(l+a);var u=l+a;if(this.bufferLength=u,a===0)i.peekByte()===-1&&(this.eof=!0);else for(var h=l;h<u;++h){if((s=i.getByte())===-1){this.eof=!0;break}t[h]=s}return}var f,d;if(o===1)f=Lz,d=Oz;else if(o===2){var m=this.getBits(5)+257,v=this.getBits(5)+1,p=this.getBits(4)+4,g=new Uint8Array(vI.length),x=void 0;for(x=0;x<p;++x)g[vI[x]]=this.getBits(3);var y=this.generateHuffmanTable(g);r=0,x=0;for(var b=m+v,S=new Uint8Array(b),_=void 0,M=void 0,A=void 0;x<b;){var w=this.getCode(y);if(w===16)_=2,M=3,A=r;else if(w===17)_=3,M=3,A=r=0;else if(w===18)_=7,M=11,A=r=0;else{S[x++]=r=w;continue}for(var T=this.getBits(_)+M;T-- >0;)S[x++]=A}f=this.generateHuffmanTable(S.subarray(0,m)),d=this.generateHuffmanTable(S.subarray(m,b))}else throw new Error("Unknown block type in flate stream");t=this.buffer;for(var D=t?t.length:0,N=this.bufferLength;;){var P=this.getCode(f);if(P<256){N+1>=D&&(t=this.ensureBuffer(N+1),D=t.length),t[N++]=P;continue}if(P===256){this.bufferLength=N;return}P-=257,P=Fz[P];var E=P>>16;E>0&&(E=this.getBits(E)),r=(P&65535)+E,P=this.getCode(d),P=Nz[P],E=P>>16,E>0&&(E=this.getBits(E));var U=(P&65535)+E;N+r>=D&&(t=this.ensureBuffer(N+r),D=t.length);for(var k=0;k<r;++k,++N)t[N]=t[N-U]}},e.prototype.getBits=function(t){for(var r=this.stream,i=this.codeSize,o=this.codeBuf,s;i<t;){if((s=r.getByte())===-1)throw new Error("Bad encoding in flate stream");o|=s<<i,i+=8}return s=o&(1<<t)-1,this.codeBuf=o>>t,this.codeSize=i-=t,s},e.prototype.getCode=function(t){for(var r=this.stream,i=t[0],o=t[1],s=this.codeSize,a=this.codeBuf,c;s<o&&(c=r.getByte())!==-1;)a|=c<<s,s+=8;var l=i[a&(1<<o)-1];typeof i=="number"&&console.log("FLATE:",l);var u=l>>16,h=l&65535;if(u<1||s<u)throw new Error("Bad encoding in flate stream");return this.codeBuf=a>>u,this.codeSize=s-u,h},e.prototype.generateHuffmanTable=function(t){var r=t.length,i=0,o;for(o=0;o<r;++o)t[o]>i&&(i=t[o]);for(var s=1<<i,a=new Int32Array(s),c=1,l=0,u=2;c<=i;++c,l<<=1,u<<=1)for(var h=0;h<r;++h)if(t[h]===c){var f=0,d=l;for(o=0;o<c;++o)f=f<<1|d&1,d>>=1;for(o=f;o<s;o+=u)a[o]=c<<16|h;++l}return[a,i]},e}(Ks),yI=kz;var Uz=function(n){Pe(e,n);function e(t,r,i){var o=n.call(this,r)||this;o.stream=t,o.cachedData=0,o.bitsCached=0;for(var s=4096,a={earlyChange:i,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(s),dictionaryLengths:new Uint16Array(s),dictionaryPrevCodes:new Uint16Array(s),currentSequence:new Uint8Array(s),currentSequenceLength:0},c=0;c<256;++c)a.dictionaryValues[c]=c,a.dictionaryLengths[c]=1;return o.lzwState=a,o}return e.prototype.readBlock=function(){var t=512,r=t*2,i=t,o,s,a,c=this.lzwState;if(c){var l=c.earlyChange,u=c.nextCode,h=c.dictionaryValues,f=c.dictionaryLengths,d=c.dictionaryPrevCodes,m=c.codeLength,v=c.prevCode,p=c.currentSequence,g=c.currentSequenceLength,x=0,y=this.bufferLength,b=this.ensureBuffer(this.bufferLength+r);for(o=0;o<t;o++){var S=this.readBits(m),_=g>0;if(!S||S<256)p[0]=S,g=1;else if(S>=258)if(S<u)for(g=f[S],s=g-1,a=S;s>=0;s--)p[s]=h[a],a=d[a];else p[g++]=p[0];else if(S===256){m=9,u=258,g=0;continue}else{this.eof=!0,delete this.lzwState;break}if(_&&(d[u]=v,f[u]=f[v]+1,h[u]=p[0],u++,m=u+l&u+l-1?m:Math.min(Math.log(u+l)/.6931471805599453+1,12)|0),v=S,x+=g,r<x){do r+=i;while(r<x);b=this.ensureBuffer(this.bufferLength+r)}for(s=0;s<g;s++)b[y++]=p[s]}c.nextCode=u,c.codeLength=m,c.prevCode=v,c.currentSequenceLength=g,this.bufferLength=y}},e.prototype.readBits=function(t){for(var r=this.bitsCached,i=this.cachedData;r<t;){var o=this.stream.getByte();if(o===-1)return this.eof=!0,null;i=i<<8|o,r+=8}return this.bitsCached=r-=t,this.cachedData=i,i>>>r&(1<<t)-1},e}(Ks),xI=Uz;var Bz=function(n){Pe(e,n);function e(t,r){var i=n.call(this,r)||this;return i.stream=t,i}return e.prototype.readBlock=function(){var t=this.stream.getBytes(2);if(!t||t.length<2||t[0]===128){this.eof=!0;return}var r,i=this.bufferLength,o=t[0];if(o<128){if(r=this.ensureBuffer(i+o+1),r[i++]=t[1],o>0){var s=this.stream.getBytes(o);r.set(s,i),i+=o}}else{o=257-o;var a=t[1];r=this.ensureBuffer(i+o+1);for(var c=0;c<o;c++)r[i++]=a}this.bufferLength=i},e}(Ks),bI=Bz;var wI=function(n,e,t){if(e===Q.of("FlateDecode"))return new yI(n);if(e===Q.of("LZWDecode")){var r=1;if(t instanceof at){var i=t.lookup(Q.of("EarlyChange"));i instanceof it&&(r=i.asNumber())}return new xI(n,void 0,r)}if(e===Q.of("ASCII85Decode"))return new mI(n);if(e===Q.of("ASCIIHexDecode"))return new gI(n);if(e===Q.of("RunLengthDecode"))return new bI(n);throw new UC(e.asString())},cm=function(n){var e=n.dict,t=n.contents,r=new cy(t),i=e.lookup(Q.of("Filter")),o=e.lookup(Q.of("DecodeParms"));if(i instanceof Q)r=wI(r,i,o);else if(i instanceof Rt)for(var s=0,a=i.size();s<a;s++)r=wI(r,i.lookup(s,Q),o&&o.lookupMaybe(s,at));else if(i)throw new Gc([Q,Rt],i);return r};var zz=function(n){var e=n.MediaBox(),t=e.lookup(2,it).asNumber()-e.lookup(0,it).asNumber(),r=e.lookup(3,it).asNumber()-e.lookup(1,it).asNumber();return{left:0,bottom:0,right:t,top:r}},Gz=function(n){return[1,0,0,1,-n.left,-n.bottom]},Vz=function(){function n(e,t,r){this.page=e;var i=t??zz(e);this.width=i.right-i.left,this.height=i.top-i.bottom,this.boundingBox=i,this.transformationMatrix=r??Gz(i)}return n.for=function(e,t,r){return pt(this,void 0,void 0,function(){return mt(this,function(i){return[2,new n(e,t,r)]})})},n.prototype.embedIntoContext=function(e,t){return pt(this,void 0,void 0,function(){var r,i,o,s,a,c,l,u,h,f;return mt(this,function(d){if(r=this.page.normalizedEntries(),i=r.Contents,o=r.Resources,!i)throw new BC;return s=this.decodeContents(i),a=this.boundingBox,c=a.left,l=a.bottom,u=a.right,h=a.top,f=e.flateStream(s,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[c,l,u,h],Matrix:this.transformationMatrix,Resources:o}),t?(e.assign(t,f),[2,t]):[2,e.register(f)]})})},n.prototype.decodeContents=function(e){for(var t=Uint8Array.of(ie.Newline),r=[],i=0,o=e.size();i<o;i++){var s=e.lookup(i,Hn),a=void 0;if(s instanceof Xs)a=cm(s).decode();else if(s instanceof ka)a=s.getUnencodedContents();else throw new zC(s);r.push(a,t)}return dE.apply(void 0,r)},n}(),um=Vz;var uy=function(n,e){if(n!==void 0)return e[n]},Bf;(function(n){n.UseNone="UseNone",n.UseOutlines="UseOutlines",n.UseThumbs="UseThumbs",n.UseOC="UseOC"})(Bf||(Bf={}));var zf;(function(n){n.L2R="L2R",n.R2L="R2L"})(zf||(zf={}));var Gf;(function(n){n.None="None",n.AppDefault="AppDefault"})(Gf||(Gf={}));var hm;(function(n){n.Simplex="Simplex",n.DuplexFlipShortEdge="DuplexFlipShortEdge",n.DuplexFlipLongEdge="DuplexFlipLongEdge"})(hm||(hm={}));var Hz=function(){function n(e){this.dict=e}return n.prototype.lookupBool=function(e){var t=this.dict.lookup(Q.of(e));if(t instanceof Oa)return t},n.prototype.lookupName=function(e){var t=this.dict.lookup(Q.of(e));if(t instanceof Q)return t},n.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},n.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},n.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},n.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},n.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},n.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},n.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},n.prototype.Direction=function(){return this.lookupName("Direction")},n.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},n.prototype.Duplex=function(){return this.lookupName("Duplex")},n.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},n.prototype.PrintPageRange=function(){var e=this.dict.lookup(Q.of("PrintPageRange"));if(e instanceof Rt)return e},n.prototype.NumCopies=function(){var e=this.dict.lookup(Q.of("NumCopies"));if(e instanceof it)return e},n.prototype.getHideToolbar=function(){var e,t;return(t=(e=this.HideToolbar())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getHideMenubar=function(){var e,t;return(t=(e=this.HideMenubar())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getHideWindowUI=function(){var e,t;return(t=(e=this.HideWindowUI())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getFitWindow=function(){var e,t;return(t=(e=this.FitWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getCenterWindow=function(){var e,t;return(t=(e=this.CenterWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getDisplayDocTitle=function(){var e,t;return(t=(e=this.DisplayDocTitle())===null||e===void 0?void 0:e.asBoolean())!==null&&t!==void 0?t:!1},n.prototype.getNonFullScreenPageMode=function(){var e,t,r=(e=this.NonFullScreenPageMode())===null||e===void 0?void 0:e.decodeText();return(t=uy(r,Bf))!==null&&t!==void 0?t:Bf.UseNone},n.prototype.getReadingDirection=function(){var e,t,r=(e=this.Direction())===null||e===void 0?void 0:e.decodeText();return(t=uy(r,zf))!==null&&t!==void 0?t:zf.L2R},n.prototype.getPrintScaling=function(){var e,t,r=(e=this.PrintScaling())===null||e===void 0?void 0:e.decodeText();return(t=uy(r,Gf))!==null&&t!==void 0?t:Gf.AppDefault},n.prototype.getDuplex=function(){var e,t=(e=this.Duplex())===null||e===void 0?void 0:e.decodeText();return uy(t,hm)},n.prototype.getPickTrayByPDFSize=function(){var e;return(e=this.PickTrayByPDFSize())===null||e===void 0?void 0:e.asBoolean()},n.prototype.getPrintPageRange=function(){var e=this.PrintPageRange();if(!e)return[];for(var t=[],r=0;r<e.size();r+=2){var i=e.lookup(r,it).asNumber(),o=e.lookup(r+1,it).asNumber();t.push({start:i,end:o})}return t},n.prototype.getNumCopies=function(){var e,t;return(t=(e=this.NumCopies())===null||e===void 0?void 0:e.asNumber())!==null&&t!==void 0?t:1},n.prototype.setHideToolbar=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("HideToolbar"),t)},n.prototype.setHideMenubar=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("HideMenubar"),t)},n.prototype.setHideWindowUI=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("HideWindowUI"),t)},n.prototype.setFitWindow=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("FitWindow"),t)},n.prototype.setCenterWindow=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("CenterWindow"),t)},n.prototype.setDisplayDocTitle=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("DisplayDocTitle"),t)},n.prototype.setNonFullScreenPageMode=function(e){hs(e,"nonFullScreenPageMode",Bf);var t=Q.of(e);this.dict.set(Q.of("NonFullScreenPageMode"),t)},n.prototype.setReadingDirection=function(e){hs(e,"readingDirection",zf);var t=Q.of(e);this.dict.set(Q.of("Direction"),t)},n.prototype.setPrintScaling=function(e){hs(e,"printScaling",Gf);var t=Q.of(e);this.dict.set(Q.of("PrintScaling"),t)},n.prototype.setDuplex=function(e){hs(e,"duplex",hm);var t=Q.of(e);this.dict.set(Q.of("Duplex"),t)},n.prototype.setPickTrayByPDFSize=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("PickTrayByPDFSize"),t)},n.prototype.setPrintPageRange=function(e){Array.isArray(e)||(e=[e]);for(var t=[],r=0,i=e.length;r<i;r++)t.push(e[r].start),t.push(e[r].end);ny(t,"printPageRange",["number"]);var o=this.dict.context.obj(t);this.dict.set(Q.of("PrintPageRange"),o)},n.prototype.setNumCopies=function(e){oi(e,"numCopies",1,Number.MAX_VALUE),kC(e,"numCopies");var t=this.dict.context.obj(e);this.dict.set(Q.of("NumCopies"),t)},n.fromDict=function(e){return new n(e)},n.create=function(e){var t=e.obj({});return new n(t)},n}(),hy=Hz;var Wz=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,jz=function(){function n(e,t){this.dict=e,this.ref=t}return n.prototype.T=function(){return this.dict.lookupMaybe(Q.of("T"),Qt,rt)},n.prototype.Ff=function(){var e=this.getInheritableAttribute(Q.of("Ff"));return this.dict.context.lookupMaybe(e,it)},n.prototype.V=function(){var e=this.getInheritableAttribute(Q.of("V"));return this.dict.context.lookup(e)},n.prototype.Kids=function(){return this.dict.lookupMaybe(Q.of("Kids"),Rt)},n.prototype.DA=function(){var e=this.dict.lookup(Q.of("DA"));if(e instanceof Qt||e instanceof rt)return e},n.prototype.setKids=function(e){this.dict.set(Q.of("Kids"),this.dict.context.obj(e))},n.prototype.getParent=function(){var e=this.dict.get(Q.of("Parent"));if(e instanceof Nt){var t=this.dict.lookup(Q.of("Parent"),at);return new n(t,e)}},n.prototype.setParent=function(e){e?this.dict.set(Q.of("Parent"),e):this.dict.delete(Q.of("Parent"))},n.prototype.getFullyQualifiedName=function(){var e=this.getParent();return e?e.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},n.prototype.getPartialName=function(){var e;return(e=this.T())===null||e===void 0?void 0:e.decodeText()},n.prototype.setPartialName=function(e){e?this.dict.set(Q.of("T"),rt.fromText(e)):this.dict.delete(Q.of("T"))},n.prototype.setDefaultAppearance=function(e){this.dict.set(Q.of("DA"),Qt.of(e))},n.prototype.getDefaultAppearance=function(){var e=this.DA();return e instanceof rt?e.decodeText():e?.asString()},n.prototype.setFontSize=function(e){var t,r=(t=this.getFullyQualifiedName())!==null&&t!==void 0?t:"",i=this.getDefaultAppearance();if(!i)throw new WC(r);var o=Rp(i,Wz);if(!o.match)throw new jC(r);var s=i.slice(0,o.pos-o.match[0].length),a=o.pos<=i.length?i.slice(o.pos):"",c=o.match[1],l=s+" /"+c+" "+e+" Tf "+a;this.setDefaultAppearance(l)},n.prototype.getFlags=function(){var e,t;return(t=(e=this.Ff())===null||e===void 0?void 0:e.asNumber())!==null&&t!==void 0?t:0},n.prototype.setFlags=function(e){this.dict.set(Q.of("Ff"),it.of(e))},n.prototype.hasFlag=function(e){var t=this.getFlags();return(t&e)!==0},n.prototype.setFlag=function(e){var t=this.getFlags();this.setFlags(t|e)},n.prototype.clearFlag=function(e){var t=this.getFlags();this.setFlags(t&~e)},n.prototype.setFlagTo=function(e,t){t?this.setFlag(e):this.clearFlag(e)},n.prototype.getInheritableAttribute=function(e){var t;return this.ascend(function(r){t||(t=r.dict.get(e))}),t},n.prototype.ascend=function(e){e(this);var t=this.getParent();t&&t.ascend(e)},n}(),fm=jz;var qz=function(){function n(e){this.dict=e}return n.prototype.W=function(){var e=this.dict.lookup(Q.of("W"));if(e instanceof it)return e},n.prototype.getWidth=function(){var e,t;return(t=(e=this.W())===null||e===void 0?void 0:e.asNumber())!==null&&t!==void 0?t:1},n.prototype.setWidth=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("W"),t)},n.fromDict=function(e){return new n(e)},n}(),fy=qz;var Xz=function(){function n(e){this.dict=e}return n.prototype.Rect=function(){return this.dict.lookup(Q.of("Rect"),Rt)},n.prototype.AP=function(){return this.dict.lookupMaybe(Q.of("AP"),at)},n.prototype.F=function(){var e=this.dict.lookup(Q.of("F"));return this.dict.context.lookupMaybe(e,it)},n.prototype.getRectangle=function(){var e,t=this.Rect();return(e=t?.asRectangle())!==null&&e!==void 0?e:{x:0,y:0,width:0,height:0}},n.prototype.setRectangle=function(e){var t=e.x,r=e.y,i=e.width,o=e.height,s=this.dict.context.obj([t,r,t+i,r+o]);this.dict.set(Q.of("Rect"),s)},n.prototype.getAppearanceState=function(){var e=this.dict.lookup(Q.of("AS"));if(e instanceof Q)return e},n.prototype.setAppearanceState=function(e){this.dict.set(Q.of("AS"),e)},n.prototype.setAppearances=function(e){this.dict.set(Q.of("AP"),e)},n.prototype.ensureAP=function(){var e=this.AP();return e||(e=this.dict.context.obj({}),this.dict.set(Q.of("AP"),e)),e},n.prototype.getNormalAppearance=function(){var e=this.ensureAP(),t=e.get(Q.of("N"));if(t instanceof Nt||t instanceof at)return t;throw new Error("Unexpected N type: "+t?.constructor.name)},n.prototype.setNormalAppearance=function(e){var t=this.ensureAP();t.set(Q.of("N"),e)},n.prototype.setRolloverAppearance=function(e){var t=this.ensureAP();t.set(Q.of("R"),e)},n.prototype.setDownAppearance=function(e){var t=this.ensureAP();t.set(Q.of("D"),e)},n.prototype.removeRolloverAppearance=function(){var e=this.AP();e?.delete(Q.of("R"))},n.prototype.removeDownAppearance=function(){var e=this.AP();e?.delete(Q.of("D"))},n.prototype.getAppearances=function(){var e=this.AP();if(e){var t=e.lookup(Q.of("N"),at,Hn),r=e.lookupMaybe(Q.of("R"),at,Hn),i=e.lookupMaybe(Q.of("D"),at,Hn);return{normal:t,rollover:r,down:i}}},n.prototype.getFlags=function(){var e,t;return(t=(e=this.F())===null||e===void 0?void 0:e.asNumber())!==null&&t!==void 0?t:0},n.prototype.setFlags=function(e){this.dict.set(Q.of("F"),it.of(e))},n.prototype.hasFlag=function(e){var t=this.getFlags();return(t&e)!==0},n.prototype.setFlag=function(e){var t=this.getFlags();this.setFlags(t|e)},n.prototype.clearFlag=function(e){var t=this.getFlags();this.setFlags(t&~e)},n.prototype.setFlagTo=function(e,t){t?this.setFlag(e):this.clearFlag(e)},n.fromDict=function(e){return new n(e)},n}(),AS=Xz;var Kz=function(){function n(e){this.dict=e}return n.prototype.R=function(){var e=this.dict.lookup(Q.of("R"));if(e instanceof it)return e},n.prototype.BC=function(){var e=this.dict.lookup(Q.of("BC"));if(e instanceof Rt)return e},n.prototype.BG=function(){var e=this.dict.lookup(Q.of("BG"));if(e instanceof Rt)return e},n.prototype.CA=function(){var e=this.dict.lookup(Q.of("CA"));if(e instanceof rt||e instanceof Qt)return e},n.prototype.RC=function(){var e=this.dict.lookup(Q.of("RC"));if(e instanceof rt||e instanceof Qt)return e},n.prototype.AC=function(){var e=this.dict.lookup(Q.of("AC"));if(e instanceof rt||e instanceof Qt)return e},n.prototype.getRotation=function(){var e;return(e=this.R())===null||e===void 0?void 0:e.asNumber()},n.prototype.getBorderColor=function(){var e=this.BC();if(e){for(var t=[],r=0,i=e?.size();r<i;r++){var o=e.get(r);o instanceof it&&t.push(o.asNumber())}return t}},n.prototype.getBackgroundColor=function(){var e=this.BG();if(e){for(var t=[],r=0,i=e?.size();r<i;r++){var o=e.get(r);o instanceof it&&t.push(o.asNumber())}return t}},n.prototype.getCaptions=function(){var e=this.CA(),t=this.RC(),r=this.AC();return{normal:e?.decodeText(),rollover:t?.decodeText(),down:r?.decodeText()}},n.prototype.setRotation=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("R"),t)},n.prototype.setBorderColor=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("BC"),t)},n.prototype.setBackgroundColor=function(e){var t=this.dict.context.obj(e);this.dict.set(Q.of("BG"),t)},n.prototype.setCaptions=function(e){var t=rt.fromText(e.normal);if(this.dict.set(Q.of("CA"),t),e.rollover){var r=rt.fromText(e.rollover);this.dict.set(Q.of("RC"),r)}else this.dict.delete(Q.of("RC"));if(e.down){var i=rt.fromText(e.down);this.dict.set(Q.of("AC"),i)}else this.dict.delete(Q.of("AC"))},n.fromDict=function(e){return new n(e)},n}(),dm=Kz;var Yz=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.MK=function(){var t=this.dict.lookup(Q.of("MK"));if(t instanceof at)return t},e.prototype.BS=function(){var t=this.dict.lookup(Q.of("BS"));if(t instanceof at)return t},e.prototype.DA=function(){var t=this.dict.lookup(Q.of("DA"));if(t instanceof Qt||t instanceof rt)return t},e.prototype.P=function(){var t=this.dict.get(Q.of("P"));if(t instanceof Nt)return t},e.prototype.setP=function(t){this.dict.set(Q.of("P"),t)},e.prototype.setDefaultAppearance=function(t){this.dict.set(Q.of("DA"),Qt.of(t))},e.prototype.getDefaultAppearance=function(){var t=this.DA();return t instanceof rt?t.decodeText():t?.asString()},e.prototype.getAppearanceCharacteristics=function(){var t=this.MK();if(t)return dm.fromDict(t)},e.prototype.getOrCreateAppearanceCharacteristics=function(){var t=this.MK();if(t)return dm.fromDict(t);var r=dm.fromDict(this.dict.context.obj({}));return this.dict.set(Q.of("MK"),r.dict),r},e.prototype.getBorderStyle=function(){var t=this.BS();if(t)return fy.fromDict(t)},e.prototype.getOrCreateBorderStyle=function(){var t=this.BS();if(t)return fy.fromDict(t);var r=fy.fromDict(this.dict.context.obj({}));return this.dict.set(Q.of("BS"),r.dict),r},e.prototype.getOnValue=function(){var t,r=(t=this.getAppearances())===null||t===void 0?void 0:t.normal;if(r instanceof at)for(var i=r.keys(),o=0,s=i.length;o<s;o++){var a=i[o];if(a!==Q.of("Off"))return a}},e.fromDict=function(t){return new e(t)},e.create=function(t,r){var i=t.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:r});return new e(i)},e}(AS),Vf=Yz;var Zz=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.FT=function(){var t=this.getInheritableAttribute(Q.of("FT"));return this.dict.context.lookup(t,Q)},e.prototype.getWidgets=function(){var t=this.Kids();if(!t)return[Vf.fromDict(this.dict)];for(var r=new Array(t.size()),i=0,o=t.size();i<o;i++){var s=t.lookup(i,at);r[i]=Vf.fromDict(s)}return r},e.prototype.addWidget=function(t){var r=this.normalizedEntries().Kids;r.push(t)},e.prototype.removeWidget=function(t){var r=this.Kids();if(r){if(t<0||t>r.size())throw new Nf(t,0,r.size());r.remove(t)}else{if(t!==0)throw new Nf(t,0,0);this.setKids([])}},e.prototype.normalizedEntries=function(){var t=this.Kids();return t||(t=this.dict.context.obj([this.ref]),this.dict.set(Q.of("Kids"),t)),{Kids:t}},e.fromDict=function(t,r){return new e(t,r)},e}(fm),co=Zz;var Jz=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.Opt=function(){return this.dict.lookupMaybe(Q.of("Opt"),Qt,rt,Rt)},e.prototype.setOpt=function(t){this.dict.set(Q.of("Opt"),this.dict.context.obj(t))},e.prototype.getExportValues=function(){var t=this.Opt();if(t){if(t instanceof Qt||t instanceof rt)return[t];for(var r=[],i=0,o=t.size();i<o;i++){var s=t.lookup(i);(s instanceof Qt||s instanceof rt)&&r.push(s)}return r}},e.prototype.removeExportValue=function(t){var r=this.Opt();if(r)if(r instanceof Qt||r instanceof rt){if(t!==0)throw new Nf(t,0,0);this.setOpt([])}else{if(t<0||t>r.size())throw new Nf(t,0,r.size());r.remove(t)}},e.prototype.normalizeExportValues=function(){for(var t,r,i,o,s=(t=this.getExportValues())!==null&&t!==void 0?t:[],a=[],c=this.getWidgets(),l=0,u=c.length;l<u;l++){var h=c[l],f=(r=s[l])!==null&&r!==void 0?r:rt.fromText((o=(i=h.getOnValue())===null||i===void 0?void 0:i.decodeText())!==null&&o!==void 0?o:"");a.push(f)}this.setOpt(a)},e.prototype.addOpt=function(t,r){var i;this.normalizeExportValues();var o=t.decodeText(),s;if(r)for(var a=(i=this.getExportValues())!==null&&i!==void 0?i:[],c=0,l=a.length;c<l;c++){var u=a[c];u.decodeText()===o&&(s=c)}var h=this.Opt();return h.push(t),s??h.size()-1},e.prototype.addWidgetWithOpt=function(t,r,i){var o=this.addOpt(r,i),s=Q.of(String(o));return this.addWidget(t),s},e}(co),Xc=Jz;var Qz=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setValue=function(t){var r,i=(r=this.getOnValue())!==null&&r!==void 0?r:Q.of("Yes");if(t!==i&&t!==Q.of("Off"))throw new Lf;this.dict.set(Q.of("V"),t);for(var o=this.getWidgets(),s=0,a=o.length;s<a;s++){var c=o[s],l=c.getOnValue()===t?t:Q.of("Off");c.setAppearanceState(l)}},e.prototype.getValue=function(){var t=this.V();return t instanceof Q?t:Q.of("Off")},e.prototype.getOnValue=function(){var t=this.getWidgets()[0];return t?.getOnValue()},e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Btn",Kids:[]}),i=t.register(r);return new e(r,i)},e}(Xc),Ll=Qz;var Tr=function(n){return 1<<n},Ro;(function(n){n[n.ReadOnly=Tr(0)]="ReadOnly",n[n.Required=Tr(1)]="Required",n[n.NoExport=Tr(2)]="NoExport"})(Ro||(Ro={}));var ai;(function(n){n[n.NoToggleToOff=Tr(14)]="NoToggleToOff",n[n.Radio=Tr(15)]="Radio",n[n.PushButton=Tr(16)]="PushButton",n[n.RadiosInUnison=Tr(25)]="RadiosInUnison"})(ai||(ai={}));var Yn;(function(n){n[n.Multiline=Tr(12)]="Multiline",n[n.Password=Tr(13)]="Password",n[n.FileSelect=Tr(20)]="FileSelect",n[n.DoNotSpellCheck=Tr(22)]="DoNotSpellCheck",n[n.DoNotScroll=Tr(23)]="DoNotScroll",n[n.Comb=Tr(24)]="Comb",n[n.RichText=Tr(25)]="RichText"})(Yn||(Yn={}));var ln;(function(n){n[n.Combo=Tr(17)]="Combo",n[n.Edit=Tr(18)]="Edit",n[n.Sort=Tr(19)]="Sort",n[n.MultiSelect=Tr(21)]="MultiSelect",n[n.DoNotSpellCheck=Tr(22)]="DoNotSpellCheck",n[n.CommitOnSelChange=Tr(26)]="CommitOnSelChange"})(ln||(ln={}));var $z=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setValues=function(t){if(this.hasFlag(ln.Combo)&&!this.hasFlag(ln.Edit)&&!this.valuesAreValid(t))throw new Lf;if(t.length===0&&this.dict.delete(Q.of("V")),t.length===1&&this.dict.set(Q.of("V"),t[0]),t.length>1){if(!this.hasFlag(ln.MultiSelect))throw new HC;this.dict.set(Q.of("V"),this.dict.context.obj(t))}this.updateSelectedIndices(t)},e.prototype.valuesAreValid=function(t){for(var r=this.getOptions(),i=function(c,l){var u=t[c].decodeText();if(!r.find(function(h){return u===(h.display||h.value).decodeText()}))return{value:!1}},o=0,s=t.length;o<s;o++){var a=i(o,s);if(typeof a=="object")return a.value}return!0},e.prototype.updateSelectedIndices=function(t){if(t.length>1){for(var r=new Array(t.length),i=this.getOptions(),o=function(c,l){var u=t[c].decodeText();r[c]=i.findIndex(function(h){return u===(h.display||h.value).decodeText()})},s=0,a=t.length;s<a;s++)o(s,a);this.dict.set(Q.of("I"),this.dict.context.obj(r.sort()))}else this.dict.delete(Q.of("I"))},e.prototype.getValues=function(){var t=this.V();if(t instanceof Qt||t instanceof rt)return[t];if(t instanceof Rt){for(var r=[],i=0,o=t.size();i<o;i++){var s=t.lookup(i);(s instanceof Qt||s instanceof rt)&&r.push(s)}return r}return[]},e.prototype.Opt=function(){return this.dict.lookupMaybe(Q.of("Opt"),Qt,rt,Rt)},e.prototype.setOptions=function(t){for(var r=new Array(t.length),i=0,o=t.length;i<o;i++){var s=t[i],a=s.value,c=s.display;r[i]=this.dict.context.obj([a,c||a])}this.dict.set(Q.of("Opt"),this.dict.context.obj(r))},e.prototype.getOptions=function(){var t=this.Opt();if(t instanceof Qt||t instanceof rt)return[{value:t,display:t}];if(t instanceof Rt){for(var r=[],i=0,o=t.size();i<o;i++){var s=t.lookup(i);if((s instanceof Qt||s instanceof rt)&&r.push({value:s,display:s}),s instanceof Rt&&s.size()>0){var a=s.lookup(0,Qt,rt),c=s.lookupMaybe(1,Qt,rt);r.push({value:a,display:c||a})}}return r}return[]},e}(co),pm=$z;var e5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Ch",Ff:ln.Combo,Kids:[]}),i=t.register(r);return new e(r,i)},e}(pm),Ol=e5;var t5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.addField=function(t){var r=this.normalizedEntries().Kids;r?.push(t)},e.prototype.normalizedEntries=function(){var t=this.Kids();return t||(t=this.dict.context.obj([]),this.dict.set(Q.of("Kids"),t)),{Kids:t}},e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({}),i=t.register(r);return new e(r,i)},e}(fm),kl=t5;var n5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.fromDict=function(t,r){return new e(t,r)},e}(co),Kc=n5;var r5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.MaxLen=function(){var t=this.dict.lookup(Q.of("MaxLen"));if(t instanceof it)return t},e.prototype.Q=function(){var t=this.dict.lookup(Q.of("Q"));if(t instanceof it)return t},e.prototype.setMaxLength=function(t){this.dict.set(Q.of("MaxLen"),it.of(t))},e.prototype.removeMaxLength=function(){this.dict.delete(Q.of("MaxLen"))},e.prototype.getMaxLength=function(){var t;return(t=this.MaxLen())===null||t===void 0?void 0:t.asNumber()},e.prototype.setQuadding=function(t){this.dict.set(Q.of("Q"),it.of(t))},e.prototype.getQuadding=function(){var t;return(t=this.Q())===null||t===void 0?void 0:t.asNumber()},e.prototype.setValue=function(t){this.dict.set(Q.of("V"),t)},e.prototype.removeValue=function(){this.dict.delete(Q.of("V"))},e.prototype.getValue=function(){var t=this.V();if(t instanceof Qt||t instanceof rt)return t},e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Tx",Kids:[]}),i=t.register(r);return new e(r,i)},e}(co),Ul=r5;var i5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Btn",Ff:ai.PushButton,Kids:[]}),i=t.register(r);return new e(r,i)},e}(Xc),Bl=i5;var o5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.setValue=function(t){var r=this.getOnValues();if(!r.includes(t)&&t!==Q.of("Off"))throw new Lf;this.dict.set(Q.of("V"),t);for(var i=this.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],c=a.getOnValue()===t?t:Q.of("Off");a.setAppearanceState(c)}},e.prototype.getValue=function(){var t=this.V();return t instanceof Q?t:Q.of("Off")},e.prototype.getOnValues=function(){for(var t=this.getWidgets(),r=[],i=0,o=t.length;i<o;i++){var s=t[i].getOnValue();s&&r.push(s)}return r},e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Btn",Ff:ai.Radio,Kids:[]}),i=t.register(r);return new e(r,i)},e}(Xc),zl=o5;var s5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.fromDict=function(t,r){return new e(t,r)},e.create=function(t){var r=t.obj({FT:"Ch",Kids:[]}),i=t.register(r);return new e(r,i)},e}(pm),Gl=s5;var mm=function(n){if(!n)return[];for(var e=[],t=0,r=n.size();t<r;t++){var i=n.get(t),o=n.lookup(t);i instanceof Nt&&o instanceof at&&e.push([IS(o,i),i])}return e},IS=function(n,e){var t=a5(n);return t?kl.fromDict(n,e):l5(n,e)},a5=function(n){var e=n.lookup(Q.of("Kids"));if(e instanceof Rt)for(var t=0,r=e.size();t<r;t++){var i=e.lookup(t),o=i instanceof at&&i.has(Q.of("T"));if(o)return!0}return!1},l5=function(n,e){var t=RS(n,Q.of("FT")),r=n.context.lookup(t,Q);return r===Q.of("Btn")?c5(n,e):r===Q.of("Ch")?u5(n,e):r===Q.of("Tx")?Ul.fromDict(n,e):r===Q.of("Sig")?Kc.fromDict(n,e):co.fromDict(n,e)},c5=function(n,e){var t,r=RS(n,Q.of("Ff")),i=n.context.lookupMaybe(r,it),o=(t=i?.asNumber())!==null&&t!==void 0?t:0;return CS(o,ai.PushButton)?Bl.fromDict(n,e):CS(o,ai.Radio)?zl.fromDict(n,e):Ll.fromDict(n,e)},u5=function(n,e){var t,r=RS(n,Q.of("Ff")),i=n.context.lookupMaybe(r,it),o=(t=i?.asNumber())!==null&&t!==void 0?t:0;return CS(o,ln.Combo)?Ol.fromDict(n,e):Gl.fromDict(n,e)},CS=function(n,e){return(n&e)!==0},RS=function(n,e){var t;return SI(n,function(r){t||(t=r.get(e))}),t},SI=function(n,e){e(n);var t=n.lookupMaybe(Q.of("Parent"),at);t&&SI(t,e)};var h5=function(){function n(e){this.dict=e}return n.prototype.Fields=function(){var e=this.dict.lookup(Q.of("Fields"));if(e instanceof Rt)return e},n.prototype.getFields=function(){for(var e=this.normalizedEntries().Fields,t=new Array(e.size()),r=0,i=e.size();r<i;r++){var o=e.get(r),s=e.lookup(r,at);t[r]=[IS(s,o),o]}return t},n.prototype.getAllFields=function(){var e=[],t=function(r){if(r)for(var i=0,o=r.length;i<o;i++){var s=r[i];e.push(s);var a=s[0];a instanceof kl&&t(mm(a.Kids()))}};return t(this.getFields()),e},n.prototype.addField=function(e){var t=this.normalizedEntries().Fields;t?.push(e)},n.prototype.removeField=function(e){var t=e.getParent(),r=t===void 0?this.normalizedEntries().Fields:t.Kids(),i=r?.indexOf(e.ref);if(r===void 0||i===void 0)throw new Error("Tried to remove inexistent field "+e.getFullyQualifiedName());r.remove(i),t!==void 0&&r.size()===0&&this.removeField(t)},n.prototype.normalizedEntries=function(){var e=this.Fields();return e||(e=this.dict.context.obj([]),this.dict.set(Q.of("Fields"),e)),{Fields:e}},n.fromDict=function(e){return new n(e)},n.create=function(e){var t=e.obj({Fields:[]});return new n(t)},n}(),Yc=h5;var f5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.Pages=function(){return this.lookup(Q.of("Pages"),at)},e.prototype.AcroForm=function(){return this.lookupMaybe(Q.of("AcroForm"),at)},e.prototype.getAcroForm=function(){var t=this.AcroForm();if(t)return Yc.fromDict(t)},e.prototype.getOrCreateAcroForm=function(){var t=this.getAcroForm();if(!t){t=Yc.create(this.context);var r=this.context.register(t.dict);this.set(Q.of("AcroForm"),r)}return t},e.prototype.ViewerPreferences=function(){return this.lookupMaybe(Q.of("ViewerPreferences"),at)},e.prototype.getViewerPreferences=function(){var t=this.ViewerPreferences();if(t)return hy.fromDict(t)},e.prototype.getOrCreateViewerPreferences=function(){var t=this.getViewerPreferences();if(!t){t=hy.create(this.context);var r=this.context.register(t.dict);this.set(Q.of("ViewerPreferences"),r)}return t},e.prototype.insertLeafNode=function(t,r){var i=this.get(Q.of("Pages")),o=this.Pages().insertLeafNode(t,r);return o||i},e.prototype.removeLeafNode=function(t){this.Pages().removeLeafNode(t)},e.withContextAndPages=function(t,r){var i=new Map;return i.set(Q.of("Type"),Q.of("Catalog")),i.set(Q.of("Pages"),r),new e(i,t)},e.fromMapWithContext=function(t,r){return new e(t,r)},e}(at),gm=f5;var d5=function(n){Pe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.Parent=function(){return this.lookup(Q.of("Parent"))},e.prototype.Kids=function(){return this.lookup(Q.of("Kids"),Rt)},e.prototype.Count=function(){return this.lookup(Q.of("Count"),it)},e.prototype.pushTreeNode=function(t){var r=this.Kids();r.push(t)},e.prototype.pushLeafNode=function(t){var r=this.Kids();this.insertLeafKid(r.size(),t)},e.prototype.insertLeafNode=function(t,r){var i=this.Kids(),o=this.Count().asNumber();if(r>o)throw new mS(r,o);for(var s=r,a=0,c=i.size();a<c;a++){if(s===0){this.insertLeafKid(a,t);return}var l=i.get(a),u=this.context.lookup(l);if(u instanceof e){if(u.Count().asNumber()>s)return u.insertLeafNode(t,s)||l;s-=u.Count().asNumber()}u instanceof Ci&&(s-=1)}if(s===0){this.insertLeafKid(i.size(),t);return}throw new gS(r,"insertLeafNode")},e.prototype.removeLeafNode=function(t,r){r===void 0&&(r=!0);var i=this.Kids(),o=this.Count().asNumber();if(t>=o)throw new mS(t,o);for(var s=t,a=0,c=i.size();a<c;a++){var l=i.get(a),u=this.context.lookup(l);if(u instanceof e)if(u.Count().asNumber()>s){u.removeLeafNode(s,r),r&&u.Kids().size()===0&&i.remove(a);return}else s-=u.Count().asNumber();if(u instanceof Ci)if(s===0){this.removeKid(a);return}else s-=1}throw new gS(t,"removeLeafNode")},e.prototype.ascend=function(t){t(this);var r=this.Parent();r&&r.ascend(t)},e.prototype.traverse=function(t){for(var r=this.Kids(),i=0,o=r.size();i<o;i++){var s=r.get(i),a=this.context.lookup(s);a instanceof e&&a.traverse(t),t(a,s)}},e.prototype.insertLeafKid=function(t,r){var i=this.Kids();this.ascend(function(o){var s=o.Count().asNumber()+1;o.set(Q.of("Count"),it.of(s))}),i.insert(t,r)},e.prototype.removeKid=function(t){var r=this.Kids(),i=r.lookup(t);i instanceof Ci&&this.ascend(function(o){var s=o.Count().asNumber()-1;o.set(Q.of("Count"),it.of(s))}),r.remove(t)},e.withContext=function(t,r){var i=new Map;return i.set(Q.of("Type"),Q.of("Pages")),i.set(Q.of("Kids"),t.obj([])),i.set(Q.of("Count"),t.obj(0)),r&&i.set(Q.of("Parent"),r),new e(i,t)},e.fromMapWithContext=function(t,r){return new e(t,r)},e}(at),vm=d5;var Nr=new Uint8Array(256);Nr[ie.Zero]=1;Nr[ie.One]=1;Nr[ie.Two]=1;Nr[ie.Three]=1;Nr[ie.Four]=1;Nr[ie.Five]=1;Nr[ie.Six]=1;Nr[ie.Seven]=1;Nr[ie.Eight]=1;Nr[ie.Nine]=1;var dy=new Uint8Array(256);dy[ie.Period]=1;dy[ie.Plus]=1;dy[ie.Minus]=1;var ym=new Uint8Array(256);for(Hf=0,_I=256;Hf<_I;Hf++)ym[Hf]=Nr[Hf]||dy[Hf]?1:0;var Hf,_I;var TI=ie.Newline,MI=ie.CarriageReturn,p5=function(){function n(e,t){t===void 0&&(t=!1),this.bytes=e,this.capNumbers=t}return n.prototype.parseRawInt=function(){for(var e="";!this.bytes.done();){var t=this.bytes.peek();if(!Nr[t])break;e+=oo(this.bytes.next())}var r=Number(e);if(!e||!isFinite(r))throw new vS(this.bytes.position(),e);return r},n.prototype.parseRawNumber=function(){for(var e="";!this.bytes.done();){var t=this.bytes.peek();if(!ym[t]||(e+=oo(this.bytes.next()),t===ie.Period))break}for(;!this.bytes.done();){var t=this.bytes.peek();if(!Nr[t])break;e+=oo(this.bytes.next())}var r=Number(e);if(!e||!isFinite(r))throw new vS(this.bytes.position(),e);if(r>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var i="Parsed number that is too large for some PDF readers: "+e+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(i),Number.MAX_SAFE_INTEGER}else{var i="Parsed number that is too large for some PDF readers: "+e+", not capping.";console.warn(i)}return r},n.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&Io[this.bytes.peek()];)this.bytes.next()},n.prototype.skipLine=function(){for(;!this.bytes.done();){var e=this.bytes.peek();if(e===TI||e===MI)return;this.bytes.next()}},n.prototype.skipComment=function(){if(this.bytes.peek()!==ie.Percent)return!1;for(;!this.bytes.done();){var e=this.bytes.peek();if(e===TI||e===MI)return!0;this.bytes.next()}return!0},n.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},n.prototype.matchKeyword=function(e){for(var t=this.bytes.offset(),r=0,i=e.length;r<i;r++)if(this.bytes.done()||this.bytes.next()!==e[r])return this.bytes.moveTo(t),!1;return!0},n}(),EI=p5;var m5=function(){function n(e){this.idx=0,this.line=0,this.column=0,this.bytes=e,this.length=this.bytes.length}return n.prototype.moveTo=function(e){this.idx=e},n.prototype.next=function(){var e=this.bytes[this.idx++];return e===ie.Newline?(this.line+=1,this.column=0):this.column+=1,e},n.prototype.assertNext=function(e){if(this.peek()!==e)throw new qC(this.position(),e,this.peek());return this.next()},n.prototype.peek=function(){return this.bytes[this.idx]},n.prototype.peekAhead=function(e){return this.bytes[this.idx+e]},n.prototype.peekAt=function(e){return this.bytes[e]},n.prototype.done=function(){return this.idx>=this.length},n.prototype.offset=function(){return this.idx},n.prototype.slice=function(e,t){return this.bytes.slice(e,t)},n.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},n.of=function(e){return new n(e)},n.fromPDFRawStream=function(e){return n.of(cm(e).decode())},n}(),Vl=m5;var g5=ie.Space,xm=ie.CarriageReturn,bm=ie.Newline,wm=[ie.s,ie.t,ie.r,ie.e,ie.a,ie.m],py=[ie.e,ie.n,ie.d,ie.s,ie.t,ie.r,ie.e,ie.a,ie.m],Mn={header:[ie.Percent,ie.P,ie.D,ie.F,ie.Dash],eof:[ie.Percent,ie.Percent,ie.E,ie.O,ie.F],obj:[ie.o,ie.b,ie.j],endobj:[ie.e,ie.n,ie.d,ie.o,ie.b,ie.j],xref:[ie.x,ie.r,ie.e,ie.f],trailer:[ie.t,ie.r,ie.a,ie.i,ie.l,ie.e,ie.r],startxref:[ie.s,ie.t,ie.a,ie.r,ie.t,ie.x,ie.r,ie.e,ie.f],true:[ie.t,ie.r,ie.u,ie.e],false:[ie.f,ie.a,ie.l,ie.s,ie.e],null:[ie.n,ie.u,ie.l,ie.l],stream:wm,streamEOF1:Jt(wm,[g5,xm,bm]),streamEOF2:Jt(wm,[xm,bm]),streamEOF3:Jt(wm,[xm]),streamEOF4:Jt(wm,[bm]),endstream:py,EOF1endstream:Jt([xm,bm],py),EOF2endstream:Jt([xm],py),EOF3endstream:Jt([bm],py)};var v5=function(n){Pe(e,n);function e(t,r,i){i===void 0&&(i=!1);var o=n.call(this,t,i)||this;return o.context=r,o}return e.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(Mn.true))return Oa.True;if(this.matchKeyword(Mn.false))return Oa.False;if(this.matchKeyword(Mn.null))return jr;var t=this.bytes.peek();if(t===ie.LessThan&&this.bytes.peekAhead(1)===ie.LessThan)return this.parseDictOrStream();if(t===ie.LessThan)return this.parseHexString();if(t===ie.LeftParen)return this.parseString();if(t===ie.ForwardSlash)return this.parseName();if(t===ie.LeftSquareBracket)return this.parseArray();if(ym[t])return this.parseNumberOrRef();throw new XC(this.bytes.position(),t)},e.prototype.parseNumberOrRef=function(){var t=this.parseRawNumber();this.skipWhitespaceAndComments();var r=this.bytes.offset();if(Nr[this.bytes.peek()]){var i=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===ie.R)return this.bytes.assertNext(ie.R),Nt.of(t,i)}return this.bytes.moveTo(r),it.of(t)},e.prototype.parseHexString=function(){var t="";for(this.bytes.assertNext(ie.LessThan);!this.bytes.done()&&this.bytes.peek()!==ie.GreaterThan;)t+=oo(this.bytes.next());return this.bytes.assertNext(ie.GreaterThan),rt.of(t)},e.prototype.parseString=function(){for(var t=0,r=!1,i="";!this.bytes.done();){var o=this.bytes.next();if(i+=oo(o),r||(o===ie.LeftParen&&(t+=1),o===ie.RightParen&&(t-=1)),o===ie.BackSlash?r=!r:r&&(r=!1),t===0)return Qt.of(i.substring(1,i.length-1))}throw new ZC(this.bytes.position())},e.prototype.parseName=function(){this.bytes.assertNext(ie.ForwardSlash);for(var t="";!this.bytes.done();){var r=this.bytes.peek();if(Io[r]||Ki[r])break;t+=oo(r),this.bytes.next()}return Q.of(t)},e.prototype.parseArray=function(){this.bytes.assertNext(ie.LeftSquareBracket),this.skipWhitespaceAndComments();for(var t=Rt.withContext(this.context);this.bytes.peek()!==ie.RightSquareBracket;){var r=this.parseObject();t.push(r),this.skipWhitespaceAndComments()}return this.bytes.assertNext(ie.RightSquareBracket),t},e.prototype.parseDict=function(){this.bytes.assertNext(ie.LessThan),this.bytes.assertNext(ie.LessThan),this.skipWhitespaceAndComments();for(var t=new Map;!this.bytes.done()&&this.bytes.peek()!==ie.GreaterThan&&this.bytes.peekAhead(1)!==ie.GreaterThan;){var r=this.parseName(),i=this.parseObject();t.set(r,i),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(ie.GreaterThan),this.bytes.assertNext(ie.GreaterThan);var o=t.get(Q.of("Type"));return o===Q.of("Catalog")?gm.fromMapWithContext(t,this.context):o===Q.of("Pages")?vm.fromMapWithContext(t,this.context):o===Q.of("Page")?Ci.fromMapWithContext(t,this.context):at.fromMapWithContext(t,this.context)},e.prototype.parseDictOrStream=function(){var t=this.bytes.position(),r=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Mn.streamEOF1)&&!this.matchKeyword(Mn.streamEOF2)&&!this.matchKeyword(Mn.streamEOF3)&&!this.matchKeyword(Mn.streamEOF4)&&!this.matchKeyword(Mn.stream))return r;var i=this.bytes.offset(),o,s=r.get(Q.of("Length"));s instanceof it?(o=i+s.asNumber(),this.bytes.moveTo(o),this.skipWhitespaceAndComments(),this.matchKeyword(Mn.endstream)||(this.bytes.moveTo(i),o=this.findEndOfStreamFallback(t))):o=this.findEndOfStreamFallback(t);var a=this.bytes.slice(i,o);return Xs.of(r,a)},e.prototype.findEndOfStreamFallback=function(t){for(var r=1,i=this.bytes.offset();!this.bytes.done()&&(i=this.bytes.offset(),this.matchKeyword(Mn.stream)?r+=1:this.matchKeyword(Mn.EOF1endstream)||this.matchKeyword(Mn.EOF2endstream)||this.matchKeyword(Mn.EOF3endstream)||this.matchKeyword(Mn.endstream)?r-=1:this.bytes.next(),r!==0););if(r!==0)throw new YC(t);return i},e.forBytes=function(t,r,i){return new e(Vl.of(t),r,i)},e.forByteStream=function(t,r,i){return i===void 0&&(i=!1),new e(t,r,i)},e}(EI),Sm=v5;var y5=function(n){Pe(e,n);function e(t,r){var i=n.call(this,Vl.fromPDFRawStream(t),t.dict.context)||this,o=t.dict;return i.alreadyParsed=!1,i.shouldWaitForTick=r||function(){return!1},i.firstOffset=o.lookup(Q.of("First"),it).asNumber(),i.objectCount=o.lookup(Q.of("N"),it).asNumber(),i}return e.prototype.parseIntoContext=function(){return pt(this,void 0,void 0,function(){var t,r,i,o,s,a,c,l;return mt(this,function(u){switch(u.label){case 0:if(this.alreadyParsed)throw new Ff("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,t=this.parseOffsetsAndObjectNumbers(),r=0,i=t.length,u.label=1;case 1:return r<i?(o=t[r],s=o.objectNumber,a=o.offset,this.bytes.moveTo(this.firstOffset+a),c=this.parseObject(),l=Nt.of(s,0),this.context.assign(l,c),this.shouldWaitForTick()?[4,Gs()]:[3,3]):[3,4];case 2:u.sent(),u.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.parseOffsetsAndObjectNumbers=function(){for(var t=[],r=0,i=this.objectCount;r<i;r++){this.skipWhitespaceAndComments();var o=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.parseRawInt();t.push({objectNumber:o,offset:s})}return t},e.forStream=function(t,r){return new e(t,r)},e}(Sm),PS=y5;var x5=function(){function n(e){this.alreadyParsed=!1,this.dict=e.dict,this.bytes=Vl.fromPDFRawStream(e),this.context=this.dict.context;var t=this.dict.lookup(Q.of("Size"),it),r=this.dict.lookup(Q.of("Index"));if(r instanceof Rt){this.subsections=[];for(var i=0,o=r.size();i<o;i+=2){var s=r.lookup(i+0,it).asNumber(),a=r.lookup(i+1,it).asNumber();this.subsections.push({firstObjectNumber:s,length:a})}}else this.subsections=[{firstObjectNumber:0,length:t.asNumber()}];var c=this.dict.lookup(Q.of("W"),Rt);this.byteWidths=[-1,-1,-1];for(var i=0,o=c.size();i<o;i++)this.byteWidths[i]=c.lookup(i,it).asNumber()}return n.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new Ff("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(Q.of("Root")),Encrypt:this.dict.get(Q.of("Encrypt")),Info:this.dict.get(Q.of("Info")),ID:this.dict.get(Q.of("ID"))};var e=this.parseEntries();return e},n.prototype.parseEntries=function(){for(var e=[],t=this.byteWidths,r=t[0],i=t[1],o=t[2],s=0,a=this.subsections.length;s<a;s++)for(var c=this.subsections[s],l=c.firstObjectNumber,u=c.length,h=0;h<u;h++){for(var f=0,d=0,m=r;d<m;d++)f=f<<8|this.bytes.next();for(var v=0,d=0,m=i;d<m;d++)v=v<<8|this.bytes.next();for(var p=0,d=0,m=o;d<m;d++)p=p<<8|this.bytes.next();r===0&&(f=1);var g=l+h,x={ref:Nt.of(g,p),offset:v,deleted:f===0,inObjectStream:f===2};e.push(x)}return e},n.forStream=function(e){return new n(e)},n}(),DS=x5;var b5=function(n){Pe(e,n);function e(t,r,i,o){r===void 0&&(r=1/0),i===void 0&&(i=!1),o===void 0&&(o=!1);var s=n.call(this,Vl.of(t),kf.create(),o)||this;return s.alreadyParsed=!1,s.parsedObjects=0,s.shouldWaitForTick=function(){return s.parsedObjects+=1,s.parsedObjects%s.objectsPerTick===0},s.objectsPerTick=r,s.throwOnInvalidObject=i,s}return e.prototype.parseDocument=function(){return pt(this,void 0,void 0,function(){var t,r;return mt(this,function(i){switch(i.label){case 0:if(this.alreadyParsed)throw new Ff("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),i.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(i.sent(),r=this.bytes.offset(),r===t)throw new JC(this.bytes.position());return t=r,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(Nt.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(Nt.of(0))),[2,this.context]}})})},e.prototype.maybeRecoverRoot=function(){var t=function(u){return u instanceof at&&u.lookup(Q.of("Type"))===Q.of("Catalog")},r=this.context.lookup(this.context.trailerInfo.Root);if(!t(r))for(var i=this.context.enumerateIndirectObjects(),o=0,s=i.length;o<s;o++){var a=i[o],c=a[0],l=a[1];t(l)&&(this.context.trailerInfo.Root=c)}},e.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(Mn.header)){var t=this.parseRawInt();this.bytes.assertNext(ie.Period);var r=this.parseRawInt(),i=La.forVersion(t,r);return this.skipBinaryHeaderComment(),i}this.bytes.next()}throw new QC(this.bytes.position())},e.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var t=this.parseRawInt();this.skipWhitespaceAndComments();var r=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Mn.obj))throw new $C(this.bytes.position(),Mn.obj);return Nt.of(t,r)},e.prototype.matchIndirectObjectHeader=function(){var t=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(t),!1}},e.prototype.parseIndirectObject=function(){return pt(this,void 0,void 0,function(){var t,r;return mt(this,function(i){switch(i.label){case 0:return t=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),r=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(Mn.endobj),r instanceof Xs&&r.dict.lookup(Q.of("Type"))===Q.of("ObjStm")?[4,PS.forStream(r,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return i.sent(),[3,3];case 2:r instanceof Xs&&r.dict.lookup(Q.of("Type"))===Q.of("XRef")?DS.forStream(r).parseIntoContext():this.context.assign(t,r),i.label=3;case 3:return[2,t]}})})},e.prototype.tryToParseInvalidIndirectObject=function(){var t=this.bytes.position(),r="Trying to parse invalid object: "+JSON.stringify(t)+")";if(this.throwOnInvalidObject)throw new Error(r);console.warn(r);var i=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+i),this.skipWhitespaceAndComments();for(var o=this.bytes.offset(),s=!0;!this.bytes.done()&&(this.matchKeyword(Mn.endobj)&&(s=!1),!!s);)this.bytes.next();if(s)throw new KC(t);var a=this.bytes.offset()-Mn.endobj.length,c=om.of(this.bytes.slice(o,a));return this.context.assign(i,c),i},e.prototype.parseIndirectObjects=function(){return pt(this,void 0,void 0,function(){var t,r;return mt(this,function(i){switch(i.label){case 0:this.skipWhitespaceAndComments(),i.label=1;case 1:if(!(!this.bytes.done()&&Nr[this.bytes.peek()]))return[3,8];t=this.bytes.offset(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return i.sent(),[3,5];case 4:return r=i.sent(),this.bytes.moveTo(t),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,Gs()]:[3,7];case 6:i.sent(),i.label=7;case 7:return[3,1];case 8:return[2]}})})},e.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Mn.xref)){this.skipWhitespaceAndComments();for(var t=-1,r=nm.createEmpty();!this.bytes.done()&&Nr[this.bytes.peek()];){var i=this.parseRawInt();this.skipWhitespaceAndComments();var o=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.bytes.peek();if(s===ie.n||s===ie.f){var a=Nt.of(t,o);this.bytes.next()===ie.n?r.addEntry(a,i):r.addDeletedEntry(a,i),t+=1}else t=i;this.skipWhitespaceAndComments()}return r}},e.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Mn.trailer)){this.skipWhitespaceAndComments();var t=this.parseDict(),r=this.context;r.trailerInfo={Root:t.get(Q.of("Root"))||r.trailerInfo.Root,Encrypt:t.get(Q.of("Encrypt"))||r.trailerInfo.Encrypt,Info:t.get(Q.of("Info"))||r.trailerInfo.Info,ID:t.get(Q.of("ID"))||r.trailerInfo.ID}}},e.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Mn.startxref)){this.skipWhitespaceAndComments();var t=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(Mn.eof),this.skipWhitespaceAndComments(),this.matchKeyword(Mn.eof),this.skipWhitespaceAndComments(),Hc.forLastCrossRefSectionOffset(t)}},e.prototype.parseDocumentSection=function(){return pt(this,void 0,void 0,function(){return mt(this,function(t){switch(t.label){case 0:return[4,this.parseIndirectObjects()];case 1:return t.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},e.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var t=this.bytes.offset(),r=this.bytes.peek(),i=r>=ie.Space&&r<=ie.Tilde;if(i&&(this.matchKeyword(Mn.xref)||this.matchKeyword(Mn.trailer)||this.matchKeyword(Mn.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(t);break}this.bytes.next()}},e.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var t=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(t)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},e.forBytesWithOptions=function(t,r,i,o){return new e(t,r,i,o)},e}(Sm),FS=b5;var Ys=function(n){return 1<<n},Wf;(function(n){n[n.Invisible=Ys(0)]="Invisible",n[n.Hidden=Ys(1)]="Hidden",n[n.Print=Ys(2)]="Print",n[n.NoZoom=Ys(3)]="NoZoom",n[n.NoRotate=Ys(4)]="NoRotate",n[n.NoView=Ys(5)]="NoView",n[n.ReadOnly=Ys(6)]="ReadOnly",n[n.Locked=Ys(7)]="Locked",n[n.ToggleNoView=Ys(8)]="ToggleNoView",n[n.LockedContents=Ys(9)]="LockedContents"})(Wf||(Wf={}));var _m=function(n){return n instanceof Q?n:Q.of(n)},Ut=function(n){return n instanceof it?n:it.of(n)},Ht=function(n){return n instanceof it?n.asNumber():n};var Tm;(function(n){n.Degrees="degrees",n.Radians="radians"})(Tm||(Tm={}));var yt=function(n){return _e(n,"degreeAngle",["number"]),{type:Tm.Degrees,angle:n}},AI=Tm.Radians,CI=Tm.Degrees,NS=function(n){return n*Math.PI/180},w5=function(n){return n*180/Math.PI},qr=function(n){return n.type===AI?n.angle:n.type===CI?NS(n.angle):Pc("Invalid rotation: "+JSON.stringify(n))},my=function(n){return n.type===AI?w5(n.angle):n.type===CI?n.angle:Pc("Invalid rotation: "+JSON.stringify(n))},fs=function(n){n===void 0&&(n=0);var e=n/90%4;return e===0?0:e===1?90:e===2?180:e===3?270:0},Ua=function(n,e){e===void 0&&(e=0);var t=fs(e);return t===90||t===270?{width:n.height,height:n.width}:{width:n.width,height:n.height}},II=function(n,e,t){e===void 0&&(e=0),t===void 0&&(t=0);var r=n.x,i=n.y,o=n.width,s=n.height,a=fs(t),c=e/2;return a===0?{x:r-c,y:i-c,width:o,height:s}:a===90?{x:r-s+c,y:i-c,width:s,height:o}:a===180?{x:r-o+c,y:i-s+c,width:o,height:s}:a===270?{x:r-c,y:i-o+c,width:s,height:o}:{x:r-c,y:i-c,width:o,height:s}};var LS=function(){return tn.of(rn.ClipNonZero)};var gy=Math.cos,vy=Math.sin,yy=Math.tan,xy=function(n,e,t,r,i,o){return tn.of(rn.ConcatTransformationMatrix,[Ut(n),Ut(e),Ut(t),Ut(r),Ut(i),Ut(o)])},Ii=function(n,e){return xy(1,0,0,1,n,e)},Jc=function(n,e){return xy(n,0,0,e,0,0)},Qc=function(n){return xy(gy(Ht(n)),vy(Ht(n)),-vy(Ht(n)),gy(Ht(n)),0,0)},Mm=function(n){return Qc(NS(Ht(n)))},by=function(n,e){return xy(1,yy(Ht(n)),yy(Ht(e)),1,0,0)};var Em=function(n,e){return tn.of(rn.SetLineDashPattern,["["+n.map(Ut).join(" ")+"]",Ut(e)])};var Zc;(function(n){n[n.Butt=0]="Butt",n[n.Round=1]="Round",n[n.Projecting=2]="Projecting"})(Zc||(Zc={}));var Am=function(n){return tn.of(rn.SetLineCapStyle,[Ut(n)])},RI;(function(n){n[n.Miter=0]="Miter",n[n.Round=1]="Round",n[n.Bevel=2]="Bevel"})(RI||(RI={}));var Hl=function(n){return tn.of(rn.SetGraphicsStateParams,[_m(n)])},ar=function(){return tn.of(rn.PushGraphicsState)},lr=function(){return tn.of(rn.PopGraphicsState)},jf=function(n){return tn.of(rn.SetLineWidth,[Ut(n)])},Ri=function(n,e,t,r,i,o){return tn.of(rn.AppendBezierCurve,[Ut(n),Ut(e),Ut(t),Ut(r),Ut(i),Ut(o)])},Cm=function(n,e,t,r){return tn.of(rn.CurveToReplicateInitialPoint,[Ut(n),Ut(e),Ut(t),Ut(r)])},Zs=function(){return tn.of(rn.ClosePath)},Po=function(n,e){return tn.of(rn.MoveTo,[Ut(n),Ut(e)])},Mr=function(n,e){return tn.of(rn.LineTo,[Ut(n),Ut(e)])};var qf=function(){return tn.of(rn.StrokePath)},wy=function(){return tn.of(rn.FillNonZero)},Sy=function(){return tn.of(rn.FillNonZeroAndStroke)},OS=function(){return tn.of(rn.EndPath)},DI=function(){return tn.of(rn.NextLine)};var kS=function(n){return tn.of(rn.ShowText,[n])},US=function(){return tn.of(rn.BeginText)},BS=function(){return tn.of(rn.EndText)},Im=function(n,e){return tn.of(rn.SetFontAndSize,[_m(n),Ut(e)])};var FI=function(n){return tn.of(rn.SetTextLineHeight,[Ut(n)])};var PI;(function(n){n[n.Fill=0]="Fill",n[n.Outline=1]="Outline",n[n.FillAndOutline=2]="FillAndOutline",n[n.Invisible=3]="Invisible",n[n.FillAndClip=4]="FillAndClip",n[n.OutlineAndClip=5]="OutlineAndClip",n[n.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",n[n.Clip=7]="Clip"})(PI||(PI={}));var S5=function(n,e,t,r,i,o){return tn.of(rn.SetTextMatrix,[Ut(n),Ut(e),Ut(t),Ut(r),Ut(i),Ut(o)])},zS=function(n,e,t,r,i){return S5(gy(Ht(n)),vy(Ht(n))+yy(Ht(e)),-vy(Ht(n))+yy(Ht(t)),gy(Ht(n)),r,i)};var Rm=function(n){return tn.of(rn.DrawObject,[_m(n)])},NI=function(n){return tn.of(rn.NonStrokingColorGray,[Ut(n)])},LI=function(n){return tn.of(rn.StrokingColorGray,[Ut(n)])},OI=function(n,e,t){return tn.of(rn.NonStrokingColorRgb,[Ut(n),Ut(e),Ut(t)])},kI=function(n,e,t){return tn.of(rn.StrokingColorRgb,[Ut(n),Ut(e),Ut(t)])},UI=function(n,e,t,r){return tn.of(rn.NonStrokingColorCmyk,[Ut(n),Ut(e),Ut(t),Ut(r)])},BI=function(n,e,t,r){return tn.of(rn.StrokingColorCmyk,[Ut(n),Ut(e),Ut(t),Ut(r)])},GS=function(n){return tn.of(rn.BeginMarkedContent,[_m(n)])},VS=function(){return tn.of(rn.EndMarkedContent)};var Wl;(function(n){n.Grayscale="Grayscale",n.RGB="RGB",n.CMYK="CMYK"})(Wl||(Wl={}));var HS=function(n){return oi(n,"gray",0,1),{type:Wl.Grayscale,gray:n}},zt=function(n,e,t){return oi(n,"red",0,1),oi(e,"green",0,1),oi(t,"blue",0,1),{type:Wl.RGB,red:n,green:e,blue:t}},WS=function(n,e,t,r){return oi(n,"cyan",0,1),oi(e,"magenta",0,1),oi(t,"yellow",0,1),oi(r,"key",0,1),{type:Wl.CMYK,cyan:n,magenta:e,yellow:t,key:r}},jS=Wl.Grayscale,qS=Wl.RGB,XS=Wl.CMYK,Js=function(n){return n.type===jS?NI(n.gray):n.type===qS?OI(n.red,n.green,n.blue):n.type===XS?UI(n.cyan,n.magenta,n.yellow,n.key):Pc("Invalid color: "+JSON.stringify(n))},Xf=function(n){return n.type===jS?LI(n.gray):n.type===qS?kI(n.red,n.green,n.blue):n.type===XS?BI(n.cyan,n.magenta,n.yellow,n.key):Pc("Invalid color: "+JSON.stringify(n))},li=function(n,e){return e===void 0&&(e=1),n?.length===1?HS(n[0]*e):n?.length===3?zt(n[0]*e,n[1]*e,n[2]*e):n?.length===4?WS(n[0]*e,n[1]*e,n[2]*e,n[3]*e):void 0},KS=function(n){return n.type===jS?[n.gray]:n.type===qS?[n.red,n.green,n.blue]:n.type===XS?[n.cyan,n.magenta,n.yellow,n.key]:Pc("Invalid color: "+JSON.stringify(n))};var xt=0,bt=0,cn=0,un=0,Pm=0,Dm=0,zI=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),_5=function(n){for(var e,t=[],r=[],i="",o=!1,s=0,a=0,c=n;a<c.length;a++){var l=c[a];if(zI.has(l))s=zI.get(l),e&&(i.length>0&&(r[r.length]=+i),t[t.length]={cmd:e,args:r},r=[],i="",o=!1),e=l;else if([" ",","].includes(l)||l==="-"&&i.length>0&&i[i.length-1]!=="e"||l==="."&&o){if(i.length===0)continue;r.length===s?(t[t.length]={cmd:e,args:r},r=[+i],e==="M"&&(e="L"),e==="m"&&(e="l")):r[r.length]=+i,o=l===".",i=["-","."].includes(l)?l:""}else i+=l,l==="."&&(o=!0)}return i.length>0&&(r.length===s?(t[t.length]={cmd:e,args:r},r=[+i],e==="M"&&(e="L"),e==="m"&&(e="l")):r[r.length]=+i),t[t.length]={cmd:e,args:r},t},T5=function(n){xt=bt=cn=un=Pm=Dm=0;for(var e=[],t=0;t<n.length;t++){var r=n[t];if(r.cmd&&typeof GI[r.cmd]=="function"){var i=GI[r.cmd](r.args);Array.isArray(i)?e=e.concat(i):e.push(i)}}return e},GI={M:function(n){return xt=n[0],bt=n[1],cn=un=null,Pm=xt,Dm=bt,Po(xt,bt)},m:function(n){return xt+=n[0],bt+=n[1],cn=un=null,Pm=xt,Dm=bt,Po(xt,bt)},C:function(n){return xt=n[4],bt=n[5],cn=n[2],un=n[3],Ri(n[0],n[1],n[2],n[3],n[4],n[5])},c:function(n){var e=Ri(n[0]+xt,n[1]+bt,n[2]+xt,n[3]+bt,n[4]+xt,n[5]+bt);return cn=xt+n[2],un=bt+n[3],xt+=n[4],bt+=n[5],e},S:function(n){(cn===null||un===null)&&(cn=xt,un=bt);var e=Ri(xt-(cn-xt),bt-(un-bt),n[0],n[1],n[2],n[3]);return cn=n[0],un=n[1],xt=n[2],bt=n[3],e},s:function(n){(cn===null||un===null)&&(cn=xt,un=bt);var e=Ri(xt-(cn-xt),bt-(un-bt),xt+n[0],bt+n[1],xt+n[2],bt+n[3]);return cn=xt+n[0],un=bt+n[1],xt+=n[2],bt+=n[3],e},Q:function(n){return cn=n[0],un=n[1],xt=n[2],bt=n[3],Cm(n[0],n[1],xt,bt)},q:function(n){var e=Cm(n[0]+xt,n[1]+bt,n[2]+xt,n[3]+bt);return cn=xt+n[0],un=bt+n[1],xt+=n[2],bt+=n[3],e},T:function(n){cn===null||un===null?(cn=xt,un=bt):(cn=xt-(cn-xt),un=bt-(un-bt));var e=Cm(cn,un,n[0],n[1]);return cn=xt-(cn-xt),un=bt-(un-bt),xt=n[0],bt=n[1],e},t:function(n){cn===null||un===null?(cn=xt,un=bt):(cn=xt-(cn-xt),un=bt-(un-bt));var e=Cm(cn,un,xt+n[0],bt+n[1]);return xt+=n[0],bt+=n[1],e},A:function(n){var e=VI(xt,bt,n);return xt=n[5],bt=n[6],e},a:function(n){n[5]+=xt,n[6]+=bt;var e=VI(xt,bt,n);return xt=n[5],bt=n[6],e},L:function(n){return xt=n[0],bt=n[1],cn=un=null,Mr(xt,bt)},l:function(n){return xt+=n[0],bt+=n[1],cn=un=null,Mr(xt,bt)},H:function(n){return xt=n[0],cn=un=null,Mr(xt,bt)},h:function(n){return xt+=n[0],cn=un=null,Mr(xt,bt)},V:function(n){return bt=n[0],cn=un=null,Mr(xt,bt)},v:function(n){return bt+=n[0],cn=un=null,Mr(xt,bt)},Z:function(){var n=Zs();return xt=Pm,bt=Dm,n},z:function(){var n=Zs();return xt=Pm,bt=Dm,n}},VI=function(n,e,t){for(var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],l=t[6],u=M5(c,l,r,i,s,a,o,n,e),h=[],f=0,d=u;f<d.length;f++){var m=d[f],v=E5.apply(void 0,m);h.push(Ri.apply(void 0,v))}return h},M5=function(n,e,t,r,i,o,s,a,c){var l=s*(Math.PI/180),u=Math.sin(l),h=Math.cos(l);t=Math.abs(t),r=Math.abs(r),cn=h*(a-n)*.5+u*(c-e)*.5,un=h*(c-e)*.5-u*(a-n)*.5;var f=cn*cn/(t*t)+un*un/(r*r);f>1&&(f=Math.sqrt(f),t*=f,r*=f);var d=h/t,m=u/t,v=-u/r,p=h/r,g=d*a+m*c,x=v*a+p*c,y=d*n+m*e,b=v*n+p*e,S=(y-g)*(y-g)+(b-x)*(b-x),_=1/S-.25;_<0&&(_=0);var M=Math.sqrt(_);o===i&&(M=-M);var A=.5*(g+y)-M*(b-x),w=.5*(x+b)+M*(y-g),T=Math.atan2(x-w,g-A),D=Math.atan2(b-w,y-A),N=D-T;N<0&&o===1?N+=2*Math.PI:N>0&&o===0&&(N-=2*Math.PI);for(var P=Math.ceil(Math.abs(N/(Math.PI*.5+.001))),E=[],U=0;U<P;U++){var k=T+U*N/P,B=T+(U+1)*N/P;E[U]=[A,w,k,B,t,r,u,h]}return E},E5=function(n,e,t,r,i,o,s,a){var c=a*i,l=-s*o,u=s*i,h=a*o,f=.5*(r-t),d=8/3*Math.sin(f*.5)*Math.sin(f*.5)/Math.sin(f),m=n+Math.cos(t)-d*Math.sin(t),v=e+Math.sin(t)+d*Math.cos(t),p=n+Math.cos(r),g=e+Math.sin(r),x=p+d*Math.sin(r),y=g-d*Math.cos(r),b=[c*m+l*v,u*m+h*v,c*x+l*y,u*x+h*y,c*p+l*g,u*p+h*g];return b},HI=function(n){return T5(_5(n))};var WI=function(n,e){for(var t=[ar(),e.graphicsState&&Hl(e.graphicsState),US(),Js(e.color),Im(e.font,e.size),FI(e.lineHeight),zS(qr(e.rotate),qr(e.xSkew),qr(e.ySkew),e.x,e.y)].filter(Boolean),r=0,i=n.length;r<i;r++)t.push(kS(n[r]),DI());return t.push(BS(),lr()),t},My=function(n,e){return[ar(),e.graphicsState&&Hl(e.graphicsState),Ii(e.x,e.y),Qc(qr(e.rotate)),Jc(e.width,e.height),by(qr(e.xSkew),qr(e.ySkew)),Rm(n),lr()].filter(Boolean)},jI=function(n,e){return[ar(),e.graphicsState&&Hl(e.graphicsState),Ii(e.x,e.y),Qc(qr(e.rotate)),Jc(e.xScale,e.yScale),by(qr(e.xSkew),qr(e.ySkew)),Rm(n),lr()].filter(Boolean)},qI=function(n){var e,t;return[ar(),n.graphicsState&&Hl(n.graphicsState),n.color&&Xf(n.color),jf(n.thickness),Em((e=n.dashArray)!==null&&e!==void 0?e:[],(t=n.dashPhase)!==null&&t!==void 0?t:0),Po(n.start.x,n.start.y),n.lineCap&&Am(n.lineCap),Po(n.start.x,n.start.y),Mr(n.end.x,n.end.y),qf(),lr()].filter(Boolean)},$c=function(n){var e,t;return[ar(),n.graphicsState&&Hl(n.graphicsState),n.color&&Js(n.color),n.borderColor&&Xf(n.borderColor),jf(n.borderWidth),n.borderLineCap&&Am(n.borderLineCap),Em((e=n.borderDashArray)!==null&&e!==void 0?e:[],(t=n.borderDashPhase)!==null&&t!==void 0?t:0),Ii(n.x,n.y),Qc(qr(n.rotate)),by(qr(n.xSkew),qr(n.ySkew)),Po(0,0),Mr(0,n.height),Mr(n.width,n.height),Mr(n.width,0),Zs(),n.color&&n.borderWidth?Sy():n.color?wy():n.borderColor?qf():Zs(),lr()].filter(Boolean)},_y=4*((Math.sqrt(2)-1)/3),A5=function(n){var e=Ht(n.x),t=Ht(n.y),r=Ht(n.xScale),i=Ht(n.yScale);e-=r,t-=i;var o=r*_y,s=i*_y,a=e+r*2,c=t+i*2,l=e+r,u=t+i;return[ar(),Po(e,u),Ri(e,u-s,l-o,t,l,t),Ri(l+o,t,a,u-s,a,u),Ri(a,u+s,l+o,c,l,c),Ri(l-o,c,e,u+s,e,u),lr()]},C5=function(n){var e=Ht(n.x),t=Ht(n.y),r=Ht(n.xScale),i=Ht(n.yScale),o=-r,s=-i,a=r*_y,c=i*_y,l=o+r*2,u=s+i*2,h=o+r,f=s+i;return[Ii(e,t),Qc(qr(n.rotate)),Po(o,f),Ri(o,f-c,h-a,s,h,s),Ri(h+a,s,l,f-c,l,f),Ri(l,f+c,h+a,u,h,u),Ri(h-a,u,o,f+c,o,f)]},Ty=function(n){var e,t,r;return Jt([ar(),n.graphicsState&&Hl(n.graphicsState),n.color&&Js(n.color),n.borderColor&&Xf(n.borderColor),jf(n.borderWidth),n.borderLineCap&&Am(n.borderLineCap),Em((e=n.borderDashArray)!==null&&e!==void 0?e:[],(t=n.borderDashPhase)!==null&&t!==void 0?t:0)],n.rotate===void 0?A5({x:n.x,y:n.y,xScale:n.xScale,yScale:n.yScale}):C5({x:n.x,y:n.y,xScale:n.xScale,yScale:n.yScale,rotate:(r=n.rotate)!==null&&r!==void 0?r:yt(0)}),[n.color&&n.borderWidth?Sy():n.color?wy():n.borderColor?qf():Zs(),lr()]).filter(Boolean)},XI=function(n,e){var t,r,i;return Jt([ar(),e.graphicsState&&Hl(e.graphicsState),Ii(e.x,e.y),Qc(qr((t=e.rotate)!==null&&t!==void 0?t:yt(0))),e.scale?Jc(e.scale,-e.scale):Jc(1,-1),e.color&&Js(e.color),e.borderColor&&Xf(e.borderColor),e.borderWidth&&jf(e.borderWidth),e.borderLineCap&&Am(e.borderLineCap),Em((r=e.borderDashArray)!==null&&r!==void 0?r:[],(i=e.borderDashPhase)!==null&&i!==void 0?i:0)],HI(n),[e.color&&e.borderWidth?Sy():e.color?wy():e.borderColor?qf():Zs(),lr()]).filter(Boolean)},I5=function(n){var e=Ht(n.size),t=-1+.75,r=-1+.51,i=1-.525,o=1-.31,s=-1+.325,a=-((s-t)*(o-t))/(i-r)+r;return[ar(),n.color&&Xf(n.color),jf(n.thickness),Ii(n.x,n.y),Po(s*e,a*e),Mr(t*e,r*e),Mr(o*e,i*e),qf(),lr()].filter(Boolean)},ds=function(n){return n.rotation===0?[Ii(0,0),Mm(0)]:n.rotation===90?[Ii(n.width,0),Mm(90)]:n.rotation===180?[Ii(n.width,n.height),Mm(180)]:n.rotation===270?[Ii(0,n.height),Mm(270)]:[]},Fm=function(n){var e=$c({x:n.x,y:n.y,width:n.width,height:n.height,borderWidth:n.borderWidth,color:n.color,borderColor:n.borderColor,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)});if(!n.filled)return e;var t=Ht(n.width),r=Ht(n.height),i=Math.min(t,r)/2,o=I5({x:t/2,y:r/2,size:i,thickness:n.thickness,color:n.markColor});return Jt([ar()],e,o,[lr()])},Nm=function(n){var e=Ht(n.width),t=Ht(n.height),r=Math.min(e,t)/2,i=Ty({x:n.x,y:n.y,xScale:r,yScale:r,color:n.color,borderColor:n.borderColor,borderWidth:n.borderWidth});if(!n.filled)return i;var o=Ty({x:n.x,y:n.y,xScale:r*.45,yScale:r*.45,color:n.dotColor,borderColor:void 0,borderWidth:0});return Jt([ar()],i,o,[lr()])},YS=function(n){var e=Ht(n.x),t=Ht(n.y),r=Ht(n.width),i=Ht(n.height),o=$c({x:e,y:t,width:r,height:i,borderWidth:n.borderWidth,color:n.color,borderColor:n.borderColor,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)}),s=ZS(n.textLines,{color:n.textColor,font:n.font,size:n.fontSize,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)});return Jt([ar()],o,s,[lr()])},ZS=function(n,e){for(var t=[US(),Js(e.color),Im(e.font,e.size)],r=0,i=n.length;r<i;r++){var o=n[r],s=o.encoded,a=o.x,c=o.y;t.push(zS(qr(e.rotate),qr(e.xSkew),qr(e.ySkew),a,c),kS(s))}return t.push(BS()),t},JS=function(n){var e=Ht(n.x),t=Ht(n.y),r=Ht(n.width),i=Ht(n.height),o=Ht(n.borderWidth),s=Ht(n.padding),a=e+o/2+s,c=t+o/2+s,l=r-(o/2+s)*2,u=i-(o/2+s)*2,h=[Po(a,c),Mr(a,c+u),Mr(a+l,c+u),Mr(a+l,c),Zs(),LS(),OS()],f=$c({x:e,y:t,width:r,height:i,borderWidth:n.borderWidth,color:n.color,borderColor:n.borderColor,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)}),d=ZS(n.textLines,{color:n.textColor,font:n.font,size:n.fontSize,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)}),m=Jt([GS("Tx"),ar()],d,[lr(),VS()]);return Jt([ar()],f,h,m,[lr()])},KI=function(n){for(var e=Ht(n.x),t=Ht(n.y),r=Ht(n.width),i=Ht(n.height),o=Ht(n.lineHeight),s=Ht(n.borderWidth),a=Ht(n.padding),c=e+s/2+a,l=t+s/2+a,u=r-(s/2+a)*2,h=i-(s/2+a)*2,f=[Po(c,l),Mr(c,l+h),Mr(c+u,l+h),Mr(c+u,l),Zs(),LS(),OS()],d=$c({x:e,y:t,width:r,height:i,borderWidth:n.borderWidth,color:n.color,borderColor:n.borderColor,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)}),m=[],v=0,p=n.selectedLines.length;v<p;v++){var g=n.textLines[n.selectedLines[v]];m.push.apply(m,$c({x:g.x-a,y:g.y-(o-g.height)/2,width:r-s,height:g.height+(o-g.height)/2,borderWidth:0,color:n.selectedColor,borderColor:void 0,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)}))}var x=ZS(n.textLines,{color:n.textColor,font:n.font,size:n.fontSize,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)}),y=Jt([GS("Tx"),ar()],x,[lr(),VS()]);return Jt([ar()],d,m,f,y,[lr()])};var YI=function(n){Pe(e,n);function e(){var t=this,r="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return t=n.call(this,r)||this,t}return e}(Error);var ZI=function(n){Pe(e,n);function e(){var t=this,r="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return t=n.call(this,r)||this,t}return e}(Error);var JI=function(n){Pe(e,n);function e(){var t=this,r="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return t=n.call(this,r)||this,t}return e}(Error);var QI=function(n){Pe(e,n);function e(){var t=this,r="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return t=n.call(this,r)||this,t}return e}(Error);var $I=function(n){Pe(e,n);function e(t){var r=this,i='PDFDocument has no form field with the name "'+t+'"';return r=n.call(this,i)||this,r}return e}(Error);var jl=function(n){Pe(e,n);function e(t,r,i){var o,s,a=this,c=r?.name,l=(s=(o=i?.constructor)===null||o===void 0?void 0:o.name)!==null&&s!==void 0?s:i,u='Expected field "'+t+'" to be of type '+c+", "+("but it is actually of type "+l);return a=n.call(this,u)||this,a}return e}(Error);var rse=function(n){Pe(e,n);function e(t){var r=this,i='Failed to select check box due to missing onValue: "'+t+'"';return r=n.call(this,i)||this,r}return e}(Error);var QS=function(n){Pe(e,n);function e(t){var r=this,i='A field already exists with the specified name: "'+t+'"';return r=n.call(this,i)||this,r}return e}(Error);var eR=function(n){Pe(e,n);function e(t){var r=this,i='Field name contains invalid component: "'+t+'"';return r=n.call(this,i)||this,r}return e}(Error);var ise=function(n){Pe(e,n);function e(t){var r=this,i='A non-terminal field already exists with the specified name: "'+t+'"';return r=n.call(this,i)||this,r}return e}(Error);var tR=function(n){Pe(e,n);function e(t){var r=this,i="Reading rich text fields is not supported: Attempted to read rich text field: "+t;return r=n.call(this,i)||this,r}return e}(Error);var nR=function(n){Pe(e,n);function e(t,r){var i=this,o="Failed to layout combed text as lineLength="+t+" is greater than cellCount="+r;return i=n.call(this,o)||this,i}return e}(Error);var rR=function(n){Pe(e,n);function e(t,r,i){var o=this,s="Attempted to set text with length="+t+" for TextField with maxLength="+r+" and name="+i;return o=n.call(this,s)||this,o}return e}(Error);var iR=function(n){Pe(e,n);function e(t,r,i){var o=this,s="Attempted to set maxLength="+r+", which is less than "+t+", the length of this field's current value (name="+i+")";return o=n.call(this,s)||this,o}return e}(Error);var cr;(function(n){n[n.Left=0]="Left",n[n.Center=1]="Center",n[n.Right=2]="Right"})(cr||(cr={}));var oR=4,sR=500,aR=function(n,e,t,r){r===void 0&&(r=!1);for(var i=oR;i<sR;){for(var o=0,s=0,a=n.length;s<a;s++){o+=1;for(var c=n[s],l=c.split(" "),u=t.width,h=0,f=l.length;h<f;h++){var d=h===f-1,m=d?l[h]:l[h]+" ",v=e.widthOfTextAtSize(m,i);u-=v,u<=0&&(o+=1,u=t.width-v)}}if(!r&&o>n.length)return i-1;var p=e.heightAtSize(i),g=p+p*.2,x=g*o;if(x>Math.abs(t.height))return i-1;i+=1}return i},R5=function(n,e,t,r){for(var i=t.width/r,o=t.height,s=oR,a=hE(n);s<sR;){for(var c=0,l=a.length;c<l;c++){var u=a[c],h=e.widthOfTextAtSize(u,s)>i*.75;if(h)return s-1}var f=e.heightAtSize(s,{descender:!1});if(f>o)return s-1;s+=1}return s},P5=function(n){for(var e=n.length;e>0;e--)if(/\s/.test(n[e]))return e},D5=function(n,e,t,r){for(var i,o=n.length;o>0;){var s=n.substring(0,o),a=t.encodeText(s),c=t.widthOfTextAtSize(s,r);if(c<e){var l=n.substring(o)||void 0;return{line:s,encoded:a,width:c,remainder:l}}o=(i=P5(s))!==null&&i!==void 0?i:0}return{line:n,encoded:t.encodeText(n),width:t.widthOfTextAtSize(n,r),remainder:void 0}},$S=function(n,e){var t=e.alignment,r=e.fontSize,i=e.font,o=e.bounds,s=F0(Cc(n));(r===void 0||r===0)&&(r=aR(s,i,o,!0));for(var a=i.heightAtSize(r),c=a+a*.2,l=[],u=o.x,h=o.y,f=o.x+o.width,d=o.y+o.height,m=o.y+o.height,v=0,p=s.length;v<p;v++)for(var g=s[v];g!==void 0;){var x=D5(g,o.width,i,r),y=x.line,b=x.encoded,S=x.width,_=x.remainder,M=t===cr.Left?o.x:t===cr.Center?o.x+o.width/2-S/2:t===cr.Right?o.x+o.width-S:o.x;m-=c,M<u&&(u=M),m<h&&(h=m),M+S>f&&(f=M+S),m+a>d&&(d=m+a),l.push({text:y,encoded:b,width:S,height:a,x:M,y:m}),g=_?.trim()}return{fontSize:r,lineHeight:c,lines:l,bounds:{x:u,y:h,width:f-u,height:d-h}}},lR=function(n,e){var t=e.fontSize,r=e.font,i=e.bounds,o=e.cellCount,s=Cw(Cc(n));if(s.length>o)throw new nR(s.length,o);(t===void 0||t===0)&&(t=R5(s,r,i,o));for(var a=i.width/o,c=r.heightAtSize(t,{descender:!1}),l=i.y+(i.height/2-c/2),u=[],h=i.x,f=i.y,d=i.x+i.width,m=i.y+i.height,v=0,p=0;v<o;){var g=Iw(s,p),x=g[0],y=g[1],b=r.encodeText(x),S=r.widthOfTextAtSize(x,t),_=i.x+(a*v+a/2),M=_-S/2;M<h&&(h=M),l<f&&(f=l),M+S>d&&(d=M+S),l+c>m&&(m=l+c),u.push({text:s,encoded:b,width:S,height:c,x:M,y:l}),v+=1,p+=y}return{fontSize:t,cells:u,bounds:{x:h,y:f,width:d-h,height:m-f}}},Lm=function(n,e){var t=e.alignment,r=e.fontSize,i=e.font,o=e.bounds,s=Cw(Cc(n));(r===void 0||r===0)&&(r=aR([s],i,o));var a=i.encodeText(s),c=i.widthOfTextAtSize(s,r),l=i.heightAtSize(r,{descender:!1}),u=t===cr.Left?o.x:t===cr.Center?o.x+o.width/2-c/2:t===cr.Right?o.x+o.width-c:o.x,h=o.y+(o.height/2-l/2);return{fontSize:r,line:{text:s,encoded:a,width:c,height:l,x:u,y:h},bounds:{x:u,y:h,width:c,height:l}}};var No=function(n){return"normal"in n?n:{normal:n}},F5=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,ql=function(n){var e,t,r=(e=n.getDefaultAppearance())!==null&&e!==void 0?e:"",i=(t=Rp(r,F5).match)!==null&&t!==void 0?t:[],o=Number(i[2]);return isFinite(o)?o:void 0},N5=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,Do=function(n){var e,t=(e=n.getDefaultAppearance())!==null&&e!==void 0?e:"",r=Rp(t,N5).match,i=r??[],o=i[1],s=i[2],a=i[3],c=i[4],l=i[5];if(l==="g"&&o)return HS(Number(o));if(l==="rg"&&o&&s&&a)return zt(Number(o),Number(s),Number(a));if(l==="k"&&o&&s&&a&&c)return WS(Number(o),Number(s),Number(a),Number(c))},Fo=function(n,e,t,r){var i;r===void 0&&(r=0);var o=[Js(e).toString(),Im((i=t?.name)!==null&&i!==void 0?i:"dummy__noop",r).toString()].join(`
`);n.setDefaultAppearance(o)},cR=function(n,e){var t,r,i,o=Do(e),s=Do(n.acroField),a=e.getRectangle(),c=e.getAppearanceCharacteristics(),l=e.getBorderStyle(),u=(t=l?.getWidth())!==null&&t!==void 0?t:0,h=fs(c?.getRotation()),f=Ua(a,h),d=f.width,m=f.height,v=ds(Ft(Ft({},a),{rotation:h})),p=zt(0,0,0),g=(r=li(c?.getBorderColor()))!==null&&r!==void 0?r:p,x=li(c?.getBackgroundColor()),y=li(c?.getBackgroundColor(),.8),b=(i=o??s)!==null&&i!==void 0?i:p;Fo(o?e:n.acroField,b);var S={x:0+u/2,y:0+u/2,width:d-u,height:m-u,thickness:1.5,borderWidth:u,borderColor:g,markColor:b};return{normal:{on:Jt(v,Fm(Ft(Ft({},S),{color:x,filled:!0}))),off:Jt(v,Fm(Ft(Ft({},S),{color:x,filled:!1})))},down:{on:Jt(v,Fm(Ft(Ft({},S),{color:y,filled:!0}))),off:Jt(v,Fm(Ft(Ft({},S),{color:y,filled:!1})))}}},uR=function(n,e){var t,r,i,o=Do(e),s=Do(n.acroField),a=e.getRectangle(),c=e.getAppearanceCharacteristics(),l=e.getBorderStyle(),u=(t=l?.getWidth())!==null&&t!==void 0?t:0,h=fs(c?.getRotation()),f=Ua(a,h),d=f.width,m=f.height,v=ds(Ft(Ft({},a),{rotation:h})),p=zt(0,0,0),g=(r=li(c?.getBorderColor()))!==null&&r!==void 0?r:p,x=li(c?.getBackgroundColor()),y=li(c?.getBackgroundColor(),.8),b=(i=o??s)!==null&&i!==void 0?i:p;Fo(o?e:n.acroField,b);var S={x:d/2,y:m/2,width:d-u,height:m-u,borderWidth:u,borderColor:g,dotColor:b};return{normal:{on:Jt(v,Nm(Ft(Ft({},S),{color:x,filled:!0}))),off:Jt(v,Nm(Ft(Ft({},S),{color:x,filled:!1})))},down:{on:Jt(v,Nm(Ft(Ft({},S),{color:y,filled:!0}))),off:Jt(v,Nm(Ft(Ft({},S),{color:y,filled:!1})))}}},hR=function(n,e,t){var r,i,o,s,a,c=Do(e),l=Do(n.acroField),u=ql(e),h=ql(n.acroField),f=e.getRectangle(),d=e.getAppearanceCharacteristics(),m=e.getBorderStyle(),v=d?.getCaptions(),p=(r=v?.normal)!==null&&r!==void 0?r:"",g=(o=(i=v?.down)!==null&&i!==void 0?i:p)!==null&&o!==void 0?o:"",x=(s=m?.getWidth())!==null&&s!==void 0?s:0,y=fs(d?.getRotation()),b=Ua(f,y),S=b.width,_=b.height,M=ds(Ft(Ft({},f),{rotation:y})),A=zt(0,0,0),w=li(d?.getBorderColor()),T=li(d?.getBackgroundColor()),D=li(d?.getBackgroundColor(),.8),N={x,y:x,width:S-x*2,height:_-x*2},P=Lm(p,{alignment:cr.Center,fontSize:u??h,font:t,bounds:N}),E=Lm(g,{alignment:cr.Center,fontSize:u??h,font:t,bounds:N}),U=Math.min(P.fontSize,E.fontSize),k=(a=c??l)!==null&&a!==void 0?a:A;Fo(c||u!==void 0?e:n.acroField,k,t,U);var B={x:0+x/2,y:0+x/2,width:S-x,height:_-x,borderWidth:x,borderColor:w,textColor:k,font:t.name,fontSize:U};return{normal:Jt(M,YS(Ft(Ft({},B),{color:T,textLines:[P.line]}))),down:Jt(M,YS(Ft(Ft({},B),{color:D,textLines:[E.line]})))}},fR=function(n,e,t){var r,i,o,s,a=Do(e),c=Do(n.acroField),l=ql(e),u=ql(n.acroField),h=e.getRectangle(),f=e.getAppearanceCharacteristics(),d=e.getBorderStyle(),m=(r=n.getText())!==null&&r!==void 0?r:"",v=(i=d?.getWidth())!==null&&i!==void 0?i:0,p=fs(f?.getRotation()),g=Ua(h,p),x=g.width,y=g.height,b=ds(Ft(Ft({},h),{rotation:p})),S=zt(0,0,0),_=li(f?.getBorderColor()),M=li(f?.getBackgroundColor()),A,w,T=n.isCombed()?0:1,D={x:v+T,y:v+T,width:x-(v+T)*2,height:y-(v+T)*2};if(n.isMultiline()){var N=$S(m,{alignment:n.getAlignment(),fontSize:l??u,font:t,bounds:D});A=N.lines,w=N.fontSize}else if(n.isCombed()){var N=lR(m,{fontSize:l??u,font:t,bounds:D,cellCount:(o=n.getMaxLength())!==null&&o!==void 0?o:0});A=N.cells,w=N.fontSize}else{var N=Lm(m,{alignment:n.getAlignment(),fontSize:l??u,font:t,bounds:D});A=[N.line],w=N.fontSize}var P=(s=a??c)!==null&&s!==void 0?s:S;Fo(a||l!==void 0?e:n.acroField,P,t,w);var E={x:0+v/2,y:0+v/2,width:x-v,height:y-v,borderWidth:v??0,borderColor:_,textColor:P,font:t.name,fontSize:w,color:M,textLines:A,padding:T};return Jt(b,JS(E))},dR=function(n,e,t){var r,i,o,s=Do(e),a=Do(n.acroField),c=ql(e),l=ql(n.acroField),u=e.getRectangle(),h=e.getAppearanceCharacteristics(),f=e.getBorderStyle(),d=(r=n.getSelected()[0])!==null&&r!==void 0?r:"",m=(i=f?.getWidth())!==null&&i!==void 0?i:0,v=fs(h?.getRotation()),p=Ua(u,v),g=p.width,x=p.height,y=ds(Ft(Ft({},u),{rotation:v})),b=zt(0,0,0),S=li(h?.getBorderColor()),_=li(h?.getBackgroundColor()),M=1,A={x:m+M,y:m+M,width:g-(m+M)*2,height:x-(m+M)*2},w=Lm(d,{alignment:cr.Left,fontSize:c??l,font:t,bounds:A}),T=w.line,D=w.fontSize,N=(o=s??a)!==null&&o!==void 0?o:b;Fo(s||c!==void 0?e:n.acroField,N,t,D);var P={x:0+m/2,y:0+m/2,width:g-m,height:x-m,borderWidth:m??0,borderColor:S,textColor:N,font:t.name,fontSize:D,color:_,textLines:[T],padding:M};return Jt(y,JS(P))},pR=function(n,e,t){var r,i,o=Do(e),s=Do(n.acroField),a=ql(e),c=ql(n.acroField),l=e.getRectangle(),u=e.getAppearanceCharacteristics(),h=e.getBorderStyle(),f=(r=h?.getWidth())!==null&&r!==void 0?r:0,d=fs(u?.getRotation()),m=Ua(l,d),v=m.width,p=m.height,g=ds(Ft(Ft({},l),{rotation:d})),x=zt(0,0,0),y=li(u?.getBorderColor()),b=li(u?.getBackgroundColor()),S=n.getOptions(),_=n.getSelected();n.isSorted()&&S.sort();for(var M="",A=0,w=S.length;A<w;A++)M+=S[A],A<w-1&&(M+=`
`);for(var T=1,D={x:f+T,y:f+T,width:v-(f+T)*2,height:p-(f+T)*2},N=$S(M,{alignment:cr.Left,fontSize:a??c,font:t,bounds:D}),P=N.lines,E=N.fontSize,U=N.lineHeight,k=[],A=0,w=P.length;A<w;A++){var B=P[A];_.includes(B.text)&&k.push(A)}var O=zt(153/255,193/255,218/255),q=(i=o??s)!==null&&i!==void 0?i:x;return Fo(o||a!==void 0?e:n.acroField,q,t,E),Jt(g,KI({x:0+f/2,y:0+f/2,width:v-f,height:p-f,borderWidth:f??0,borderColor:y,textColor:q,font:t.name,fontSize:E,color:b,textLines:P,lineHeight:U,selectedColor:O,selectedLines:k,padding:T}))};var L5=function(){function n(e,t,r){this.alreadyEmbedded=!1,_e(e,"ref",[[Nt,"PDFRef"]]),_e(t,"doc",[[ci,"PDFDocument"]]),_e(r,"embedder",[[um,"PDFPageEmbedder"]]),this.ref=e,this.doc=t,this.width=r.width,this.height=r.height,this.embedder=r}return n.prototype.scale=function(e){return _e(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},n.prototype.size=function(){return this.scale(1)},n.prototype.embed=function(){return pt(this,void 0,void 0,function(){return mt(this,function(e){switch(e.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e.sent(),this.alreadyEmbedded=!0,e.label=2;case 2:return[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),Om=L5;var O5=function(){function n(e,t,r){this.modified=!0,_e(e,"ref",[[Nt,"PDFRef"]]),_e(t,"doc",[[ci,"PDFDocument"]]),_e(r,"embedder",[[jc,"CustomFontEmbedder"],[Wc,"StandardFontEmbedder"]]),this.ref=e,this.doc=t,this.name=r.fontName,this.embedder=r}return n.prototype.encodeText=function(e){return _e(e,"text",["string"]),this.modified=!0,this.embedder.encodeText(e)},n.prototype.widthOfTextAtSize=function(e,t){return _e(e,"text",["string"]),_e(t,"size",["number"]),this.embedder.widthOfTextAtSize(e,t)},n.prototype.heightAtSize=function(e,t){var r;return _e(e,"size",["number"]),Be(t?.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(e,{descender:(r=t?.descender)!==null&&r!==void 0?r:!0})},n.prototype.sizeAtHeight=function(e){return _e(e,"height",["number"]),this.embedder.sizeOfFontAtHeight(e)},n.prototype.getCharacterSet=function(){return this.embedder instanceof Wc?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},n.prototype.embed=function(){return pt(this,void 0,void 0,function(){return mt(this,function(e){switch(e.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:e.sent(),this.modified=!1,e.label=2;case 2:return[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),dr=O5;var k5=function(){function n(e,t,r){_e(e,"ref",[[Nt,"PDFRef"]]),_e(t,"doc",[[ci,"PDFDocument"]]),_e(r,"embedder",[[am,"JpegEmbedder"],[lm,"PngEmbedder"]]),this.ref=e,this.doc=t,this.width=r.width,this.height=r.height,this.embedder=r}return n.prototype.scale=function(e){return _e(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},n.prototype.scaleToFit=function(e,t){_e(e,"width",["number"]),_e(t,"height",["number"]);var r=e/this.width,i=t/this.height,o=Math.min(r,i);return this.scale(o)},n.prototype.size=function(){return this.scale(1)},n.prototype.embed=function(){return pt(this,void 0,void 0,function(){var e,t,r;return mt(this,function(i){switch(i.label){case 0:return this.embedder?(this.embedTask||(e=this,t=e.doc,r=e.ref,this.embedTask=this.embedder.embedIntoContext(t.context,r)),[4,this.embedTask]):[2];case 1:return i.sent(),this.embedder=void 0,[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),Kf=k5;var ps;(function(n){n[n.Left=0]="Left",n[n.Center=1]="Center",n[n.Right=2]="Right"})(ps||(ps={}));var Lo=function(n){Be(n?.x,"options.x",["number"]),Be(n?.y,"options.y",["number"]),Be(n?.width,"options.width",["number"]),Be(n?.height,"options.height",["number"]),Be(n?.textColor,"options.textColor",[[Object,"Color"]]),Be(n?.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),Be(n?.borderColor,"options.borderColor",[[Object,"Color"]]),Be(n?.borderWidth,"options.borderWidth",["number"]),Be(n?.rotate,"options.rotate",[[Object,"Rotation"]])},U5=function(){function n(e,t,r){_e(e,"acroField",[[co,"PDFAcroTerminal"]]),_e(t,"ref",[[Nt,"PDFRef"]]),_e(r,"doc",[[ci,"PDFDocument"]]),this.acroField=e,this.ref=t,this.doc=r}return n.prototype.getName=function(){var e;return(e=this.acroField.getFullyQualifiedName())!==null&&e!==void 0?e:""},n.prototype.isReadOnly=function(){return this.acroField.hasFlag(Ro.ReadOnly)},n.prototype.enableReadOnly=function(){this.acroField.setFlagTo(Ro.ReadOnly,!0)},n.prototype.disableReadOnly=function(){this.acroField.setFlagTo(Ro.ReadOnly,!1)},n.prototype.isRequired=function(){return this.acroField.hasFlag(Ro.Required)},n.prototype.enableRequired=function(){this.acroField.setFlagTo(Ro.Required,!0)},n.prototype.disableRequired=function(){this.acroField.setFlagTo(Ro.Required,!1)},n.prototype.isExported=function(){return!this.acroField.hasFlag(Ro.NoExport)},n.prototype.enableExporting=function(){this.acroField.setFlagTo(Ro.NoExport,!1)},n.prototype.disableExporting=function(){this.acroField.setFlagTo(Ro.NoExport,!0)},n.prototype.needsAppearancesUpdate=function(){throw new $r(this.constructor.name,"needsAppearancesUpdate")},n.prototype.defaultUpdateAppearances=function(e){throw new $r(this.constructor.name,"defaultUpdateAppearances")},n.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},n.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},n.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},n.prototype.createWidget=function(e){var t,r=e.textColor,i=e.backgroundColor,o=e.borderColor,s=e.borderWidth,a=my(e.rotate),c=e.caption,l=e.x,u=e.y,h=e.width+s,f=e.height+s,d=!!e.hidden,m=e.page;ry(a,"degreesAngle",90);var v=Vf.create(this.doc.context,this.ref),p=II({x:l,y:u,width:h,height:f},s,a);v.setRectangle(p),m&&v.setP(m);var g=v.getOrCreateAppearanceCharacteristics();i&&g.setBackgroundColor(KS(i)),g.setRotation(a),c&&g.setCaptions({normal:c}),o&&g.setBorderColor(KS(o));var x=v.getOrCreateBorderStyle();if(s!==void 0&&x.setWidth(s),v.setFlagTo(Wf.Print,!0),v.setFlagTo(Wf.Hidden,d),v.setFlagTo(Wf.Invisible,!1),r){var y=(t=this.acroField.getDefaultAppearance())!==null&&t!==void 0?t:"",b=y+`
`+Js(r).toString();this.acroField.setDefaultAppearance(b)}return v},n.prototype.updateWidgetAppearanceWithFont=function(e,t,r){var i=r.normal,o=r.rollover,s=r.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceStream(e,i,t),rollover:o&&this.createAppearanceStream(e,o,t),down:s&&this.createAppearanceStream(e,s,t)})},n.prototype.updateOnOffWidgetAppearance=function(e,t,r){var i=r.normal,o=r.rollover,s=r.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceDict(e,i,t),rollover:o&&this.createAppearanceDict(e,o,t),down:s&&this.createAppearanceDict(e,s,t)})},n.prototype.updateWidgetAppearances=function(e,t){var r=t.normal,i=t.rollover,o=t.down;e.setNormalAppearance(r),i?e.setRolloverAppearance(i):e.removeRolloverAppearance(),o?e.setDownAppearance(o):e.removeDownAppearance()},n.prototype.createAppearanceStream=function(e,t,r){var i,o=this.acroField.dict.context,s=e.getRectangle(),a=s.width,c=s.height,l=r&&{Font:(i={},i[r.name]=r.ref,i)},u=o.formXObject(t,{Resources:l,BBox:o.obj([0,0,a,c]),Matrix:o.obj([1,0,0,1,0,0])}),h=o.register(u);return h},n.prototype.createImageAppearanceStream=function(e,t,r){var i,o,s=this.acroField.dict.context,a=e.getRectangle(),c=e.getAppearanceCharacteristics(),l=e.getBorderStyle(),u=(o=l?.getWidth())!==null&&o!==void 0?o:0,h=fs(c?.getRotation()),f=ds(Ft(Ft({},a),{rotation:h})),d=Ua(a,h),m=t.scaleToFit(d.width-u*2,d.height-u*2),v={x:u,y:u,width:m.width,height:m.height,rotate:yt(0),xSkew:yt(0),ySkew:yt(0)};r===ps.Center?(v.x+=(d.width-u*2)/2-m.width/2,v.y+=(d.height-u*2)/2-m.height/2):r===ps.Right&&(v.x=d.width-u-m.width,v.y=d.height-u-m.height);var p=this.doc.context.addRandomSuffix("Image",10),g=Jt(f,My(p,v)),x={XObject:(i={},i[p]=t.ref,i)},y=s.formXObject(g,{Resources:x,BBox:s.obj([0,0,a.width,a.height]),Matrix:s.obj([1,0,0,1,0,0])});return s.register(y)},n.prototype.createAppearanceDict=function(e,t,r){var i=this.acroField.dict.context,o=this.createAppearanceStream(e,t.on),s=this.createAppearanceStream(e,t.off),a=i.obj({});return a.set(r,o),a.set(Q.of("Off"),s),a},n}(),Pi=U5;var B5=function(n){Pe(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return _e(t,"acroCheckBox",[[Ll,"PDFAcroCheckBox"]]),o.acroField=t,o}return e.prototype.check=function(){var t,r=(t=this.acroField.getOnValue())!==null&&t!==void 0?t:Q.of("Yes");this.markAsDirty(),this.acroField.setValue(r)},e.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(Q.of("Off"))},e.prototype.isChecked=function(){var t=this.acroField.getOnValue();return!!t&&t===this.acroField.getValue()},e.prototype.addToPage=function(t,r){var i,o,s,a,c,l;_e(t,"page",[[Er,"PDFPage"]]),Lo(r),r||(r={}),"textColor"in r||(r.textColor=zt(0,0,0)),"backgroundColor"in r||(r.backgroundColor=zt(1,1,1)),"borderColor"in r||(r.borderColor=zt(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var u=this.createWidget({x:(i=r.x)!==null&&i!==void 0?i:0,y:(o=r.y)!==null&&o!==void 0?o:0,width:(s=r.width)!==null&&s!==void 0?s:50,height:(a=r.height)!==null&&a!==void 0?a:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(c=r.borderWidth)!==null&&c!==void 0?c:0,rotate:(l=r.rotate)!==null&&l!==void 0?l:yt(0),hidden:r.hidden,page:t.ref}),h=this.doc.context.register(u.dict);this.acroField.addWidget(h),u.setAppearanceState(Q.of("Off")),this.updateWidgetAppearance(u,Q.of("Yes")),t.node.addAnnot(h)},e.prototype.needsAppearancesUpdate=function(){for(var t,r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=s.getAppearanceState(),c=(t=s.getAppearances())===null||t===void 0?void 0:t.normal;if(!(c instanceof at)||a&&!c.has(a))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(t){var r;Be(t,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],c=(r=a.getOnValue())!==null&&r!==void 0?r:Q.of("Yes");c&&this.updateWidgetAppearance(a,c,t)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(t,r,i){var o=i??cR,s=No(o(this,t));this.updateOnOffWidgetAppearance(t,r,s)},e.of=function(t,r,i){return new e(t,r,i)},e}(Pi),eu=B5;var z5=function(n){Pe(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return _e(t,"acroComboBox",[[Ol,"PDFAcroComboBox"]]),o.acroField=t,o}return e.prototype.getOptions=function(){for(var t=this.acroField.getOptions(),r=new Array(t.length),i=0,o=r.length;i<o;i++){var s=t[i],a=s.display,c=s.value;r[i]=(a??c).decodeText()}return r},e.prototype.getSelected=function(){for(var t=this.acroField.getValues(),r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]=t[i].decodeText();return r},e.prototype.setOptions=function(t){_e(t,"options",[Array]);for(var r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]={value:rt.fromText(t[i])};this.acroField.setOptions(r)},e.prototype.addOptions=function(t){_e(t,"options",["string",Array]);for(var r=Array.isArray(t)?t:[t],i=this.acroField.getOptions(),o=new Array(r.length),s=0,a=r.length;s<a;s++)o[s]={value:rt.fromText(r[s])};this.acroField.setOptions(i.concat(o))},e.prototype.select=function(t,r){r===void 0&&(r=!1),_e(t,"options",["string",Array]),_e(r,"merge",["boolean"]);var i=Array.isArray(t)?t:[t],o=this.getOptions(),s=i.find(function(h){return!o.includes(h)});s&&this.enableEditing(),this.markAsDirty(),(i.length>1||i.length===1&&r)&&this.enableMultiselect();for(var a=new Array(i.length),c=0,l=i.length;c<l;c++)a[c]=rt.fromText(i[c]);if(r){var u=this.acroField.getValues();this.acroField.setValues(u.concat(a))}else this.acroField.setValues(a)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(t){Dl(t,"fontSize"),this.acroField.setFontSize(t),this.markAsDirty()},e.prototype.isEditable=function(){return this.acroField.hasFlag(ln.Edit)},e.prototype.enableEditing=function(){this.acroField.setFlagTo(ln.Edit,!0)},e.prototype.disableEditing=function(){this.acroField.setFlagTo(ln.Edit,!1)},e.prototype.isSorted=function(){return this.acroField.hasFlag(ln.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(ln.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(ln.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(ln.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(ln.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(ln.MultiSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(ln.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(ln.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(ln.DoNotSpellCheck,!0)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(ln.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(ln.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(ln.CommitOnSelChange,!1)},e.prototype.addToPage=function(t,r){var i,o,s,a,c,l,u;_e(t,"page",[[Er,"PDFPage"]]),Lo(r),r||(r={}),"textColor"in r||(r.textColor=zt(0,0,0)),"backgroundColor"in r||(r.backgroundColor=zt(1,1,1)),"borderColor"in r||(r.borderColor=zt(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var h=this.createWidget({x:(i=r.x)!==null&&i!==void 0?i:0,y:(o=r.y)!==null&&o!==void 0?o:0,width:(s=r.width)!==null&&s!==void 0?s:200,height:(a=r.height)!==null&&a!==void 0?a:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(c=r.borderWidth)!==null&&c!==void 0?c:0,rotate:(l=r.rotate)!==null&&l!==void 0?l:yt(0),hidden:r.hidden,page:t.ref}),f=this.doc.context.register(h.dict);this.acroField.addWidget(f);var d=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,d),t.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var t;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=((t=s.getAppearances())===null||t===void 0?void 0:t.normal)instanceof Hn;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(t){_e(t,"font",[[dr,"PDFFont"]]),this.updateAppearances(t)},e.prototype.updateAppearances=function(t,r){_e(t,"font",[[dr,"PDFFont"]]),Be(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,t,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(t,r,i){var o=i??dR,s=No(o(this,t,r));this.updateWidgetAppearanceWithFont(t,r,s)},e.of=function(t,r,i){return new e(t,r,i)},e}(Pi),Yf=z5;var G5=function(n){Pe(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return _e(t,"acroListBox",[[Gl,"PDFAcroListBox"]]),o.acroField=t,o}return e.prototype.getOptions=function(){for(var t=this.acroField.getOptions(),r=new Array(t.length),i=0,o=r.length;i<o;i++){var s=t[i],a=s.display,c=s.value;r[i]=(a??c).decodeText()}return r},e.prototype.getSelected=function(){for(var t=this.acroField.getValues(),r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]=t[i].decodeText();return r},e.prototype.setOptions=function(t){_e(t,"options",[Array]),this.markAsDirty();for(var r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]={value:rt.fromText(t[i])};this.acroField.setOptions(r)},e.prototype.addOptions=function(t){_e(t,"options",["string",Array]),this.markAsDirty();for(var r=Array.isArray(t)?t:[t],i=this.acroField.getOptions(),o=new Array(r.length),s=0,a=r.length;s<a;s++)o[s]={value:rt.fromText(r[s])};this.acroField.setOptions(i.concat(o))},e.prototype.select=function(t,r){r===void 0&&(r=!1),_e(t,"options",["string",Array]),_e(r,"merge",["boolean"]);var i=Array.isArray(t)?t:[t],o=this.getOptions();OC(i,"option",o),this.markAsDirty(),(i.length>1||i.length===1&&r)&&this.enableMultiselect();for(var s=new Array(i.length),a=0,c=i.length;a<c;a++)s[a]=rt.fromText(i[a]);if(r){var l=this.acroField.getValues();this.acroField.setValues(l.concat(s))}else this.acroField.setValues(s)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(t){Dl(t,"fontSize"),this.acroField.setFontSize(t),this.markAsDirty()},e.prototype.isSorted=function(){return this.acroField.hasFlag(ln.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(ln.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(ln.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(ln.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(ln.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(ln.MultiSelect,!1)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(ln.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(ln.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(ln.CommitOnSelChange,!1)},e.prototype.addToPage=function(t,r){var i,o,s,a,c,l,u;_e(t,"page",[[Er,"PDFPage"]]),Lo(r),r||(r={}),"textColor"in r||(r.textColor=zt(0,0,0)),"backgroundColor"in r||(r.backgroundColor=zt(1,1,1)),"borderColor"in r||(r.borderColor=zt(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var h=this.createWidget({x:(i=r.x)!==null&&i!==void 0?i:0,y:(o=r.y)!==null&&o!==void 0?o:0,width:(s=r.width)!==null&&s!==void 0?s:200,height:(a=r.height)!==null&&a!==void 0?a:100,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(c=r.borderWidth)!==null&&c!==void 0?c:0,rotate:(l=r.rotate)!==null&&l!==void 0?l:yt(0),hidden:r.hidden,page:t.ref}),f=this.doc.context.register(h.dict);this.acroField.addWidget(f);var d=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,d),t.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var t;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=((t=s.getAppearances())===null||t===void 0?void 0:t.normal)instanceof Hn;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(t){_e(t,"font",[[dr,"PDFFont"]]),this.updateAppearances(t)},e.prototype.updateAppearances=function(t,r){_e(t,"font",[[dr,"PDFFont"]]),Be(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,t,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(t,r,i){var o=i??pR,s=No(o(this,t,r));this.updateWidgetAppearanceWithFont(t,r,s)},e.of=function(t,r,i){return new e(t,r,i)},e}(Pi),Zf=G5;var V5=function(n){Pe(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return _e(t,"acroRadioButton",[[zl,"PDFAcroRadioButton"]]),o.acroField=t,o}return e.prototype.getOptions=function(){var t=this.acroField.getExportValues();if(t){for(var r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]=t[i].decodeText();return r}for(var s=this.acroField.getOnValues(),a=new Array(s.length),i=0,o=a.length;i<o;i++)a[i]=s[i].decodeText();return a},e.prototype.getSelected=function(){var t=this.acroField.getValue();if(t!==Q.of("Off")){var r=this.acroField.getExportValues();if(r){for(var i=this.acroField.getOnValues(),o=0,s=i.length;o<s;o++)if(i[o]===t)return r[o].decodeText()}return t.decodeText()}},e.prototype.select=function(t){_e(t,"option",["string"]);var r=this.getOptions();hs(t,"option",r),this.markAsDirty();var i=this.acroField.getOnValues(),o=this.acroField.getExportValues();if(o)for(var s=0,a=o.length;s<a;s++)o[s].decodeText()===t&&this.acroField.setValue(i[s]);else for(var s=0,a=i.length;s<a;s++){var c=i[s];c.decodeText()===t&&this.acroField.setValue(c)}},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(Q.of("Off"))},e.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(ai.NoToggleToOff)},e.prototype.enableOffToggling=function(){this.acroField.setFlagTo(ai.NoToggleToOff,!1)},e.prototype.disableOffToggling=function(){this.acroField.setFlagTo(ai.NoToggleToOff,!0)},e.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(ai.RadiosInUnison)},e.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(ai.RadiosInUnison,!1)},e.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(ai.RadiosInUnison,!0)},e.prototype.addOptionToPage=function(t,r,i){var o,s,a,c,l,u,h,f,d;_e(t,"option",["string"]),_e(r,"page",[[Er,"PDFPage"]]),Lo(i);var m=this.createWidget({x:(o=i?.x)!==null&&o!==void 0?o:0,y:(s=i?.y)!==null&&s!==void 0?s:0,width:(a=i?.width)!==null&&a!==void 0?a:50,height:(c=i?.height)!==null&&c!==void 0?c:50,textColor:(l=i?.textColor)!==null&&l!==void 0?l:zt(0,0,0),backgroundColor:(u=i?.backgroundColor)!==null&&u!==void 0?u:zt(1,1,1),borderColor:(h=i?.borderColor)!==null&&h!==void 0?h:zt(0,0,0),borderWidth:(f=i?.borderWidth)!==null&&f!==void 0?f:1,rotate:(d=i?.rotate)!==null&&d!==void 0?d:yt(0),hidden:i?.hidden,page:r.ref}),v=this.doc.context.register(m.dict),p=this.acroField.addWidgetWithOpt(v,rt.fromText(t),!this.isMutuallyExclusive());m.setAppearanceState(Q.of("Off")),this.updateWidgetAppearance(m,p),r.node.addAnnot(v)},e.prototype.needsAppearancesUpdate=function(){for(var t,r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=s.getAppearanceState(),c=(t=s.getAppearances())===null||t===void 0?void 0:t.normal;if(!(c instanceof at)||a&&!c.has(a))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(t){Be(t,"provider",[Function]);for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=s.getOnValue();a&&this.updateWidgetAppearance(s,a,t)}},e.prototype.updateWidgetAppearance=function(t,r,i){var o=i??uR,s=No(o(this,t));this.updateOnOffWidgetAppearance(t,r,s)},e.of=function(t,r,i){return new e(t,r,i)},e}(Pi),tu=V5;var H5=function(n){Pe(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return _e(t,"acroSignature",[[Kc,"PDFAcroSignature"]]),o.acroField=t,o}return e.prototype.needsAppearancesUpdate=function(){return!1},e.of=function(t,r,i){return new e(t,r,i)},e}(Pi),km=H5;var W5=function(n){Pe(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return _e(t,"acroText",[[Ul,"PDFAcroText"]]),o.acroField=t,o}return e.prototype.getText=function(){var t=this.acroField.getValue();if(!t&&this.isRichFormatted())throw new tR(this.getName());return t?.decodeText()},e.prototype.setText=function(t){Be(t,"text",["string"]);var r=this.getMaxLength();if(r!==void 0&&t&&t.length>r)throw new rR(t.length,r,this.getName());this.markAsDirty(),this.disableRichFormatting(),t?this.acroField.setValue(rt.fromText(t)):this.acroField.removeValue()},e.prototype.getAlignment=function(){var t=this.acroField.getQuadding();return t===0?cr.Left:t===1?cr.Center:t===2?cr.Right:cr.Left},e.prototype.setAlignment=function(t){hs(t,"alignment",cr),this.markAsDirty(),this.acroField.setQuadding(t)},e.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},e.prototype.setMaxLength=function(t){if(lo(t,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),t===void 0)this.acroField.removeMaxLength();else{var r=this.getText();if(r&&r.length>t)throw new iR(r.length,t,this.getName());this.acroField.setMaxLength(t)}},e.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},e.prototype.setImage=function(t){for(var r=this.getAlignment(),i=r===cr.Center?ps.Center:r===cr.Right?ps.Right:ps.Left,o=this.acroField.getWidgets(),s=0,a=o.length;s<a;s++){var c=o[s],l=this.createImageAppearanceStream(c,t,i);this.updateWidgetAppearances(c,{normal:l})}this.markAsClean()},e.prototype.setFontSize=function(t){Dl(t,"fontSize"),this.acroField.setFontSize(t),this.markAsDirty()},e.prototype.isMultiline=function(){return this.acroField.hasFlag(Yn.Multiline)},e.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Yn.Multiline,!0)},e.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Yn.Multiline,!1)},e.prototype.isPassword=function(){return this.acroField.hasFlag(Yn.Password)},e.prototype.enablePassword=function(){this.acroField.setFlagTo(Yn.Password,!0)},e.prototype.disablePassword=function(){this.acroField.setFlagTo(Yn.Password,!1)},e.prototype.isFileSelector=function(){return this.acroField.hasFlag(Yn.FileSelect)},e.prototype.enableFileSelection=function(){this.acroField.setFlagTo(Yn.FileSelect,!0)},e.prototype.disableFileSelection=function(){this.acroField.setFlagTo(Yn.FileSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Yn.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Yn.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Yn.DoNotSpellCheck,!0)},e.prototype.isScrollable=function(){return!this.acroField.hasFlag(Yn.DoNotScroll)},e.prototype.enableScrolling=function(){this.acroField.setFlagTo(Yn.DoNotScroll,!1)},e.prototype.disableScrolling=function(){this.acroField.setFlagTo(Yn.DoNotScroll,!0)},e.prototype.isCombed=function(){return this.acroField.hasFlag(Yn.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},e.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var t="PDFTextFields must have a max length in order to be combed";console.warn(t)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(Yn.Comb,!0)},e.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(Yn.Comb,!1)},e.prototype.isRichFormatted=function(){return this.acroField.hasFlag(Yn.RichText)},e.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(Yn.RichText,!0)},e.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(Yn.RichText,!1)},e.prototype.addToPage=function(t,r){var i,o,s,a,c,l,u;_e(t,"page",[[Er,"PDFPage"]]),Lo(r),r||(r={}),"textColor"in r||(r.textColor=zt(0,0,0)),"backgroundColor"in r||(r.backgroundColor=zt(1,1,1)),"borderColor"in r||(r.borderColor=zt(0,0,0)),"borderWidth"in r||(r.borderWidth=1);var h=this.createWidget({x:(i=r.x)!==null&&i!==void 0?i:0,y:(o=r.y)!==null&&o!==void 0?o:0,width:(s=r.width)!==null&&s!==void 0?s:200,height:(a=r.height)!==null&&a!==void 0?a:50,textColor:r.textColor,backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:(c=r.borderWidth)!==null&&c!==void 0?c:0,rotate:(l=r.rotate)!==null&&l!==void 0?l:yt(0),hidden:r.hidden,page:t.ref}),f=this.doc.context.register(h.dict);this.acroField.addWidget(f);var d=(u=r.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,d),t.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var t;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=((t=s.getAppearances())===null||t===void 0?void 0:t.normal)instanceof Hn;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(t){_e(t,"font",[[dr,"PDFFont"]]),this.updateAppearances(t)},e.prototype.updateAppearances=function(t,r){_e(t,"font",[[dr,"PDFFont"]]),Be(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,t,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(t,r,i){var o=i??fR,s=No(o(this,t,r));this.updateWidgetAppearanceWithFont(t,r,s)},e.of=function(t,r,i){return new e(t,r,i)},e}(Pi),Jf=W5;var Ba;(function(n){n.Courier="Courier",n.CourierBold="Courier-Bold",n.CourierOblique="Courier-Oblique",n.CourierBoldOblique="Courier-BoldOblique",n.Helvetica="Helvetica",n.HelveticaBold="Helvetica-Bold",n.HelveticaOblique="Helvetica-Oblique",n.HelveticaBoldOblique="Helvetica-BoldOblique",n.TimesRoman="Times-Roman",n.TimesRomanBold="Times-Bold",n.TimesRomanItalic="Times-Italic",n.TimesRomanBoldItalic="Times-BoldItalic",n.Symbol="Symbol",n.ZapfDingbats="ZapfDingbats"})(Ba||(Ba={}));var j5=function(){function n(e,t){var r=this;this.embedDefaultFont=function(){return r.doc.embedStandardFont(Ba.Helvetica)},_e(e,"acroForm",[[Yc,"PDFAcroForm"]]),_e(t,"doc",[[ci,"PDFDocument"]]),this.acroForm=e,this.doc=t,this.dirtyFields=new Set,this.defaultFontCache=si.populatedBy(this.embedDefaultFont)}return n.prototype.hasXFA=function(){return this.acroForm.dict.has(Q.of("XFA"))},n.prototype.deleteXFA=function(){this.acroForm.dict.delete(Q.of("XFA"))},n.prototype.getFields=function(){for(var e=this.acroForm.getAllFields(),t=[],r=0,i=e.length;r<i;r++){var o=e[r],s=o[0],a=o[1],c=q5(s,a,this.doc);c&&t.push(c)}return t},n.prototype.getFieldMaybe=function(e){_e(e,"name",["string"]);for(var t=this.getFields(),r=0,i=t.length;r<i;r++){var o=t[r];if(o.getName()===e)return o}},n.prototype.getField=function(e){_e(e,"name",["string"]);var t=this.getFieldMaybe(e);if(t)return t;throw new $I(e)},n.prototype.getButton=function(e){_e(e,"name",["string"]);var t=this.getField(e);if(t instanceof ed)return t;throw new jl(e,ed,t)},n.prototype.getCheckBox=function(e){_e(e,"name",["string"]);var t=this.getField(e);if(t instanceof eu)return t;throw new jl(e,eu,t)},n.prototype.getDropdown=function(e){_e(e,"name",["string"]);var t=this.getField(e);if(t instanceof Yf)return t;throw new jl(e,Yf,t)},n.prototype.getOptionList=function(e){_e(e,"name",["string"]);var t=this.getField(e);if(t instanceof Zf)return t;throw new jl(e,Zf,t)},n.prototype.getRadioGroup=function(e){_e(e,"name",["string"]);var t=this.getField(e);if(t instanceof tu)return t;throw new jl(e,tu,t)},n.prototype.getSignature=function(e){_e(e,"name",["string"]);var t=this.getField(e);if(t instanceof km)return t;throw new jl(e,km,t)},n.prototype.getTextField=function(e){_e(e,"name",["string"]);var t=this.getField(e);if(t instanceof Jf)return t;throw new jl(e,Jf,t)},n.prototype.createButton=function(e){_e(e,"name",["string"]);var t=Qf(e),r=this.findOrCreateNonTerminals(t.nonTerminal),i=Bl.create(this.doc.context);return i.setPartialName(t.terminal),$f(r,[i,i.ref],t.terminal),ed.of(i,i.ref,this.doc)},n.prototype.createCheckBox=function(e){_e(e,"name",["string"]);var t=Qf(e),r=this.findOrCreateNonTerminals(t.nonTerminal),i=Ll.create(this.doc.context);return i.setPartialName(t.terminal),$f(r,[i,i.ref],t.terminal),eu.of(i,i.ref,this.doc)},n.prototype.createDropdown=function(e){_e(e,"name",["string"]);var t=Qf(e),r=this.findOrCreateNonTerminals(t.nonTerminal),i=Ol.create(this.doc.context);return i.setPartialName(t.terminal),$f(r,[i,i.ref],t.terminal),Yf.of(i,i.ref,this.doc)},n.prototype.createOptionList=function(e){_e(e,"name",["string"]);var t=Qf(e),r=this.findOrCreateNonTerminals(t.nonTerminal),i=Gl.create(this.doc.context);return i.setPartialName(t.terminal),$f(r,[i,i.ref],t.terminal),Zf.of(i,i.ref,this.doc)},n.prototype.createRadioGroup=function(e){_e(e,"name",["string"]);var t=Qf(e),r=this.findOrCreateNonTerminals(t.nonTerminal),i=zl.create(this.doc.context);return i.setPartialName(t.terminal),$f(r,[i,i.ref],t.terminal),tu.of(i,i.ref,this.doc)},n.prototype.createTextField=function(e){_e(e,"name",["string"]);var t=Qf(e),r=this.findOrCreateNonTerminals(t.nonTerminal),i=Ul.create(this.doc.context);return i.setPartialName(t.terminal),$f(r,[i,i.ref],t.terminal),Jf.of(i,i.ref,this.doc)},n.prototype.flatten=function(e){e===void 0&&(e={updateFieldAppearances:!0}),e.updateFieldAppearances&&this.updateFieldAppearances();for(var t=this.getFields(),r=0,i=t.length;r<i;r++){for(var o=t[r],s=o.acroField.getWidgets(),a=0,c=s.length;a<c;a++){var l=s[a],u=this.findWidgetPage(l),h=this.findWidgetAppearanceRef(o,l),f=u.node.newXObject("FlatWidget",h),d=l.getRectangle(),m=Jt([ar(),Ii(d.x,d.y)],ds(Ft(Ft({},d),{rotation:0})),[Rm(f),lr()]).filter(Boolean);u.pushOperators.apply(u,m)}this.removeField(o)}},n.prototype.removeField=function(e){for(var t=e.acroField.getWidgets(),r=new Set,i=0,o=t.length;i<o;i++){var s=t[i],a=this.findWidgetAppearanceRef(e,s),c=this.findWidgetPage(s);r.add(c),c.node.removeAnnot(a)}r.forEach(function(d){return d.node.removeAnnot(e.ref)}),this.acroForm.removeField(e.acroField);for(var l=e.acroField.normalizedEntries().Kids,u=l.size(),h=0;h<u;h++){var f=l.get(h);f instanceof Nt&&this.doc.context.delete(f)}this.doc.context.delete(e.ref)},n.prototype.updateFieldAppearances=function(e){Be(e,"font",[[dr,"PDFFont"]]),e=e??this.getDefaultFont();for(var t=this.getFields(),r=0,i=t.length;r<i;r++){var o=t[r];o.needsAppearancesUpdate()&&o.defaultUpdateAppearances(e)}},n.prototype.markFieldAsDirty=function(e){Be(e,"fieldRef",[[Nt,"PDFRef"]]),this.dirtyFields.add(e)},n.prototype.markFieldAsClean=function(e){Be(e,"fieldRef",[[Nt,"PDFRef"]]),this.dirtyFields.delete(e)},n.prototype.fieldIsDirty=function(e){return Be(e,"fieldRef",[[Nt,"PDFRef"]]),this.dirtyFields.has(e)},n.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},n.prototype.findWidgetPage=function(e){var t=e.P(),r=this.doc.getPages().find(function(o){return o.ref===t});if(r===void 0){var i=this.doc.context.getObjectRef(e.dict);if(i===void 0)throw new Error("Could not find PDFRef for PDFObject");if(r=this.doc.findPageForAnnotationRef(i),r===void 0)throw new Error("Could not find page for PDFRef "+i)}return r},n.prototype.findWidgetAppearanceRef=function(e,t){var r,i=t.getNormalAppearance();if(i instanceof at&&(e instanceof eu||e instanceof tu)){var o=e.acroField.getValue(),s=(r=i.get(o))!==null&&r!==void 0?r:i.get(Q.of("Off"));s instanceof Nt&&(i=s)}if(!(i instanceof Nt)){var a=e.getName();throw new Error("Failed to extract appearance ref for: "+a)}return i},n.prototype.findOrCreateNonTerminals=function(e){for(var t=[this.acroForm],r=0,i=e.length;r<i;r++){var o=e[r];if(!o)throw new eR(o);var s=t[0],a=t[1],c=this.findNonTerminal(o,s);if(c)t=c;else{var l=kl.create(this.doc.context);l.setPartialName(o),l.setParent(a);var u=this.doc.context.register(l.dict);s.addField(u),t=[l,u]}}return t},n.prototype.findNonTerminal=function(e,t){for(var r=t instanceof Yc?this.acroForm.getFields():mm(t.Kids()),i=0,o=r.length;i<o;i++){var s=r[i],a=s[0],c=s[1];if(a.getPartialName()===e){if(a instanceof kl)return[a,c];throw new QS(e)}}},n.of=function(e,t){return new n(e,t)},n}(),e_=j5,q5=function(n,e,t){if(n instanceof Bl)return ed.of(n,e,t);if(n instanceof Ll)return eu.of(n,e,t);if(n instanceof Ol)return Yf.of(n,e,t);if(n instanceof Gl)return Zf.of(n,e,t);if(n instanceof Ul)return Jf.of(n,e,t);if(n instanceof zl)return tu.of(n,e,t);if(n instanceof Kc)return km.of(n,e,t)},Qf=function(n){if(n.length===0)throw new Error("PDF field names must not be empty strings");for(var e=n.split("."),t=0,r=e.length;t<r;t++)if(e[t]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+n+'"');return e.length===1?{nonTerminal:[],terminal:e[0]}:{nonTerminal:e.slice(0,e.length-1),terminal:e[e.length-1]}},$f=function(n,e,t){for(var r=n[0],i=n[1],o=e[0],s=e[1],a=r.normalizedEntries(),c=mm("Kids"in a?a.Kids:a.Fields),l=0,u=c.length;l<u;l++)if(c[l][0].getPartialName()===t)throw new QS(t);r.addField(s),o.setParent(i)};var mR={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],Executive:[521.86,756],Folio:[612,936],Legal:[612,1008],Letter:[612,792],Tabloid:[792,1224]};var Ey;(function(n){n[n.Fastest=1/0]="Fastest",n[n.Fast=1500]="Fast",n[n.Medium=500]="Medium",n[n.Slow=100]="Slow"})(Ey||(Ey={}));var X5=function(){function n(e,t,r){this.alreadyEmbedded=!1,this.ref=e,this.doc=t,this.embedder=r}return n.prototype.embed=function(){return pt(this,void 0,void 0,function(){var e,t,r,i,o;return mt(this,function(s){switch(s.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e=s.sent(),this.doc.catalog.has(Q.of("Names"))||this.doc.catalog.set(Q.of("Names"),this.doc.context.obj({})),t=this.doc.catalog.lookup(Q.of("Names"),at),t.has(Q.of("EmbeddedFiles"))||t.set(Q.of("EmbeddedFiles"),this.doc.context.obj({})),r=t.lookup(Q.of("EmbeddedFiles"),at),r.has(Q.of("Names"))||r.set(Q.of("Names"),this.doc.context.obj([])),i=r.lookup(Q.of("Names"),Rt),i.push(rt.fromText(this.embedder.fileName)),i.push(e),this.doc.catalog.has(Q.of("AF"))||this.doc.catalog.set(Q.of("AF"),this.doc.context.obj([])),o=this.doc.catalog.lookup(Q.of("AF"),Rt),o.push(e),this.alreadyEmbedded=!0,s.label=2;case 2:return[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),gR=X5;var K5=function(){function n(e,t,r){this.alreadyEmbedded=!1,this.ref=e,this.doc=t,this.embedder=r}return n.prototype.embed=function(){return pt(this,void 0,void 0,function(){var e,t,r,i,o,s,a;return mt(this,function(c){switch(c.label){case 0:return this.alreadyEmbedded?[3,2]:(e=this.doc,t=e.catalog,r=e.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:i=c.sent(),t.has(Q.of("Names"))||t.set(Q.of("Names"),r.obj({})),o=t.lookup(Q.of("Names"),at),o.has(Q.of("JavaScript"))||o.set(Q.of("JavaScript"),r.obj({})),s=o.lookup(Q.of("JavaScript"),at),s.has(Q.of("Names"))||s.set(Q.of("Names"),r.obj([])),a=s.lookup(Q.of("Names"),Rt),a.push(rt.fromText(this.embedder.scriptName)),a.push(i),this.alreadyEmbedded=!0,c.label=2;case 2:return[2]}})})},n.of=function(e,t,r){return new n(e,t,r)},n}(),t_=K5;var Y5=function(){function n(e,t){this.script=e,this.scriptName=t}return n.for=function(e,t){return new n(e,t)},n.prototype.embedIntoContext=function(e,t){return pt(this,void 0,void 0,function(){var r;return mt(this,function(i){return r=e.obj({Type:"Action",S:"JavaScript",JS:rt.fromText(this.script)}),t?(e.assign(t,r),[2,t]):[2,e.register(r)]})})},n}(),vR=Y5;var Z5=function(){function n(e,t,r){var i=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var o=[];return i.catalog.Pages().traverse(function(s,a){if(s instanceof Ci){var c=i.pageMap.get(s);c||(c=Er.of(s,a,i),i.pageMap.set(s,c)),o.push(c)}}),o},this.getOrCreateForm=function(){var o=i.catalog.getOrCreateAcroForm();return e_.of(o,i)},_e(e,"context",[[kf,"PDFContext"]]),_e(t,"ignoreEncryption",["boolean"]),this.context=e,this.catalog=e.lookup(e.trailerInfo.Root),this.isEncrypted=!!e.lookup(e.trailerInfo.Encrypt),this.pageCache=si.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=si.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!t&&this.isEncrypted)throw new YI;r&&this.updateInfoDict()}return n.load=function(e,t){return t===void 0&&(t={}),pt(this,void 0,void 0,function(){var r,i,o,s,a,c,l,u,h,f,d,m;return mt(this,function(v){switch(v.label){case 0:return r=t.ignoreEncryption,i=r===void 0?!1:r,o=t.parseSpeed,s=o===void 0?Ey.Slow:o,a=t.throwOnInvalidObject,c=a===void 0?!1:a,l=t.updateMetadata,u=l===void 0?!0:l,h=t.capNumbers,f=h===void 0?!1:h,_e(e,"pdf",["string",Uint8Array,ArrayBuffer]),_e(i,"ignoreEncryption",["boolean"]),_e(s,"parseSpeed",["number"]),_e(c,"throwOnInvalidObject",["boolean"]),d=wf(e),[4,FS.forBytesWithOptions(d,s,c,f).parseDocument()];case 1:return m=v.sent(),[2,new n(m,i,u)]}})})},n.create=function(e){return e===void 0&&(e={}),pt(this,void 0,void 0,function(){var t,r,i,o,s,a;return mt(this,function(c){return t=e.updateMetadata,r=t===void 0?!0:t,i=kf.create(),o=vm.withContext(i),s=i.register(o),a=gm.withContextAndPages(i,s),i.trailerInfo.Root=i.register(a),[2,new n(i,!1,r)]})})},n.prototype.registerFontkit=function(e){this.fontkit=e},n.prototype.getForm=function(){var e=this.formCache.access();return e.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),e.deleteXFA()),e},n.prototype.getTitle=function(){var e=this.getInfoDict().lookup(Q.Title);if(e)return Xl(e),e.decodeText()},n.prototype.getAuthor=function(){var e=this.getInfoDict().lookup(Q.Author);if(e)return Xl(e),e.decodeText()},n.prototype.getSubject=function(){var e=this.getInfoDict().lookup(Q.Subject);if(e)return Xl(e),e.decodeText()},n.prototype.getKeywords=function(){var e=this.getInfoDict().lookup(Q.Keywords);if(e)return Xl(e),e.decodeText()},n.prototype.getCreator=function(){var e=this.getInfoDict().lookup(Q.Creator);if(e)return Xl(e),e.decodeText()},n.prototype.getProducer=function(){var e=this.getInfoDict().lookup(Q.Producer);if(e)return Xl(e),e.decodeText()},n.prototype.getCreationDate=function(){var e=this.getInfoDict().lookup(Q.CreationDate);if(e)return Xl(e),e.decodeDate()},n.prototype.getModificationDate=function(){var e=this.getInfoDict().lookup(Q.ModDate);if(e)return Xl(e),e.decodeDate()},n.prototype.setTitle=function(e,t){_e(e,"title",["string"]);var r=Q.of("Title");if(this.getInfoDict().set(r,rt.fromText(e)),t?.showInWindowTitleBar){var i=this.catalog.getOrCreateViewerPreferences();i.setDisplayDocTitle(!0)}},n.prototype.setAuthor=function(e){_e(e,"author",["string"]);var t=Q.of("Author");this.getInfoDict().set(t,rt.fromText(e))},n.prototype.setSubject=function(e){_e(e,"author",["string"]);var t=Q.of("Subject");this.getInfoDict().set(t,rt.fromText(e))},n.prototype.setKeywords=function(e){_e(e,"keywords",[Array]);var t=Q.of("Keywords");this.getInfoDict().set(t,rt.fromText(e.join(" ")))},n.prototype.setCreator=function(e){_e(e,"creator",["string"]);var t=Q.of("Creator");this.getInfoDict().set(t,rt.fromText(e))},n.prototype.setProducer=function(e){_e(e,"creator",["string"]);var t=Q.of("Producer");this.getInfoDict().set(t,rt.fromText(e))},n.prototype.setLanguage=function(e){_e(e,"language",["string"]);var t=Q.of("Lang");this.catalog.set(t,Qt.of(e))},n.prototype.setCreationDate=function(e){_e(e,"creationDate",[[Date,"Date"]]);var t=Q.of("CreationDate");this.getInfoDict().set(t,Qt.fromDate(e))},n.prototype.setModificationDate=function(e){_e(e,"modificationDate",[[Date,"Date"]]);var t=Q.of("ModDate");this.getInfoDict().set(t,Qt.fromDate(e))},n.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},n.prototype.getPages=function(){return this.pageCache.access()},n.prototype.getPage=function(e){var t=this.getPages();return oi(e,"index",0,t.length-1),t[e]},n.prototype.getPageIndices=function(){return yE(0,this.getPageCount())},n.prototype.removePage=function(e){var t=this.getPageCount();if(this.pageCount===0)throw new QI;oi(e,"index",0,t-1),this.catalog.removeLeafNode(e),this.pageCount=t-1},n.prototype.addPage=function(e){return _e(e,"page",["undefined",[Er,"PDFPage"],Array]),this.insertPage(this.getPageCount(),e)},n.prototype.insertPage=function(e,t){var r=this.getPageCount();if(oi(e,"index",0,r),_e(t,"page",["undefined",[Er,"PDFPage"],Array]),!t||Array.isArray(t)){var i=Array.isArray(t)?t:mR.A4;t=Er.create(this),t.setSize.apply(t,i)}else if(t.doc!==this)throw new JI;var o=this.catalog.insertLeafNode(t.ref,e);return t.node.setParent(o),this.pageMap.set(t.node,t),this.pageCache.invalidate(),this.pageCount=r+1,t},n.prototype.copyPages=function(e,t){return pt(this,void 0,void 0,function(){var r,i,o,s,a,c,l,u;return mt(this,function(h){switch(h.label){case 0:return _e(e,"srcDoc",[[n,"PDFDocument"]]),_e(t,"indices",[Array]),[4,e.flush()];case 1:for(h.sent(),r=ay.for(e.context,this.context),i=e.getPages(),o=new Array(t.length),s=0,a=t.length;s<a;s++)c=i[t[s]],l=r.copy(c.node),u=this.context.register(l),o[s]=Er.of(l,u,this);return[2,o]}})})},n.prototype.copy=function(){return pt(this,void 0,void 0,function(){var e,t,r,i;return mt(this,function(o){switch(o.label){case 0:return[4,n.create()];case 1:return e=o.sent(),[4,e.copyPages(this,this.getPageIndices())];case 2:for(t=o.sent(),r=0,i=t.length;r<i;r++)e.addPage(t[r]);return this.getAuthor()!==void 0&&e.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&e.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&e.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&e.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&e.setProducer(this.getProducer()),this.getSubject()!==void 0&&e.setSubject(this.getSubject()),this.getTitle()!==void 0&&e.setTitle(this.getTitle()),e.defaultWordBreaks=this.defaultWordBreaks,[2,e]}})})},n.prototype.addJavaScript=function(e,t){_e(e,"name",["string"]),_e(t,"script",["string"]);var r=vR.for(t,e),i=this.context.nextRef(),o=t_.of(i,this,r);this.javaScripts.push(o)},n.prototype.attach=function(e,t,r){return r===void 0&&(r={}),pt(this,void 0,void 0,function(){var i,o,s,a;return mt(this,function(c){return _e(e,"attachment",["string",Uint8Array,ArrayBuffer]),_e(t,"name",["string"]),Be(r.mimeType,"mimeType",["string"]),Be(r.description,"description",["string"]),Be(r.creationDate,"options.creationDate",[Date]),Be(r.modificationDate,"options.modificationDate",[Date]),Xi(r.afRelationship,"options.afRelationship",sm),i=wf(e),o=MS.for(i,t,r),s=this.context.nextRef(),a=gR.of(s,this,o),this.embeddedFiles.push(a),[2]})})},n.prototype.embedFont=function(e,t){return t===void 0&&(t={}),pt(this,void 0,void 0,function(){var r,i,o,s,a,c,l,u,h,f;return mt(this,function(d){switch(d.label){case 0:return r=t.subset,i=r===void 0?!1:r,o=t.customName,s=t.features,_e(e,"font",["string",Uint8Array,ArrayBuffer]),_e(i,"subset",["boolean"]),pS(e)?(a=Wc.for(e,o),[3,7]):[3,1];case 1:return bE(e)?(c=wf(e),l=this.assertFontkit(),i?[4,TS.for(l,c,o,s)]:[3,3]):[3,6];case 2:return u=d.sent(),[3,5];case 3:return[4,jc.for(l,c,o,s)];case 4:u=d.sent(),d.label=5;case 5:return a=u,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return h=this.context.nextRef(),f=dr.of(h,this,a),this.fonts.push(f),[2,f]}})})},n.prototype.embedStandardFont=function(e,t){if(_e(e,"font",["string"]),!pS(e))throw new TypeError("`font` must be one of type `StandardFonts`");var r=Wc.for(e,t),i=this.context.nextRef(),o=dr.of(i,this,r);return this.fonts.push(o),o},n.prototype.embedJpg=function(e){return pt(this,void 0,void 0,function(){var t,r,i,o;return mt(this,function(s){switch(s.label){case 0:return _e(e,"jpg",["string",Uint8Array,ArrayBuffer]),t=wf(e),[4,am.for(t)];case 1:return r=s.sent(),i=this.context.nextRef(),o=Kf.of(i,this,r),this.images.push(o),[2,o]}})})},n.prototype.embedPng=function(e){return pt(this,void 0,void 0,function(){var t,r,i,o;return mt(this,function(s){switch(s.label){case 0:return _e(e,"png",["string",Uint8Array,ArrayBuffer]),t=wf(e),[4,lm.for(t)];case 1:return r=s.sent(),i=this.context.nextRef(),o=Kf.of(i,this,r),this.images.push(o),[2,o]}})})},n.prototype.embedPdf=function(e,t){return t===void 0&&(t=[0]),pt(this,void 0,void 0,function(){var r,i,o;return mt(this,function(s){switch(s.label){case 0:return _e(e,"pdf",["string",Uint8Array,ArrayBuffer,[n,"PDFDocument"]]),_e(t,"indices",[Array]),e instanceof n?(i=e,[3,3]):[3,1];case 1:return[4,n.load(e)];case 2:i=s.sent(),s.label=3;case 3:return r=i,o=xE(r.getPages(),t),[2,this.embedPages(o)]}})})},n.prototype.embedPage=function(e,t,r){return pt(this,void 0,void 0,function(){var i;return mt(this,function(o){switch(o.label){case 0:return _e(e,"page",[[Er,"PDFPage"]]),[4,this.embedPages([e],[t],[r])];case 1:return i=o.sent()[0],[2,i]}})})},n.prototype.embedPages=function(e,t,r){return t===void 0&&(t=[]),r===void 0&&(r=[]),pt(this,void 0,void 0,function(){var l,u,i,o,s,a,c,l,u,h,f,d,m,v,p;return mt(this,function(g){switch(g.label){case 0:if(e.length===0)return[2,[]];for(l=0,u=e.length-1;l<u;l++)if(i=e[l],o=e[l+1],i.node.context!==o.node.context)throw new GC;s=e[0].node.context,a=s===this.context?function(x){return x}:ay.for(s,this.context).copy,c=new Array(e.length),l=0,u=e.length,g.label=1;case 1:return l<u?(h=a(e[l].node),f=t[l],d=r[l],[4,um.for(h,f,d)]):[3,4];case 2:m=g.sent(),v=this.context.nextRef(),c[l]=Om.of(v,this,m),g.label=3;case 3:return l++,[3,1];case 4:return(p=this.embeddedPages).push.apply(p,c),[2,c]}})})},n.prototype.flush=function(){return pt(this,void 0,void 0,function(){return mt(this,function(e){switch(e.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return e.sent(),[4,this.embedAll(this.images)];case 2:return e.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return e.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return e.sent(),[4,this.embedAll(this.javaScripts)];case 5:return e.sent(),[2]}})})},n.prototype.save=function(e){return e===void 0&&(e={}),pt(this,void 0,void 0,function(){var t,r,i,o,s,a,c,l,u,h;return mt(this,function(f){switch(f.label){case 0:return t=e.useObjectStreams,r=t===void 0?!0:t,i=e.addDefaultPage,o=i===void 0?!0:i,s=e.objectsPerTick,a=s===void 0?50:s,c=e.updateFieldAppearances,l=c===void 0?!0:c,_e(r,"useObjectStreams",["boolean"]),_e(o,"addDefaultPage",["boolean"]),_e(a,"objectsPerTick",["number"]),_e(l,"updateFieldAppearances",["boolean"]),o&&this.getPageCount()===0&&this.addPage(),l&&(u=this.formCache.getValue(),u&&u.updateFieldAppearances()),[4,this.flush()];case 1:return f.sent(),h=r?_S:im,[2,h.forContext(this.context,a).serializeToBuffer()]}})})},n.prototype.saveAsBase64=function(e){return e===void 0&&(e={}),pt(this,void 0,void 0,function(){var t,r,i,o,s;return mt(this,function(a){switch(a.label){case 0:return t=e.dataUri,r=t===void 0?!1:t,i=iE(e,["dataUri"]),_e(r,"dataUri",["boolean"]),[4,this.save(i)];case 1:return o=a.sent(),s=sE(o),[2,r?"data:application/pdf;base64,"+s:s]}})})},n.prototype.findPageForAnnotationRef=function(e){for(var t=this.getPages(),r=0,i=t.length;r<i;r++){var o=t[r],s=o.node.Annots();if(s?.indexOf(e)!==void 0)return o}},n.prototype.embedAll=function(e){return pt(this,void 0,void 0,function(){var t,r;return mt(this,function(i){switch(i.label){case 0:t=0,r=e.length,i.label=1;case 1:return t<r?[4,e[t].embed()]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},n.prototype.updateInfoDict=function(){var e="pdf-lib (https://github.com/Hopding/pdf-lib)",t=new Date,r=this.getInfoDict();this.setProducer(e),this.setModificationDate(t),r.get(Q.of("Creator"))||this.setCreator(e),r.get(Q.of("CreationDate"))||this.setCreationDate(t)},n.prototype.getInfoDict=function(){var e=this.context.lookup(this.context.trailerInfo.Info);if(e instanceof at)return e;var t=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(t),t},n.prototype.assertFontkit=function(){if(!this.fontkit)throw new ZI;return this.fontkit},n}(),ci=Z5;function Xl(n){if(!(n instanceof rt)&&!(n instanceof Qt))throw new Gc([rt,Qt],n)}var Qs;(function(n){n.Normal="Normal",n.Multiply="Multiply",n.Screen="Screen",n.Overlay="Overlay",n.Darken="Darken",n.Lighten="Lighten",n.ColorDodge="ColorDodge",n.ColorBurn="ColorBurn",n.HardLight="HardLight",n.SoftLight="SoftLight",n.Difference="Difference",n.Exclusion="Exclusion"})(Qs||(Qs={}));var J5=function(){function n(e,t,r){this.fontSize=24,this.fontColor=zt(0,0,0),this.lineHeight=24,this.x=0,this.y=0,_e(e,"leafNode",[[Ci,"PDFPageLeaf"]]),_e(t,"ref",[[Nt,"PDFRef"]]),_e(r,"doc",[[ci,"PDFDocument"]]),this.node=e,this.ref=t,this.doc=r}return n.prototype.setRotation=function(e){var t=my(e);ry(t,"degreesAngle",90),this.node.set(Q.of("Rotate"),this.doc.context.obj(t))},n.prototype.getRotation=function(){var e=this.node.Rotate();return yt(e?e.asNumber():0)},n.prototype.setSize=function(e,t){_e(e,"width",["number"]),_e(t,"height",["number"]);var r=this.getMediaBox();this.setMediaBox(r.x,r.y,e,t);var i=this.getCropBox(),o=this.getBleedBox(),s=this.getTrimBox(),a=this.getArtBox(),c=this.node.CropBox(),l=this.node.BleedBox(),u=this.node.TrimBox(),h=this.node.ArtBox();c&&em(i,r)&&this.setCropBox(r.x,r.y,e,t),l&&em(o,r)&&this.setBleedBox(r.x,r.y,e,t),u&&em(s,r)&&this.setTrimBox(r.x,r.y,e,t),h&&em(a,r)&&this.setArtBox(r.x,r.y,e,t)},n.prototype.setWidth=function(e){_e(e,"width",["number"]),this.setSize(e,this.getSize().height)},n.prototype.setHeight=function(e){_e(e,"height",["number"]),this.setSize(this.getSize().width,e)},n.prototype.setMediaBox=function(e,t,r,i){_e(e,"x",["number"]),_e(t,"y",["number"]),_e(r,"width",["number"]),_e(i,"height",["number"]);var o=this.doc.context.obj([e,t,e+r,t+i]);this.node.set(Q.MediaBox,o)},n.prototype.setCropBox=function(e,t,r,i){_e(e,"x",["number"]),_e(t,"y",["number"]),_e(r,"width",["number"]),_e(i,"height",["number"]);var o=this.doc.context.obj([e,t,e+r,t+i]);this.node.set(Q.CropBox,o)},n.prototype.setBleedBox=function(e,t,r,i){_e(e,"x",["number"]),_e(t,"y",["number"]),_e(r,"width",["number"]),_e(i,"height",["number"]);var o=this.doc.context.obj([e,t,e+r,t+i]);this.node.set(Q.BleedBox,o)},n.prototype.setTrimBox=function(e,t,r,i){_e(e,"x",["number"]),_e(t,"y",["number"]),_e(r,"width",["number"]),_e(i,"height",["number"]);var o=this.doc.context.obj([e,t,e+r,t+i]);this.node.set(Q.TrimBox,o)},n.prototype.setArtBox=function(e,t,r,i){_e(e,"x",["number"]),_e(t,"y",["number"]),_e(r,"width",["number"]),_e(i,"height",["number"]);var o=this.doc.context.obj([e,t,e+r,t+i]);this.node.set(Q.ArtBox,o)},n.prototype.getSize=function(){var e=this.getMediaBox(),t=e.width,r=e.height;return{width:t,height:r}},n.prototype.getWidth=function(){return this.getSize().width},n.prototype.getHeight=function(){return this.getSize().height},n.prototype.getMediaBox=function(){var e=this.node.MediaBox();return e.asRectangle()},n.prototype.getCropBox=function(){var e,t=this.node.CropBox();return(e=t?.asRectangle())!==null&&e!==void 0?e:this.getMediaBox()},n.prototype.getBleedBox=function(){var e,t=this.node.BleedBox();return(e=t?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},n.prototype.getTrimBox=function(){var e,t=this.node.TrimBox();return(e=t?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},n.prototype.getArtBox=function(){var e,t=this.node.ArtBox();return(e=t?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},n.prototype.translateContent=function(e,t){_e(e,"x",["number"]),_e(t,"y",["number"]),this.node.normalize(),this.getContentStream();var r=this.createContentStream(ar(),Ii(e,t)),i=this.doc.context.register(r),o=this.createContentStream(lr()),s=this.doc.context.register(o);this.node.wrapContentStreams(i,s)},n.prototype.scale=function(e,t){_e(e,"x",["number"]),_e(t,"y",["number"]),this.setSize(this.getWidth()*e,this.getHeight()*t),this.scaleContent(e,t),this.scaleAnnotations(e,t)},n.prototype.scaleContent=function(e,t){_e(e,"x",["number"]),_e(t,"y",["number"]),this.node.normalize(),this.getContentStream();var r=this.createContentStream(ar(),Jc(e,t)),i=this.doc.context.register(r),o=this.createContentStream(lr()),s=this.doc.context.register(o);this.node.wrapContentStreams(i,s)},n.prototype.scaleAnnotations=function(e,t){_e(e,"x",["number"]),_e(t,"y",["number"]);var r=this.node.Annots();if(r)for(var i=0;i<r.size();i++){var o=r.lookup(i);o instanceof at&&this.scaleAnnot(o,e,t)}},n.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},n.prototype.setFont=function(e){_e(e,"font",[[dr,"PDFFont"]]),this.font=e,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},n.prototype.setFontSize=function(e){_e(e,"fontSize",["number"]),this.fontSize=e},n.prototype.setFontColor=function(e){_e(e,"fontColor",[[Object,"Color"]]),this.fontColor=e},n.prototype.setLineHeight=function(e){_e(e,"lineHeight",["number"]),this.lineHeight=e},n.prototype.getPosition=function(){return{x:this.x,y:this.y}},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.moveTo=function(e,t){_e(e,"x",["number"]),_e(t,"y",["number"]),this.x=e,this.y=t},n.prototype.moveDown=function(e){_e(e,"yDecrease",["number"]),this.y-=e},n.prototype.moveUp=function(e){_e(e,"yIncrease",["number"]),this.y+=e},n.prototype.moveLeft=function(e){_e(e,"xDecrease",["number"]),this.x-=e},n.prototype.moveRight=function(e){_e(e,"xIncrease",["number"]),this.x+=e},n.prototype.pushOperators=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ny(e,"operator",[[tn,"PDFOperator"]]);var r=this.getContentStream();r.push.apply(r,e)},n.prototype.drawText=function(e,t){var r,i,o,s,a,c,l;t===void 0&&(t={}),_e(e,"text",["string"]),Be(t.color,"options.color",[[Object,"Color"]]),lo(t.opacity,"opacity.opacity",0,1),Be(t.font,"options.font",[[dr,"PDFFont"]]),Be(t.size,"options.size",["number"]),Be(t.rotate,"options.rotate",[[Object,"Rotation"]]),Be(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),Be(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),Be(t.x,"options.x",["number"]),Be(t.y,"options.y",["number"]),Be(t.lineHeight,"options.lineHeight",["number"]),Be(t.maxWidth,"options.maxWidth",["number"]),Be(t.wordBreaks,"options.wordBreaks",[Array]),Xi(t.blendMode,"options.blendMode",Qs);for(var u=this.setOrEmbedFont(t.font),h=u.oldFont,f=u.newFont,d=u.newFontKey,m=t.size||this.fontSize,v=t.wordBreaks||this.doc.defaultWordBreaks,p=function(M){return f.widthOfTextAtSize(M,m)},g=t.maxWidth===void 0?F0(Cc(e)):fE(e,v,t.maxWidth,p),x=new Array(g.length),y=0,b=g.length;y<b;y++)x[y]=f.encodeText(g[y]);var S=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),_=this.getContentStream();_.push.apply(_,WI(x,{color:(r=t.color)!==null&&r!==void 0?r:this.fontColor,font:d,size:m,rotate:(i=t.rotate)!==null&&i!==void 0?i:yt(0),xSkew:(o=t.xSkew)!==null&&o!==void 0?o:yt(0),ySkew:(s=t.ySkew)!==null&&s!==void 0?s:yt(0),x:(a=t.x)!==null&&a!==void 0?a:this.x,y:(c=t.y)!==null&&c!==void 0?c:this.y,lineHeight:(l=t.lineHeight)!==null&&l!==void 0?l:this.lineHeight,graphicsState:S})),t.font&&(h?this.setFont(h):this.resetFont())},n.prototype.drawImage=function(e,t){var r,i,o,s,a,c,l;t===void 0&&(t={}),_e(e,"image",[[Kf,"PDFImage"]]),Be(t.x,"options.x",["number"]),Be(t.y,"options.y",["number"]),Be(t.width,"options.width",["number"]),Be(t.height,"options.height",["number"]),Be(t.rotate,"options.rotate",[[Object,"Rotation"]]),Be(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),Be(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),lo(t.opacity,"opacity.opacity",0,1),Xi(t.blendMode,"options.blendMode",Qs);var u=this.node.newXObject("Image",e.ref),h=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),f=this.getContentStream();f.push.apply(f,My(u,{x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(i=t.y)!==null&&i!==void 0?i:this.y,width:(o=t.width)!==null&&o!==void 0?o:e.size().width,height:(s=t.height)!==null&&s!==void 0?s:e.size().height,rotate:(a=t.rotate)!==null&&a!==void 0?a:yt(0),xSkew:(c=t.xSkew)!==null&&c!==void 0?c:yt(0),ySkew:(l=t.ySkew)!==null&&l!==void 0?l:yt(0),graphicsState:h}))},n.prototype.drawPage=function(e,t){var r,i,o,s,a;t===void 0&&(t={}),_e(e,"embeddedPage",[[Om,"PDFEmbeddedPage"]]),Be(t.x,"options.x",["number"]),Be(t.y,"options.y",["number"]),Be(t.xScale,"options.xScale",["number"]),Be(t.yScale,"options.yScale",["number"]),Be(t.width,"options.width",["number"]),Be(t.height,"options.height",["number"]),Be(t.rotate,"options.rotate",[[Object,"Rotation"]]),Be(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),Be(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),lo(t.opacity,"opacity.opacity",0,1),Xi(t.blendMode,"options.blendMode",Qs);var c=this.node.newXObject("EmbeddedPdfPage",e.ref),l=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),u=t.width!==void 0?t.width/e.width:t.xScale!==void 0?t.xScale:1,h=t.height!==void 0?t.height/e.height:t.yScale!==void 0?t.yScale:1,f=this.getContentStream();f.push.apply(f,jI(c,{x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(i=t.y)!==null&&i!==void 0?i:this.y,xScale:u,yScale:h,rotate:(o=t.rotate)!==null&&o!==void 0?o:yt(0),xSkew:(s=t.xSkew)!==null&&s!==void 0?s:yt(0),ySkew:(a=t.ySkew)!==null&&a!==void 0?a:yt(0),graphicsState:l}))},n.prototype.drawSvgPath=function(e,t){var r,i,o,s,a,c,l,u,h;t===void 0&&(t={}),_e(e,"path",["string"]),Be(t.x,"options.x",["number"]),Be(t.y,"options.y",["number"]),Be(t.scale,"options.scale",["number"]),Be(t.rotate,"options.rotate",[[Object,"Rotation"]]),Be(t.borderWidth,"options.borderWidth",["number"]),Be(t.color,"options.color",[[Object,"Color"]]),lo(t.opacity,"opacity.opacity",0,1),Be(t.borderColor,"options.borderColor",[[Object,"Color"]]),Be(t.borderDashArray,"options.borderDashArray",[Array]),Be(t.borderDashPhase,"options.borderDashPhase",["number"]),Xi(t.borderLineCap,"options.borderLineCap",Zc),lo(t.borderOpacity,"options.borderOpacity",0,1),Xi(t.blendMode,"options.blendMode",Qs);var f=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});!("color"in t)&&!("borderColor"in t)&&(t.borderColor=zt(0,0,0));var d=this.getContentStream();d.push.apply(d,XI(e,{x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(i=t.y)!==null&&i!==void 0?i:this.y,scale:t.scale,rotate:(o=t.rotate)!==null&&o!==void 0?o:yt(0),color:(s=t.color)!==null&&s!==void 0?s:void 0,borderColor:(a=t.borderColor)!==null&&a!==void 0?a:void 0,borderWidth:(c=t.borderWidth)!==null&&c!==void 0?c:0,borderDashArray:(l=t.borderDashArray)!==null&&l!==void 0?l:void 0,borderDashPhase:(u=t.borderDashPhase)!==null&&u!==void 0?u:void 0,borderLineCap:(h=t.borderLineCap)!==null&&h!==void 0?h:void 0,graphicsState:f}))},n.prototype.drawLine=function(e){var t,r,i,o,s;_e(e.start,"options.start",[[Object,"{ x: number, y: number }"]]),_e(e.end,"options.end",[[Object,"{ x: number, y: number }"]]),_e(e.start.x,"options.start.x",["number"]),_e(e.start.y,"options.start.y",["number"]),_e(e.end.x,"options.end.x",["number"]),_e(e.end.y,"options.end.y",["number"]),Be(e.thickness,"options.thickness",["number"]),Be(e.color,"options.color",[[Object,"Color"]]),Be(e.dashArray,"options.dashArray",[Array]),Be(e.dashPhase,"options.dashPhase",["number"]),Xi(e.lineCap,"options.lineCap",Zc),lo(e.opacity,"opacity.opacity",0,1),Xi(e.blendMode,"options.blendMode",Qs);var a=this.maybeEmbedGraphicsState({borderOpacity:e.opacity,blendMode:e.blendMode});"color"in e||(e.color=zt(0,0,0));var c=this.getContentStream();c.push.apply(c,qI({start:e.start,end:e.end,thickness:(t=e.thickness)!==null&&t!==void 0?t:1,color:(r=e.color)!==null&&r!==void 0?r:void 0,dashArray:(i=e.dashArray)!==null&&i!==void 0?i:void 0,dashPhase:(o=e.dashPhase)!==null&&o!==void 0?o:void 0,lineCap:(s=e.lineCap)!==null&&s!==void 0?s:void 0,graphicsState:a}))},n.prototype.drawRectangle=function(e){var t,r,i,o,s,a,c,l,u,h,f,d,m;e===void 0&&(e={}),Be(e.x,"options.x",["number"]),Be(e.y,"options.y",["number"]),Be(e.width,"options.width",["number"]),Be(e.height,"options.height",["number"]),Be(e.rotate,"options.rotate",[[Object,"Rotation"]]),Be(e.xSkew,"options.xSkew",[[Object,"Rotation"]]),Be(e.ySkew,"options.ySkew",[[Object,"Rotation"]]),Be(e.borderWidth,"options.borderWidth",["number"]),Be(e.color,"options.color",[[Object,"Color"]]),lo(e.opacity,"opacity.opacity",0,1),Be(e.borderColor,"options.borderColor",[[Object,"Color"]]),Be(e.borderDashArray,"options.borderDashArray",[Array]),Be(e.borderDashPhase,"options.borderDashPhase",["number"]),Xi(e.borderLineCap,"options.borderLineCap",Zc),lo(e.borderOpacity,"options.borderOpacity",0,1),Xi(e.blendMode,"options.blendMode",Qs);var v=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=zt(0,0,0));var p=this.getContentStream();p.push.apply(p,$c({x:(t=e.x)!==null&&t!==void 0?t:this.x,y:(r=e.y)!==null&&r!==void 0?r:this.y,width:(i=e.width)!==null&&i!==void 0?i:150,height:(o=e.height)!==null&&o!==void 0?o:100,rotate:(s=e.rotate)!==null&&s!==void 0?s:yt(0),xSkew:(a=e.xSkew)!==null&&a!==void 0?a:yt(0),ySkew:(c=e.ySkew)!==null&&c!==void 0?c:yt(0),borderWidth:(l=e.borderWidth)!==null&&l!==void 0?l:0,color:(u=e.color)!==null&&u!==void 0?u:void 0,borderColor:(h=e.borderColor)!==null&&h!==void 0?h:void 0,borderDashArray:(f=e.borderDashArray)!==null&&f!==void 0?f:void 0,borderDashPhase:(d=e.borderDashPhase)!==null&&d!==void 0?d:void 0,graphicsState:v,borderLineCap:(m=e.borderLineCap)!==null&&m!==void 0?m:void 0}))},n.prototype.drawSquare=function(e){e===void 0&&(e={});var t=e.size;Be(t,"size",["number"]),this.drawRectangle(Ft(Ft({},e),{width:t,height:t}))},n.prototype.drawEllipse=function(e){var t,r,i,o,s,a,c,l,u,h,f;e===void 0&&(e={}),Be(e.x,"options.x",["number"]),Be(e.y,"options.y",["number"]),Be(e.xScale,"options.xScale",["number"]),Be(e.yScale,"options.yScale",["number"]),Be(e.rotate,"options.rotate",[[Object,"Rotation"]]),Be(e.color,"options.color",[[Object,"Color"]]),lo(e.opacity,"opacity.opacity",0,1),Be(e.borderColor,"options.borderColor",[[Object,"Color"]]),lo(e.borderOpacity,"options.borderOpacity",0,1),Be(e.borderWidth,"options.borderWidth",["number"]),Be(e.borderDashArray,"options.borderDashArray",[Array]),Be(e.borderDashPhase,"options.borderDashPhase",["number"]),Xi(e.borderLineCap,"options.borderLineCap",Zc),Xi(e.blendMode,"options.blendMode",Qs);var d=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=zt(0,0,0));var m=this.getContentStream();m.push.apply(m,Ty({x:(t=e.x)!==null&&t!==void 0?t:this.x,y:(r=e.y)!==null&&r!==void 0?r:this.y,xScale:(i=e.xScale)!==null&&i!==void 0?i:100,yScale:(o=e.yScale)!==null&&o!==void 0?o:100,rotate:(s=e.rotate)!==null&&s!==void 0?s:void 0,color:(a=e.color)!==null&&a!==void 0?a:void 0,borderColor:(c=e.borderColor)!==null&&c!==void 0?c:void 0,borderWidth:(l=e.borderWidth)!==null&&l!==void 0?l:0,borderDashArray:(u=e.borderDashArray)!==null&&u!==void 0?u:void 0,borderDashPhase:(h=e.borderDashPhase)!==null&&h!==void 0?h:void 0,borderLineCap:(f=e.borderLineCap)!==null&&f!==void 0?f:void 0,graphicsState:d}))},n.prototype.drawCircle=function(e){e===void 0&&(e={});var t=e.size,r=t===void 0?100:t;Be(r,"size",["number"]),this.drawEllipse(Ft(Ft({},e),{xScale:r,yScale:r}))},n.prototype.setOrEmbedFont=function(e){var t=this.font,r=this.fontKey;e?this.setFont(e):this.getFont();var i=this.font,o=this.fontKey;return{oldFont:t,oldFontKey:r,newFont:i,newFontKey:o}},n.prototype.getFont=function(){if(!this.font||!this.fontKey){var e=this.doc.embedStandardFont(Ba.Helvetica);this.setFont(e)}return[this.font,this.fontKey]},n.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},n.prototype.getContentStream=function(e){return e===void 0&&(e=!0),e&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},n.prototype.createContentStream=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.doc.context.obj({}),i=ka.of(r,e);return i},n.prototype.maybeEmbedGraphicsState=function(e){var t=e.opacity,r=e.borderOpacity,i=e.blendMode;if(!(t===void 0&&r===void 0&&i===void 0)){var o=this.doc.context.obj({Type:"ExtGState",ca:t,CA:r,BM:i}),s=this.node.newExtGState("GS",o);return s}},n.prototype.scaleAnnot=function(e,t,r){for(var i=["RD","CL","Vertices","QuadPoints","L","Rect"],o=0,s=i.length;o<s;o++){var a=e.lookup(Q.of(i[o]));a instanceof Rt&&a.scalePDFNumbers(t,r)}var c=e.lookup(Q.of("InkList"));if(c instanceof Rt)for(var o=0,s=c.size();o<s;o++){var l=c.lookup(o);l instanceof Rt&&l.scalePDFNumbers(t,r)}},n.of=function(e,t,r){return new n(e,t,r)},n.create=function(e){_e(e,"doc",[[ci,"PDFDocument"]]);var t=Nt.of(-1),r=Ci.withContextAndParent(e.context,t),i=e.context.register(r);return new n(r,i,e)},n}(),Er=J5;var Q5=function(n){Pe(e,n);function e(t,r,i){var o=n.call(this,t,r,i)||this;return _e(t,"acroButton",[[Bl,"PDFAcroPushButton"]]),o.acroField=t,o}return e.prototype.setImage=function(t,r){r===void 0&&(r=ps.Center);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],c=this.createImageAppearanceStream(a,t,r);this.updateWidgetAppearances(a,{normal:c})}this.markAsClean()},e.prototype.setFontSize=function(t){Dl(t,"fontSize"),this.acroField.setFontSize(t),this.markAsDirty()},e.prototype.addToPage=function(t,r,i){var o,s,a,c,l,u,h,f,d,m,v;Be(t,"text",["string"]),Be(r,"page",[[Er,"PDFPage"]]),Lo(i);var p=this.createWidget({x:((o=i?.x)!==null&&o!==void 0?o:0)-((s=i?.borderWidth)!==null&&s!==void 0?s:0)/2,y:((a=i?.y)!==null&&a!==void 0?a:0)-((c=i?.borderWidth)!==null&&c!==void 0?c:0)/2,width:(l=i?.width)!==null&&l!==void 0?l:100,height:(u=i?.height)!==null&&u!==void 0?u:50,textColor:(h=i?.textColor)!==null&&h!==void 0?h:zt(0,0,0),backgroundColor:(f=i?.backgroundColor)!==null&&f!==void 0?f:zt(.75,.75,.75),borderColor:i?.borderColor,borderWidth:(d=i?.borderWidth)!==null&&d!==void 0?d:0,rotate:(m=i?.rotate)!==null&&m!==void 0?m:yt(0),caption:t,hidden:i?.hidden,page:r.ref}),g=this.doc.context.register(p.dict);this.acroField.addWidget(g);var x=(v=i?.font)!==null&&v!==void 0?v:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(p,x),r.node.addAnnot(g)},e.prototype.needsAppearancesUpdate=function(){var t;if(this.isDirty())return!0;for(var r=this.acroField.getWidgets(),i=0,o=r.length;i<o;i++){var s=r[i],a=((t=s.getAppearances())===null||t===void 0?void 0:t.normal)instanceof Hn;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(t){_e(t,"font",[[dr,"PDFFont"]]),this.updateAppearances(t)},e.prototype.updateAppearances=function(t,r){_e(t,"font",[[dr,"PDFFont"]]),Be(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,t,r)}},e.prototype.updateWidgetAppearance=function(t,r,i){var o=i??hR,s=No(o(this,t,r));this.updateWidgetAppearanceWithFont(t,r,s)},e.of=function(t,r,i){return new e(t,r,i)},e}(Pi),ed=Q5;function ms(n,e){typeof window.umami<"u"?window.umami.track(n,e):setTimeout(()=>{typeof window.umami<"u"?window.umami.track(n,e):console.warn("Umami is not available. Event not tracked:",n,e)},1e3)}async function bR(n,e=!1){let{patientName:t,sendToEmail:r,age:i,gender:o,typeOfPain:s,painDuration:a,date:c,images:l}=n;ms("Generate PDF");let u=await ci.create(),h=u.addPage([595.28,841.89]),f=await u.embedFont(Ba.Helvetica),d=await u.embedFont(Ba.HelveticaBold),m=zt(.1,.2,.4),v=zt(.8,.9,1);h.drawRectangle({x:0,y:0,width:595.28,height:841.89,color:v});let p=await fetch("assets/images/tmwihn.png").then(J=>J.arrayBuffer()),g=await u.embedPng(p),y=g.scale(.25),b=(h.getWidth()-y.width)/2,S=h.getHeight()-y.height-30;if(h.drawImage(g,{x:b,y:S,width:y.width,height:y.height}),!d||!f)throw new Error("One or more fonts failed to load");xR(h,"Tell people about your pain",1500,f,12,m);let _=S-50,M=495,A=20,w=20,T=e?`Hi ${t||""},`:`Hi ${r||""},`,D=e?"Thank you for using TellMeWhereItHurtsNow.com to monitor and manage your pain. Pain can significantly impact one's quality of life. Understanding its location and intensity helps in diagnosing and managing the underlying causes effectively.":"Your acquaintance, "+(t||"")+", has shared with you a snapshot describing their pain and where they are feeling it. Pain can significantly impact one's quality of life. Understanding its location and intensity helps in diagnosing and managing the underlying causes effectively.",N=yR(T,d,12,M);N.forEach((J,W)=>{let K=_-W*A,le=(595.28-M)/2;h.drawText(J,{x:le+(W===0?w:0),y:K,size:12,font:d,color:m})});let P=450;yR(D,f,12,P).forEach((J,W)=>{let K=_-(N.length+W)*A-10,le=(595.28-P)/2;h.drawText(J,{x:le,y:K,size:12,font:f,color:m})});let U=_-N.length*A-90;h.drawLine({start:{x:50,y:U},end:{x:545,y:U},thickness:1,color:m});let k=U-20,B=15,O=250,q=[{label:"Date of record",value:c||""},{label:"Patient Name",value:t||""},{label:"Age",value:i||"private"},{label:"Gender",value:o||"private"},{label:"Type of Pain",value:s||"private"},{label:"Duration of Pain",value:a||"private"}];q.forEach((J,W)=>{let le=W>=3?50+O:50,ue=k-W%3*B;h.drawText(`${J.label}:`,{x:le,y:ue,size:10,font:d,color:zt(0,0,0)});let de=J.value,Te=le+120;h.drawText(de,{x:Te,y:ue,size:10,font:f,color:zt(0,0,0)});let X=f.widthOfTextAtSize(de,10);h.drawLine({start:{x:Te,y:ue-2},end:{x:Te+X,y:ue-2},thickness:.5,color:zt(0,0,0)})});let ne=k-q.length*B-350,ae=320,ye=380,fe=160,L=185;h.drawRectangle({x:50,y:ne,width:ae,height:ye,borderColor:m,borderWidth:2}),h.drawRectangle({x:385,y:ne+L+10,width:fe,height:L,borderColor:m,borderWidth:2}),h.drawRectangle({x:385,y:ne,width:fe,height:L,borderColor:m,borderWidth:2}),await $5(h,l,u,ne),xR(h,"https://TellMeWhereItHurtsNow.com/",30,d,14,zt(0,0,1));let R=await u.save(),I=new Blob([R],{type:"application/pdf"}),j=URL.createObjectURL(I),Z=document.createElement("a");Z.href=j,Z.download="pain_snapshot_report.pdf",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)}async function $5(n,e,t,r){let i=r,o=320,s=380,a=160,c=185;if(e.length>0){let l=await t.embedPng(n_(e[0]));n.drawImage(l,{x:50,y:i,width:o,height:s})}if(e.length>1){let l=await t.embedPng(n_(e[1]));n.drawImage(l,{x:385,y:i+c+10,width:a,height:c})}if(e.length>2){let l=await t.embedPng(n_(e[2]));n.drawImage(l,{x:385,y:i,width:a,height:c})}}function yR(n,e,t,r){let i=n.split(" "),o=[],s=i[0];for(let a=1;a<i.length;a++){let c=i[a];e.widthOfTextAtSize(s+" "+c,t)<r?s+=" "+c:(o.push(s),s=c)}return o.push(s),o}function n_(n){let e=window.atob(n.split(",")[1]),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r}function xR(n,e,t,r,i,o){let s=r.widthOfTextAtSize(e,i),c=(n.getWidth()-s)/2;n.drawText(e,{x:c,y:t,size:i,font:r,color:o})}function wR(n,e){ms("Sharing Dialog Opened");let t=eG(e,n);tG(t).showDialog()}function Ay(){return window.matchMedia("(max-width: 428px)").matches}var ui={SNAPSHOT_SIZES:Ay()?{LARGE:{width:331,height:304},SMALL:{width:164,height:250}}:{LARGE:{width:463,height:500},SMALL:{width:300,height:286}},INITIAL_ZOOM:Ay()?2:1,MAX_ZOOM:3,MIN_ZOOM:.1,ZOOM_SPEED:.001,ORBIT_RATIO:.3,PAN_RATIO:.075};function eG(n,e){let t=n.navigation.GetCamera(),r=Array(3).fill().map(()=>{let _=Hh(Mt.Y),M=new po(t.eye.Clone(),t.center.Clone(),_.up.Clone(),t.fov);return n.navigation.MoveCamera(M,0),n.navigation.Zoom(Math.log(ui.INITIAL_ZOOM)),M}),i=Array(3).fill().map(()=>({isPanning:!1,isOrbiting:!1,startMousePosition:{x:0,y:0},panOffset:Ay()?{x:0,y:0}:{x:0,y:0},orbitOffset:{x:0,y:0},currentZoomLevel:ui.INITIAL_ZOOM})),o=[],s=[],a=[],c=[];function l(_,M,A,w,T,D,N,P){let E={x:P.eye.x-P.center.x,y:P.eye.y-P.center.y,z:P.eye.z-P.center.z},U=Math.sqrt(E.x**2+E.y**2+E.z**2),k=U/T/1.2,B={x:E.x/U,y:E.y/U,z:E.z/U};P.eye.x=P.center.x+B.x*k,P.eye.y=P.center.y+B.y*k,P.eye.z=P.center.z+B.z*k;let O={x:E.y*P.up.z-E.z*P.up.y,y:E.z*P.up.x-E.x*P.up.z,z:E.x*P.up.y-E.y*P.up.x},q=Math.sqrt(O.x*O.x+O.y*O.y+O.z*O.z),ne={x:O.x/q,y:O.y/q,z:O.z/q};return P.center.x+=ne.x*D.x+P.up.x*D.y,P.center.y+=ne.y*D.x+P.up.y*D.y,P.center.z+=ne.z*D.x+P.up.z*D.y,_.navigation.MoveCamera(P,0),_.navigation.Orbit(N.x,N.y),_.renderer.setSize(M,A),_.camera.aspect=M/A,_.camera.updateProjectionMatrix(),_.GetImageAsDataUrl(M,A,w)}function u(_){let{width:M,height:A}=_===0?ui.SNAPSHOT_SIZES.LARGE:ui.SNAPSHOT_SIZES.SMALL,w=r[_],T=c[_],{panOffset:D,orbitOffset:N,currentZoomLevel:P}=i[_];n.navigation.MoveCamera(w,0),n.renderer.setSize(M,A),n.camera.aspect=M/A,n.camera.updateProjectionMatrix(),T.setSize(M,A),T.domElement.style.width=M+"px",T.domElement.style.height=A+"px",T.setSize(M,A,!1),T.render(n.scene,n.camera)}function h(_){if(_<0||_>=r.length)return console.error(`Invalid index: ${_}`),null;let{width:M,height:A}=_===0?ui.SNAPSHOT_SIZES.LARGE:ui.SNAPSHOT_SIZES.SMALL,{currentZoomLevel:w,panOffset:T,orbitOffset:D}=i[_],N=r[_];return N.zoom=w,N.panOffset=T,N.orbitOffset=D,N.aspectRatio=M/A,l(n,M,A,!1,w,T,D,N)}function f(_){function M(A,w){let T=w*(Math.PI/180),D=Math.sqrt(A.eye.x**2+A.eye.z**2);A.eye.x=D*Math.cos(T),A.eye.z=D*Math.sin(T)}o=_.map((A,w)=>{let T=Ha("canvas","ov_snapshot_preview_image");A.appendChild(T);let{width:D,height:N}=w===0?ui.SNAPSHOT_SIZES.LARGE:ui.SNAPSHOT_SIZES.SMALL;T.width=D,T.height=N;let P=new _c;a[w]=P;let E=new Tc;s[w]=E;let U=new il({canvas:T,alpha:!0});return c.push(U),w===1?M(r[w],240):w===2&&M(r[w],380),T.addEventListener("contextmenu",k=>{k.preventDefault()},{passive:!1}),T.addEventListener("mousedown",k=>x(w,k),{passive:!1}),T.addEventListener("mousemove",k=>y(w,k),{passive:!1}),T.addEventListener("mouseup",k=>b(w,k),{passive:!1}),T.addEventListener("wheel",k=>g(w,k),{passive:!1}),T.addEventListener("touchstart",k=>d(w,k),{passive:!1}),T.addEventListener("touchmove",m(k=>v(w,k),100),{passive:!1}),T.addEventListener("touchend",k=>p(w,k),{passive:!1}),T}),o.forEach((A,w)=>u(w))}function d(_,M){M.preventDefault(),s[_].Start(o[_],M);let A=i[_];A.startMousePosition=s[_].GetPosition(),A.isOrbiting=!0}function m(_,M){let A=!1;return function(...w){A||(_.apply(this,w),A=!0,setTimeout(()=>{A=!1},M))}}function v(_,M){M.preventDefault(),s[_].Move(o[_],M);let A=i[_],w=s[_].GetMoveDiff(),T=s[_].GetDistanceDiff(),D=r[_],P=.001*Ur(D.eye,D.center);s[_].GetFingerCount()===1?n.navigation.Orbit(w.x*ui.ORBIT_RATIO,w.y*ui.ORBIT_RATIO):s[_].GetFingerCount()===2&&(n.navigation.Pan(w.x*P,w.y*P),n.navigation.Zoom(T*ui.ZOOM_SPEED),A.currentZoomLevel*=1-T*.01,A.currentZoomLevel=Math.min(Math.max(A.currentZoomLevel,ui.MIN_ZOOM),ui.MAX_ZOOM)),u(_)}function p(_,M){M.preventDefault(),s[_].End(o[_],M);let A=i[_];A.isOrbiting=!1}function g(_,M){M.preventDefault();let A=-1*M.deltaY*ui.ZOOM_SPEED;n.navigation.Zoom(A),u(_)}function x(_,M){M.preventDefault();let A=i[_];A.startMousePosition={x:M.clientX,y:M.clientY},M.button===0?A.isOrbiting=!0:M.button===2&&(A.isPanning=!0)}function y(_,M){M.preventDefault();let A=i[_];if(!A.isOrbiting&&!A.isPanning)return;let w={x:M.clientX,y:M.clientY},T=w.x-A.startMousePosition.x,D=w.y-A.startMousePosition.y,N=r[_],E=.001*Ur(N.eye,N.center);A.isOrbiting?n.navigation.Orbit(T*ui.ORBIT_RATIO,D*ui.ORBIT_RATIO):A.isPanning&&n.navigation.Pan(T*E,D*E),u(_),A.startMousePosition=w}function b(_,M){M.preventDefault();let A=i[_];A.isOrbiting=!1,A.isPanning=!1}function S(){o.forEach((_,M)=>{_.removeEventListener("mousedown",A=>x(M,A)),_.removeEventListener("mousemove",A=>y(M,A)),_.removeEventListener("mouseup",A=>b(M,A)),_.removeEventListener("wheel",A=>g(M,A)),_.removeEventListener("touchstart",A=>d(M,A)),_.removeEventListener("touchmove",A=>v(M,A)),_.removeEventListener("touchend",A=>p(M,A))}),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",b)}return{cleanup:S,captureSnapshot:h,initializePreviewImages:f,updateCanvas:u}}function tG(n){function e(g,x){let y=document.createElement("button");y.innerHTML="&times;",y.className="ov_dialog_close_button",y.addEventListener("click",()=>{g.Close()}),x.appendChild(y)}function t(g){let x=In(g,"h3","ov_form_sub_header");return x.textContent="Enter patient details below: ",x}function r(g){let x=Fe(g,"ov_dialog_form_container"),y=Fe(x,"ov_share_header");y.textContent="Share";let b=i(x,1),S=i(x,2);return{step1:b,step2:S}}function i(g,x){let y=Fe(g,`ov_dialog_step ov_step${x}`);x===2&&(y.style.display="none");let b=x===1?s(y):u(y);return y}function o(g,x,y,b,S={}){let _=Fe(g,"ov_input_wrapper"),M=In(_,"label","ov_dialog_label");M.textContent=y;let A;return x==="textarea"?A=In(_,"textarea","ov_dialog_input"):(A=In(_,"input","ov_dialog_input"),A.type=x),A.placeholder=b,Object.entries(S).forEach(([w,T])=>A.setAttribute(w,T)),A}function s(g){let x=Fe(g,"ov_content_container"),y=a(x),b=Fe(x,"ov_content_wrapper"),S=c(b),_=l(b);return{...y,..._,...S}}function a(g){let x=Fe(g,"ov_header_section");return Fe(x,"ov_dialog_description",be("Quickly share a snapshot and details of where it hurts with family, friends, or therapists.")),{}}function c(g){let x=Fe(g,"ov_preview_container"),y=Fe(x,"ov_preview1_container"),b=Fe(x,"ov_preview_row"),S=Fe(b,"ov_preview2_container"),_=Fe(b,"ov_preview3_container"),M=[y,S,_];return n.initializePreviewImages(M),{previewContainers:M}}function l(g){let x=Fe(g,"ov_form_section");t(x);let y=Fe(x,"ov_info_fields_container"),b=o(y,"text",be("Name"),"John Doe"),S=o(y,"number",be("Pain Intensity"),"Enter pain intensity (1 lowest ~ 10 highest)",{min:1,max:10}),_=o(y,"text",be("Pain Duration"),"Enter pain duration (e.g., 2 hours, 3 days)"),M=o(y,"textarea",be("Description"),"Dull, Aching, Pressure, Heavy, Throbbing, etc..."),A=o(y,"number",be("Age"),"Enter age (optional)",{min:0,max:120}),w=In(x,"button","ov_button ov_download_button");w.textContent=be("Download Report"),w.addEventListener("click",()=>{h(b,S,_,M,D,A)});let T=Fe(x,"ov_label_between_sections");T.textContent=be("----- or -----"),T.style.textAlign="center",Fe(x,"ov_get_patient_email_intro",be("COMING SOON")),Fe(x,"ov_get_patient_email_intro",be("We can send the report to your email"));let D=o(x,"email","Your Email","Enter your email",{required:!0});Fe(x,"ov_get_send_emails_intro",be("You can also share this report with up to 3 other emails."));let N=Fe(x,"ov_email_fields_container"),P=[];for(let U=0;U<3;U++){let k=o(N,"email",`Email ${U+1}`,`Enter email ${U+1}`);P.push(k)}let E=In(x,"button","ov_button ov_submit_button");return E.textContent=be("Submit"),E.addEventListener("click",()=>{console.log("Email Sending not implemented yet"),ms("Sending Email Report")}),{nameInput:b,intensityInput:S,durationInput:_,descriptionInput:M,emailInputs:P,patientEmailInput:D}}function u(g){Fe(g,"ov_dialog_title",be("Additional Options")),vp(g,"send_to_self",be("Send to myself"),!1,()=>{}),vp(g,"download_snapshot",be("Download snapshot and info"),!1,()=>{}),Fe(g,"ov_button ov_submit_button",be("Send Report")).addEventListener("click",()=>f())}function h(g,x,y,b,S,_){console.log("Generating PDF..."),console.log("Params:",g,x.value,y.value,b.value);let M=[1,2,3].map(N=>n.captureSnapshot(N-1)),A=b?b.value:"",w=[];for(let N=0;N<S.children.length;N++){let P=S.children[N];P.value&&w.push(P.value)}let T={patientName:g.value||"John Doe",email:w.join(", ")||"john_doe@gmail.com",age:_.value||"private",gender:"Other",typeOfPain:A,painDuration:y.value||"private",date:new Date().toISOString().slice(0,10),images:M,siteUrl:window.location.origin};bR(T,!0)}function f(){console.log("Submitting..."),Ca(be("Success"),be("Your snapshot and information have been shared."))}function d(){let g=m();document.body.appendChild(g);let x=new zs,y=x.Init(be(""),[{name:be(""),onClick(){x.Close(),p(g)}}]);Ay()&&(y.style.marginRight="35px",y.style.alignItems="center",y.style.left="50%",y.style.top="50%",y.style.transform="translate(-50%, -50%)",y.style.zIndex="9999",y.style.width="90%",y.style.height="90%",y.style.maxWidth="800px",y.style.maxHeight="90%",y.style.borderRadius="8px",y.style.position="fixed",y.style.backgroundColor="#fff",y.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.1)",y.style.padding="0px",y.style.overflow="auto",y.style.border="1px solid #ccc",y.style.boxSizing="border-box");let{step1:b,step2:S}=r(y),_=x.Close.bind(x);x.Close=function(){n.cleanup(),p(g),_();let M=new Event("resize");window.dispatchEvent(M)},g.addEventListener("click",M=>{M.target===g&&x.Close()}),x.Open(),setTimeout(()=>{v(x),e(x,y)},0)}function m(){let g=document.createElement("div");return g.className="modal-overlay",g.style.cssText=`
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9998; // Ensure this is below the dialog but above everything else
        `,g}function v(g){if(!g){console.error("Invalid dialog object");return}let x=null;if(g.GetContentDiv&&(x=g.GetContentDiv().closest(".ov_dialog")),!x&&g.dialogDiv&&(x=g.dialogDiv),!x){console.error("Cannot find dialog element");return}x.style.zIndex="9999",window.innerWidth<=768?(x.style.width="100%",x.style.height="100%",x.style.maxWidth="100%",x.style.maxHeight="100%",x.style.top="0",x.style.left="0",x.style.transform="none",x.style.borderRadius="0",x.style.position="fixed"):(x.style.width="90%",x.style.maxWidth="900px",x.style.maxHeight="90vh",x.style.top="50%",x.style.left="50%",x.style.transform="translate(-50%, -50%)",x.style.borderRadius="8px",x.style.position="fixed"),x.style.overflow="auto"}function p(g){g&&g.parentNode===document.body&&document.body.removeChild(g)}return{showDialog:d}}function r_(n){let e=new tt;n.object.updateWorldMatrix(!0,!1),e.extractRotation(n.object.matrixWorld);let t=n.face.normal.clone();return t.applyMatrix4(e),t}function SR(){return new Gr({color:2503224,depthTest:!1})}function Cy(n,e){let t=new Yt().setFromPoints(n);return new va(t,e)}var i_=class{constructor(e,t){this.intersection=null,this.markerObject=new an;let r=SR(),i=new cc(0,0,t,t,0,2*Math.PI,!1,0);this.markerObject.add(Cy(i.getPoints(50),r)),this.markerObject.add(Cy([new he(-t,0,0),new he(t,0,0)],r)),this.markerObject.add(Cy([new he(0,-t,0),new he(0,t,0)],r)),this.UpdatePosition(e)}UpdatePosition(e){this.intersection=e;let t=r_(this.intersection);this.markerObject.updateMatrixWorld(!0),this.markerObject.position.set(0,0,0),this.markerObject.lookAt(t),this.markerObject.position.set(this.intersection.point.x,this.intersection.point.y,this.intersection.point.z)}Show(e){this.markerObject.visible=e}GetIntersection(){return this.intersection}GetObject(){return this.markerObject}};function nG(n,e){let t=n.GetIntersection(),r=e.GetIntersection(),i={pointsDistance:null,parallelFacesDistance:null,facesAngle:null},o=r_(t),s=r_(r);if(i.pointsDistance=t.point.distanceTo(r.point),i.facesAngle=o.angleTo(s),hd(i.facesAngle,0,1e-4)||hd(i.facesAngle,Math.PI,1e-4)){let a=new Wo().setFromNormalAndCoplanarPoint(o,t.point);i.parallelFacesDistance=Math.abs(a.distanceToPoint(r.point))}return i}var Iy=class{constructor(e,t){this.viewer=e,this.settings=t,this.isActive=!1,this.markers=[],this.tempMarker=null,this.panel=null,this.button=null}SetButton(e){this.button=e}IsActive(){return this.isActive}SetActive(e){this.isActive!==e&&(this.isActive=e,this.button.SetSelected(e),this.isActive?(this.panel=Fe(document.body,"ov_measure_panel"),this.UpdatePanel(),this.Resize()):(this.ClearMarkers(),this.panel.remove()))}Click(e){let t=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,e);if(t===null){this.ClearMarkers(),this.UpdatePanel();return}this.markers.length===2&&this.ClearMarkers(),this.AddMarker(t),this.UpdatePanel()}MouseMove(e){let t=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,e);if(t===null){this.tempMarker!==null&&(this.tempMarker.Show(!1),this.viewer.Render());return}this.tempMarker===null&&(this.tempMarker=this.GenerateMarker(t)),this.tempMarker.UpdatePosition(t),this.tempMarker.Show(!0),this.viewer.Render()}AddMarker(e){let t=this.GenerateMarker(e);if(this.markers.push(t),this.markers.length===2){let r=SR(),i=this.markers[0].GetIntersection().point,o=this.markers[1].GetIntersection().point;this.viewer.AddExtraObject(Cy([i,o],r))}}GenerateMarker(e){let r=this.viewer.GetBoundingSphere(o=>!0).radius/20,i=new i_(e,r);return this.viewer.AddExtraObject(i.GetObject()),i}UpdatePanel(){function e(r){let o=window.getComputedStyle(document.body,null).backgroundColor.match(/\d+/g);if(o.length<3)return new ft(r.r,r.g,r.b);let s=oa(r.a);return new ft(parseInt(o[0],10)*(1-s)+r.r*s,parseInt(o[1],10)*(1-s)+r.g*s,parseInt(o[2],10)*(1-s)+r.b*s)}function t(r,i,o,s){let a=ri(r,i,"left_inline");a.title=o,Fe(r,"ov_measure_value",s)}if(kr(this.panel),this.settings.backgroundIsEnvMap)this.panel.style.color="#ffffff",this.panel.style.backgroundColor="rgba(0,0,0,0.5)";else{let r=e(this.settings.backgroundColor);BM(r)?this.panel.style.color="#000000":this.panel.style.color="#ffffff",this.panel.style.backgroundColor="transparent"}if(this.markers.length===0)this.panel.innerHTML=be("Select a point.");else if(this.markers.length===1)this.panel.innerHTML=be("Select another point.");else{let r=nG(this.markers[0],this.markers[1]);if(r.pointsDistance!==null&&t(this.panel,"measure_distance","Distance of points",r.pointsDistance.toFixed(3)),r.parallelFacesDistance!==null&&t(this.panel,"measure_distance_parallel","Distance of parallel faces",r.parallelFacesDistance.toFixed(3)),r.facesAngle!==null){let i=r.facesAngle*Jm;t(this.panel,"measure_angle","Angle of faces",i.toFixed(1)+"\xB0")}}this.Resize()}Resize(){if(!this.isActive)return;let t=this.viewer.GetCanvas().getBoundingClientRect(),r=this.panel.getBoundingClientRect(),i=t.right-t.left,o=r.right-r.left;this.panel.style.left=t.left+(i-o)/2+"px",this.panel.style.top=t.top+10+"px"}ClearMarkers(){this.viewer.ClearExtra(),this.markers=[],this.tempMarker=null}};var gs=class n{constructor(e,t){this.viewer=e,this.settings=t,this.isActive=!1,this.isMouseDown=!1,this.mouseButton=null,this.highlightColor=new Ke(1,0,0),this.highlightMeshes=n.sharedHighlightMeshes,this.panel=null,this.button=null,this.eventsInitialized=null,this.activeTouches=0,this.overlappingMeshes=new Map,this.intensityMap=new Map,this.maxIntensity=100,this.intensityIncreaseRate=7,this.lastInteractionTime=null}InitEvents(){let e=this.viewer.GetCanvas();e.addEventListener("mousedown",t=>{this.isActive&&(this.isMouseDown=!0,this.mouseButton=t.button)}),e.addEventListener("mouseup",t=>{this.isActive&&(this.isMouseDown=!1,this.mouseButton=null,this.ResetIntensity())}),this.addTouchListeners(e)}addTouchListeners(e){e.addEventListener("touchstart",t=>{this.isActive&&this.TouchStart(t)},{passive:!1}),e.addEventListener("touchmove",t=>{this.isActive&&this.TouchMove(t)},{passive:!1}),e.addEventListener("touchend",t=>{this.isActive&&this.TouchEnd(t)},{passive:!1}),e.addEventListener("touchcancel",t=>{this.isActive&&this.TouchEnd(t)})}SetButton(e){this.button=e}IsActive(){return this.isActive}SetActive(e){if(this.isActive===e)return;ms("Highlight Tool Activation"),this.isActive=e,this.button.SetSelected(e);let t=document.getElementById("highlight-button");t&&t.classList.toggle("active",e),e||(this.viewer.navigation.EnableCameraMovement(!0),this.isNavigating=!1),this.eventsInitialized||(this.InitEvents(),this.eventsInitialized=!0),this.isActive?(this.panel=Fe(document.body,"ov_highlight_panel"),this.UpdatePanel(),this.Resize()):this.panel&&(this.panel.remove(),this.panel=null)}Click(e,t){let r=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,e);r!==null&&(this.mouseButton===0?this.ApplyHighlight(r):this.mouseButton===2&&this.RemoveHighlight(r),this.UpdatePanel())}MouseMove(e){if(!this.isActive)return;let t=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,e);t!==null&&(this.isMouseDown&&(this.mouseButton===0?this.ApplyHighlight(t):this.mouseButton===2&&this.RemoveHighlight(t)),this.viewer.Render())}TouchStart(e){e.preventDefault(),this.activeTouches=e.touches.length,this.isTouching=!0;let t=this.viewer.navigation.touch.GetPosition(),r=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,t);r===null?(this.viewer.navigation.EnableCameraMovement(!0),this.isNavigating=!0):(this.viewer.navigation.EnableCameraMovement(!1),this.isNavigating=!1,this.activeTouches===1?this.ApplyHighlight(r):this.activeTouches===2&&this.RemoveHighlight(r)),this.viewer.Render()}TouchMove(e){if(e.preventDefault(),!this.isTouching)return;this.activeTouches=e.touches.length;let t=this.viewer.navigation.touch.GetPosition(),r=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,t);this.isNavigating||r!==null&&(this.activeTouches===1?this.ApplyHighlight(r):this.activeTouches===2&&this.RemoveHighlight(r),this.viewer.Render())}TouchEnd(e){e.preventDefault(),this.activeTouches=e.touches.length,this.activeTouches===0&&(this.isTouching=!1,this.isNavigating=!1,this.viewer.navigation.EnableCameraMovement(!0)),this.ResetIntensity()}ApplyHighlight(e){let{mesh:t,id:r}=this.GenerateHighlightMesh(e),i=this.FindExistingMeshById(r);i?(this.IncreaseIntensity(i),this.UpdateMeshColor(i)):(this.intensityMap.set(r,0),n.sharedHighlightMeshes.push({mesh:t,id:r}),this.viewer.AddExtraObject(t),this.UpdateMeshColor(t)),this.viewer.Render()}FindExistingMeshById(e){return n.sharedHighlightMeshes.find(t=>t.id===e)?.mesh}ResetIntensity(){this.lastInteractionTime=null}IncreaseIntensity(e){let t=n.sharedHighlightMeshes.find(o=>o.mesh===e)?.id;if(!t)return;let r=this.intensityMap.get(t)||0,i=Math.min(r+this.intensityIncreaseRate,this.maxIntensity);this.intensityMap.set(t,i)}UpdateMeshColor(e){let t=n.sharedHighlightMeshes.find(o=>o.mesh===e)?.id;if(!t)return;let r=this.intensityMap.get(t)||0,i=this.GetColorForIntensity(r);e.material.color.setStyle(i)}GetColorForIntensity(e){let t=e/this.maxIntensity;return t<.5?`rgb(255, ${Math.round(255-t*255)}, 0)`:`rgb(255, ${Math.round(255-(t-.5)*510)}, 0)`}GetOverlappingMeshes(e){let t=[],r=new vi().setFromObject(e);for(let i of this.highlightMeshes){let o=new vi().setFromObject(i);r.intersectsBox(o)&&t.push(i)}return t}RemoveHighlight(e){if(!e||!e.point)return;let{id:t}=this.GenerateHighlightMesh(e),r=n.sharedHighlightMeshes.find(s=>s.id===t),i=this.FindExistingMeshById(t),o=this.intensityMap.get(t)||0;if(r){if(o>=3){let s=Math.max(o-this.intensityIncreaseRate*.7,0);this.intensityMap.set(t,s),this.UpdateMeshColor(i)}else{this.viewer.RemoveExtraObject(r.mesh),n.sharedHighlightMeshes=n.sharedHighlightMeshes.filter(s=>s.id!==t),this.DisposeHighlightMesh(r.mesh),this.overlappingMeshes.delete(t);for(let[s,a]of this.overlappingMeshes){let c=a.filter(l=>l.id!==t);this.overlappingMeshes.set(s,c)}}this.viewer.Render()}}SetMaxOverlappingMeshes(e){typeof e=="number"&&e>0?this.maxOverlappingMeshes=Math.floor(e):console.error("Invalid overlap limit. Please provide a positive number.")}DisposeHighlightMesh(e){sh(e),this.viewer.scene.remove(e),this.viewer.Render()}IsIntersectionWithinBoundingBox(e,t){return new vi().setFromObject(t).containsPoint(e.point)}IsIntersectionWithinMesh(e,t){let r=t.geometry.attributes.position.array,i=.1;for(let o=0;o<r.length;o+=9){let s=new he(r[o],r[o+1],r[o+2]),a=new he(r[o+3],r[o+4],r[o+5]),c=new he(r[o+6],r[o+7],r[o+8]);if(this.ArePointsClose(e.point,s,i)||this.ArePointsClose(e.point,a,i)||this.ArePointsClose(e.point,c,i))return!0}return!1}ArePointsClose(e,t,r){return e.distanceTo(t)<r}GenerateHighlightMesh(e){let t=e.object,r=new Rn({color:new Ke(1,1,0),transparent:!0,opacity:.5,side:br,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}),i=new Yt,o=t.geometry.attributes.position,s=new he,a=new he,c=new he;s.fromBufferAttribute(o,e.face.a),a.fromBufferAttribute(o,e.face.b),c.fromBufferAttribute(o,e.face.c),i.setAttribute("position",new Ye([s.x,s.y,s.z,a.x,a.y,a.z,c.x,c.y,c.z],3));let l=new he;l.crossVectors(a.clone().sub(s),c.clone().sub(s)).normalize(),i.setAttribute("normal",new Ye([l.x,l.y,l.z,l.x,l.y,l.z,l.x,l.y,l.z],3));let u=new hn(i,r);u.applyMatrix4(t.matrixWorld);let h=l.multiplyScalar(.001);u.position.add(h);let f=`${e.object.id}_${e.faceIndex}`;return{mesh:u,id:f}}UpdatePanel(){kr(this.panel);let e=Fe(this.panel,"ov_highlight_color_picker");e.innerHTML='<input type="color" id="highlight-color" value="#ff0000">',e.addEventListener("change",r=>{this.SetHighlightColor(r.target.value)});let t=Fe(this.panel,"ov_highlight_clear_button");t.innerHTML="<button>Clear Highlight</button>",t.addEventListener("click",()=>{this.ClearHighlight()}),this.Resize()}Resize(){if(!this.isActive)return;let t=this.viewer.GetCanvas().getBoundingClientRect(),r=this.panel.getBoundingClientRect(),i=t.right-t.left,o=r.right-r.left;this.panel.style.left=t.left+(i-o)/2+"px",this.panel.style.top=t.top+10+"px"}ClearHighlight(){n.sharedHighlightMeshes.forEach(e=>{this.viewer.RemoveExtraObject(e)}),n.sharedHighlightMeshes=[],this.viewer.Render()}SetHighlightColor(e){this.highlightColor.set(e)}};gs.sharedHighlightMeshes=[];var Ry=class extends gs{constructor(e,t){super(e,t),this.highlightColor=new Ke("rgba(0, 0, 0, 0)")}SetActive(e){if(this.isActive===e)return;ms("Eraser Tool Activation"),this.isActive=e,this.button.SetSelected(e);let t=document.getElementById("erase-button");t&&t.classList.toggle("active",e),e||(this.viewer.navigation.EnableCameraMovement(!0),this.isNavigating=!1),this.eventsInitialized||(this.InitEvents(),this.eventsInitialized=!0),this.isActive?(this.panel=Fe(document.body,"ov_erase_panel"),this.UpdatePanel(),this.Resize()):this.panel&&(this.panel.remove(),this.panel=null)}MouseMove(e){if(!this.isActive)return;let t=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,e);t!==null&&this.isMouseDown&&(this.RemoveHighlight(t),this.viewer.Render())}Click(e,t){let r=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,e);r!==null&&(this.RemoveHighlight(r),this.viewer.Render())}TouchStart(e){e.preventDefault(),this.isTouching=!0,this.activeTouches=e.touches.length;let t=this.viewer.navigation.touch.GetPosition(),r=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,t);r===null?(this.viewer.navigation.EnableCameraMovement(!0),this.isNavigating=!0):(this.viewer.navigation.EnableCameraMovement(!1),this.isNavigating=!1,this.activeTouches===1&&this.RemoveHighlight(r)),this.viewer.Render()}TouchMove(e){if(e.preventDefault(),!this.isTouching)return;this.activeTouches=e.touches.length;let t=this.viewer.navigation.touch.GetPosition(),r=this.viewer.GetMeshIntersectionUnderMouse(or.MeshOnly,t);this.isNavigating||r!==null&&((this.activeTouches===1||this.activeTouches===2)&&this.RemoveHighlight(r),this.viewer.Render())}UpdatePanel(){kr(this.panel);let e=Fe(this.panel,"ov_erase_clear_button");e.innerHTML="<button>Clear All Highlights</button>",e.addEventListener("click",()=>{this.ClearHighlight()}),this.Resize()}};var Py=class extends gs{constructor(e,t){super(e,t),this.name="ClearAll"}SetActive(e){if(this.isActive===e)return;this.isActive=e,this.button.SetSelected(e);let t=document.getElementById("clear-all-button");t&&t.classList.toggle("active",e),this.isActive?(this.panel=Fe(document.body,"ov_clear_all_panel"),this.UpdatePanel(),this.Resize()):this.panel&&(this.panel.remove(),this.panel=null)}UpdatePanel(){if(!this.panel)return;this.panel.innerHTML="";let e=Fe(this.panel,"ov_clear_all_button");e.innerHTML="<button>Clear All Highlights</button>",e.addEventListener("click",()=>{this.ClearAllHighlights()}),this.Resize()}ClearAllHighlights(){gs.sharedHighlightMeshes.forEach(e=>{this.viewer.RemoveExtraObject(e.mesh),this.DisposeHighlightMesh(e.mesh)}),gs.sharedHighlightMeshes=[],this.overlappingMeshes.clear(),this.viewer.Render()}Click(){this.ClearAllHighlights()}};function _R(n,e){let t=null,r=o=>{o.preventDefault();let s=o.clientX-t;e.onSplit(s)},i=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),document.removeEventListener("mouseleave",i),t=null};n.addEventListener("mousedown",o=>{t=o.clientX,e.onSplitStart(),document.addEventListener("mousemove",r),document.addEventListener("mouseup",i),document.addEventListener("mouseleave",i)})}var Um=new Map,td={Header:1,Toolbar:2};function o_(n,e){Um.has(n)||Um.set(n,[]),Um.get(n).push(e)}function s_(n,e){if(!Um.has(n))return;let t=Um.get(n);for(let r of t)e(r)}var l_={};function a_(n={}){l_={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...n}}function dt(n){return n?l_[n]:l_}function Dy(n,e,t,r){return(n/=r/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}function IR(n){let e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return n.flatMap(t=>{let r=t.matches(e),i=Array.from(t.querySelectorAll(e));return[...r?[t]:[],...i]}).filter(t=>getComputedStyle(t).pointerEvents!=="none"&&oG(t))}function RR(n){if(!n||iG(n))return;let e=dt("smoothScroll");n.scrollIntoView({behavior:!e||rG(n)?"auto":"smooth",inline:"center",block:"center"})}function rG(n){if(!n||!n.parentElement)return;let e=n.parentElement;return e.scrollHeight>e.clientHeight}function iG(n){let e=n.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function oG(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)}var Ny={};function Xr(n,e){Ny[n]=e}function _t(n){return n?Ny[n]:Ny}function TR(){Ny={}}var Ly={};function Fy(n,e){Ly[n]=e}function nu(n){var e;(e=Ly[n])==null||e.call(Ly)}function sG(){Ly={}}function aG(n,e,t,r){let i=_t("__activeStagePosition"),o=i||t.getBoundingClientRect(),s=r.getBoundingClientRect(),a=Dy(n,o.x,s.x-o.x,e),c=Dy(n,o.y,s.y-o.y,e),l=Dy(n,o.width,s.width-o.width,e),u=Dy(n,o.height,s.height-o.height,e);i={x:a,y:c,width:l,height:u},DR(i),Xr("__activeStagePosition",i)}function PR(n){if(!n)return;let e=n.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height};Xr("__activeStagePosition",t),DR(t)}function lG(){let n=_t("__activeStagePosition"),e=_t("__overlaySvg");if(!n)return;if(!e){console.warn("No stage svg found.");return}let t=window.innerWidth,r=window.innerHeight;e.setAttribute("viewBox",`0 0 ${t} ${r}`)}function cG(n){let e=uG(n);document.body.appendChild(e),LR(e,t=>{t.target.tagName==="path"&&nu("overlayClick")}),Xr("__overlaySvg",e)}function DR(n){let e=_t("__overlaySvg");if(!e){cG(n);return}let t=e.firstElementChild;if(t?.tagName!=="path")throw new Error("no path element found in stage svg");t.setAttribute("d",FR(n))}function uG(n){let e=window.innerWidth,t=window.innerHeight,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("driver-overlay","driver-overlay-animated"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r.setAttribute("xmlSpace","preserve"),r.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1"),r.setAttribute("preserveAspectRatio","xMinYMin slice"),r.style.fillRule="evenodd",r.style.clipRule="evenodd",r.style.strokeLinejoin="round",r.style.strokeMiterlimit="2",r.style.zIndex="10000",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%";let i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",FR(n)),i.style.fill=dt("overlayColor")||"rgb(0,0,0)",i.style.opacity=`${dt("overlayOpacity")}`,i.style.pointerEvents="auto",i.style.cursor="auto",r.appendChild(i),r}function FR(n){let e=window.innerWidth,t=window.innerHeight,r=dt("stagePadding")||0,i=dt("stageRadius")||0,o=n.width+r*2,s=n.height+r*2,a=Math.min(i,o/2,s/2),c=Math.floor(Math.max(a,0)),l=n.x-r+c,u=n.y-r,h=o-c*2,f=s-c*2;return`M${e},0L0,0L0,${t}L${e},${t}L${e},0Z
    M${l},${u} h${h} a${c},${c} 0 0 1 ${c},${c} v${f} a${c},${c} 0 0 1 -${c},${c} h-${h} a${c},${c} 0 0 1 -${c},-${c} v-${f} a${c},${c} 0 0 1 ${c},-${c} z`}function hG(){let n=_t("__overlaySvg");n&&n.remove()}function fG(){let n=document.getElementById("driver-dummy-element");if(n)return n;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function MR(n){let{element:e}=n,t=typeof e=="string"?document.querySelector(e):e;t||(t=fG()),pG(t,n)}function dG(){let n=_t("__activeElement"),e=_t("__activeStep");n&&(PR(n),lG(),kR(n,e))}function pG(n,e){let t=Date.now(),r=_t("__activeStep"),i=_t("__activeElement")||n,o=!i||i===n,s=n.id==="driver-dummy-element",a=i.id==="driver-dummy-element",c=dt("animate"),l=e.onHighlightStarted||dt("onHighlightStarted"),u=e?.onHighlighted||dt("onHighlighted"),h=r?.onDeselected||dt("onDeselected"),f=dt(),d=_t();!o&&h&&h(a?void 0:i,r,{config:f,state:d}),l&&l(s?void 0:n,e,{config:f,state:d});let m=!o&&c,v=!1;xG(),Xr("previousStep",r),Xr("previousElement",i),Xr("activeStep",e),Xr("activeElement",n);let p=()=>{if(_t("__transitionCallback")!==p)return;let g=Date.now()-t,x=400-g<=400/2;e.popover&&x&&!v&&m&&(ER(n,e),v=!0),dt("animate")&&g<400?aG(g,400,i,n):(PR(n),u&&u(s?void 0:n,e,{config:dt(),state:_t()}),Xr("__transitionCallback",void 0),Xr("__previousStep",r),Xr("__previousElement",i),Xr("__activeStep",e),Xr("__activeElement",n)),window.requestAnimationFrame(p)};Xr("__transitionCallback",p),window.requestAnimationFrame(p),RR(n),!m&&e.popover&&ER(n,e),i.classList.remove("driver-active-element","driver-no-interaction"),i.removeAttribute("aria-haspopup"),i.removeAttribute("aria-expanded"),i.removeAttribute("aria-controls"),dt("disableActiveInteraction")&&n.classList.add("driver-no-interaction"),n.classList.add("driver-active-element"),n.setAttribute("aria-haspopup","dialog"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-controls","driver-popover-content")}function mG(){var n;(n=document.getElementById("driver-dummy-element"))==null||n.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Bm(){let n=_t("__resizeTimeout");n&&window.cancelAnimationFrame(n),Xr("__resizeTimeout",window.requestAnimationFrame(dG))}function gG(n){var e;if(!_t("isInitialized")||!(n.key==="Tab"||n.keyCode===9))return;let t=_t("__activeElement"),r=(e=_t("popover"))==null?void 0:e.wrapper,i=IR([...r?[r]:[],...t?[t]:[]]),o=i[0],s=i[i.length-1];if(n.preventDefault(),n.shiftKey){let a=i[i.indexOf(document.activeElement)-1]||s;a?.focus()}else{let a=i[i.indexOf(document.activeElement)+1]||o;a?.focus()}}function NR(n){var e;((e=dt("allowKeyboardControl"))==null||e)&&(n.key==="Escape"?nu("escapePress"):n.key==="ArrowRight"?nu("arrowRightPress"):n.key==="ArrowLeft"&&nu("arrowLeftPress"))}function LR(n,e,t){let r=(i,o)=>{let s=i.target;n.contains(s)&&((!t||t(s))&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()),o?.(i))};document.addEventListener("pointerdown",r,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("pointerup",r,!0),document.addEventListener("mouseup",r,!0),document.addEventListener("click",i=>{r(i,e)},!0)}function vG(){window.addEventListener("keyup",NR,!1),window.addEventListener("keydown",gG,!1),window.addEventListener("resize",Bm),window.addEventListener("scroll",Bm)}function yG(){window.removeEventListener("keyup",NR),window.removeEventListener("resize",Bm),window.removeEventListener("scroll",Bm)}function xG(){let n=_t("popover");n&&(n.wrapper.style.display="none")}function ER(n,e){var t,r;let i=_t("popover");i&&document.body.removeChild(i.wrapper),i=wG(),document.body.appendChild(i.wrapper);let{title:o,description:s,showButtons:a,disableButtons:c,showProgress:l,nextBtnText:u=dt("nextBtnText")||"Next &rarr;",prevBtnText:h=dt("prevBtnText")||"&larr; Previous",progressText:f=dt("progressText")||"{current} of {total}"}=e.popover||{};i.nextButton.innerHTML=u,i.previousButton.innerHTML=h,i.progress.innerHTML=f,o?(i.title.innerHTML=o,i.title.style.display="block"):i.title.style.display="none",s?(i.description.innerHTML=s,i.description.style.display="block"):i.description.style.display="none";let d=a||dt("showButtons"),m=l||dt("showProgress")||!1,v=d?.includes("next")||d?.includes("previous")||m;i.closeButton.style.display=d.includes("close")?"block":"none",v?(i.footer.style.display="flex",i.progress.style.display=m?"block":"none",i.nextButton.style.display=d.includes("next")?"block":"none",i.previousButton.style.display=d.includes("previous")?"block":"none"):i.footer.style.display="none";let p=c||dt("disableButtons")||[];p!=null&&p.includes("next")&&(i.nextButton.disabled=!0,i.nextButton.classList.add("driver-popover-btn-disabled")),p!=null&&p.includes("previous")&&(i.previousButton.disabled=!0,i.previousButton.classList.add("driver-popover-btn-disabled")),p!=null&&p.includes("close")&&(i.closeButton.disabled=!0,i.closeButton.classList.add("driver-popover-btn-disabled"));let g=i.wrapper;g.style.display="block",g.style.left="",g.style.top="",g.style.bottom="",g.style.right="",g.id="driver-popover-content",g.setAttribute("role","dialog"),g.setAttribute("aria-labelledby","driver-popover-title"),g.setAttribute("aria-describedby","driver-popover-description");let x=i.arrow;x.className="driver-popover-arrow";let y=((t=e.popover)==null?void 0:t.popoverClass)||dt("popoverClass")||"";g.className=`driver-popover ${y}`.trim(),LR(i.wrapper,M=>{var A,w,T;let D=M.target,N=((A=e.popover)==null?void 0:A.onNextClick)||dt("onNextClick"),P=((w=e.popover)==null?void 0:w.onPrevClick)||dt("onPrevClick"),E=((T=e.popover)==null?void 0:T.onCloseClick)||dt("onCloseClick");if(D.classList.contains("driver-popover-next-btn"))return N?N(n,e,{config:dt(),state:_t()}):nu("nextClick");if(D.classList.contains("driver-popover-prev-btn"))return P?P(n,e,{config:dt(),state:_t()}):nu("prevClick");if(D.classList.contains("driver-popover-close-btn"))return E?E(n,e,{config:dt(),state:_t()}):nu("closeClick")},M=>!(i!=null&&i.description.contains(M))&&!(i!=null&&i.title.contains(M))&&typeof M.className=="string"&&M.className.includes("driver-popover")),Xr("popover",i);let b=((r=e.popover)==null?void 0:r.onPopoverRender)||dt("onPopoverRender");b&&b(i,{config:dt(),state:_t()}),kR(n,e),RR(g);let S=n.classList.contains("driver-dummy-element"),_=IR([g,...S?[]:[n]]);_.length>0&&_[0].focus()}function OR(){let n=_t("popover");if(!(n!=null&&n.wrapper))return;let e=n.wrapper.getBoundingClientRect(),t=dt("stagePadding")||0,r=dt("popoverOffset")||0;return{width:e.width+t+r,height:e.height+t+r,realWidth:e.width,realHeight:e.height}}function AR(n,e){let{elementDimensions:t,popoverDimensions:r,popoverPadding:i,popoverArrowDimensions:o}=e;return n==="start"?Math.max(Math.min(t.top-i,window.innerHeight-r.realHeight-o.width),o.width):n==="end"?Math.max(Math.min(t.top-r?.realHeight+t.height+i,window.innerHeight-r?.realHeight-o.width),o.width):n==="center"?Math.max(Math.min(t.top+t.height/2-r?.realHeight/2,window.innerHeight-r?.realHeight-o.width),o.width):0}function CR(n,e){let{elementDimensions:t,popoverDimensions:r,popoverPadding:i,popoverArrowDimensions:o}=e;return n==="start"?Math.max(Math.min(t.left-i,window.innerWidth-r.realWidth-o.width),o.width):n==="end"?Math.max(Math.min(t.left-r?.realWidth+t.width+i,window.innerWidth-r?.realWidth-o.width),o.width):n==="center"?Math.max(Math.min(t.left+t.width/2-r?.realWidth/2,window.innerWidth-r?.realWidth-o.width),o.width):0}function kR(n,e){let t=_t("popover");if(!t)return;let{align:r="start",side:i="left"}=e?.popover||{},o=r,s=n.id==="driver-dummy-element"?"over":i,a=dt("stagePadding")||0,c=OR(),l=t.arrow.getBoundingClientRect(),u=n.getBoundingClientRect(),h=u.top-c.height,f=h>=0,d=window.innerHeight-(u.bottom+c.height),m=d>=0,v=u.left-c.width,p=v>=0,g=window.innerWidth-(u.right+c.width),x=g>=0,y=!f&&!m&&!p&&!x,b=s;if(s==="top"&&f?x=p=m=!1:s==="bottom"&&m?x=p=f=!1:s==="left"&&p?x=f=m=!1:s==="right"&&x&&(p=f=m=!1),s==="over"){let S=window.innerWidth/2-c.realWidth/2,_=window.innerHeight/2-c.realHeight/2;t.wrapper.style.left=`${S}px`,t.wrapper.style.right="auto",t.wrapper.style.top=`${_}px`,t.wrapper.style.bottom="auto"}else if(y){let S=window.innerWidth/2-c?.realWidth/2,_=10;t.wrapper.style.left=`${S}px`,t.wrapper.style.right="auto",t.wrapper.style.bottom=`${_}px`,t.wrapper.style.top="auto"}else if(p){let S=Math.min(v,window.innerWidth-c?.realWidth-l.width),_=AR(o,{elementDimensions:u,popoverDimensions:c,popoverPadding:a,popoverArrowDimensions:l});t.wrapper.style.left=`${S}px`,t.wrapper.style.top=`${_}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",b="left"}else if(x){let S=Math.min(g,window.innerWidth-c?.realWidth-l.width),_=AR(o,{elementDimensions:u,popoverDimensions:c,popoverPadding:a,popoverArrowDimensions:l});t.wrapper.style.right=`${S}px`,t.wrapper.style.top=`${_}px`,t.wrapper.style.bottom="auto",t.wrapper.style.left="auto",b="right"}else if(f){let S=Math.min(h,window.innerHeight-c.realHeight-l.width),_=CR(o,{elementDimensions:u,popoverDimensions:c,popoverPadding:a,popoverArrowDimensions:l});t.wrapper.style.top=`${S}px`,t.wrapper.style.left=`${_}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",b="top"}else if(m){let S=Math.min(d,window.innerHeight-c?.realHeight-l.width),_=CR(o,{elementDimensions:u,popoverDimensions:c,popoverPadding:a,popoverArrowDimensions:l});t.wrapper.style.left=`${_}px`,t.wrapper.style.bottom=`${S}px`,t.wrapper.style.top="auto",t.wrapper.style.right="auto",b="bottom"}y?t.arrow.classList.add("driver-popover-arrow-none"):bG(o,b,n)}function bG(n,e,t){let r=_t("popover");if(!r)return;let i=t.getBoundingClientRect(),o=OR(),s=r.arrow,a=o.width,c=window.innerWidth,l=i.width,u=i.left,h=o.height,f=window.innerHeight,d=i.top,m=i.height;s.className="driver-popover-arrow";let v=e,p=n;e==="top"?(u+l<=0?(v="right",p="end"):u+l-a<=0&&(v="top",p="start"),u>=c?(v="left",p="end"):u+a>=c&&(v="top",p="end")):e==="bottom"?(u+l<=0?(v="right",p="start"):u+l-a<=0&&(v="bottom",p="start"),u>=c?(v="left",p="start"):u+a>=c&&(v="bottom",p="end")):e==="left"?(d+m<=0?(v="bottom",p="end"):d+m-h<=0&&(v="left",p="start"),d>=f?(v="top",p="end"):d+h>=f&&(v="left",p="end")):e==="right"&&(d+m<=0?(v="bottom",p="start"):d+m-h<=0&&(v="right",p="start"),d>=f?(v="top",p="start"):d+h>=f&&(v="right",p="end")),v?(s.classList.add(`driver-popover-arrow-side-${v}`),s.classList.add(`driver-popover-arrow-align-${p}`)):s.classList.add("driver-popover-arrow-none")}function wG(){let n=document.createElement("div");n.classList.add("driver-popover");let e=document.createElement("div");e.classList.add("driver-popover-arrow");let t=document.createElement("header");t.id="driver-popover-title",t.classList.add("driver-popover-title"),t.style.display="none",t.innerText="Popover Title";let r=document.createElement("div");r.id="driver-popover-description",r.classList.add("driver-popover-description"),r.style.display="none",r.innerText="Popover description is here";let i=document.createElement("button");i.type="button",i.classList.add("driver-popover-close-btn"),i.setAttribute("aria-label","Close"),i.innerHTML="&times;";let o=document.createElement("footer");o.classList.add("driver-popover-footer");let s=document.createElement("span");s.classList.add("driver-popover-progress-text"),s.innerText="";let a=document.createElement("span");a.classList.add("driver-popover-navigation-btns");let c=document.createElement("button");c.type="button",c.classList.add("driver-popover-prev-btn"),c.innerHTML="&larr; Previous";let l=document.createElement("button");return l.type="button",l.classList.add("driver-popover-next-btn"),l.innerHTML="Next &rarr;",a.appendChild(c),a.appendChild(l),o.appendChild(s),o.appendChild(a),n.appendChild(i),n.appendChild(e),n.appendChild(t),n.appendChild(r),n.appendChild(o),{wrapper:n,arrow:e,title:t,description:r,footer:o,previousButton:c,nextButton:l,closeButton:i,footerButtons:a,progress:s}}function SG(){var n;let e=_t("popover");e&&((n=e.wrapper.parentElement)==null||n.removeChild(e.wrapper))}function UR(n={}){a_(n);function e(){dt("allowClose")&&l()}function t(){let u=_t("activeIndex"),h=dt("steps")||[];if(typeof u>"u")return;let f=u+1;h[f]?c(f):l()}function r(){let u=_t("activeIndex"),h=dt("steps")||[];if(typeof u>"u")return;let f=u-1;h[f]?c(f):l()}function i(u){(dt("steps")||[])[u]?c(u):l()}function o(){var u;if(_t("__transitionCallback"))return;let h=_t("activeIndex"),f=_t("__activeStep"),d=_t("__activeElement");if(typeof h>"u"||typeof f>"u"||typeof _t("activeIndex")>"u")return;let m=((u=f.popover)==null?void 0:u.onPrevClick)||dt("onPrevClick");if(m)return m(d,f,{config:dt(),state:_t()});r()}function s(){var u;if(_t("__transitionCallback"))return;let h=_t("activeIndex"),f=_t("__activeStep"),d=_t("__activeElement");if(typeof h>"u"||typeof f>"u")return;let m=((u=f.popover)==null?void 0:u.onNextClick)||dt("onNextClick");if(m)return m(d,f,{config:dt(),state:_t()});t()}function a(){_t("isInitialized")||(Xr("isInitialized",!0),document.body.classList.add("driver-active",dt("animate")?"driver-fade":"driver-simple"),vG(),Fy("overlayClick",e),Fy("escapePress",e),Fy("arrowLeftPress",o),Fy("arrowRightPress",s))}function c(u=0){var h,f,d,m,v,p,g,x;let y=dt("steps");if(!y){console.error("No steps to drive through"),l();return}if(!y[u]){l();return}Xr("__activeOnDestroyed",document.activeElement),Xr("activeIndex",u);let b=y[u],S=y[u+1],_=y[u-1],M=((h=b.popover)==null?void 0:h.doneBtnText)||dt("doneBtnText")||"Done",A=dt("allowClose"),w=typeof((f=b.popover)==null?void 0:f.showProgress)<"u"?(d=b.popover)==null?void 0:d.showProgress:dt("showProgress"),T=(((m=b.popover)==null?void 0:m.progressText)||dt("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${u+1}`).replace("{{total}}",`${y.length}`),D=((v=b.popover)==null?void 0:v.showButtons)||dt("showButtons"),N=["next","previous",...A?["close"]:[]].filter(k=>!(D!=null&&D.length)||D.includes(k)),P=((p=b.popover)==null?void 0:p.onNextClick)||dt("onNextClick"),E=((g=b.popover)==null?void 0:g.onPrevClick)||dt("onPrevClick"),U=((x=b.popover)==null?void 0:x.onCloseClick)||dt("onCloseClick");MR({...b,popover:{showButtons:N,nextBtnText:S?void 0:M,disableButtons:[..._?[]:["previous"]],showProgress:w,progressText:T,onNextClick:P||(()=>{S?c(u+1):l()}),onPrevClick:E||(()=>{c(u-1)}),onCloseClick:U||(()=>{l()}),...b?.popover||{}}})}function l(u=!0){let h=_t("__activeElement"),f=_t("__activeStep"),d=_t("__activeOnDestroyed"),m=dt("onDestroyStarted");if(u&&m){let g=!h||h?.id==="driver-dummy-element";m(g?void 0:h,f,{config:dt(),state:_t()});return}let v=f?.onDeselected||dt("onDeselected"),p=dt("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),yG(),SG(),mG(),hG(),sG(),TR(),h&&f){let g=h.id==="driver-dummy-element";v&&v(g?void 0:h,f,{config:dt(),state:_t()}),p&&p(g?void 0:h,f,{config:dt(),state:_t()})}d&&d.focus()}return{isActive:()=>_t("isInitialized")||!1,refresh:Bm,drive:(u=0)=>{a(),c(u)},setConfig:a_,setSteps:u=>{TR(),a_({...dt(),steps:u})},getConfig:dt,getState:_t,getActiveIndex:()=>_t("activeIndex"),isFirstStep:()=>_t("activeIndex")===0,isLastStep:()=>{let u=dt("steps")||[],h=_t("activeIndex");return h!==void 0&&h===u.length-1},getActiveStep:()=>_t("activeStep"),getActiveElement:()=>_t("activeElement"),getPreviousElement:()=>_t("previousElement"),getPreviousStep:()=>_t("previousStep"),moveNext:t,movePrevious:r,moveTo:i,hasNextStep:()=>{let u=dt("steps")||[],h=_t("activeIndex");return h!==void 0&&u[h+1]},hasPreviousStep:()=>{let u=dt("steps")||[],h=_t("activeIndex");return h!==void 0&&u[h-1]},highlight:u=>{a(),MR({...u,popover:u.popover?{showButtons:[],showProgress:!1,progressText:"",...u.popover}:void 0})},destroy:()=>{l(!1)}}}function BR(){let n=UR({showProgress:!0,steps:[{popover:{title:"Welcome to the TellMeWhereItHurtsNow.com!",description:"This quick tour will guide you through the main features of our pain pointing tool",position:"mid-center"}},{element:"#main_viewer",popover:{title:"Pan and Orbit",description:`
                        <div class='gif-popover' style='display: flex; justify-content: space-around;'>
                            <img style='max-width: 50%;' src='assets/images/orbit.gif' />
                            <img style='max-width: 50%;' src='assets/images/pan_zoom.gif' />
                        </div>
                        <p>Click and drag in the viewer to pan and orbit the model. Use the scroll wheel or pinch gesture to zoom.</p>
                    `,side:"bottom",align:"end"}},{element:"i.icon.icon-highlight",popover:{title:"Highlight Tool",description:`
                    <p>Click here to activate the highlight tool. You can then click on the model to highlight specific areas.</p>,
                    <div class='gif-popover' style='display: flex; justify-content: space-around;'>
                    <img style='max-width: 75%;' src='assets/images/highlight.gif' />
                    </div>`,side:"top",align:"end"}},{element:"i.icon.icon-eraser",popover:{title:"Eraser Tool",description:`
                    <p> This is the eraser tool. Use it to remove highlights from the model.</p>
                    <div class='gif-popover' style='display: flex; justify-content: space-around;'>
                    <img style='max-width: 75%;' src='assets/images/eraser.gif' />
                    </div>`,side:"top",align:"end"}},{element:"i.icon.icon-up_y",popover:{title:"Reset View",description:"Use this button to reset the view if you get lost",side:"bottom",align:"start"}},{element:"div.ov_svg_icon:has(i.icon.icon-share)",popover:{title:"Share Button",description:`
                    <p> Once you're ready, click here to download a report of your pain or share it with others. </p>
                    <div class='gif-popover' style='display: flex; justify-content: space-around;'>
                        <img style='max-width: 75%;' src='assets/images/report_sample.png' />
                    </div>`,side:"top",align:"end"}},{popover:{title:"Tour Complete!",description:"You're now ready to explore the model and use all the tools. Enjoy!"}}]});FM()||(n.drive(),DM(!0))}var $s={Undefined:0,Intro:1,Model:2,Loading:3},c_=class{constructor(e,t,r,i,o,s,a,c){this.parameters=e,this.navigator=t,this.sidebar=r,this.viewer=i,this.measureTool=o,this.highlightTool=s,this.eraserTool=a,this.clearTool=c,this.limits={minPanelWidth:290,minCanvasWidth:100}}Init(){this.InstallSplitter(this.parameters.navigatorSplitterDiv,this.parameters.navigatorDiv,(e,t)=>{let r=e+t;this.OnSplitterDragged(r-this.navigator.GetWidth(),0)}),this.InstallSplitter(this.parameters.sidebarSplitterDiv,this.parameters.sidebarDiv,(e,t)=>{let r=e-t;this.OnSplitterDragged(0,r-this.sidebar.GetWidth())}),this.Resize()}InstallSplitter(e,t,r){let i=null;_R(e,{onSplitStart:()=>{i=Fi(t)},onSplit:o=>{r(i,o)}})}OnSplitterDragged(e,t){let r=window.innerWidth,i=this.navigator.GetWidth(),o=this.sidebar.GetWidth(),s=Fi(this.parameters.leftContainerDiv),a=Fi(this.parameters.rightContainerDiv),c=s+e,l=a+t,u=r-c-l,h=this.navigator.IsPanelsVisible(),f=this.sidebar.IsPanelsVisible();if(h&&c<this.limits.minPanelWidth&&(c=this.limits.minPanelWidth),f&&l<this.limits.minPanelWidth&&(l=this.limits.minPanelWidth),u<this.limits.minCanvasWidth&&(e>0?c=r-l-this.limits.minCanvasWidth:t>0&&(l=r-c-this.limits.minCanvasWidth)),h){let d=i+(c-s);this.navigator.SetWidth(d)}if(f){let d=o+(l-a);this.sidebar.SetWidth(d)}this.Resize()}Resize(){let e=window.innerWidth,t=window.innerHeight,r=this.parameters.headerDiv.offsetHeight,i=this.parameters.leftContainerDiv.style.display==="none"?0:Fi(this.parameters.leftContainerDiv),o=this.parameters.rightContainerDiv.style.display==="none"?0:Fi(this.parameters.rightContainerDiv),s=0;UM()||(s=1);let a=e-i-o,c=t-r;if(a<this.limits.minCanvasWidth){let h=this.limits.minCanvasWidth-a,f=this.navigator.IsPanelsVisible(),d=this.sidebar.IsPanelsVisible();if(h>0&&f){let m=Math.min(h,i-this.limits.minPanelWidth);this.navigator.SetWidth(this.navigator.GetWidth()-m),h=h-m}if(h>0&&d){let m=Math.min(h,o-this.limits.minPanelWidth);this.sidebar.SetWidth(this.sidebar.GetWidth()-m)}i=Fi(this.parameters.leftContainerDiv),o=Fi(this.parameters.rightContainerDiv),a=e-i-o}this.navigator.Resize(c),ho(this.parameters.navigatorSplitterDiv,c),this.sidebar.Resize(c),ho(this.parameters.sidebarSplitterDiv,c),ho(this.parameters.introDiv,c),this.viewer.Resize(a-s,c);let l=_s(this.parameters.introContentDiv),u=(c-l)/3;this.parameters.introContentDiv.style.top=u.toString()+"px",this.measureTool.Resize(),this.highlightTool.Resize()}},Oy=class{constructor(e){this.parameters=e,this.settings=new Mc(Ti.Light),this.cameraSettings=new a0,this.viewer=new Us,this.measureTool=new Iy(this.viewer,this.settings),this.hashHandler=new Wh,this.toolbar=new D0(this.parameters.toolbarDiv),this.navigator=new b0(this.parameters.navigatorDiv),this.highlightTool=new gs(this.viewer,this.settings),this.eraserTool=new Ry(this.viewer,this.settings),this.clearTool=new Py(this.viewer,this.settings),this.sidebar=new R0(this.parameters.sidebarDiv,this.settings),this.modelLoaderUI=new Jh,this.themeHandler=new P0,this.highlightColor=new ft(142,201,240),this.uiState=$s.Undefined,this.layouter=new c_(this.parameters,this.navigator,this.sidebar,this.viewer,this.measureTool,this.highlightTool,this.eraserTool,this.clearTool),this.model=null}IsMobileScreen(){return window.innerWidth<=768}Load(){this.settings.LoadFromCookies(),this.cameraSettings.LoadFromCookies(),this.SwitchTheme(this.settings.themeId,!1),ii("theme_on_load",this.settings.themeId===Ti.Light?"light":"dark"),s_(td.Header,e=>{e.registerButtons({createHeaderButton:(t,r,i)=>{this.CreateHeaderButton(t,r,i)}})}),this.InitViewer(),this.InitToolbar(),this.InitDragAndDrop(),this.InitSidebar(),this.InitNavigator(),this.InitCookieConsent(),this.viewer.SetMouseClickHandler(this.OnModelClicked.bind(this)),this.viewer.SetMouseMoveHandler(this.OnModelMouseMove.bind(this)),this.viewer.SetContextMenuHandler(this.OnModelContextMenu.bind(this)),this.layouter.Init(),this.SetUIState($s.Intro),this.hashHandler.SetEventListener(this.OnHashChange.bind(this)),this.OnHashChange(),window.addEventListener("resize",()=>{this.layouter.Resize(),this.uiState===$s.Model&&(this.IsMobileScreen()?(this.navigator.ShowPanels(!1),this.sidebar.ShowPanels(!1)):this.UpdatePanelsVisibility())}),BR()}HasLoadedModel(){return this.model!==null}SetUIState(e){function t(r){document.querySelector(":root").style.setProperty("--ov_only_on_model_display",r?"inherit":"none")}this.uiState!==e&&(this.uiState=e,this.uiState===$s.Intro?($t(this.parameters.introDiv,!0),$t(this.parameters.headerDiv,!0),$t(this.parameters.mainDiv,!1),t(!1)):this.uiState===$s.Model?($t(this.parameters.introDiv,!1),$t(this.parameters.headerDiv,!0),$t(this.parameters.mainDiv,!0),t(!0),this.IsMobileScreen()?(this.navigator.ShowPanels(!1),this.sidebar.ShowPanels(!1),Bs("ov_show_navigator",!1),Bs("ov_show_sidebar",!1)):this.UpdatePanelsVisibility()):this.uiState===$s.Loading&&($t(this.parameters.introDiv,!1),$t(this.parameters.headerDiv,!0),$t(this.parameters.mainDiv,!1),t(!1)),this.layouter.Resize())}ClearModel(){gw(),this.model=null,this.viewer.Clear(),this.navigator.Clear(),this.sidebar.Clear(),this.measureTool.SetActive(!1),this.highlightTool.SetActive(!1)}OnModelLoaded(e,t){this.model=e.model,this.viewer.SetMainObject(t),this.viewer.SetUpVector(Mt.Y,!1),this.navigator.FillTree(e),this.sidebar.UpdateControlsVisibility(),this.FitModelToWindow(!0)}OnModelClicked(e,t){if(e!==1&&e!==2)return;if(this.measureTool.IsActive()){this.measureTool.Click(t);return}if(this.highlightTool.IsActive()){this.viewer.GetMeshUserDataUnderMouse(or.MeshAndLine,t)===null?this.viewer.navigation.EnableCameraMovement(!0):(this.highlightTool.Click(t),this.viewer.navigation.EnableCameraMovement(!1));return}let r=this.viewer.GetMeshUserDataUnderMouse(or.MeshAndLine,t);r===null?this.navigator.SetSelection(null):this.navigator.SetSelection(new of(Mi.Mesh,r.originalMeshInstance.id))}OnModelContextMenu(e,t){if(this.highlightTool.IsActive()){this.highlightTool.Click(t,2);return}let r=this.viewer.GetMeshUserDataUnderMouse(or.MeshAndLine,t),i=[];if(r===null)i.push({name:be("Fit model to window"),icon:"fit",onClick:()=>{this.FitModelToWindow(!1)}}),this.navigator.HasHiddenMesh()&&i.push({name:be("Show all meshes"),icon:"visible",onClick:()=>{this.navigator.ShowAllMeshes(!0)}});else if(i.push({name:be("Hide mesh"),icon:"hidden",onClick:()=>{this.navigator.ToggleMeshVisibility(r.originalMeshInstance.id)}}),i.push({name:be("Fit mesh to window"),icon:"fit",onClick:()=>{this.navigator.FitMeshToWindow(r.originalMeshInstance.id)}}),this.navigator.MeshItemCount()>1){let o=this.navigator.IsMeshIsolated(r.originalMeshInstance.id);i.push({name:o?be("Remove isolation"):be("Isolate mesh"),icon:o?"deisolate":"isolate",onClick:()=>{o?this.navigator.ShowAllMeshes(!0):this.navigator.IsolateMesh(r.originalMeshInstance.id)}})}h0(i,{calculatePosition:o=>jM(e,o),onClick:o=>{i[o].onClick()}})}OnHashChange(){if(this.hashHandler.HasHash()){let e=this.hashHandler.GetModelFilesFromHash();if(e===null)return;hl(e);let t=new Vi;t.defaultLineColor=this.settings.defaultLineColor,t.defaultColor=this.settings.defaultColor;let r=this.hashHandler.GetDefaultColorFromHash();r!==null&&(t.defaultColor=r),ii("model_load_started","hash"),this.LoadModelFromUrlList(e,t)}else this.ClearModel(),this.SetUIState($s.Intro)}OpenFileBrowserDialog(){this.parameters.fileInput.click()}FitModelToWindow(e){let t=!e,r=this.viewer.GetBoundingSphere(i=>this.navigator.IsMeshVisible(i.originalMeshInstance.id));e&&this.viewer.AdjustClippingPlanesToSphere(r),this.viewer.FitSphereToWindow(r,t)}FitMeshToWindow(e){let t=this.viewer.GetBoundingSphere(r=>r.originalMeshInstance.id.IsEqual(e));this.viewer.FitSphereToWindow(t,!0)}FitMeshesToWindow(e){let t=new Set;for(let i of e)t.add(i.GetKey());let r=this.viewer.GetBoundingSphere(i=>t.has(i.originalMeshInstance.id.GetKey()));this.viewer.FitSphereToWindow(r,!0)}UpdateMeshesVisibility(){this.viewer.SetMeshesVisibility(e=>this.navigator.IsMeshVisible(e.originalMeshInstance.id))}UpdateMeshesSelection(){let e=this.navigator.GetSelectedMeshId();this.viewer.SetMeshesHighlight(this.highlightColor,t=>!!(e!==null&&t.originalMeshInstance.id.IsEqual(e)))}LoadModelFromUrlList(e){let t=new Vi;t.defaultLineColor=this.settings.defaultLineColor,t.defaultColor=this.settings.defaultColor;let r=fl(e);this.LoadModelFromInputFiles(r,t),this.ClearHashIfNotOnlyUrlList()}LoadModelFromFileList(e){let t=new Vi;t.defaultLineColor=this.settings.defaultLineColor,t.defaultColor=this.settings.defaultColor;let r=hh(e);this.LoadModelFromInputFiles(r,t),this.ClearHashIfNotOnlyUrlList()}LoadModelFromInputFiles(e,t){this.modelLoaderUI.LoadModel(e,t,{onStart:()=>{this.SetUIState($s.Loading),this.ClearModel()},onFinish:(r,i)=>{this.SetUIState($s.Model),this.OnModelLoaded(r,i);let o=to(r.mainFile);ii("model_loaded",o)},onRender:()=>{this.viewer.Render()},onError:r=>{this.SetUIState($s.Intro);let i=null;if(r.mainFile!==null)i=to(r.mainFile);else{let o=[],a=this.modelLoaderUI.GetImporter().GetFileList().GetFiles();for(let c=0;c<a.length;c++){let l=a[c].extension;o.push(l)}i=o.join(",")}r.code===Hr.NoImportableFile?ii("no_importable_file",i):r.code===Hr.FailedToLoadFile?ii("failed_to_load_file",i):r.code===Hr.ImportFailed&&ii("import_failed",i,{error_message:r.message})}})}ClearHashIfNotOnlyUrlList(){!this.modelLoaderUI.GetImporter().GetFileList().IsOnlyUrlSource()&&this.hashHandler.HasHash()&&(this.hashHandler.SkipNextEventHandler(),this.hashHandler.ClearHash())}UpdateEdgeDisplay(){this.settings.SaveToCookies(),this.viewer.SetEdgeSettings(this.settings.edgeSettings)}UpdateEnvironmentMap(){let e="assets/envmaps/"+this.settings.environmentMapName+"/",t=[e+"posx.jpg",e+"negx.jpg",e+"posy.jpg",e+"negy.jpg",e+"posz.jpg",e+"negz.jpg"],r=new as(t,this.settings.backgroundIsEnvMap);this.viewer.SetEnvironmentMapSettings(r)}SwitchTheme(e,t){if(this.settings.themeId=e,this.themeHandler.SwitchTheme(this.settings.themeId),t){let r=new Mc(this.settings.themeId);this.settings.backgroundColor=r.backgroundColor,this.settings.defaultLineColor=r.defaultLineColor,this.settings.defaultColor=r.defaultColor,this.sidebar.UpdateControlsStatus(),this.viewer.SetBackgroundColor(this.settings.backgroundColor);let i=this.modelLoaderUI.GetModelLoader();i.GetDefaultMaterials()!==null&&(Jd(this.model,this.settings.defaultColor,this.settings.defaultLineColor),i.ReplaceDefaultMaterialsColor(this.settings.defaultColor,this.settings.defaultLineColor))}this.settings.SaveToCookies()}InitViewer(){let e=In(this.parameters.viewerDiv,"canvas");this.viewer.Init(e),this.viewer.SetEdgeSettings(this.settings.edgeSettings),this.viewer.SetBackgroundColor(this.settings.backgroundColor),this.viewer.SetNavigationMode(this.cameraSettings.navigationMode),this.viewer.SetProjectionMode(this.cameraSettings.projectionMode),this.UpdateEnvironmentMap(),this.viewer.SetMouseDownHandler(this.OnModelMouseDown.bind(this)),this.viewer.SetMouseMoveHandler(this.OnModelMouseMove.bind(this)),this.viewer.SetMouseUpHandler(this.OnModelMouseUp.bind(this))}OnModelMouseDown(e){(this.highlightTool.IsActive()||this.eraserTool.IsActive())&&(this.viewer.GetMeshUserDataUnderMouse(or.MeshAndLine,e)===null?(this.viewer.navigation.EnableCameraMovement(!0),this.isNavigating=!0):this.viewer.navigation.EnableCameraMovement(!1))}OnModelMouseMove(e){(this.highlightTool.IsActive()||this.eraserTool.IsActive())&&!this.isNavigating&&this.viewer.GetMeshUserDataUnderMouse(or.MeshAndLine,e)!==null&&(this.highlightTool.IsActive()?this.highlightTool.MouseMove(e):this.eraserTool.IsActive()&&this.eraserTool.MouseMove(e))}OnModelMouseUp(e){(this.highlightTool.IsActive()||this.eraserTool.IsActive())&&(this.isNavigating||(this.highlightTool.IsActive()?this.highlightTool.Click(e):this.eraserTool.IsActive()&&this.eraserTool.Click(e)),this.isNavigating=!1)}InitToolbar(){function e(a,c,l,u,h){let f=a.AddImageButton(c,l,()=>{h()});for(let d of u)f.AddClass(d);return f}function t(a,c,l,u,h){let f=a.AddImagePushButton(c,l,!1,d=>{h(d)});for(let d of u)f.AddClass(d);return f}function r(a,c,l,u,h,f){let d=[];for(let v=0;v<c.length;v++){let p=c[v],g=l[v];d.push({image:p,title:g})}let m=a.AddImageRadioButton(d,u,v=>{f(v)});for(let v of h)for(let p of m)p.AddClass(v)}function i(a,c){let l=a.AddSeparator();if(c!==null)for(let u of c)l.classList.add(u)}function o(a,c,l,u){let h=mr("toggle-container");h.setAttribute("id",c),h.setAttribute("data-state",l.initialState||"male"),l.labels.forEach((v,p)=>{let g=mr("toggle-option");g.textContent=v,h.appendChild(g)});let f=mr("toggle-slider");h.appendChild(f);let d=new yf(null,"Gender Toggle",null);d.buttonDiv.className+=" toolbar-button",d.buttonDiv.style.width="auto",d.buttonDiv.style.marginLeft="0px";let m=d.buttonDiv.querySelector(".ov_svg_icon");return m&&m.remove(),d.buttonDiv.appendChild(h),d.AddDomElements(a.mainDiv),h.addEventListener("click",function(){let p=this.getAttribute("data-state")==="male"?"female":"male";this.setAttribute("data-state",p),ms("Toggling Male <> Female"),u(p==="male"?["assets/models/male_model.stl"]:["assets/models/female_model.stl"])}),d}this.toolbarHighlightButton=t(this.toolbar,"highlight",be("Highlight"),["only_full_width","only_on_model"],a=>{this.ToggleHighlightTool()}),this.highlightTool.SetButton(this.toolbarHighlightButton),this.toolbarEraserButton=t(this.toolbar,"eraser",be("Erase"),["only_full_width","only_on_model"],a=>{this.ToggleEraserTool()}),this.eraserTool.SetButton(this.toolbarEraserButton),e(this.toolbar,"clear",be("Erase All"),["only_full_width","only_on_model"],()=>{this.clearTool.ClearAllHighlights()}),e(this.toolbar,"share",be("Share"),["only_full_width","only_on_model"],()=>{wR(this.settings,this.viewer)}),e(this.toolbar,"up_y",be("Reset View"),["only_on_model"],()=>{this.viewer.SetUpVector(Mt.Y,!0)}),o(this.toolbar,"genderToggle",{labels:["Male","Female"],initialState:"male"},a=>{this.LoadModelFromUrlList(a)}),s_(td.Toolbar,a=>{a.registerButtons({createSeparator:c=>{i(this.toolbar,c)},createButton:(c,l,u,h)=>{e(this.toolbar,c,l,u,h)},getModel:()=>this.model})});let s=this.settings.themeId===Ti.Light?1:0;r(this.toolbar,["dark_mode","light_mode"],[be("Dark mode"),be("Light mode")],s,["align_right"],a=>{a===0?this.settings.themeId=Ti.Dark:a===1&&(this.settings.themeId=Ti.Light),ii("theme_changed",this.settings.themeId===Ti.Light?"light":"dark"),this.SwitchTheme(this.settings.themeId,!0)}),this.parameters.fileInput.addEventListener("change",a=>{a.target.files.length>0&&(ii("model_load_started","open_file"),this.LoadModelFromFileList(a.target.files))})}InitDragAndDrop(){window.addEventListener("dragstart",e=>{e.preventDefault()},!1),window.addEventListener("dragover",e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},!1),window.addEventListener("drop",e=>{e.stopPropagation(),e.preventDefault(),zM(e.dataTransfer,t=>{t.length>0&&(ii("model_load_started","drop"),this.LoadModelFromFileList(t))})},!1)}InitSidebar(){this.sidebar.Init({getShadingType:()=>this.viewer.GetShadingType(),getProjectionMode:()=>this.viewer.GetProjectionMode(),getDefaultMaterials:()=>Nv(this.model),onEnvironmentMapChanged:()=>{this.settings.SaveToCookies(),this.UpdateEnvironmentMap(),this.measureTool.IsActive()&&this.measureTool.UpdatePanel(),this.highlightTool.IsActive()&&this.highlightTool.UpdatePanel()},onBackgroundColorChanged:()=>{this.settings.SaveToCookies(),this.viewer.SetBackgroundColor(this.settings.backgroundColor),this.measureTool.IsActive()&&this.measureTool.UpdatePanel(),this.highlightTool.IsActive()&&this.highlightTool.UpdatePanel()},onDefaultColorChanged:()=>{this.settings.SaveToCookies();let e=this.modelLoaderUI.GetModelLoader();e.GetDefaultMaterials()!==null&&(Jd(this.model,this.settings.defaultColor,this.settings.defaultLineColor),e.ReplaceDefaultMaterialsColor(this.settings.defaultColor,this.settings.defaultLineColor)),this.viewer.Render()},onEdgeDisplayChanged:()=>{ii("edge_display_changed",this.settings.showEdges?"on":"off"),this.UpdateEdgeDisplay()},onResizeRequested:()=>{this.layouter.Resize()},onShowHidePanels:e=>{$t(this.parameters.sidebarSplitterDiv,e),Bs("ov_show_sidebar",e)}})}InitNavigator(){function e(o,s){let a=[];return o.EnumerateMeshesAndLinesUserData(c=>{c.originalMeshInstance.id.IsEqual(s)&&a.push(c)}),a}function t(o,s){let a=[];return o.EnumerateMeshesAndLinesUserData(c=>{(s===null||c.originalMaterials.indexOf(s)!==-1)&&a.push(c.originalMeshInstance)}),a}function r(o,s){let a=o.GetMaterial(s);return{index:s,name:a.name,color:a.color.Clone()}}function i(o,s,a){let c=[];if(a===null)for(let l=0;l<s.MaterialCount();l++)c.push(r(s,l));else{let l=e(o,a),u=new Set;for(let h of l)for(let f of h.originalMaterials)u.has(f)||(c.push(r(s,f)),u.add(f))}return c.sort((l,u)=>l.index-u.index),c}this.navigator.Init({openFileBrowserDialog:()=>{this.OpenFileBrowserDialog()},fitMeshToWindow:o=>{this.FitMeshToWindow(o)},fitMeshesToWindow:o=>{this.FitMeshesToWindow(o)},getMeshesForMaterial:o=>t(this.viewer,o),getMaterialsForMesh:o=>i(this.viewer,this.model,o),onMeshVisibilityChanged:()=>{this.UpdateMeshesVisibility()},onMeshSelectionChanged:()=>{this.UpdateMeshesSelection()},onSelectionCleared:()=>{this.sidebar.AddObject3DProperties(this.model,this.model)},onMeshSelected:o=>{let s=this.model.GetMeshInstance(o);this.sidebar.AddObject3DProperties(this.model,s)},onMaterialSelected:o=>{this.sidebar.AddMaterialProperties(this.model.GetMaterial(o))},onResizeRequested:()=>{this.layouter.Resize()},onShowHidePanels:o=>{$t(this.parameters.navigatorSplitterDiv,o),Bs("ov_show_navigator",o)}})}UpdatePanelsVisibility(){let e=Sl("ov_show_navigator",!0),t=Sl("ov_show_sidebar",!0);this.navigator.ShowPanels(e),this.sidebar.ShowPanels(t)}CreateHeaderButton(e,t,r){let i=Ha("a");return i.setAttribute("href",r),i.setAttribute("target","_blank"),i.setAttribute("rel","noopener noreferrer"),l0(i,t),ri(i,e,"header_button"),this.parameters.headerButtonsDiv.appendChild(i),i}InitCookieConsent(){if(Sl("ov_cookie_consent",!1))return;let t=be('This website uses cookies to offer you better user experience. See the details at the <a target="_blank" href="info/cookies.html">Cookies Policy</a> page.'),r=Fe(document.body,"ov_bottom_floating_panel");Fe(r,"ov_floating_panel_text",t),Fe(r,"ov_button ov_floating_panel_button",be("Accept")).addEventListener("click",()=>{Bs("ov_cookie_consent",!0),r.remove()})}ToggleHighlightTool(){let e=!this.highlightTool.IsActive();this.highlightTool.SetActive(e),this.toolbarHighlightButton.SetSelected(e),ii("highlight_tool_activated",e?"on":"off"),this.navigator.SetSelection(null),e||this.viewer.navigation.EnableCameraMovement(!0),this.eraserTool.IsActive()&&(this.eraserTool.SetActive(!1),this.toolbarEraserButton.SetSelected(!1))}ToggleEraserTool(){let e=!this.eraserTool.IsActive();this.eraserTool.SetActive(e),this.toolbarEraserButton.SetSelected(e),ii("eraser_tool_activated",e?"on":"off"),this.navigator.SetSelection(null),e&&(this.highlightTool.SetActive(!1),this.toolbarHighlightButton.SetSelected(!1)),e||this.viewer.navigation.EnableCameraMovement(!0)}ToggleClearTool(){this.eraserTool.ClearAll()}InitToggleSwitch(){let e=document.querySelector(".toggle-container");e?e.addEventListener("click",()=>{let r=e.getAttribute("data-state")==="male"?"female":"male";e.setAttribute("data-state",r),r==="male"?this.LoadModelFromUrlList(["assets/models/male_model.stl"]):this.LoadModelFromUrlList(["assets/models/female_model.stl"])}):console.warn("Toggle switch element not found")}};var _G={ButtonDialog:zs,ProgressDialog:Zh,ShowMessageDialog:Ca,HandleEvent:ii,Loc:be};function TG(n){qM(n)}function MG(n){o_(td.Header,n)}function EG(n){o_(td.Toolbar,n)}function AG(n){window.addEventListener("load",()=>{if(window.self!==window.top){let t=Fe(document.body,"noembed");Fe(t,null,be("Embedding Online 3D Viewer in an iframe is not supported."));let r=In(t,"a",null,be("Open Online 3D Viewer"));r.target="_blank",r.href=window.self.location;return}ad(n);let e=new Oy({headerDiv:document.getElementById("header"),headerButtonsDiv:document.getElementById("header_buttons"),toolbarDiv:document.getElementById("toolbar"),mainDiv:document.getElementById("main"),introDiv:document.getElementById("intro"),introContentDiv:document.getElementById("intro_content"),leftContainerDiv:document.getElementById("main_left_container"),navigatorDiv:document.getElementById("main_navigator"),navigatorSplitterDiv:document.getElementById("main_navigator_splitter"),rightContainerDiv:document.getElementById("main_right_container"),sidebarDiv:document.getElementById("main_sidebar"),sidebarSplitterDiv:document.getElementById("main_sidebar_splitter"),viewerDiv:document.getElementById("main_viewer"),fileInput:document.getElementById("open_file")});if(e.Load(),!e.hashHandler.HasHash()){let t="assets/models/male_model.stl",r=new Vi;r.defaultLineColor=e.settings.defaultLineColor,r.defaultColor=e.settings.defaultColor,ii("model_load_started","default"),e.LoadModelFromUrlList([t],r)}})}function CG(n){ad(n),window.addEventListener("load",()=>{new f0({viewerDiv:document.getElementById("embed_viewer"),websiteLinkDiv:document.getElementById("website_link")}).Load()})}return XR(IG);})();
/*! Bundled license information:

@simonwep/pickr/dist/pickr.min.js:
  (*! Pickr 1.9.0 MIT | https://github.com/Simonwep/pickr *)

three/build/three.module.js:
  (**
   * @license
   * Copyright 2010-2023 Three.js Authors
   * SPDX-License-Identifier: MIT
   *)

three/examples/jsm/libs/fflate.module.js:
  (*!
  fflate - fast JavaScript compression/decompression
  <https://101arrowz.github.io/fflate>
  Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
  version 0.8.2
  *)

three/examples/jsm/libs/chevrotain.module.min.js:
  (*! chevrotain - v9.0.1 *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
